!function(t){function e(e){for(var n,i,o=e[0],a=e[1],s=0,l=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(u&&u(e);l.length;)l.shift()()}var n={},r={0:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(t){return i.p+""+t+".main.js"}(t);var u=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",u.name="ChunkLoadError",u.type=i,u.request=o,n[1](u)}r[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var u=a;i(i.s=595)}([function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return Nt})),n.d(e,"c",(function(){return ht})),n.d(e,"d",(function(){return Kt})),n.d(e,"e",(function(){return ce})),n.d(e,"f",(function(){return de})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return wt})),n.d(e,"i",(function(){return L})),n.d(e,"j",(function(){return E})),n.d(e,"k",(function(){return mt})),n.d(e,"l",(function(){return y})),n.d(e,"m",(function(){return Bn})),n.d(e,"n",(function(){return s})),n.d(e,"o",(function(){return Ht})),n.d(e,"p",(function(){return ge})),n.d(e,"q",(function(){return fr})),n.d(e,"r",(function(){return Me})),n.d(e,"s",(function(){return _e})),n.d(e,"t",(function(){return ye})),n.d(e,"u",(function(){return we})),n.d(e,"v",(function(){return br})),n.d(e,"w",(function(){return tr})),n.d(e,"x",(function(){return Yt})),n.d(e,"y",(function(){return Gn})),n.d(e,"z",(function(){return Un})),n.d(e,"A",(function(){return Jn})),n.d(e,"B",(function(){return Le})),n.d(e,"C",(function(){return V})),n.d(e,"D",(function(){return gt})),n.d(e,"E",(function(){return Ee})),n.d(e,"F",(function(){return Te})),n.d(e,"G",(function(){return Se})),n.d(e,"H",(function(){return Ae})),n.d(e,"I",(function(){return o})),n.d(e,"J",(function(){return v})),n.d(e,"K",(function(){return Ct})),n.d(e,"L",(function(){return O})),n.d(e,"M",(function(){return St})),n.d(e,"N",(function(){return l})),n.d(e,"O",(function(){return qe})),n.d(e,"P",(function(){return Pe})),n.d(e,"Q",(function(){return vr})),n.d(e,"R",(function(){return _r})),n.d(e,"S",(function(){return mr})),n.d(e,"T",(function(){return hr})),n.d(e,"U",(function(){return pr})),n.d(e,"V",(function(){return dr})),n.d(e,"W",(function(){return Jt})),n.d(e,"X",(function(){return Z})),n.d(e,"Y",(function(){return j})),n.d(e,"Z",(function(){return yt})),n.d(e,"ab",(function(){return B})),n.d(e,"bb",(function(){return nt})),n.d(e,"cb",(function(){return f})),n.d(e,"db",(function(){return c})),n.d(e,"eb",(function(){return h})),n.d(e,"fb",(function(){return _})),n.d(e,"gb",(function(){return w})),n.d(e,"hb",(function(){return ue})),n.d(e,"ib",(function(){return vt})),n.d(e,"jb",(function(){return zt})),n.d(e,"kb",(function(){return rt})),n.d(e,"lb",(function(){return C})),n.d(e,"mb",(function(){return d})),n.d(e,"nb",(function(){return Pt})),n.d(e,"ob",(function(){return F})),n.d(e,"pb",(function(){return H})),n.d(e,"qb",(function(){return re})),n.d(e,"rb",(function(){return Rn})),n.d(e,"sb",(function(){return a})),n.d(e,"tb",(function(){return Re})),n.d(e,"ub",(function(){return ft}));var r=n(1);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}function s(t){return t&&t.default||t}var u=a((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),l=a((function(t){var e=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=e)})),c=(l.version,function(t){return"object"==i(t)?null!==t:"function"==typeof t}),h=function(t){if(!c(t))throw TypeError(t+" is not an object!");return t},f=function(t){try{return!!t()}catch(t){return!0}},d=!f((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),p=u.document,m=c(p)&&c(p.createElement),v=function(t){return m?p.createElement(t):{}},g=!d&&!f((function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a})),y=function(t,e){if(!c(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!c(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,_={f:d?Object.defineProperty:function(t,e,n){if(h(t),e=y(e,!0),h(n),g)try{return b(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},w=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x=d?function(t,e,n){return _.f(t,e,w(1,n))}:function(t,e,n){return t[e]=n,t},M={}.hasOwnProperty,E=function(t,e){return M.call(t,e)},S=0,A=Math.random(),T=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++S+A).toString(36))},q=a((function(t){var e=u["__core-js_shared__"]||(u["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:l.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),P=q("native-function-to-string",Function.toString),L=a((function(t){var e=T("src"),n=(""+P).split("toString");l.inspectSource=function(t){return P.call(t)},(t.exports=function(t,r,i,o){var a="function"==typeof i;a&&(E(i,"name")||x(i,"name",r)),t[r]!==i&&(a&&(E(i,e)||x(i,e,t[r]?""+t[r]:n.join(String(r)))),t===u?t[r]=i:o?t[r]?t[r]=i:x(t,r,i):(delete t[r],x(t,r,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||P.call(this)}))})),O=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},C=function(t,e,n){if(O(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},I=function t(e,n,r){var i,o,a,s,c=e&t.F,h=e&t.G,f=e&t.P,d=e&t.B,p=h?u:e&t.S?u[n]||(u[n]={}):(u[n]||{}).prototype,m=h?l:l[n]||(l[n]={}),v=m.prototype||(m.prototype={});for(i in h&&(r=n),r)a=((o=!c&&p&&void 0!==p[i])?p:r)[i],s=d&&o?C(a,u):f&&"function"==typeof a?C(Function.call,a):a,p&&L(p,i,a,e&t.U),m[i]!=a&&x(m,i,s),f&&v[i]!=a&&(v[i]=a)};u.core=l,I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128;for(var R,k=I,N={}.toString,B=function(t){return N.call(t).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},j=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},F=function(t){return D(j(t))},z=Math.ceil,U=Math.floor,V=function(t){return isNaN(t=+t)?0:(t>0?U:z)(t)},G=Math.min,H=function(t){return t>0?G(V(t),9007199254740991):0},W=Math.max,Y=Math.min,X=function(t,e){return(t=V(t))<0?W(t+e,0):Y(t,e)},Z=function(t){return function(e,n,r){var i,o=F(e),a=H(o.length),s=X(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},J=q("keys"),K=function(t){return J[t]||(J[t]=T(t))},Q=Z(!1),$=K("IE_PROTO"),tt=function(t,e){var n,r=F(t),i=0,o=[];for(n in r)n!=$&&E(r,n)&&o.push(n);for(;e.length>i;)E(r,n=e[i++])&&(~Q(o,n)||o.push(n));return o},et="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),nt=Object.keys||function(t){return tt(t,et)},rt={f:{}.propertyIsEnumerable},it=T("typed_array"),ot=T("view"),at=!(!u.ArrayBuffer||!u.DataView),st=at,ut=0,lt="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");ut<9;)(R=u[lt[ut++]])?(x(R.prototype,it,!0),x(R.prototype,ot,!0)):st=!1;var ct={ABV:at,CONSTR:st,TYPED:it,VIEW:ot},ht=function(t,e,n){for(var r in e)L(t,r,e[r],n);return t},ft=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},dt=function(t){if(void 0===t)return 0;var e=V(t),n=H(e);if(e!==n)throw RangeError("Wrong length!");return n},pt=et.concat("length","prototype"),mt={f:Object.getOwnPropertyNames||function(t){return tt(t,pt)}},vt=function(t){return Object(j(t))},gt=function(t){for(var e=vt(this),n=H(e.length),r=arguments.length,i=X(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:X(o,n);a>i;)e[i++]=t;return e},yt=a((function(t){var e=q("wks"),n=u.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:T)("Symbol."+t))}).store=e})),bt=_.f,_t=yt("toStringTag"),wt=function(t,e,n){t&&!E(t=n?t:t.prototype,_t)&&bt(t,_t,{configurable:!0,value:e})},xt=a((function(t,e){var n=mt.f,r=_.f,i=u.ArrayBuffer,o=u.DataView,a=u.Math,s=u.RangeError,l=u.Infinity,c=i,h=a.abs,p=a.pow,m=a.floor,v=a.log,g=a.LN2,y=d?"_b":"buffer",b=d?"_l":"byteLength",w=d?"_o":"byteOffset";function M(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,f=23===e?p(2,-24)-p(2,-77):0,d=0,y=t<0||0===t&&1/t<0?1:0;for((t=h(t))!=t||t===l?(i=t!=t?1:0,r=u):(r=m(v(t)/g),t*(o=p(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?f/o:f*p(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*p(2,e),r+=c):(i=t*p(2,c-1)*p(2,e),r=0));e>=8;a[d++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*y,a}function E(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],h=127&c;for(c>>=7;s>0;h=256*h+t[u],u--,s-=8);for(r=h&(1<<-s)-1,h>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===h)h=1-a;else{if(h===o)return r?NaN:c?-l:l;r+=p(2,e),h-=a}return(c?-1:1)*r*p(2,h-e)}function S(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function A(t){return[255&t]}function T(t){return[255&t,t>>8&255]}function q(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function P(t){return M(t,52,8)}function L(t){return M(t,23,4)}function O(t,e,n){r(t.prototype,e,{get:function(){return this[n]}})}function C(t,e,n,r){var i=dt(+n);if(i+e>t[b])throw s("Wrong index!");var o=t[y]._b,a=i+t[w],u=o.slice(a,a+e);return r?u:u.reverse()}function I(t,e,n,r,i,o){var a=dt(+n);if(a+e>t[b])throw s("Wrong index!");for(var u=t[y]._b,l=a+t[w],c=r(+i),h=0;h<e;h++)u[l+h]=c[o?h:e-h-1]}if(ct.ABV){if(!f((function(){i(1)}))||!f((function(){new i(-1)}))||f((function(){return new i,new i(1.5),new i(NaN),"ArrayBuffer"!=i.name}))){for(var R,k=(i=function(t){return ft(this,i),new c(dt(t))}).prototype=c.prototype,N=n(c),B=0;N.length>B;)(R=N[B++])in i||x(i,R,c[R]);k.constructor=i}var D=new o(new i(2)),j=o.prototype.setInt8;D.setInt8(0,2147483648),D.setInt8(1,2147483649),!D.getInt8(0)&&D.getInt8(1)||ht(o.prototype,{setInt8:function(t,e){j.call(this,t,e<<24>>24)},setUint8:function(t,e){j.call(this,t,e<<24>>24)}},!0)}else i=function(t){ft(this,i,"ArrayBuffer");var e=dt(t);this._b=gt.call(new Array(e),0),this[b]=e},o=function(t,e,n){ft(this,o,"DataView"),ft(t,i,"DataView");var r=t[b],a=V(e);if(a<0||a>r)throw s("Wrong offset!");if(a+(n=void 0===n?r-a:H(n))>r)throw s("Wrong length!");this[y]=t,this[w]=a,this[b]=n},d&&(O(i,"byteLength","_l"),O(o,"buffer","_b"),O(o,"byteLength","_l"),O(o,"byteOffset","_o")),ht(o.prototype,{getInt8:function(t){return C(this,1,t)[0]<<24>>24},getUint8:function(t){return C(this,1,t)[0]},getInt16:function(t){var e=C(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=C(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return S(C(this,4,t,arguments[1]))},getUint32:function(t){return S(C(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return E(C(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return E(C(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){I(this,1,t,A,e)},setUint8:function(t,e){I(this,1,t,A,e)},setInt16:function(t,e){I(this,2,t,T,e,arguments[2])},setUint16:function(t,e){I(this,2,t,T,e,arguments[2])},setInt32:function(t,e){I(this,4,t,q,e,arguments[2])},setUint32:function(t,e){I(this,4,t,q,e,arguments[2])},setFloat32:function(t,e){I(this,4,t,L,e,arguments[2])},setFloat64:function(t,e){I(this,8,t,P,e,arguments[2])}});wt(i,"ArrayBuffer"),wt(o,"DataView"),x(o.prototype,ct.VIEW,!0),e.ArrayBuffer=i,e.DataView=o})),Mt=yt("toStringTag"),Et="Arguments"==B(function(){return arguments}()),St=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Mt))?n:Et?B(e):"Object"==(r=B(e))&&"function"==typeof e.callee?"Arguments":r},At={},Tt=yt("iterator"),qt=Array.prototype,Pt=function(t){return void 0!==t&&(At.Array===t||qt[Tt]===t)},Lt=d?Object.defineProperties:function(t,e){h(t);for(var n,r=nt(e),i=r.length,o=0;i>o;)_.f(t,n=r[o++],e[n]);return t},Ot=u.document,Ct=Ot&&Ot.documentElement,It=K("IE_PROTO"),Rt=function(){},kt=function(){var t,e=v("iframe"),n=et.length;for(e.style.display="none",Ct.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),kt=t.F;n--;)delete kt.prototype[et[n]];return kt()},Nt=Object.create||function(t,e){var n;return null!==t?(Rt.prototype=h(t),n=new Rt,Rt.prototype=null,n[It]=t):n=kt(),void 0===e?n:Lt(n,e)},Bt=K("IE_PROTO"),Dt=Object.prototype,jt=Object.getPrototypeOf||function(t){return t=vt(t),E(t,Bt)?t[Bt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Dt:null},Ft=yt("iterator"),zt=l.getIteratorMethod=function(t){if(null!=t)return t[Ft]||t["@@iterator"]||At[St(t)]},Ut=Array.isArray||function(t){return"Array"==B(t)},Vt=yt("species"),Gt=function(t,e){return new(function(t){var e;return Ut(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Ut(e.prototype)||(e=void 0),c(e)&&null===(e=e[Vt])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ht=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||Gt;return function(e,l,c){for(var h,f,d=vt(e),p=D(d),m=C(l,c,3),v=H(p.length),g=0,y=n?u(e,v):r?u(e,0):void 0;v>g;g++)if((s||g in p)&&(f=m(h=p[g],g,d),t))if(n)y[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:y.push(h)}else if(o)return!1;return a?-1:i||o?o:y}},Wt=yt("species"),Yt=function(t,e){var n,r=h(t).constructor;return void 0===r||null==(n=h(r)[Wt])?e:O(n)},Xt=yt("unscopables"),Zt=Array.prototype;null==Zt[Xt]&&x(Zt,Xt,{});var Jt=function(t){Zt[Xt][t]=!0},Kt=function(t,e){return{value:e,done:!!t}},Qt={};x(Qt,yt("iterator"),(function(){return this}));var $t=function(t,e,n){t.prototype=Nt(Qt,{next:w(1,n)}),wt(t,e+" Iterator")},te=yt("iterator"),ee=!([].keys&&"next"in[].keys()),ne=function(){return this},re=function(t,e,n,r,i,o,a){$t(n,e,r);var s,u,l,c=function(t){if(!ee&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f="values"==i,d=!1,p=t.prototype,m=p[te]||p["@@iterator"]||i&&p[i],v=m||c(i),g=i?f?c("entries"):v:void 0,y="Array"==e&&p.entries||m;if(y&&(l=jt(y.call(new t)))!==Object.prototype&&l.next&&(wt(l,h,!0),"function"!=typeof l[te]&&x(l,te,ne)),f&&m&&"values"!==m.name&&(d=!0,v=function(){return m.call(this)}),(ee||d||!p[te])&&x(p,te,v),At[e]=v,At[h]=ne,i)if(s={values:f?v:c("values"),keys:o?v:c("keys"),entries:g},a)for(u in s)u in p||L(p,u,s[u]);else k(k.P+k.F*(ee||d),e,s);return s},ie=re(Array,"Array",(function(t,e){this._t=F(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Kt(1)):Kt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");At.Arguments=At.Array,Jt("keys"),Jt("values"),Jt("entries");var oe=yt("iterator"),ae=!1;try{var se=[7][oe]();se.return=function(){ae=!0},Array.from(se,(function(){throw 2}))}catch(t){}var ue=function(t,e){if(!e&&!ae)return!1;var n=!1;try{var r=[7],i=r[oe]();i.next=function(){return{done:n=!0}},r[oe]=function(){return i},t(r)}catch(t){}return n},le=yt("species"),ce=function(t){var e=u[t];d&&e&&!e[le]&&_.f(e,le,{configurable:!0,get:function(){return this}})},he=[].copyWithin||function(t,e){var n=vt(this),r=H(n.length),i=X(t,r),o=X(e,r),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?r:X(a,r))-o,r-i),u=1;for(o<i&&i<o+s&&(u=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=u,o+=u;return n},fe=Object.getOwnPropertyDescriptor,de={f:d?fe:function(t,e){if(t=F(t),e=y(e,!0),g)try{return fe(t,e)}catch(t){}if(E(t,e))return w(!rt.f.call(t,e),t[e])}};a((function(t){if(d){var e=u,n=f,r=k,o=ct,a=xt,s=C,l=ft,h=w,p=x,m=ht,v=V,g=H,b=dt,M=X,S=y,A=E,q=St,P=c,L=vt,O=Pt,I=Nt,R=jt,N=mt.f,B=zt,D=T,j=yt,F=Ht,z=Z,U=Yt,G=ie,W=At,Y=ue,J=ce,K=gt,Q=he,$=_,tt=de,et=$.f,nt=tt.f,rt=e.RangeError,it=e.TypeError,ot=e.Uint8Array,at=Array.prototype,st=a.ArrayBuffer,ut=a.DataView,lt=F(0),pt=F(2),bt=F(3),_t=F(4),wt=F(5),Mt=F(6),Et=z(!0),Tt=z(!1),qt=G.values,Lt=G.keys,Ot=G.entries,Ct=at.lastIndexOf,It=at.reduce,Rt=at.reduceRight,kt=at.join,Bt=at.sort,Dt=at.slice,Ft=at.toString,Ut=at.toLocaleString,Vt=j("iterator"),Gt=j("toStringTag"),Wt=D("typed_constructor"),Xt=D("def_constructor"),Zt=o.CONSTR,Jt=o.TYPED,Kt=o.VIEW,Qt=F(1,(function(t,e){return re(U(t,t[Xt]),e)})),$t=n((function(){return 1===new ot(new Uint16Array([1]).buffer)[0]})),te=!!ot&&!!ot.prototype.set&&n((function(){new ot(1).set({})})),ee=function(t,e){var n=v(t);if(n<0||n%e)throw rt("Wrong offset!");return n},ne=function(t){if(P(t)&&Jt in t)return t;throw it(t+" is not a typed array!")},re=function(t,e){if(!P(t)||!(Wt in t))throw it("It is not a typed array constructor!");return new t(e)},oe=function(t,e){return ae(U(t,t[Xt]),e)},ae=function(t,e){for(var n=0,r=e.length,i=re(t,r);r>n;)i[n]=e[n++];return i},se=function(t,e,n){et(t,e,{get:function(){return this._d[n]}})},le=function(t){var e,n,r,i,o,a,u=L(t),l=arguments.length,c=l>1?arguments[1]:void 0,h=void 0!==c,f=B(u);if(null!=f&&!O(f)){for(a=f.call(u),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);u=r}for(h&&l>2&&(c=s(c,arguments[2],2)),e=0,n=g(u.length),i=re(this,n);n>e;e++)i[e]=h?c(u[e],e):u[e];return i},fe=function(){for(var t=0,e=arguments.length,n=re(this,e);e>t;)n[t]=arguments[t++];return n},pe=!!ot&&n((function(){Ut.call(new ot(1))})),me=function(){return Ut.apply(pe?Dt.call(ne(this)):ne(this),arguments)},ve={copyWithin:function(t,e){return Q.call(ne(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return _t(ne(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return K.apply(ne(this),arguments)},filter:function(t){return oe(this,pt(ne(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return wt(ne(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return Mt(ne(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){lt(ne(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return Tt(ne(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return Et(ne(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return kt.apply(ne(this),arguments)},lastIndexOf:function(t){return Ct.apply(ne(this),arguments)},map:function(t){return Qt(ne(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return It.apply(ne(this),arguments)},reduceRight:function(t){return Rt.apply(ne(this),arguments)},reverse:function(){for(var t,e=ne(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return bt(ne(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Bt.call(ne(this),t)},subarray:function(t,e){var n=ne(this),r=n.length,i=M(t,r);return new(U(n,n[Xt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===e?r:M(e,r))-i))}},ge=function(t,e){return oe(this,Dt.call(ne(this),t,e))},ye=function(t){ne(this);var e=ee(arguments[1],1),n=this.length,r=L(t),i=g(r.length),o=0;if(i+e>n)throw rt("Wrong length!");for(;o<i;)this[e+o]=r[o++]},be={entries:function(){return Ot.call(ne(this))},keys:function(){return Lt.call(ne(this))},values:function(){return qt.call(ne(this))}},_e=function(t,e){return P(t)&&t[Jt]&&"symbol"!=i(e)&&e in t&&String(+e)==String(e)},we=function(t,e){return _e(t,e=S(e,!0))?h(2,t[e]):nt(t,e)},xe=function(t,e,n){return!(_e(t,e=S(e,!0))&&P(n)&&A(n,"value"))||A(n,"get")||A(n,"set")||n.configurable||A(n,"writable")&&!n.writable||A(n,"enumerable")&&!n.enumerable?et(t,e,n):(t[e]=n.value,t)};Zt||(tt.f=we,$.f=xe),r(r.S+r.F*!Zt,"Object",{getOwnPropertyDescriptor:we,defineProperty:xe}),n((function(){Ft.call({})}))&&(Ft=Ut=function(){return kt.call(this)});var Me=m({},ve);m(Me,be),p(Me,Vt,be.values),m(Me,{slice:ge,set:ye,constructor:function(){},toString:Ft,toLocaleString:me}),se(Me,"buffer","b"),se(Me,"byteOffset","o"),se(Me,"byteLength","l"),se(Me,"length","e"),et(Me,Gt,{get:function(){return this[Jt]}}),t.exports=function(t,i,a,s){var u=t+((s=!!s)?"Clamped":"")+"Array",c="get"+t,h="set"+t,f=e[u],d=f||{},m=f&&R(f),v=!f||!o.ABV,y={},_=f&&f.prototype,w=function(t,e){et(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[c](e*i+n.o,$t)}(this,e)},set:function(t){return function(t,e,n){var r=t._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[h](e*i+r.o,n,$t)}(this,e,t)},enumerable:!0})};v?(f=a((function(t,e,n,r){l(t,f,u,"_d");var o,a,s,c,h=0,d=0;if(P(e)){if(!(e instanceof st||"ArrayBuffer"==(c=q(e))||"SharedArrayBuffer"==c))return Jt in e?ae(f,e):le.call(f,e);o=e,d=ee(n,i);var m=e.byteLength;if(void 0===r){if(m%i)throw rt("Wrong length!");if((a=m-d)<0)throw rt("Wrong length!")}else if((a=g(r)*i)+d>m)throw rt("Wrong length!");s=a/i}else s=b(e),o=new st(a=s*i);for(p(t,"_d",{b:o,o:d,l:a,e:s,v:new ut(o)});h<s;)w(t,h++)})),_=f.prototype=I(Me),p(_,"constructor",f)):n((function(){f(1)}))&&n((function(){new f(-1)}))&&Y((function(t){new f,new f(null),new f(1.5),new f(t)}),!0)||(f=a((function(t,e,n,r){var o;return l(t,f,u),P(e)?e instanceof st||"ArrayBuffer"==(o=q(e))||"SharedArrayBuffer"==o?void 0!==r?new d(e,ee(n,i),r):void 0!==n?new d(e,ee(n,i)):new d(e):Jt in e?ae(f,e):le.call(f,e):new d(b(e))})),lt(m!==Function.prototype?N(d).concat(N(m)):N(d),(function(t){t in f||p(f,t,d[t])})),f.prototype=_,_.constructor=f);var x=_[Vt],M=!!x&&("values"==x.name||null==x.name),E=be.values;p(f,Wt,!0),p(_,Jt,u),p(_,Kt,!0),p(_,Xt,f),(s?new f(1)[Gt]==u:Gt in _)||et(_,Gt,{get:function(){return u}}),y[u]=f,r(r.G+r.W+r.F*(f!=d),y),r(r.S,u,{BYTES_PER_ELEMENT:i}),r(r.S+r.F*n((function(){d.of.call(f,1)})),u,{from:le,of:fe}),"BYTES_PER_ELEMENT"in _||p(_,"BYTES_PER_ELEMENT",i),r(r.P,u,ve),J(u),r(r.P+r.F*te,u,{set:ye}),r(r.P+r.F*!M,u,be),_.toString!=Ft&&(_.toString=Ft),r(r.P+r.F*n((function(){new f(1).slice()})),u,{slice:ge}),r(r.P+r.F*(n((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!n((function(){_.toLocaleString.call([1,2])}))),u,{toLocaleString:me}),W[u]=M?x:E,M||p(_,Vt,E)}}else t.exports=function(){}}))("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var pe,me=[].sort,ve=[1,2,3];function ge(t){return(ge="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e,n){return e&&be(t.prototype,e),n&&be(t,n),t}function we(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(n,!0).forEach((function(e){we(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ee(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");var n,r;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(n=t,r=e,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(n,r))}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t,e){return!e||"object"!=i(e)&&"function"!=typeof e?Ae(t):e}function qe(t,e,n){return(qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Se(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Pe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Le(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}k(k.P+k.F*(f((function(){ve.sort(void 0)}))||!f((function(){ve.sort(null)}))||!((pe=me)&&f((function(){pe.call(null)})))),"Array",{sort:function(t){return void 0===t?me.call(vt(this)):me.call(vt(this),O(t))}});var Oe={f:yt},Ce=_.f,Ie=function(t){var e=l.Symbol||(l.Symbol=u.Symbol||{});"_"==t.charAt(0)||t in e||Ce(e,t,{value:Oe.f(t)})};Ie("asyncIterator");var Re=a((function(t){var e=T("meta"),n=_.f,r=0,o=Object.isExtensible||function(){return!0},a=!f((function(){return o(Object.preventExtensions({}))})),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!c(t))return"symbol"==i(t)?t:("string"==typeof t?"S":"P")+t;if(!E(t,e)){if(!o(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!E(t,e)){if(!o(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&u.NEED&&o(t)&&!E(t,e)&&s(t),t}}})),ke=(Re.KEY,Re.NEED,Re.fastKey,Re.getWeak,Re.onFreeze,{f:Object.getOwnPropertySymbols}),Ne=mt.f,Be={}.toString,De="object"==("undefined"==typeof window?"undefined":i(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],je={f:function(t){return De&&"[object Window]"==Be.call(t)?function(t){try{return Ne(t)}catch(t){return De.slice()}}(t):Ne(F(t))}},Fe=Re.KEY,ze=de.f,Ue=_.f,Ve=je.f,Ge=u.Symbol,He=u.JSON,We=He&&He.stringify,Ye=yt("_hidden"),Xe=yt("toPrimitive"),Ze={}.propertyIsEnumerable,Je=q("symbol-registry"),Ke=q("symbols"),Qe=q("op-symbols"),$e=Object.prototype,tn="function"==typeof Ge&&!!ke.f,en=u.QObject,nn=!en||!en.prototype||!en.prototype.findChild,rn=d&&f((function(){return 7!=Nt(Ue({},"a",{get:function(){return Ue(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=ze($e,e);r&&delete $e[e],Ue(t,e,n),r&&t!==$e&&Ue($e,e,r)}:Ue,on=function(t){var e=Ke[t]=Nt(Ge.prototype);return e._k=t,e},an=tn&&"symbol"==i(Ge.iterator)?function(t){return"symbol"==i(t)}:function(t){return t instanceof Ge},sn=function t(e,n,r){return e===$e&&t(Qe,n,r),h(e),n=y(n,!0),h(r),E(Ke,n)?(r.enumerable?(E(e,Ye)&&e[Ye][n]&&(e[Ye][n]=!1),r=Nt(r,{enumerable:w(0,!1)})):(E(e,Ye)||Ue(e,Ye,w(1,{})),e[Ye][n]=!0),rn(e,n,r)):Ue(e,n,r)},un=function(t,e){h(t);for(var n,r=function(t){var e=nt(t),n=ke.f;if(n)for(var r,i=n(t),o=rt.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=F(e)),i=0,o=r.length;o>i;)sn(t,n=r[i++],e[n]);return t},ln=function(t){var e=Ze.call(this,t=y(t,!0));return!(this===$e&&E(Ke,t)&&!E(Qe,t))&&(!(e||!E(this,t)||!E(Ke,t)||E(this,Ye)&&this[Ye][t])||e)},cn=function(t,e){if(t=F(t),e=y(e,!0),t!==$e||!E(Ke,e)||E(Qe,e)){var n=ze(t,e);return!n||!E(Ke,e)||E(t,Ye)&&t[Ye][e]||(n.enumerable=!0),n}},hn=function(t){for(var e,n=Ve(F(t)),r=[],i=0;n.length>i;)E(Ke,e=n[i++])||e==Ye||e==Fe||r.push(e);return r},fn=function(t){for(var e,n=t===$e,r=Ve(n?Qe:F(t)),i=[],o=0;r.length>o;)!E(Ke,e=r[o++])||n&&!E($e,e)||i.push(Ke[e]);return i};tn||(L((Ge=function(){if(this instanceof Ge)throw TypeError("Symbol is not a constructor!");var t=T(arguments.length>0?arguments[0]:void 0),e=function e(n){this===$e&&e.call(Qe,n),E(this,Ye)&&E(this[Ye],t)&&(this[Ye][t]=!1),rn(this,t,w(1,n))};return d&&nn&&rn($e,t,{configurable:!0,set:e}),on(t)}).prototype,"toString",(function(){return this._k})),de.f=cn,_.f=sn,mt.f=je.f=hn,rt.f=ln,ke.f=fn,d&&L($e,"propertyIsEnumerable",ln,!0),Oe.f=function(t){return on(yt(t))}),k(k.G+k.W+k.F*!tn,{Symbol:Ge});for(var dn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),pn=0;dn.length>pn;)yt(dn[pn++]);for(var mn=nt(yt.store),vn=0;mn.length>vn;)Ie(mn[vn++]);k(k.S+k.F*!tn,"Symbol",{for:function(t){return E(Je,t+="")?Je[t]:Je[t]=Ge(t)},keyFor:function(t){if(!an(t))throw TypeError(t+" is not a symbol!");for(var e in Je)if(Je[e]===t)return e},useSetter:function(){nn=!0},useSimple:function(){nn=!1}}),k(k.S+k.F*!tn,"Object",{create:function(t,e){return void 0===e?Nt(t):un(Nt(t),e)},defineProperty:sn,defineProperties:un,getOwnPropertyDescriptor:cn,getOwnPropertyNames:hn,getOwnPropertySymbols:fn});var gn=f((function(){ke.f(1)}));k(k.S+k.F*gn,"Object",{getOwnPropertySymbols:function(t){return ke.f(vt(t))}}),He&&k(k.S+k.F*(!tn||f((function(){var t=Ge();return"[null]"!=We([t])||"{}"!=We({a:t})||"{}"!=We(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(c(e)||void 0!==t)&&!an(t))return Ut(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!an(e))return e}),r[1]=e,We.apply(He,r)}}),Ge.prototype[Xe]||x(Ge.prototype,Xe,Ge.prototype.valueOf),wt(Ge,"Symbol"),wt(Math,"Math",!0),wt(u.JSON,"JSON",!0);var yn,bn,_n=_.f,wn=Function.prototype,xn=/^\s*function ([^ (]*)/;"name"in wn||d&&_n(wn,"name",{configurable:!0,get:function(){try{return(""+this).match(xn)[1]}catch(t){return""}}}),yn=(l.Object||{}).keys||Object.keys,bn={keys:function(t){return nt(vt(t))}},k(k.S+k.F*f((function(){yn(1)})),"Object",bn);for(var Mn=yt("iterator"),En=yt("toStringTag"),Sn=At.Array,An={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Tn=nt(An),qn=0;qn<Tn.length;qn++){var Pn,Ln=Tn[qn],On=An[Ln],Cn=u[Ln],In=Cn&&Cn.prototype;if(In&&(In[Mn]||x(In,Mn,Sn),In[En]||x(In,En,Ln),At[Ln]=Sn,On))for(Pn in ie)In[Pn]||L(In,Pn,ie[Pn],!0)}var Rn=function(t){return function(e,n){var r,i,o=String(j(e)),a=V(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},kn=Object.assign,Nn=!kn||f((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=kn({},t)[n]||Object.keys(kn({},e)).join("")!=r}))?function(t,e){for(var n=vt(t),r=arguments.length,i=1,o=ke.f,a=rt.f;r>i;)for(var s,u=D(arguments[i++]),l=o?nt(u).concat(o(u)):nt(u),c=l.length,h=0;c>h;)s=l[h++],d&&!a.call(u,s)||(n[s]=u[s]);return n}:kn;k(k.S+k.F,"Object",{assign:Nn});var Bn=function(){var t=h(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Dn={};Dn[yt("toStringTag")]="z",Dn+""!="[object z]"&&L(Object.prototype,"toString",(function(){return"[object "+St(this)+"]"}),!0);var jn,Fn,zn=Rn(!0),Un=function(t,e,n){return e+(n?zn(t,e).length:1)},Vn=RegExp.prototype.exec,Gn=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=i(r))throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==St(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Vn.call(t,e)},Hn=RegExp.prototype.exec,Wn=String.prototype.replace,Yn=Hn,Xn=(jn=/a/,Fn=/b*/g,Hn.call(jn,"a"),Hn.call(Fn,"a"),0!==jn.lastIndex||0!==Fn.lastIndex),Zn=void 0!==/()??/.exec("")[1];(Xn||Zn)&&(Yn=function(t){var e,n,r,i,o=this;return Zn&&(n=new RegExp("^"+o.source+"$(?!\\s)",Bn.call(o))),Xn&&(e=o.lastIndex),r=Hn.call(o,t),Xn&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Zn&&r&&r.length>1&&Wn.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Jn=Yn;k({target:"RegExp",proto:!0,forced:Jn!==/./.exec},{exec:Jn});var Kn=yt("species"),Qn=!f((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),$n=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),tr=function(t,e,n){var r=yt(t),i=!f((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),o=i?!f((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[Kn]=function(){return n}),n[r](""),!e})):void 0;if(!i||!o||"replace"===t&&!Qn||"split"===t&&!$n){var a=/./[r],s=n(j,r,""[t],(function(t,e,n,r,o){return e.exec===Jn?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),u=s[0],l=s[1];L(String.prototype,t,u),x(RegExp.prototype,r,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}},er=Math.max,nr=Math.min,rr=Math.floor,ir=/\$([$&`']|\d\d?|<[^>]*>)/g,or=/\$([$&`']|\d\d?)/g;tr("replace",2,(function(t,e,n,r){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var o=r(n,t,this,e);if(o.done)return o.value;var a=h(t),s=String(this),u="function"==typeof e;u||(e=String(e));var l=a.global;if(l){var c=a.unicode;a.lastIndex=0}for(var f=[];;){var d=Gn(a,s);if(null===d)break;if(f.push(d),!l)break;""===String(d[0])&&(a.lastIndex=Un(s,H(a.lastIndex),c))}for(var p,m="",v=0,g=0;g<f.length;g++){d=f[g];for(var y=String(d[0]),b=er(nr(V(d.index),s.length),0),_=[],w=1;w<d.length;w++)_.push(void 0===(p=d[w])?p:String(p));var x=d.groups;if(u){var M=[y].concat(_,b,s);void 0!==x&&M.push(x);var E=String(e.apply(void 0,M))}else E=i(y,s,b,_,x,e);b>=v&&(m+=s.slice(v,b)+E,v=b+y.length)}return m+s.slice(v)}];function i(t,e,r,i,o,a){var s=r+t.length,u=i.length,l=or;return void 0!==o&&(o=vt(o),l=ir),n.call(a,l,(function(n,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(s);case"<":l=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return n;if(c>u){var h=rr(c/10);return 0===h?n:h<=u?void 0===i[h-1]?a.charAt(1):i[h-1]+a.charAt(1):n}l=i[c-1]}return void 0===l?"":l}))}}));var ar=Ht(6),sr="findIndex",ur=!0;function lr(t,e,n){null==e&&(e=t.g,n=t.b,t=t.r);var r=0,i=t;e>t&&(r=1,i=e),n>e&&n>t&&(r=2,i=n);var o=t;e<t&&(o=e),n<e&&n<t&&(o=n);var a=0,s=0;return i!==o&&(a=0===r?60/360*(e-n)/(i-o):1===r?60/360*(2+(n-t)/(i-o)):60/360*(4+(t-e)/(i-o)),s=0===i?0:(i-o)/i),[a,s,i]}function cr(t,e,n){var i=360*t%360/60,o=0|i,a=i-o,s=n*(1-e),u=n*(1-e*a),l=n*(1-e*(1-a)),c=0,h=0,f=0;switch(o){case 0:c=n,h=l,f=s;break;case 1:c=u,h=n,f=s;break;case 2:c=s,h=n,f=l;break;case 3:c=s,h=u,f=n;break;case 4:c=l,h=s,f=n;break;case 5:c=n,h=s,f=u}return new r.Color(c,h,f)}sr in[]&&Array(1)[sr]((function(){ur=!1})),k(k.P+k.F*ur,"Array",{findIndex:function(t){return ar(this,t,arguments.length>1?arguments[1]:void 0)}}),Jt(sr);var hr=function(){function t(e){var n=this,r=e.minimum,i=e.maximum,o=e.step,a=e.current,s=e.onValueChanged;ye(this,t),this._minimum=r,this._maximum=i,this._step=o,this._onValueChanged=s,this._element=document.createElement("input"),this._element.type="range",this._element.min=this._minimum,this._element.max=this._maximum,null!=this._step&&(this._element.step=this._step),this._element.value=null!=a?a:this._minimum,null!=s&&(this._element.addEventListener("input",(function(t){s(n._element.value)})),s(this._element.value)),Object.assign(this._element.style,{height:"16px"})}return _e(t,[{key:"destroy",value:function(){this._element=null,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(t){var e=this;this._element.addEventListener("input",(function(n){return t(e._element.value)}))}},{key:"setValue",value:function(t){this._element.value=t}},{key:"element",get:function(){return this._element}},{key:"value",get:function(){return this._element.value}},{key:"displayedValue",get:function(){return""+this._element.value}},{key:"height",get:function(){return 16}}]),t}(),fr=function(){function t(e){var n=this,r=e.current,i=e.onValueChanged;ye(this,t),this._onValueChanged=i,this._element=document.createElement("div"),this._titleElement=document.createElement("input"),this._titleElement.type="checkbox",this._titleElement.checked=r||!1,Object.assign(this._titleElement.style,{width:"16px",height:"16px",margin:"0px"}),null!=i&&(this._titleElement.addEventListener("click",(function(t){i(n._titleElement.checked)})),i(this._titleElement.checked))}return _e(t,[{key:"destroy",value:function(){this._element=null,this._titleElement=null,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(t){var e=this;this._titleElement.addEventListener("click",(function(n){return t(e._titleElement.checked)}))}},{key:"element",get:function(){return this._element}},{key:"titleElement",get:function(){return this._titleElement}},{key:"value",get:function(){return this._titleElement.checked}},{key:"displayedValue",get:function(){return this._titleElement.checked?"true":"false"}},{key:"height",get:function(){return 0}},{key:"titleElementWidth",get:function(){return 16}}]),t}(),dr=function(){function t(e){var n=this,r=e.values,i=e.current,o=e.onValueChanged;ye(this,t),this._values=r,this._onValueChanged=o,this._element=document.createElement("select");var a=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value,f=document.createElement("option");f.value=h,f.innerHTML=yr(h),f.selected=h===i?"selected":"unselected",this._element.appendChild(f)}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}null!=o&&(this._element.addEventListener("change",(function(t){o(n._element.value)})),o(this._element.value)),Object.assign(this._element.style,{height:"24px"})}return _e(t,[{key:"destroy",value:function(){this._element=null,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(t){var e=this;this._element.addEventListener("change",(function(n){return t(e._element.value)}))}},{key:"element",get:function(){return this._element}},{key:"value",get:function(){return this._element.value}},{key:"displayedValue",get:function(){return this._element.value}},{key:"height",get:function(){return 24}}]),t}(),pr=function(){function t(e){var n=e.label,r=e.onClick;ye(this,t),this._onClick=r,this._element=document.createElement("button"),this._element.innerHTML=yr(n),null!=r&&this._element.addEventListener("click",(function(t){r()})),Object.assign(this._element.style,{height:"24px"})}return _e(t,[{key:"destroy",value:function(){this._element=null,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(){}},{key:"addClickListener",value:function(t){var e=this;this._element.addEventListener("click",(function(n){return t(e._element.value)}))}},{key:"element",get:function(){return this._element}},{key:"value",get:function(){return""}},{key:"displayedValue",get:function(){return""}},{key:"height",get:function(){return 24}}]),t}(),mr=function(){function t(e){var n=this,i=e.current,o=e.onValueChanged;ye(this,t),this._onValueChanged=o,this._element=document.createElement("div"),this._titleElement=document.createElement("div"),this._color=i||new r.Color,this._listeners=[],Object.assign(this._element.style,{width:"100%",height:this.height+"px"}),Object.assign(this._titleElement.style,{width:"10px",height:"10px","border-radius":"2px"}),this._colorPickerMain=document.createElement("canvas"),this._colorPickerMain.height=62,Object.assign(this._colorPickerMain.style,{position:"absolute",left:"0px",right:"0px",top:"0px",height:"62px"}),this._element.appendChild(this._colorPickerMain),this._colorPickerBottomSlider=document.createElement("canvas"),this._colorPickerBottomSlider.height=14,Object.assign(this._colorPickerBottomSlider.style,{position:"absolute",left:"0px",right:"0px",top:"66px",height:"14px"}),this._element.appendChild(this._colorPickerBottomSlider),this._requestAnimationFrameHandle=null,this._requestAnimationFrameUpdate=this._requestAnimationFrameUpdate.bind(this),this._pickingMain=!1,this._pickingX=0,this._pickingY=0,this._colorPickerMain.addEventListener("pointerdown",(function(t){n._pickingMain=!0,n._updateMain(t.offsetX,t.offsetY),n._notify(),n._moveListener=function(t){var e=t.clientX-n._colorPickerMain.getBoundingClientRect().x,r=t.clientY-n._colorPickerMain.getBoundingClientRect().y;n._pickingX=Math.min(Math.max(e,0),n._colorPickerMain.clientWidth),n._pickingY=Math.min(Math.max(r,0),n._colorPickerMain.clientHeight),n._requestAnimationFrame()},document.body.addEventListener("pointermove",n._moveListener),n._upListener=function(t){n._pickingMain=!1,n.redraw(),document.body.removeEventListener("pointermove",n._moveListener),document.body.removeEventListener("pointerup",n._upListener),delete n._moveListener,delete n._upListener},document.body.addEventListener("pointerup",n._upListener)})),this._pickingBottomSlider=!1,this._colorPickerBottomSlider.addEventListener("pointerdown",(function(t){n._pickingBottomSlider=!0,n._updateBottomSlider(t.offsetX),n._notify(),n._bottomMoveListener=function(t){var e=t.clientX-n._colorPickerBottomSlider.getBoundingClientRect().x;n._pickingX=Math.min(Math.max(e,0),n._colorPickerMain.clientWidth),n._requestAnimationFrame()},document.body.addEventListener("pointermove",n._bottomMoveListener),n._bottomUpListener=function(t){n._pickingBottomSlider=!1,n.redraw(),document.body.removeEventListener("pointermove",n._bottomMoveListener),document.body.removeEventListener("pointerup",n._bottomUpListener),delete n._bottomMoveListener,delete n._bottomUpListener},document.body.addEventListener("pointerup",n._bottomUpListener)}));var a=0,s=function(t,e){var r=document.createElement("button");return Object.assign(r.style,{position:"absolute",top:n.height-24+"px",left:a+"px",height:"24px",width:"48px",color:"grey"}),r.innerHTML=e,a+=50,r.addEventListener("click",(function(){n._modeButtons[n._mode].style.color="grey",n._mode=t,r.style.color="black",n.redraw()})),n._element.appendChild(r),r};this._modeButtons={},this._modeButtons.hsv=s("hsv","HSV"),this._modeButtons.svh=s("svh","SVH"),this._modeButtons.rgb=s("rgb","RGB"),this._mode="hsv",this._modeButtons.hsv.style.color="black",this._requestAnimationFrame(),this._notify()}return _e(t,[{key:"destroy",value:function(){document.body.removeEventListener("pointermove",this._moveListener),document.body.removeEventListener("pointerup",this._upListener),document.body.removeEventListener("pointermove",this._bottomMoveListener),document.body.removeEventListener("pointerup",this._bottomUpListener),this._element=null,this._titleElement=null,this._destroyed=!0,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(t){this._listeners.push(t)}},{key:"setValue",value:function(t){this._color.copy(t),this.redraw(),this._notify()}},{key:"_requestAnimationFrame",value:function(){null!=this._requestAnimationFrameHandle||this._destroyed||(this._requestAnimationFrameHandle=requestAnimationFrame(this._requestAnimationFrameUpdate))}},{key:"_requestAnimationFrameUpdate",value:function(){this._pickingMain&&(this._updateMain(this._pickingX,this._pickingY),this._notify()),this._pickingBottomSlider&&(this._updateBottomSlider(this._pickingX),this._notify()),this._requestAnimationFrameHandle=null}},{key:"_notify",value:function(){null!=this._onValueChanged&&this._onValueChanged(this._color);var t=!0,e=!1,n=void 0;try{for(var r,i=this._listeners[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)(0,r.value)(this._color)}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"_updateMain",value:function(t,e){var n=this._colorPickerMain.clientWidth;this._pickingX=Math.min(Math.max(t,1),n-1)-1,this._pickingY=Math.min(Math.max(e,1),63)-1;var r=this._pickingX/(n-1),i=this._pickingY/63;if("hsv"===this._mode){var o=Pe(lr(this._color),3)[2];this._color.set(cr(r,i,o))}else if("svh"===this._mode){var a=Pe(lr(this._color),2)[0];this._color.set(cr(a,r,1-i))}else this._color.r=r,this._color.g=i;this.redraw()}},{key:"_updateBottomSlider",value:function(t){var e=this._colorPickerBottomSlider.clientWidth;this._pickingX=Math.min(Math.max(t,1),e-1)-1;var n=this._pickingX/(e-1);if("hsv"===this._mode){var r=Pe(lr(this._color),2),i=r[0],o=r[1];this._color.set(cr(i,o,n))}else if("svh"===this._mode){var a=Pe(lr(this._color),3),s=a[1],u=a[2];this._color.set(cr(n,s,u))}else this._color.b=n;this.redraw()}},{key:"redraw",value:function(){var t=this._element.clientWidth-2;this._colorPickerMain.width!==t&&(this._colorPickerMain.width=t);for(var e=Pe(lr(this._color),3),n=e[0],r=e[1],i=e[2],o=this._colorPickerMain.getContext("2d"),a=0;a<62;++a)for(var s=0;s<t;++s){if("hsv"===this._mode){var u=cr(s/(t-1),a/61,i),l=u.r,c=u.g,h=u.b;o.fillStyle="rgb(".concat(255*l,",").concat(255*c,",").concat(255*h,")")}else if("svh"===this._mode){var f=cr(n,s/(t-1),1-a/61),d=f.r,p=f.g,m=f.b;o.fillStyle="rgb(".concat(255*d,",").concat(255*p,",").concat(255*m,")")}else{var v=s/t*255,g=a/62*255,y=255*this._color.b;o.fillStyle="rgb(".concat(v,",").concat(g,",").concat(y,")")}o.fillRect(s,a,1,1)}this._pickingMain&&(o.fillStyle="rgba(0,0,0,0.5)",o.fillRect(0,this._pickingY,t,1),o.fillRect(this._pickingX,0,1,62)),this._colorPickerBottomSlider.width!==t&&(this._colorPickerBottomSlider.width=t);for(var b=this._colorPickerBottomSlider.getContext("2d"),_=0;_<t;++_){if("hsv"===this._mode){var w=cr(n,r,_/(t-1)),x=w.r,M=w.g,E=w.b;b.fillStyle="rgb(".concat(255*x,",").concat(255*M,",").concat(255*E,")")}else if("svh"===this._mode){var S=cr(_/(t-1),r,i),A=S.r,T=S.g,q=S.b;b.fillStyle="rgb(".concat(255*A,",").concat(255*T,",").concat(255*q,")")}else{var P=255*this._color.r,L=255*this._color.g,O=_/(t-2)*255;b.fillStyle="rgb(".concat(P,",").concat(L,",").concat(O,")")}b.fillRect(_,0,1,14)}this._pickingBottomSlider&&(b.fillStyle="rgba(0,0,0,0.5)",b.fillRect(this._pickingX,0,1,14));var C=255*this._color.r,I=255*this._color.g,R=255*this._color.b,k="1px solid rgb(".concat(.9*C,",").concat(.9*I,",").concat(.9*R,")");Object.assign(this._colorPickerMain.style,{border:k}),Object.assign(this._colorPickerBottomSlider.style,{border:k}),Object.assign(this._titleElement.style,{"background-color":"rgb(".concat(C,",").concat(I,",").concat(R,")"),border:k})}},{key:"element",get:function(){return this._element}},{key:"titleElement",get:function(){return this._titleElement}},{key:"value",get:function(){return this._color}},{key:"displayedValue",get:function(){return"#"+this._color.getHexString().toUpperCase()}},{key:"height",get:function(){return 108}},{key:"titleElementWidth",get:function(){return 12}}]),t}(),vr=function(){function t(e){var n=e.name;ye(this,t),this._name=n,this._element=document.createElement("div"),this._entries=[],this._height=12}return _e(t,[{key:"destroy",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._entries[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value.destroy()}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this._entries=null,this._element=null,Object.setPrototypeOf(this,null)}},{key:"addControl",value:function(t,e,n){if(-1===this._entries.findIndex((function(e){return e.name===t}))){var r=new gr({name:t,description:e,control:n});this._entries.push(r),this._element.appendChild(r.element),null!=n.redraw&&n.redraw()}}},{key:"removeControl",value:function(t){var e=this._entries.findIndex((function(e){return e.name===t}));if(-1!==e){var n=Pe(this._entries.splice(e,1),1)[0];this._element.removeChild(n.element),n.destroy()}}},{key:"_updateLayout",value:function(){this._height=0;var t=!0,e=!1,n=void 0;try{for(var r,i=this._entries[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.element.style.top=this._height+"px",this._height+=o.height+12}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}Object.assign(this._element.style,{height:this._height+"px"})}},{key:"element",get:function(){return this._element}},{key:"height",get:function(){return this._height}}]),t}(),gr=function(){function t(e){var n=this,r=e.name,i=e.description,o=e.control;ye(this,t),this._name=r,this._description=i,this._control=o,this._element=document.createElement("div"),this._element.title=i,Object.assign(this._element.style,{position:"absolute",left:"0px",right:"0px"}),this._element.appendChild(this._control.element),Object.assign(this._control.element.style,{position:"absolute",left:"0px",width:"100%",top:"16px","font-size":"10px"});var a=0;null!=this._control.titleElement&&(this._element.appendChild(this._control.titleElement),Object.assign(this._control.titleElement.style,{position:"absolute",left:"0px",top:"0px","font-size":"10px"}),a=this._control.titleElementWidth+4),this._control.addValueChangedListener((function(t){n._displayedValueElement.innerHTML=yr(n._control.displayedValue)})),this._nameElement=document.createElement("span"),this._nameElement.innerHTML=r,Object.assign(this._nameElement.style,{position:"absolute",left:a+"px",right:"0px",height:"16px",color:"#666666","font-size":"12px","text-align":"left","vertical-align":"middle"}),this._element.appendChild(this._nameElement),this._displayedValueElement=document.createElement("span"),this._displayedValueElement.innerHTML=yr(this._control.displayedValue),Object.assign(this._displayedValueElement.style,{position:"absolute",left:a+"px",right:"0px",height:"16px","font-size":"12px","text-align":"right","vertical-align":"middle"}),this._element.appendChild(this._displayedValueElement)}return _e(t,[{key:"destroy",value:function(){this._element=null,this._nameElement=null,this._displayedValueElement=null,this._control.destroy(),Object.setPrototypeOf(this,null)}},{key:"name",get:function(){return this._name}},{key:"element",get:function(){return this._element}},{key:"value",get:function(){return this._control.value}},{key:"height",get:function(){return this._control.height+16}}]),t}();function yr(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var br=function(){};function _r(t){var e=t;Object.assign(e,br.prototype);var n=function(t){var n=e[t];if("function"==typeof n)return"continue";e["_".concat(t)]=n,Object.defineProperty(e,t,{get:function(){return e["_".concat(t)]},set:function(n){var r=e["_".concat(t)];e["_".concat(t)]=n,e.publish("".concat(t,"Changed"),{oldValue:r,newValue:e[t]})}})};for(var r in e)n(r);return e}Object.assign(br.prototype,{publish:function(t,e){this._subscribers&&this._subscribers[t]&&this._subscribers[t].forEach((function(t){"function"==typeof t&&t(e)}))},on:function(t,e){this._subscribers||(this._subscribers={}),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push(e)},off:function(t,e){if(this._subscribers&&this._subscribers[t]){var n=this._subscribers[t].indexOf(e);-1!==n&&this._subscribers[t].splice(n,1)}},destroy:function(){this._subscribers={}}})}).call(this,n(25))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){}n.r(e),n.d(e,"ACESFilmicToneMapping",(function(){return dt})),n.d(e,"AddEquation",(function(){return k})),n.d(e,"AddOperation",(function(){return st})),n.d(e,"AdditiveBlending",(function(){return O})),n.d(e,"AlphaFormat",(function(){return Yt})),n.d(e,"AlwaysDepth",(function(){return Q})),n.d(e,"AlwaysStencilFunc",(function(){return hn})),n.d(e,"AmbientLight",(function(){return tl})),n.d(e,"AmbientLightProbe",(function(){return ql})),n.d(e,"AnimationClip",(function(){return lu})),n.d(e,"AnimationLoader",(function(){return vu})),n.d(e,"AnimationMixer",(function(){return tc})),n.d(e,"AnimationObjectGroup",(function(){return Ql})),n.d(e,"AnimationUtils",(function(){return Js})),n.d(e,"ArcCurve",(function(){return Eu})),n.d(e,"ArrayCamera",(function(){return Yo})),n.d(e,"ArrowHelper",(function(){return Tc})),n.d(e,"Audio",(function(){return Cl})),n.d(e,"AudioAnalyser",(function(){return Rl})),n.d(e,"AudioContext",(function(){return Ml})),n.d(e,"AudioListener",(function(){return Ol})),n.d(e,"AudioLoader",(function(){return El})),n.d(e,"AxesHelper",(function(){return qc})),n.d(e,"AxisHelper",(function(){return th})),n.d(e,"BackSide",(function(){return x})),n.d(e,"BasicDepthPacking",(function(){return He})),n.d(e,"BasicShadowMap",(function(){return y})),n.d(e,"BinaryTextureLoader",(function(){return oh})),n.d(e,"Bone",(function(){return ma})),n.d(e,"BooleanKeyframeTrack",(function(){return nu})),n.d(e,"BoundingBoxHelper",(function(){return eh})),n.d(e,"Box2",(function(){return uc})),n.d(e,"Box3",(function(){return ir})),n.d(e,"Box3Helper",(function(){return Sc})),n.d(e,"BoxBufferGeometry",(function(){return zr})),n.d(e,"BoxGeometry",(function(){return Fr})),n.d(e,"BoxHelper",(function(){return Ec})),n.d(e,"BufferAttribute",(function(){return _r})),n.d(e,"BufferGeometry",(function(){return Nr})),n.d(e,"BufferGeometryLoader",(function(){return al})),n.d(e,"ByteType",(function(){return Nt})),n.d(e,"Cache",(function(){return hu})),n.d(e,"Camera",(function(){return Wr})),n.d(e,"CameraHelper",(function(){return Mc})),n.d(e,"CanvasRenderer",(function(){return sh})),n.d(e,"CanvasTexture",(function(){return Ea})),n.d(e,"CatmullRomCurve3",(function(){return Lu})),n.d(e,"CineonToneMapping",(function(){return ft})),n.d(e,"CircleBufferGeometry",(function(){return Bs})),n.d(e,"CircleGeometry",(function(){return Ns})),n.d(e,"ClampToEdgeWrapping",(function(){return Mt})),n.d(e,"Clock",(function(){return Ll})),n.d(e,"ClosedSplineCurve3",(function(){return Kc})),n.d(e,"Color",(function(){return fr})),n.d(e,"ColorKeyframeTrack",(function(){return ru})),n.d(e,"CompressedTexture",(function(){return Ma})),n.d(e,"CompressedTextureLoader",(function(){return gu})),n.d(e,"ConeBufferGeometry",(function(){return ks})),n.d(e,"ConeGeometry",(function(){return Rs})),n.d(e,"CubeCamera",(function(){return Jr})),n.d(e,"CubeGeometry",(function(){return Fr})),n.d(e,"CubeReflectionMapping",(function(){return mt})),n.d(e,"CubeRefractionMapping",(function(){return vt})),n.d(e,"CubeTexture",(function(){return bi})),n.d(e,"CubeTextureLoader",(function(){return _u})),n.d(e,"CubeUVReflectionMapping",(function(){return _t})),n.d(e,"CubeUVRefractionMapping",(function(){return wt})),n.d(e,"CubicBezierCurve",(function(){return Ru})),n.d(e,"CubicBezierCurve3",(function(){return ku})),n.d(e,"CubicInterpolant",(function(){return Qs})),n.d(e,"CullFaceBack",(function(){return d})),n.d(e,"CullFaceFront",(function(){return p})),n.d(e,"CullFaceFrontBack",(function(){return m})),n.d(e,"CullFaceNone",(function(){return f})),n.d(e,"Curve",(function(){return xu})),n.d(e,"CurvePath",(function(){return Uu})),n.d(e,"CustomBlending",(function(){return R})),n.d(e,"CylinderBufferGeometry",(function(){return Is})),n.d(e,"CylinderGeometry",(function(){return Cs})),n.d(e,"Cylindrical",(function(){return sc})),n.d(e,"DataTexture",(function(){return Qr})),n.d(e,"DataTexture2DArray",(function(){return _i})),n.d(e,"DataTexture3D",(function(){return wi})),n.d(e,"DataTextureLoader",(function(){return yu})),n.d(e,"DecrementStencilOp",(function(){return $e})),n.d(e,"DecrementWrapStencilOp",(function(){return en})),n.d(e,"DefaultLoadingManager",(function(){return du})),n.d(e,"DepthFormat",(function(){return $t})),n.d(e,"DepthStencilFormat",(function(){return te})),n.d(e,"DepthTexture",(function(){return Sa})),n.d(e,"DirectionalLight",(function(){return $u})),n.d(e,"DirectionalLightHelper",(function(){return xc})),n.d(e,"DirectionalLightShadow",(function(){return Qu})),n.d(e,"DiscreteInterpolant",(function(){return tu})),n.d(e,"DodecahedronBufferGeometry",(function(){return Da})),n.d(e,"DodecahedronGeometry",(function(){return Ba})),n.d(e,"DoubleSide",(function(){return M})),n.d(e,"DstAlphaFactor",(function(){return W})),n.d(e,"DstColorFactor",(function(){return X})),n.d(e,"DynamicBufferAttribute",(function(){return zc})),n.d(e,"EdgesGeometry",(function(){return Os})),n.d(e,"EdgesHelper",(function(){return nh})),n.d(e,"EllipseCurve",(function(){return Mu})),n.d(e,"EqualDepth",(function(){return et})),n.d(e,"EqualStencilFunc",(function(){return an})),n.d(e,"EquirectangularReflectionMapping",(function(){return gt})),n.d(e,"EquirectangularRefractionMapping",(function(){return yt})),n.d(e,"Euler",(function(){return In})),n.d(e,"EventDispatcher",(function(){return i})),n.d(e,"ExtrudeBufferGeometry",(function(){return gs})),n.d(e,"ExtrudeGeometry",(function(){return vs})),n.d(e,"Face3",(function(){return vr})),n.d(e,"Face4",(function(){return Pc})),n.d(e,"FaceColors",(function(){return T})),n.d(e,"FaceNormalsHelper",(function(){return wc})),n.d(e,"FileLoader",(function(){return mu})),n.d(e,"FlatShading",(function(){return E})),n.d(e,"Float32Attribute",(function(){return Zc})),n.d(e,"Float32BufferAttribute",(function(){return qr})),n.d(e,"Float64Attribute",(function(){return Jc})),n.d(e,"Float64BufferAttribute",(function(){return Pr})),n.d(e,"FloatType",(function(){return zt})),n.d(e,"Fog",(function(){return sa})),n.d(e,"FogExp2",(function(){return aa})),n.d(e,"Font",(function(){return bl})),n.d(e,"FontLoader",(function(){return wl})),n.d(e,"FrontFaceDirectionCCW",(function(){return g})),n.d(e,"FrontFaceDirectionCW",(function(){return v})),n.d(e,"FrontSide",(function(){return w})),n.d(e,"Frustum",(function(){return ti})),n.d(e,"GammaEncoding",(function(){return je})),n.d(e,"Geometry",(function(){return jr})),n.d(e,"GeometryUtils",(function(){return ah})),n.d(e,"GreaterDepth",(function(){return rt})),n.d(e,"GreaterEqualDepth",(function(){return nt})),n.d(e,"GreaterEqualStencilFunc",(function(){return cn})),n.d(e,"GreaterStencilFunc",(function(){return un})),n.d(e,"GridHelper",(function(){return yc})),n.d(e,"Group",(function(){return Wo})),n.d(e,"HalfFloatType",(function(){return Ut})),n.d(e,"HemisphereLight",(function(){return Wu})),n.d(e,"HemisphereLightHelper",(function(){return vc})),n.d(e,"HemisphereLightProbe",(function(){return Tl})),n.d(e,"IcosahedronBufferGeometry",(function(){return Na})),n.d(e,"IcosahedronGeometry",(function(){return ka})),n.d(e,"ImageBitmapLoader",(function(){return gl})),n.d(e,"ImageLoader",(function(){return bu})),n.d(e,"ImageUtils",(function(){return An})),n.d(e,"ImmediateRenderObject",(function(){return cc})),n.d(e,"IncrementStencilOp",(function(){return Qe})),n.d(e,"IncrementWrapStencilOp",(function(){return tn})),n.d(e,"InstancedBufferAttribute",(function(){return ol})),n.d(e,"InstancedBufferGeometry",(function(){return il})),n.d(e,"InstancedInterleavedBuffer",(function(){return nc})),n.d(e,"Int16Attribute",(function(){return Hc})),n.d(e,"Int16BufferAttribute",(function(){return Er})),n.d(e,"Int32Attribute",(function(){return Yc})),n.d(e,"Int32BufferAttribute",(function(){return Ar})),n.d(e,"Int8Attribute",(function(){return Uc})),n.d(e,"Int8BufferAttribute",(function(){return wr})),n.d(e,"IntType",(function(){return jt})),n.d(e,"InterleavedBuffer",(function(){return ua})),n.d(e,"InterleavedBufferAttribute",(function(){return la})),n.d(e,"Interpolant",(function(){return Ks})),n.d(e,"InterpolateDiscrete",(function(){return qe})),n.d(e,"InterpolateLinear",(function(){return Pe})),n.d(e,"InterpolateSmooth",(function(){return Le})),n.d(e,"InvertStencilOp",(function(){return nn})),n.d(e,"JSONLoader",(function(){return uh})),n.d(e,"KeepStencilOp",(function(){return Je})),n.d(e,"KeyframeTrack",(function(){return eu})),n.d(e,"LOD",(function(){return fa})),n.d(e,"LatheBufferGeometry",(function(){return Ts})),n.d(e,"LatheGeometry",(function(){return As})),n.d(e,"Layers",(function(){return Rn})),n.d(e,"LensFlare",(function(){return ch})),n.d(e,"LessDepth",(function(){return $})),n.d(e,"LessEqualDepth",(function(){return tt})),n.d(e,"LessEqualStencilFunc",(function(){return sn})),n.d(e,"LessStencilFunc",(function(){return on})),n.d(e,"Light",(function(){return Hu})),n.d(e,"LightProbe",(function(){return Al})),n.d(e,"LightProbeHelper",(function(){return gc})),n.d(e,"LightShadow",(function(){return Yu})),n.d(e,"Line",(function(){return ga})),n.d(e,"Line3",(function(){return lc})),n.d(e,"LineBasicMaterial",(function(){return va})),n.d(e,"LineCurve",(function(){return Nu})),n.d(e,"LineCurve3",(function(){return Bu})),n.d(e,"LineDashedMaterial",(function(){return Xs})),n.d(e,"LineLoop",(function(){return ba})),n.d(e,"LinePieces",(function(){return Oc})),n.d(e,"LineSegments",(function(){return ya})),n.d(e,"LineStrip",(function(){return Lc})),n.d(e,"LinearEncoding",(function(){return Be})),n.d(e,"LinearFilter",(function(){return Lt})),n.d(e,"LinearInterpolant",(function(){return $s})),n.d(e,"LinearMipMapLinearFilter",(function(){return Rt})),n.d(e,"LinearMipMapNearestFilter",(function(){return Ct})),n.d(e,"LinearMipmapLinearFilter",(function(){return It})),n.d(e,"LinearMipmapNearestFilter",(function(){return Ot})),n.d(e,"LinearToneMapping",(function(){return lt})),n.d(e,"Loader",(function(){return xl})),n.d(e,"LoaderUtils",(function(){return rl})),n.d(e,"LoadingManager",(function(){return fu})),n.d(e,"LogLuvEncoding",(function(){return ze})),n.d(e,"LoopOnce",(function(){return Se})),n.d(e,"LoopPingPong",(function(){return Te})),n.d(e,"LoopRepeat",(function(){return Ae})),n.d(e,"LuminanceAlphaFormat",(function(){return Kt})),n.d(e,"LuminanceFormat",(function(){return Jt})),n.d(e,"MOUSE",(function(){return c})),n.d(e,"Material",(function(){return yr})),n.d(e,"MaterialLoader",(function(){return nl})),n.d(e,"Math",(function(){return fn})),n.d(e,"Matrix3",(function(){return vn})),n.d(e,"Matrix4",(function(){return Cn})),n.d(e,"MaxEquation",(function(){return j})),n.d(e,"Mesh",(function(){return Br})),n.d(e,"MeshBasicMaterial",(function(){return br})),n.d(e,"MeshDepthMaterial",(function(){return Fo})),n.d(e,"MeshDistanceMaterial",(function(){return zo})),n.d(e,"MeshFaceMaterial",(function(){return Cc})),n.d(e,"MeshLambertMaterial",(function(){return Ws})),n.d(e,"MeshMatcapMaterial",(function(){return Ys})),n.d(e,"MeshNormalMaterial",(function(){return Hs})),n.d(e,"MeshPhongMaterial",(function(){return Vs})),n.d(e,"MeshPhysicalMaterial",(function(){return Us})),n.d(e,"MeshStandardMaterial",(function(){return zs})),n.d(e,"MeshToonMaterial",(function(){return Gs})),n.d(e,"MinEquation",(function(){return D})),n.d(e,"MirroredRepeatWrapping",(function(){return Et})),n.d(e,"MixOperation",(function(){return at})),n.d(e,"MultiMaterial",(function(){return Ic})),n.d(e,"MultiplyBlending",(function(){return I})),n.d(e,"MultiplyOperation",(function(){return ot})),n.d(e,"NearestFilter",(function(){return St})),n.d(e,"NearestMipMapLinearFilter",(function(){return Pt})),n.d(e,"NearestMipMapNearestFilter",(function(){return Tt})),n.d(e,"NearestMipmapLinearFilter",(function(){return qt})),n.d(e,"NearestMipmapNearestFilter",(function(){return At})),n.d(e,"NeverDepth",(function(){return K})),n.d(e,"NeverStencilFunc",(function(){return rn})),n.d(e,"NoBlending",(function(){return P})),n.d(e,"NoColors",(function(){return A})),n.d(e,"NoToneMapping",(function(){return ut})),n.d(e,"NormalBlending",(function(){return L})),n.d(e,"NotEqualDepth",(function(){return it})),n.d(e,"NotEqualStencilFunc",(function(){return ln})),n.d(e,"NumberKeyframeTrack",(function(){return iu})),n.d(e,"Object3D",(function(){return nr})),n.d(e,"ObjectLoader",(function(){return ul})),n.d(e,"ObjectSpaceNormalMap",(function(){return Xe})),n.d(e,"OctahedronBufferGeometry",(function(){return Ra})),n.d(e,"OctahedronGeometry",(function(){return Ia})),n.d(e,"OneFactor",(function(){return z})),n.d(e,"OneMinusDstAlphaFactor",(function(){return Y})),n.d(e,"OneMinusDstColorFactor",(function(){return Z})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return H})),n.d(e,"OneMinusSrcColorFactor",(function(){return V})),n.d(e,"OrthographicCamera",(function(){return Ku})),n.d(e,"PCFShadowMap",(function(){return b})),n.d(e,"PCFSoftShadowMap",(function(){return _})),n.d(e,"ParametricBufferGeometry",(function(){return qa})),n.d(e,"ParametricGeometry",(function(){return Ta})),n.d(e,"Particle",(function(){return kc})),n.d(e,"ParticleBasicMaterial",(function(){return Dc})),n.d(e,"ParticleSystem",(function(){return Nc})),n.d(e,"ParticleSystemMaterial",(function(){return jc})),n.d(e,"Path",(function(){return Vu})),n.d(e,"PerspectiveCamera",(function(){return Yr})),n.d(e,"Plane",(function(){return $r})),n.d(e,"PlaneBufferGeometry",(function(){return si})),n.d(e,"PlaneGeometry",(function(){return ai})),n.d(e,"PlaneHelper",(function(){return Ac})),n.d(e,"PointCloud",(function(){return Rc})),n.d(e,"PointCloudMaterial",(function(){return Bc})),n.d(e,"PointLight",(function(){return Ju})),n.d(e,"PointLightHelper",(function(){return pc})),n.d(e,"Points",(function(){return wa})),n.d(e,"PointsMaterial",(function(){return _a})),n.d(e,"PolarGridHelper",(function(){return bc})),n.d(e,"PolyhedronBufferGeometry",(function(){return La})),n.d(e,"PolyhedronGeometry",(function(){return Pa})),n.d(e,"PositionalAudio",(function(){return Il})),n.d(e,"PositionalAudioHelper",(function(){return _c})),n.d(e,"PropertyBinding",(function(){return Kl})),n.d(e,"PropertyMixer",(function(){return kl})),n.d(e,"QuadraticBezierCurve",(function(){return Du})),n.d(e,"QuadraticBezierCurve3",(function(){return ju})),n.d(e,"Quaternion",(function(){return pn})),n.d(e,"QuaternionKeyframeTrack",(function(){return au})),n.d(e,"QuaternionLinearInterpolant",(function(){return ou})),n.d(e,"REVISION",(function(){return l})),n.d(e,"RGBADepthPacking",(function(){return We})),n.d(e,"RGBAFormat",(function(){return Zt})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return xe})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return be})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return _e})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return we})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return Me})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return Ee})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return he})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return fe})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return de})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return pe})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return me})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return ve})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return ge})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return ye})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return le})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return ue})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return re})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return ie})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return oe})),n.d(e,"RGBDEncoding",(function(){return Ge})),n.d(e,"RGBEEncoding",(function(){return Fe})),n.d(e,"RGBEFormat",(function(){return Qt})),n.d(e,"RGBFormat",(function(){return Xt})),n.d(e,"RGBM16Encoding",(function(){return Ve})),n.d(e,"RGBM7Encoding",(function(){return Ue})),n.d(e,"RGB_ETC1_Format",(function(){return ce})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return se})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return ae})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return ne})),n.d(e,"RawShaderMaterial",(function(){return Fs})),n.d(e,"Ray",(function(){return ar})),n.d(e,"Raycaster",(function(){return rc})),n.d(e,"RectAreaLight",(function(){return el})),n.d(e,"RectAreaLightHelper",(function(){return mc})),n.d(e,"RedFormat",(function(){return ee})),n.d(e,"ReinhardToneMapping",(function(){return ct})),n.d(e,"RepeatWrapping",(function(){return xt})),n.d(e,"ReplaceStencilOp",(function(){return Ke})),n.d(e,"ReverseSubtractEquation",(function(){return B})),n.d(e,"RingBufferGeometry",(function(){return Ss})),n.d(e,"RingGeometry",(function(){return Es})),n.d(e,"Scene",(function(){return rr})),n.d(e,"SceneUtils",(function(){return lh})),n.d(e,"ShaderChunk",(function(){return ei})),n.d(e,"ShaderLib",(function(){return ri})),n.d(e,"ShaderMaterial",(function(){return Hr})),n.d(e,"ShadowMaterial",(function(){return js})),n.d(e,"Shape",(function(){return Gu})),n.d(e,"ShapeBufferGeometry",(function(){return Ps})),n.d(e,"ShapeGeometry",(function(){return qs})),n.d(e,"ShapePath",(function(){return yl})),n.d(e,"ShapeUtils",(function(){return ds})),n.d(e,"ShortType",(function(){return Bt})),n.d(e,"Skeleton",(function(){return pa})),n.d(e,"SkeletonHelper",(function(){return dc})),n.d(e,"SkinnedMesh",(function(){return da})),n.d(e,"SmoothShading",(function(){return S})),n.d(e,"Sphere",(function(){return or})),n.d(e,"SphereBufferGeometry",(function(){return Ms})),n.d(e,"SphereGeometry",(function(){return xs})),n.d(e,"Spherical",(function(){return ac})),n.d(e,"SphericalHarmonics3",(function(){return Sl})),n.d(e,"SphericalReflectionMapping",(function(){return bt})),n.d(e,"Spline",(function(){return $c})),n.d(e,"SplineCurve",(function(){return Fu})),n.d(e,"SplineCurve3",(function(){return Qc})),n.d(e,"SpotLight",(function(){return Zu})),n.d(e,"SpotLightHelper",(function(){return fc})),n.d(e,"SpotLightShadow",(function(){return Xu})),n.d(e,"Sprite",(function(){return ha})),n.d(e,"SpriteMaterial",(function(){return ca})),n.d(e,"SrcAlphaFactor",(function(){return G})),n.d(e,"SrcAlphaSaturateFactor",(function(){return J})),n.d(e,"SrcColorFactor",(function(){return U})),n.d(e,"StereoCamera",(function(){return Pl})),n.d(e,"StringKeyframeTrack",(function(){return su})),n.d(e,"SubtractEquation",(function(){return N})),n.d(e,"SubtractiveBlending",(function(){return C})),n.d(e,"TOUCH",(function(){return h})),n.d(e,"TangentSpaceNormalMap",(function(){return Ye})),n.d(e,"TetrahedronBufferGeometry",(function(){return Ca})),n.d(e,"TetrahedronGeometry",(function(){return Oa})),n.d(e,"TextBufferGeometry",(function(){return ws})),n.d(e,"TextGeometry",(function(){return _s})),n.d(e,"Texture",(function(){return qn})),n.d(e,"TextureLoader",(function(){return wu})),n.d(e,"TorusBufferGeometry",(function(){return Ga})),n.d(e,"TorusGeometry",(function(){return Va})),n.d(e,"TorusKnotBufferGeometry",(function(){return Ua})),n.d(e,"TorusKnotGeometry",(function(){return za})),n.d(e,"Triangle",(function(){return sr})),n.d(e,"TriangleFanDrawMode",(function(){return Ne})),n.d(e,"TriangleStripDrawMode",(function(){return ke})),n.d(e,"TrianglesDrawMode",(function(){return Re})),n.d(e,"TubeBufferGeometry",(function(){return Fa})),n.d(e,"TubeGeometry",(function(){return ja})),n.d(e,"UVMapping",(function(){return pt})),n.d(e,"Uint16Attribute",(function(){return Wc})),n.d(e,"Uint16BufferAttribute",(function(){return Sr})),n.d(e,"Uint32Attribute",(function(){return Xc})),n.d(e,"Uint32BufferAttribute",(function(){return Tr})),n.d(e,"Uint8Attribute",(function(){return Vc})),n.d(e,"Uint8BufferAttribute",(function(){return xr})),n.d(e,"Uint8ClampedAttribute",(function(){return Gc})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return Mr})),n.d(e,"Uncharted2ToneMapping",(function(){return ht})),n.d(e,"Uniform",(function(){return ec})),n.d(e,"UniformsLib",(function(){return ni})),n.d(e,"UniformsUtils",(function(){return Gr})),n.d(e,"UnsignedByteType",(function(){return kt})),n.d(e,"UnsignedInt248Type",(function(){return Wt})),n.d(e,"UnsignedIntType",(function(){return Ft})),n.d(e,"UnsignedShort4444Type",(function(){return Vt})),n.d(e,"UnsignedShort5551Type",(function(){return Gt})),n.d(e,"UnsignedShort565Type",(function(){return Ht})),n.d(e,"UnsignedShortType",(function(){return Dt})),n.d(e,"Vector2",(function(){return dn})),n.d(e,"Vector3",(function(){return mn})),n.d(e,"Vector4",(function(){return Pn})),n.d(e,"VectorKeyframeTrack",(function(){return uu})),n.d(e,"Vertex",(function(){return Fc})),n.d(e,"VertexColors",(function(){return q})),n.d(e,"VertexNormalsHelper",(function(){return hc})),n.d(e,"VideoTexture",(function(){return xa})),n.d(e,"WebGLMultisampleRenderTarget",(function(){return On})),n.d(e,"WebGLRenderTarget",(function(){return Ln})),n.d(e,"WebGLRenderTargetCube",(function(){return Kr})),n.d(e,"WebGLRenderer",(function(){return oa})),n.d(e,"WebGLUtils",(function(){return Ho})),n.d(e,"WireframeGeometry",(function(){return Aa})),n.d(e,"WireframeHelper",(function(){return rh})),n.d(e,"WrapAroundEnding",(function(){return Ie})),n.d(e,"XHRLoader",(function(){return ih})),n.d(e,"ZeroCurvatureEnding",(function(){return Oe})),n.d(e,"ZeroFactor",(function(){return F})),n.d(e,"ZeroSlopeEnding",(function(){return Ce})),n.d(e,"ZeroStencilOp",(function(){return Ze})),n.d(e,"sRGBEncoding",(function(){return De})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}),Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});var o,a,s,u,l="107",c={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},h={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},f=0,d=1,p=2,m=3,v=0,g=1,y=0,b=1,_=2,w=0,x=1,M=2,E=1,S=2,A=0,T=1,q=2,P=0,L=1,O=2,C=3,I=4,R=5,k=100,N=101,B=102,D=103,j=104,F=200,z=201,U=202,V=203,G=204,H=205,W=206,Y=207,X=208,Z=209,J=210,K=0,Q=1,$=2,tt=3,et=4,nt=5,rt=6,it=7,ot=0,at=1,st=2,ut=0,lt=1,ct=2,ht=3,ft=4,dt=5,pt=300,mt=301,vt=302,gt=303,yt=304,bt=305,_t=306,wt=307,xt=1e3,Mt=1001,Et=1002,St=1003,At=1004,Tt=1004,qt=1005,Pt=1005,Lt=1006,Ot=1007,Ct=1007,It=1008,Rt=1008,kt=1009,Nt=1010,Bt=1011,Dt=1012,jt=1013,Ft=1014,zt=1015,Ut=1016,Vt=1017,Gt=1018,Ht=1019,Wt=1020,Yt=1021,Xt=1022,Zt=1023,Jt=1024,Kt=1025,Qt=Zt,$t=1026,te=1027,ee=1028,ne=33776,re=33777,ie=33778,oe=33779,ae=35840,se=35841,ue=35842,le=35843,ce=36196,he=37808,fe=37809,de=37810,pe=37811,me=37812,ve=37813,ge=37814,ye=37815,be=37816,_e=37817,we=37818,xe=37819,Me=37820,Ee=37821,Se=2200,Ae=2201,Te=2202,qe=2300,Pe=2301,Le=2302,Oe=2400,Ce=2401,Ie=2402,Re=0,ke=1,Ne=2,Be=3e3,De=3001,je=3007,Fe=3002,ze=3003,Ue=3004,Ve=3005,Ge=3006,He=3200,We=3201,Ye=0,Xe=1,Ze=0,Je=7680,Ke=7681,Qe=7682,$e=7683,tn=34055,en=34056,nn=5386,rn=512,on=513,an=514,sn=515,un=516,ln=517,cn=518,hn=519,fn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*fn.DEG2RAD},radToDeg:function(t){return t*fn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function dn(t,e){this.x=t||0,this.y=e||0}function pn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function mn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function vn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(dn.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(dn.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign(pn,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-a,v=s*h+u*f+l*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var w=a*g;if(s=s*m+h*w,u=u*m+f*w,l=l*m+d*w,c=c*m+p*w,m===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}}),Object.defineProperties(pn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(pn.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return"XYZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"YXZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"ZXY"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"ZYX"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"YZX"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d):"XZY"===o&&(this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(o-l)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+l)/e,this._y=(u+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(fn.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-e)*c)/l,f=Math.sin(e*c)/l;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(mn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(a=new pn,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(a.setFromEuler(t))}),applyAxisAngle:function(){var t=new pn;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:(o=new mn,function(t){return o.copy(this).projectOnVector(t),this.sub(o)}),reflect:function(){var t=new mn;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(fn.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(vn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){void 0===s&&(s=new mn);for(var e=0,n=t.count;e<n;e++)s.x=t.getX(e),s.y=t.getY(e),s.z=t.getZ(e),s.applyMatrix3(this),t.setXYZ(e,s.x,s.y,s.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*m+a*y+s*w,i[6]=o*v+a*b+s*x,i[1]=u*p+l*g+c*_,i[4]=u*m+l*y+c*w,i[7]=u*v+l*b+c*x,i[2]=h*p+f*g+d*_,i[5]=h*m+f*y+d*w,i[8]=h*v+f*b+d*x,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,v=i*d+o*p+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-f*o)*y,r[2]=(l*o-a*u)*y,r[3]=p*y,r[4]=(f*i-a*c)*y,r[5]=(a*s-l*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var gn,yn,bn,_n,wn,xn,Mn,En,Sn,An={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===u&&(u=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),u.width=t.width,u.height=t.height;var n=u.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=u}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Tn=0;function qn(t,e,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:Tn++}),this.uuid=fn.generateUUID(),this.name="",this.image=void 0!==t?t:qn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:qn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Mt,this.wrapT=void 0!==r?r:Mt,this.magFilter=void 0!==i?i:Lt,this.minFilter=void 0!==o?o:It,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Zt,this.type=void 0!==s?s:kt,this.offset=new dn(0,0),this.repeat=new dn(1,1),this.center=new dn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Be,this.version=0,this.onUpdate=null}function Pn(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function Ln(t,e,n){this.width=t,this.height=e,this.scissor=new Pn(0,0,t,e),this.scissorTest=!1,this.viewport=new Pn(0,0,t,e),n=n||{},this.texture=new qn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Lt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function On(t,e,n){Ln.call(this,t,e,n),this.samples=4}function Cn(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function In(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||In.DefaultOrder}function Rn(){this.mask=1}qn.DEFAULT_IMAGE=void 0,qn.DEFAULT_MAPPING=pt,qn.prototype=Object.assign(Object.create(i.prototype),{constructor:qn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=fn.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(An.getDataURL(r[o]))}else i=An.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==pt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case xt:t.x=t.x-Math.floor(t.x);break;case Mt:t.x=t.x<0?0:1;break;case Et:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case xt:t.y=t.y-Math.floor(t.y);break;case Mt:t.y=t.y<0?0:1;break;case Et:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(qn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(Pn.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(Pn.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=t.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+l)/4,b=(u+f)/4,_=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=_/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=_/i),this.set(n,r,i,e),this}var w=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(u-f)/w,this.z=(l-s)/w,this.w=Math.acos((a+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Ln.prototype=Object.assign(Object.create(i.prototype),{constructor:Ln,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),On.prototype=Object.assign(Object.create(Ln.prototype),{constructor:On,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Ln.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(Cn.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,l,c,h,f,d,p,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Cn).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new mn;return function(e){var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=o*l,f=o*c,d=a*l,p=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-a*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=o*s}else if("YXZ"===t.order){var m=s*l,v=s*c,g=u*l,y=u*c;e[0]=m+y*a,e[4]=g*a-v,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=v*a-g,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order){m=s*l,v=s*c,g=u*l,y=u*c;e[0]=m-y*a,e[4]=-o*c,e[8]=g+v*a,e[1]=v+g*a,e[5]=o*l,e[9]=y-m*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){h=o*l,f=o*c,d=a*l,p=a*c;e[0]=s*l,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*c,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var b=o*s,_=o*u,w=a*s,x=a*u;e[0]=s*l,e[4]=x-b*c,e[8]=w*c+_,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=_*c+w,e[10]=b-x*c}else if("XZY"===t.order){b=o*s,_=o*u,w=a*s,x=a*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=b*c+x,e[5]=o*l,e[9]=_*c-w,e[2]=w*c-_,e[6]=a*l,e[10]=x*c+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(xn=new mn(0,0,0),Mn=new mn(1,1,1),function(t){return this.compose(xn,t,Mn)}),lookAt:(bn=new mn,_n=new mn,wn=new mn,function(t,e,n){var r=this.elements;return wn.subVectors(t,e),0===wn.lengthSq()&&(wn.z=1),wn.normalize(),bn.crossVectors(n,wn),0===bn.lengthSq()&&(1===Math.abs(n.z)?wn.x+=1e-4:wn.z+=1e-4,wn.normalize(),bn.crossVectors(n,wn)),bn.normalize(),_n.crossVectors(wn,bn),r[0]=bn.x,r[4]=_n.x,r[8]=wn.x,r[1]=bn.y,r[5]=_n.y,r[9]=wn.y,r[2]=bn.z,r[6]=_n.z,r[10]=wn.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],M=r[8],E=r[12],S=r[1],A=r[5],T=r[9],q=r[13],P=r[2],L=r[6],O=r[10],C=r[14],I=r[3],R=r[7],k=r[11],N=r[15];return i[0]=o*w+a*S+s*P+u*I,i[4]=o*x+a*A+s*L+u*R,i[8]=o*M+a*T+s*O+u*k,i[12]=o*E+a*q+s*C+u*N,i[1]=l*w+c*S+h*P+f*I,i[5]=l*x+c*A+h*L+f*R,i[9]=l*M+c*T+h*O+f*k,i[13]=l*E+c*q+h*C+f*N,i[2]=d*w+p*S+m*P+v*I,i[6]=d*x+p*A+m*L+v*R,i[10]=d*M+p*T+m*O+v*k,i[14]=d*E+p*q+m*C+v*N,i[3]=g*w+y*S+b*P+_*I,i[7]=g*x+y*A+b*L+_*R,i[11]=g*M+y*T+b*O+_*k,i[15]=g*E+y*q+b*C+_*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new mn;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=d*y*h-g*p*h+g*c*m-l*y*m-d*c*b+l*p*b,w=v*p*h-f*y*h-v*c*m+u*y*m+f*c*b-u*p*b,x=f*g*h-v*d*h+v*l*m-u*g*m-f*l*b+u*d*b,M=v*d*c-f*g*c-v*l*p+u*g*p+f*l*y-u*d*y,E=i*_+o*w+a*x+s*M;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var A=1/E;return n[0]=_*A,n[1]=(g*p*s-d*y*s-g*a*m+o*y*m+d*a*b-o*p*b)*A,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*b+o*c*b)*A,n[3]=(d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m)*A,n[4]=w*A,n[5]=(f*y*s-v*p*s+v*a*m-i*y*m-f*a*b+i*p*b)*A,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*b-i*c*b)*A,n[7]=(u*p*s-f*c*s+f*a*h-i*p*h-u*a*m+i*c*m)*A,n[8]=x*A,n[9]=(v*d*s-f*g*s-v*o*m+i*g*m+f*o*b-i*d*b)*A,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*b+i*l*b)*A,n[11]=(f*l*s-u*d*s-f*o*h+i*d*h+u*o*m-i*l*m)*A,n[12]=M*A,n[13]=(f*g*a-v*d*a+v*o*p-i*g*p-f*o*y+i*d*y)*A,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*A,n[15]=(u*d*a-f*l*a+f*o*c-i*d*c-u*o*p+i*l*p)*A,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,m=o*c,v=a*c,g=s*u,y=s*l,b=s*c,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(d+y)*x,r[9]=(m-g)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:(gn=new mn,yn=new Cn,function(t,e,n){var r=this.elements,i=gn.set(r[0],r[1],r[2]).length(),o=gn.set(r[4],r[5],r[6]).length(),a=gn.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],yn.copy(this);var s=1/i,u=1/o,l=1/a;return yn.elements[0]*=s,yn.elements[1]*=s,yn.elements[2]*=s,yn.elements[4]*=u,yn.elements[5]*=u,yn.elements[6]*=u,yn.elements[8]*=l,yn.elements[9]*=l,yn.elements[10]*=l,e.setFromRotationMatrix(yn),n.x=i,n.y=o,n.z=a,this}),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),In.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],In.DefaultOrder="XYZ",Object.defineProperties(In.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(In.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=fn.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return void 0===En&&(En=new Cn),En.makeRotationFromQuaternion(t),this.setFromRotationMatrix(En,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return void 0===Sn&&(Sn=new pn),Sn.setFromEuler(this),this.setFromQuaternion(Sn,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new mn(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(Rn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var kn,Nn,Bn,Dn,jn,Fn,zn,Un,Vn,Gn,Hn,Wn,Yn,Xn,Zn,Jn,Kn,Qn,$n,tr,er=0;function nr(){Object.defineProperty(this,"id",{value:er++}),this.uuid=fn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=nr.DefaultUp.clone();var t=new mn,e=new In,n=new pn,r=new mn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Cn},normalMatrix:{value:new vn}}),this.matrix=new Cn,this.matrixWorld=new Cn,this.matrixAutoUpdate=nr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Rn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function rr(){nr.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ir(t,e){this.min=void 0!==t?t:new mn(1/0,1/0,1/0),this.max=void 0!==e?e:new mn(-1/0,-1/0,-1/0)}function or(t,e){this.center=void 0!==t?t:new mn,this.radius=void 0!==e?e:0}function ar(t,e){this.origin=void 0!==t?t:new mn,this.direction=void 0!==e?e:new mn}function sr(t,e,n){this.a=void 0!==t?t:new mn,this.b=void 0!==e?e:new mn,this.c=void 0!==n?n:new mn}nr.DefaultUp=new mn(0,1,0),nr.DefaultMatrixAutoUpdate=!0,nr.prototype=Object.assign(Object.create(i.prototype),{constructor:nr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(jn=new pn,function(t,e){return jn.setFromAxisAngle(t,e),this.quaternion.multiply(jn),this}),rotateOnWorldAxis:function(){var t=new pn;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new mn(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new mn(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new mn(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new mn;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new mn(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new mn(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new mn(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(Dn=new Cn,function(t){return t.applyMatrix4(Dn.getInverse(this.matrixWorld))}),lookAt:function(){var t=new pn,e=new Cn,n=new mn,r=new mn;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(r,n,this.up):e.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent({type:"added"})):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent({type:"removed"})),this},attach:(Bn=new Cn,function(t){return this.updateWorldMatrix(!0,!1),Bn.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Bn.multiply(t.parent.matrixWorld)),t.applyMatrix(Bn),t.updateWorldMatrix(!1,!1),this.add(t),this}),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new mn),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(kn=new mn,Nn=new mn,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new pn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(kn,t,Nn),t}),getWorldScale:function(){var t=new mn,e=new pn;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new mn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Re&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var l=a[s];i(t.shapes,l)}else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,u=this.material.length;s<u;s++)c.push(i(t.materials,this.material[s]));r.material=c}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(e){var h=m(t.geometries),f=m(t.materials),d=m(t.textures),p=m(t.images);a=m(t.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),rr.prototype=Object.assign(Object.create(nr.prototype),{constructor:rr,isScene:!0,copy:function(t,e){return nr.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=nr.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(ir.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new mn;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new mn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new mn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,r=new mn;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,n=a.length;e<n;e++)r.copy(a[e]),r.applyMatrix4(i.matrixWorld),t.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,n=s.count;e<n;e++)r.fromBufferAttribute(s,e).applyMatrix4(i.matrixWorld),t.expandByPoint(r)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(i),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new mn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(zn=new mn,function(t){return this.clampPoint(t.center,zn),zn.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){var t=new mn,e=new mn,n=new mn,r=new mn,i=new mn,o=new mn,a=new mn,s=new mn,u=new mn,l=new mn;function c(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=u.x*Math.abs(a.x)+u.y*Math.abs(a.y)+u.z*Math.abs(a.z),l=t.dot(a),c=e.dot(a),h=n.dot(a);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(e,t),i.subVectors(n,e),o.subVectors(t,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!c(h)&&(!!c(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),c(h=[l.x,l.y,l.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new mn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new mn;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new mn;return function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(Fn=[new mn,new mn,new mn,new mn,new mn,new mn,new mn,new mn],function(t){return this.isEmpty()||(Fn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Fn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Fn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Fn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Fn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Fn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Fn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Fn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Fn)),this}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(or.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){void 0===Un&&(Un=new ir);var n=this.center;void 0!==e?n.copy(e):Un.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new mn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new ir),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(ar.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new mn),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new mn;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new mn),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new mn;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:(Gn=new mn,Hn=new mn,Wn=new mn,function(t,e,n,r){Gn.copy(t).add(e).multiplyScalar(.5),Hn.copy(e).sub(t).normalize(),Wn.copy(this.origin).sub(Gn);var i,o,a,s,u=.5*t.distanceTo(e),l=-this.direction.dot(Hn),c=Wn.dot(this.direction),h=-Wn.dot(Hn),f=Wn.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(o=l*c-h,s=u*d,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var p=1/d;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*h)+f}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+f):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Hn).multiplyScalar(o).add(Gn),a}),intersectSphere:function(){var t=new mn;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:(Vn=new mn,function(t){return null!==this.intersectBox(t,Vn)}),intersectTriangle:function(){var t=new mn,e=new mn,n=new mn,r=new mn;return function(i,o,a,s,u){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}t.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>c)return null;var d=-l*t.dot(r);return d<0?null:this.at(d/c,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(sr,{getNormal:(Xn=new mn,function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new mn),r.subVectors(n,e),Xn.subVectors(t,e),r.cross(Xn);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var t=new mn,e=new mn,n=new mn;return function(r,i,o,a,s){t.subVectors(a,i),e.subVectors(o,i),n.subVectors(r,i);var u=t.dot(t),l=t.dot(e),c=t.dot(n),h=e.dot(e),f=e.dot(n),d=u*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new mn),0===d)return s.set(-2,-1,-1);var p=1/d,m=(h*c-l*f)*p,v=(u*f-l*c)*p;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var t=new mn;return function(e,n,r,i){return sr.getBarycoord(e,n,r,i,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:(Yn=new mn,function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,Yn),s.set(0,0),s.addScaledVector(i,Yn.x),s.addScaledVector(o,Yn.y),s.addScaledVector(a,Yn.z),s}),isFrontFacing:function(){var t=new mn,e=new mn;return function(n,r,i,o){return t.subVectors(i,r),e.subVectors(n,r),t.cross(e).dot(o)<0}}()}),Object.assign(sr.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new mn,e=new mn;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new mn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return sr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new mn),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return sr.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,r,i){return sr.getUV(t,this.a,this.b,this.c,e,n,r,i)},containsPoint:function(t){return sr.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return sr.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(Zn=new mn,Jn=new mn,Kn=new mn,Qn=new mn,$n=new mn,tr=new mn,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new mn);var n,r,i=this.a,o=this.b,a=this.c;Zn.subVectors(o,i),Jn.subVectors(a,i),Qn.subVectors(t,i);var s=Zn.dot(Qn),u=Jn.dot(Qn);if(s<=0&&u<=0)return e.copy(i);$n.subVectors(t,o);var l=Zn.dot($n),c=Jn.dot($n);if(l>=0&&c<=l)return e.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(Zn,n);tr.subVectors(t,a);var f=Zn.dot(tr),d=Jn.dot(tr);if(d>=0&&f<=d)return e.copy(a);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),e.copy(i).addScaledVector(Jn,r);var m=l*d-f*c;if(m<=0&&c-l>=0&&f-d>=0)return Kn.subVectors(a,o),r=(c-l)/(c-l+(f-d)),e.copy(o).addScaledVector(Kn,r);var v=1/(m+p+h);return n=p*v,r=h*v,e.copy(i).addScaledVector(Zn,n).addScaledVector(Jn,r)}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var ur,lr,cr,hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fr(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function dr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function pr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function mr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function vr(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new mn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new fr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(fr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=fn.euclideanModulo(t,1),e=fn.clamp(e,0,1),n=fn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=dr(i,r,t+1/3),this.g=dr(i,r,t),this.b=dr(i,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,c=(l=n[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(l=hr[t])?this.setHex(l):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=pr(t.r),this.g=pr(t.g),this.b=pr(t.b),this},copyLinearToSRGB:function(t){return this.r=mr(t.r),this.g=mr(t.g),this.b=mr(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:e=(i-o)/l+(i<o?6:0);break;case i:e=(o-r)/l+2;break;case o:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(cr={},function(t,e,n){return this.getHSL(cr),cr.h+=t,cr.s+=e,cr.l+=n,this.setHSL(cr.h,cr.s,cr.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:(ur={h:0,s:0,l:0},lr={h:0,s:0,l:0},function(t,e){this.getHSL(ur),t.getHSL(lr);var n=fn.lerp(ur.h,lr.h,e),r=fn.lerp(ur.s,lr.s,e),i=fn.lerp(ur.l,lr.l,e);return this.setHSL(n,r,i),this}),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(vr.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var gr=0;function yr(){Object.defineProperty(this,"id",{value:gr++}),this.uuid=fn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=L,this.side=w,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=A,this.opacity=1,this.transparent=!1,this.blendSrc=G,this.blendDst=H,this.blendEquation=k,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tt,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=hn,this.stencilRef=0,this.stencilMask=255,this.stencilFail=Je,this.stencilZFail=Je,this.stencilZPass=Je,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function br(t){yr.call(this),this.type="MeshBasicMaterial",this.color=new fr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function _r(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function wr(t,e,n){_r.call(this,new Int8Array(t),e,n)}function xr(t,e,n){_r.call(this,new Uint8Array(t),e,n)}function Mr(t,e,n){_r.call(this,new Uint8ClampedArray(t),e,n)}function Er(t,e,n){_r.call(this,new Int16Array(t),e,n)}function Sr(t,e,n){_r.call(this,new Uint16Array(t),e,n)}function Ar(t,e,n){_r.call(this,new Int32Array(t),e,n)}function Tr(t,e,n){_r.call(this,new Uint32Array(t),e,n)}function qr(t,e,n){_r.call(this,new Float32Array(t),e,n)}function Pr(t,e,n){_r.call(this,new Float64Array(t),e,n)}function Lr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Or(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}yr.prototype=Object.assign(Object.create(i.prototype),{constructor:yr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===E;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==L&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==w&&(n.side=this.side),this.vertexColors!==A&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWrite=t.stencilWrite,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilMask=t.stencilMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),br.prototype=Object.create(yr.prototype),br.prototype.constructor=br,br.prototype.isMeshBasicMaterial=!0,br.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(_r.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(_r.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new fr),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new dn),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new mn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Pn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),wr.prototype=Object.create(_r.prototype),wr.prototype.constructor=wr,xr.prototype=Object.create(_r.prototype),xr.prototype.constructor=xr,Mr.prototype=Object.create(_r.prototype),Mr.prototype.constructor=Mr,Er.prototype=Object.create(_r.prototype),Er.prototype.constructor=Er,Sr.prototype=Object.create(_r.prototype),Sr.prototype.constructor=Sr,Ar.prototype=Object.create(_r.prototype),Ar.prototype.constructor=Ar,Tr.prototype=Object.create(_r.prototype),Tr.prototype.constructor=Tr,qr.prototype=Object.create(_r.prototype),qr.prototype.constructor=qr,Pr.prototype=Object.create(_r.prototype),Pr.prototype.constructor=Pr,Object.assign(Lr.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var l=0;l<u;l++)e[l]={name:s[l].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,f=h.length;if(f>0){c=[];for(l=0;l<f;l++)c[l]={name:h[l].name,data:[]};this.morphTargets.normal=c}var d=t.skinIndices,p=t.skinWeights,m=d.length===r.length,v=p.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var _,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=g.color;this.colors.push(x,x,x)}if(!0===o)void 0!==(_=i[0][l])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new dn,new dn,new dn));if(!0===a)void 0!==(_=i[1][l])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new dn,new dn,new dn));for(var M=0;M<u;M++){var E=s[M].vertices;e[M].data.push(E[g.a],E[g.b],E[g.c])}for(M=0;M<f;M++){var S=h[M].vertexNormals[l];c[M].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var Cr,Ir,Rr,kr=1;function Nr(){Object.defineProperty(this,"id",{value:kr+=2}),this.uuid=fn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Br(t,e){nr.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Nr,this.material=void 0!==e?e:new br({color:16777215*Math.random()}),this.drawMode=Re,this.updateMorphTargets()}Nr.prototype=Object.assign(Object.create(i.prototype),{constructor:Nr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Or(t)>65535?Tr:Sr)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new _r(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new vn).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);var r=this.attributes.tangent;void 0!==r&&((new vn).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Cn;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Cn;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Cn;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Cn;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new Cn;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:(Rr=new nr,function(t){Rr.lookAt(t),Rr.updateMatrix(),this.applyMatrix(Rr.matrix)}),center:(Ir=new mn,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ir).negate(),this.translate(Ir.x,Ir.y,Ir.z),this}),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new qr(3*e.vertices.length,3),r=new qr(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new qr(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new qr(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Lr).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new _r(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new _r(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new _r(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new _r(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new _r(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],f=new qr(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var d=new qr(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new qr(4*t.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:(Cr=new ir,function(){null===this.boundingBox&&(this.boundingBox=new ir);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Cr.setFromBufferAttribute(i),this.boundingBox.expandByPoint(Cr.min),this.boundingBox.expandByPoint(Cr.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}),computeBoundingSphere:function(){var t=new ir,e=new ir,n=new mn;return function(){null===this.boundingSphere&&(this.boundingSphere=new or);var r=this.attributes.position,i=this.morphAttributes.position;if(r){var o=this.boundingSphere.center;if(t.setFromBufferAttribute(r),i)for(var a=0,s=i.length;a<s;a++){var u=i[a];e.setFromBufferAttribute(u),t.expandByPoint(e.min),t.expandByPoint(e.max)}t.getCenter(o);var l=0;for(a=0,s=r.count;a<s;a++)n.fromBufferAttribute(r,a),l=Math.max(l,o.distanceToSquared(n));if(i)for(a=0,s=i.length;a<s;a++)for(var c=0,h=(u=i[a]).count;c<h;c++)n.fromBufferAttribute(u,c),l=Math.max(l,o.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new _r(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,l=e.normal.array,c=new mn,h=new mn,f=new mn,d=new mn,p=new mn;if(t){var m=t.array;for(i=0,o=t.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],u=3*m[i+2],c.fromArray(n,a),h.fromArray(n,s),f.fromArray(n,u),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),l[a]+=d.x,l[a+1]+=d.y,l[a+2]+=d.z,l[s]+=d.x,l[s+1]+=d.y,l[s+2]+=d.z,l[u]+=d.x,l[u+1]+=d.y,l[u+2]+=d.z}else for(i=0,o=n.length;i<o;i+=9)c.fromArray(n,i),h.fromArray(n,i+3),f.fromArray(n,i+6),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),l[i]=d.x,l[i+1]=d.y,l[i+2]=d.z,l[i+3]=d.x,l[i+4]=d.y,l[i+5]=d.z,l[i+6]=d.x,l[i+7]=d.y,l[i+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,u=Math.min(a.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new mn;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=new n.constructor(e.length*r),o=0,a=0,s=0,u=e.length;s<u;s++){o=e[s]*r;for(var l=0;l<r;l++)i[a++]=n[o++]}return new _r(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Nr,n=this.index.array,r=this.attributes;for(var i in r){var o=t(r[i],n);e.addAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],u=a[i],l=0,c=u.length;l<c;l++){o=t(u[l],n);s.push(o)}e.morphAttributes[i]=s}for(var h=this.groups,f=(l=0,h.length);l<f;l++){var d=h[l];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(f=i[n]).toJSON();""!==f.name&&(o.name=f.name),t.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],l=[],c=0,h=u.length;c<h;c++){var f;o=(f=u[c]).toJSON();""!==f.name&&(o.name=f.name),l.push(o)}l.length>0&&(a[n]=l,s=!0)}s&&(t.data.morphAttributes=a);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(t.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),t},clone:function(){return(new Nr).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],l=s[e];for(n=0,r=l.length;n<r;n++)u.push(l[n].clone());this.morphAttributes[e]=u}var c=t.groups;for(n=0,r=c.length;n<r;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Br.prototype=Object.assign(Object.create(nr.prototype),{constructor:Br,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return nr.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var t=new Cn,e=new ar,n=new or,r=new mn,i=new mn,o=new mn,a=new mn,s=new mn,u=new mn,l=new mn,c=new mn,h=new mn,f=new dn,d=new dn,p=new dn,m=new mn,v=new mn;function g(t,e,n,r,i,o,a,s){if(null===(e.side===x?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==M,s)))return null;v.copy(s),v.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(v);return u<n.near||u>n.far?null:{distance:u,point:v.clone(),object:t}}function y(t,e,n,v,y,b,_,w,x,M,E){r.fromBufferAttribute(y,x),i.fromBufferAttribute(y,M),o.fromBufferAttribute(y,E);var S=t.morphTargetInfluences;if(e.morphTargets&&b&&S){l.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var A=0,T=b.length;A<T;A++){var q=S[A],P=b[A];0!==q&&(a.fromBufferAttribute(P,x),s.fromBufferAttribute(P,M),u.fromBufferAttribute(P,E),l.addScaledVector(a.sub(r),q),c.addScaledVector(s.sub(i),q),h.addScaledVector(u.sub(o),q))}r.add(l),i.add(c),o.add(h)}var L=g(t,e,n,v,r,i,o,m);if(L){_&&(f.fromBufferAttribute(_,x),d.fromBufferAttribute(_,M),p.fromBufferAttribute(_,E),L.uv=sr.getUV(m,r,i,o,f,d,p,new dn)),w&&(f.fromBufferAttribute(w,x),d.fromBufferAttribute(w,M),p.fromBufferAttribute(w,E),L.uv2=sr.getUV(m,r,i,o,f,d,p,new dn));var O=new vr(x,M,E);sr.getNormal(r,i,o,O.normal),L.face=O}return L}return function(r,i){var o,a=this.geometry,s=this.material,u=this.matrixWorld;if(void 0!==s&&(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)&&(t.getInverse(u),e.copy(r.ray).applyMatrix4(t),null===a.boundingBox||!1!==e.intersectsBox(a.boundingBox))))if(a.isBufferGeometry){var l,c,h,v,b,_,w,x,M,E=a.index,S=a.attributes.position,A=a.morphAttributes.position,T=a.attributes.uv,q=a.attributes.uv2,P=a.groups,L=a.drawRange;if(null!==E)if(Array.isArray(s))for(v=0,_=P.length;v<_;v++)for(M=s[(x=P[v]).materialIndex],b=Math.max(x.start,L.start),w=Math.min(x.start+x.count,L.start+L.count);b<w;b+=3)l=E.getX(b),c=E.getX(b+1),h=E.getX(b+2),(o=y(this,M,r,e,S,A,T,q,l,c,h))&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=x.materialIndex,i.push(o));else for(v=Math.max(0,L.start),_=Math.min(E.count,L.start+L.count);v<_;v+=3)l=E.getX(v),c=E.getX(v+1),h=E.getX(v+2),(o=y(this,s,r,e,S,A,T,q,l,c,h))&&(o.faceIndex=Math.floor(v/3),i.push(o));else if(void 0!==S)if(Array.isArray(s))for(v=0,_=P.length;v<_;v++)for(M=s[(x=P[v]).materialIndex],b=Math.max(x.start,L.start),w=Math.min(x.start+x.count,L.start+L.count);b<w;b+=3)(o=y(this,M,r,e,S,A,T,q,l=b,c=b+1,h=b+2))&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=x.materialIndex,i.push(o));else for(v=Math.max(0,L.start),_=Math.min(S.count,L.start+L.count);v<_;v+=3)(o=y(this,s,r,e,S,A,T,q,l=v,c=v+1,h=v+2))&&(o.faceIndex=Math.floor(v/3),i.push(o))}else if(a.isGeometry){var O,C,I,R,k=Array.isArray(s),N=a.vertices,B=a.faces,D=a.faceVertexUvs[0];D.length>0&&(R=D);for(var j=0,F=B.length;j<F;j++){var z=B[j],U=k?s[z.materialIndex]:s;if(void 0!==U&&(O=N[z.a],C=N[z.b],I=N[z.c],o=g(this,U,r,e,O,C,I,m))){if(R&&R[j]){var V=R[j];f.copy(V[0]),d.copy(V[1]),p.copy(V[2]),o.uv=sr.getUV(m,O,C,I,f,d,p,new dn)}o.face=z,o.faceIndex=j,i.push(o)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Dr=0;function jr(){Object.defineProperty(this,"id",{value:Dr+=2}),this.uuid=fn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Fr(t,e,n,r,i,o){jr.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new zr(t,e,n,r,i,o)),this.mergeVertices()}function zr(t,e,n,r,i,o){Nr.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],u=[],l=[],c=[],h=0,f=0;function d(t,e,n,r,i,o,d,p,m,v,g){var y,b,_=o/m,w=d/v,x=o/2,M=d/2,E=p/2,S=m+1,A=v+1,T=0,q=0,P=new mn;for(b=0;b<A;b++){var L=b*w-M;for(y=0;y<S;y++){var O=y*_-x;P[t]=O*r,P[e]=L*i,P[n]=E,u.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[n]=p>0?1:-1,l.push(P.x,P.y,P.z),c.push(y/m),c.push(1-b/v),T+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var C=h+y+S*b,I=h+y+S*(b+1),R=h+(y+1)+S*(b+1),k=h+(y+1)+S*b;s.push(C,I,k),s.push(I,R,k),q+=6}a.addGroup(f,q,g),f+=q,h+=T}d("z","y","x",-1,-1,n,e,t,o,i,0),d("z","y","x",1,-1,n,e,-t,o,i,1),d("x","z","y",1,1,t,n,e,r,o,2),d("x","z","y",1,-1,t,n,-e,r,o,3),d("x","y","z",1,-1,t,e,n,r,i,4),d("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new qr(u,3)),this.addAttribute("normal",new qr(l,3)),this.addAttribute("uv",new qr(c,2))}function Ur(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Vr(t){for(var e={},n=0;n<t.length;n++){var r=Ur(t[n]);for(var i in r)e[i]=r[i]}return e}jr.prototype=Object.assign(Object.create(i.prototype),{constructor:jr,isGeometry:!0,applyMatrix:function(t){for(var e=(new vn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(t)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Cn;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Cn;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Cn;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Cn;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new Cn;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new nr;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=0;l<i.length;l+=3)e.vertices.push((new mn).fromArray(i,l)),void 0!==a&&e.colors.push((new fr).fromArray(a,l));function c(t,n,r,i){var l=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],c=new vr(t,n,r,void 0===o?[]:[(new mn).fromArray(o,3*t),(new mn).fromArray(o,3*n),(new mn).fromArray(o,3*r)],l,i);e.faces.push(c),void 0!==s&&e.faceVertexUvs[0].push([(new dn).fromArray(s,2*t),(new dn).fromArray(s,2*n),(new dn).fromArray(s,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new dn).fromArray(u,2*t),(new dn).fromArray(u,2*n),(new dn).fromArray(u,2*r)])}var h=t.groups;if(h.length>0)for(l=0;l<h.length;l++)for(var f=h[l],d=f.start,p=d,m=d+f.count;p<m;p+=3)void 0!==n?c(n[p],n[p+1],n[p+2],f.materialIndex):c(p,p+1,p+2,f.materialIndex);else if(void 0!==n)for(l=0;l<n.length;l+=3)c(n[l],n[l+1],n[l+2]);else for(l=0;l<i.length/3;l+=3)c(l,l+1,l+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new mn;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Cn;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new mn,e=new mn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new mn;if(t){var s,u,l,c=new mn,h=new mn;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],l=this.vertices[o.c],c.subVectors(l,u),h.subVectors(s,u),c.cross(h),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var f=(o=this.faces[r]).vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(n=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new jr;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new mn,l={a:new mn,b:new mn,c:new mn},a.push(u),s.push(l)}var u,l,c=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=c.faceNormals[n],l=c.vertexNormals[n],u.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ir),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new or),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,l=this.colors,c=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new vn).getNormalMatrix(e));for(var h=0,f=a.length;h<f;h++){var d=a[h].clone();void 0!==e&&d.applyMatrix4(e),o.push(d)}for(h=0,f=c.length;h<f;h++)l.push(c[h].clone());for(h=0,f=u.length;h<f;h++){var p,m,v,g=u[h],y=g.vertexNormals,b=g.vertexColors;(p=new vr(g.a+i,g.b+i,g.c+i)).normal.copy(g.normal),void 0!==r&&p.normal.applyMatrix3(r).normalize();for(var _=0,w=y.length;_<w;_++)m=y[_].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),p.vertexNormals.push(m);p.color.copy(g.color);for(_=0,w=b.length;_<w;_++)v=b[_],p.vertexColors.push(v.clone());p.materialIndex=g.materialIndex+n,s.push(p)}for(h=0,f=t.faceVertexUvs.length;h<f;h++){var x=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(_=0,w=x.length;_<w;_++){for(var M=x[_],E=[],S=0,A=M.length;S<A;S++)E.push(M[S].clone());this.faceVertexUvs[h].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===u[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(u[e]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[e]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new mn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===e&&(r=[]),a&&a.length===e&&(i=[]);for(n=0;n<e;n++){var s=t[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},l=[],c={},h=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=M(b,0,0),b=M(b,1,!0),b=M(b,2,!1),b=M(b,3,p),b=M(b,4,m),b=M(b,5,v),b=M(b,6,g),b=M(b,7,y),a.push(b),a.push(d.a,d.b,d.c),a.push(d.materialIndex),p){var _=this.faceVertexUvs[0][i];a.push(A(_[0]),A(_[1]),A(_[2]))}if(m&&a.push(E(d.normal)),v){var w=d.vertexNormals;a.push(E(w[0]),E(w[1]),E(w[2]))}if(g&&a.push(S(d.color)),y){var x=d.vertexColors;a.push(S(x[0]),S(x[1]),S(x[2]))}}function M(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]||(u[e]=s.length/3,s.push(t.x,t.y,t.z)),u[e]}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]||(c[e]=l.length,l.push(t.getHex())),c[e]}function A(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]||(f[e]=h.length/2,h.push(t.x,t.y)),f[e]}return t.data={},t.data.vertices=r,t.data.normals=s,l.length>0&&(t.data.colors=l),h.length>0&&(t.data.uvs=[h]),t.data.faces=a,t},clone:function(){return(new jr).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=c.length;r<i;r++){var h=c[r],f=[];for(o=0,a=h.length;o<a;o++){var d=h[o];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],r=0,i=p[e].vertices.length;r<i;r++)m.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(m.normals=[],r=0,i=p[e].normals.length;r<i;r++)m.normals.push(p[e].normals[r].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],r=0,i=v[e].vertexNormals.length;r<i;r++){var y=v[e].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],r=0,i=v[e].faceNormals.length;r<i;r++)g.faceNormals.push(v[e].faceNormals[r].clone());this.morphNormals.push(g)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var w=t.skinIndices;for(e=0,n=w.length;e<n;e++)this.skinIndices.push(w[e].clone());var x=t.lineDistances;for(e=0,n=x.length;e<n;e++)this.lineDistances.push(x[e]);var M=t.boundingBox;null!==M&&(this.boundingBox=M.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Fr.prototype=Object.create(jr.prototype),Fr.prototype.constructor=Fr,zr.prototype=Object.create(Nr.prototype),zr.prototype.constructor=zr;var Gr={clone:Ur,merge:Vr};function Hr(t){yr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Wr(){nr.call(this),this.type="Camera",this.matrixWorldInverse=new Cn,this.projectionMatrix=new Cn,this.projectionMatrixInverse=new Cn}function Yr(t,e,n,r){Wr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Hr.prototype=Object.create(yr.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isShaderMaterial=!0,Hr.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ur(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Hr.prototype.toJSON=function(t){var e=yr.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(e.extensions=i),e},Wr.prototype=Object.assign(Object.create(nr.prototype),{constructor:Wr,isCamera:!0,copy:function(t,e){return nr.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){nr.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Yr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Yr,isPerspectiveCamera:!0,copy:function(t,e){return Wr.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*fn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*fn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*fn.RAD2DEG*Math.atan(Math.tan(.5*fn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*fn.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=nr.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var Xr,Zr;function Jr(t,e,n,r){nr.call(this),this.type="CubeCamera";var i=new Yr(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new mn(1,0,0)),this.add(i);var o=new Yr(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new mn(-1,0,0)),this.add(o);var a=new Yr(90,1,t,e);a.up.set(0,0,1),a.lookAt(new mn(0,1,0)),this.add(a);var s=new Yr(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new mn(0,-1,0)),this.add(s);var u=new Yr(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new mn(0,0,1)),this.add(u);var l=new Yr(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new mn(0,0,-1)),this.add(l),r=r||{format:Xt,magFilter:Lt,minFilter:Lt},this.renderTarget=new Kr(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),r=this.renderTarget,c=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,i),t.setRenderTarget(r,1),t.render(e,o),t.setRenderTarget(r,2),t.render(e,a),t.setRenderTarget(r,3),t.render(e,s),t.setRenderTarget(r,4),t.render(e,u),r.texture.generateMipmaps=c,t.setRenderTarget(r,5),t.render(e,l),t.setRenderTarget(n)},this.clear=function(t,e,n,r){for(var i=t.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,n,r);t.setRenderTarget(i)}}function Kr(t,e,n){Ln.call(this,t,e,n)}function Qr(t,e,n,r,i,o,a,s,u,l,c,h){qn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:St,this.minFilter=void 0!==l?l:St,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function $r(t,e){this.normal=void 0!==t?t:new mn(1,0,0),this.constant=void 0!==e?e:0}function ti(t,e,n,r,i,o){this.planes=[void 0!==t?t:new $r,void 0!==e?e:new $r,void 0!==n?n:new $r,void 0!==r?r:new $r,void 0!==i?i:new $r,void 0!==o?o:new $r]}Jr.prototype=Object.create(nr.prototype),Jr.prototype.constructor=Jr,Kr.prototype=Object.create(Ln.prototype),Kr.prototype.constructor=Kr,Kr.prototype.isWebGLRenderTargetCube=!0,Kr.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new rr,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new Hr({type:"CubemapFromEquirect",uniforms:Ur(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:x,blending:P});i.uniforms.tEquirect.value=e;var o=new Br(new zr(5,5,5),i);n.add(o);var a=new Jr(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(t,n),o.geometry.dispose(),o.material.dispose(),this},Qr.prototype=Object.create(qn.prototype),Qr.prototype.constructor=Qr,Qr.prototype.isDataTexture=!0,Object.assign($r.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new mn,e=new mn;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new mn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new mn;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new mn);var r=e.delta(t),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new mn),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new mn,e=new vn;return function(n,r){var i=r||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(ti.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-r,c-s,p-h,y-m).normalize(),e[1].setComponents(a+r,c+s,p+h,y+m).normalize(),e[2].setComponents(a+i,c+u,p+f,y+v).normalize(),e[3].setComponents(a-i,c-u,p-f,y-v).normalize(),e[4].setComponents(a-o,c-l,p-d,y-g).normalize(),e[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this},intersectsObject:(Zr=new or,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Zr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Zr)}),intersectsSprite:function(){var t=new or;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:(Xr=new mn,function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(Xr.x=r.normal.x>0?t.max.x:t.min.x,Xr.y=r.normal.y>0?t.max.y:t.min.y,Xr.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Xr)<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var ei={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ni={common:{diffuse:{value:new fr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new vn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new dn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new fr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new vn}},sprite:{diffuse:{value:new fr(15658734)},opacity:{value:1},center:{value:new dn(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new vn}}},ri={basic:{uniforms:Vr([ni.common,ni.specularmap,ni.envmap,ni.aomap,ni.lightmap,ni.fog]),vertexShader:ei.meshbasic_vert,fragmentShader:ei.meshbasic_frag},lambert:{uniforms:Vr([ni.common,ni.specularmap,ni.envmap,ni.aomap,ni.lightmap,ni.emissivemap,ni.fog,ni.lights,{emissive:{value:new fr(0)}}]),vertexShader:ei.meshlambert_vert,fragmentShader:ei.meshlambert_frag},phong:{uniforms:Vr([ni.common,ni.specularmap,ni.envmap,ni.aomap,ni.lightmap,ni.emissivemap,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.gradientmap,ni.fog,ni.lights,{emissive:{value:new fr(0)},specular:{value:new fr(1118481)},shininess:{value:30}}]),vertexShader:ei.meshphong_vert,fragmentShader:ei.meshphong_frag},standard:{uniforms:Vr([ni.common,ni.envmap,ni.aomap,ni.lightmap,ni.emissivemap,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.roughnessmap,ni.metalnessmap,ni.fog,ni.lights,{emissive:{value:new fr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ei.meshphysical_vert,fragmentShader:ei.meshphysical_frag},matcap:{uniforms:Vr([ni.common,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.fog,{matcap:{value:null}}]),vertexShader:ei.meshmatcap_vert,fragmentShader:ei.meshmatcap_frag},points:{uniforms:Vr([ni.points,ni.fog]),vertexShader:ei.points_vert,fragmentShader:ei.points_frag},dashed:{uniforms:Vr([ni.common,ni.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ei.linedashed_vert,fragmentShader:ei.linedashed_frag},depth:{uniforms:Vr([ni.common,ni.displacementmap]),vertexShader:ei.depth_vert,fragmentShader:ei.depth_frag},normal:{uniforms:Vr([ni.common,ni.bumpmap,ni.normalmap,ni.displacementmap,{opacity:{value:1}}]),vertexShader:ei.normal_vert,fragmentShader:ei.normal_frag},sprite:{uniforms:Vr([ni.sprite,ni.fog]),vertexShader:ei.sprite_vert,fragmentShader:ei.sprite_frag},background:{uniforms:{uvTransform:{value:new vn},t2D:{value:null}},vertexShader:ei.background_vert,fragmentShader:ei.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ei.cube_vert,fragmentShader:ei.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ei.equirect_vert,fragmentShader:ei.equirect_frag},distanceRGBA:{uniforms:Vr([ni.common,ni.displacementmap,{referencePosition:{value:new mn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ei.distanceRGBA_vert,fragmentShader:ei.distanceRGBA_frag},shadow:{uniforms:Vr([ni.lights,ni.fog,{color:{value:new fr(0)},opacity:{value:1}}]),vertexShader:ei.shadow_vert,fragmentShader:ei.shadow_frag}};function ii(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function oi(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);void 0===i?e.set(n,function(e,n){var r=e.array,i=e.dynamic?35048:35044,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(n,r)):i.version<n.version&&(!function(e,n,r){var i=n.array,o=n.updateRange;t.bindBuffer(r,e),!1===n.dynamic?t.bufferData(r,i,35044):-1===o.count?t.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function ai(t,e,n,r){jr.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new si(t,e,n,r)),this.mergeVertices()}function si(t,e,n,r){Nr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i,o,a=(t=t||1)/2,s=(e=e||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,f=t/u,d=e/l,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<c;i++){var b=i*f-a;m.push(b,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/l)}}for(o=0;o<l;o++)for(i=0;i<u;i++){var _=i+c*o,w=i+c*(o+1),x=i+1+c*(o+1),M=i+1+c*o;p.push(_,w,M),p.push(w,x,M)}this.setIndex(p),this.addAttribute("position",new qr(m,3)),this.addAttribute("normal",new qr(v,3)),this.addAttribute("uv",new qr(g,2))}function ui(t,e,n,r){var i,o,a=new fr(0),s=0,u=null,l=0;function c(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),c(a,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){c(a,s=t)},render:function(e,r,h,f){var d=r.background,p=t.vr,m=p.getSession&&p.getSession();if(m&&"additive"===m.environmentBlendMode&&(d=null),null===d?(c(a,s),u=null,l=0):d&&d.isColor&&(c(d,1),f=!0,u=null,l=0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===o&&((o=new Br(new zr(1,1,1),new Hr({type:"BackgroundCubeMaterial",uniforms:Ur(ri.cube.uniforms),vertexShader:ri.cube.vertexShader,fragmentShader:ri.cube.fragmentShader,side:x,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var v=d.isWebGLRenderTargetCube?d.texture:d;o.material.uniforms.tCube.value=v,o.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,u===d&&l===v.version||(o.material.needsUpdate=!0,u=d,l=v.version),e.unshift(o,o.geometry,o.material,0,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new Br(new si(2,2),new Hr({type:"BackgroundMaterial",uniforms:Ur(ri.background.uniforms),vertexShader:ri.background.vertexShader,fragmentShader:ri.background.fragmentShader,side:w,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),u===d&&l===d.version||(i.material.needsUpdate=!0,u=d,l=d.version),e.unshift(i,i.geometry,i.material,0,0,null))}}}function li(t,e,n,r){var i;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(o,a,s){var u;if(r.isWebGL2)u=t;else if(null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}function ci(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),c=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),d=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),g=c>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?t.getParameter(36183):0}}function hi(){var t=this,e=null,n=0,r=!1,i=!1,o=new $r,a=new vn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,n,r,i){var u=null!==e?e.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==u;++f,d+=4)o.copy(e[f]).applyMatrix4(h,a),o.normal.toArray(l,d),l[d+3]=o.constant}s.value=l,s.needsUpdate=!0}return t.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=l(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,c,h,f){if(!r||null===t||0===t.length||i&&!a)i?l(null):u();else{var d=i?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=l(t,c,p,f);for(var v=0;v!==p;++v)m[v]=e[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}}function fi(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function di(t,e,n){var r={},i={};function o(t){var a=t.target,s=r[a.id];for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),delete r[a.id];var l=i[s.id];l&&(e.remove(l),delete i[s.id]),n.memory.geometries--}function a(t){var n=[],r=t.index,o=t.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{s=o.array;a=o.version;for(u=0,l=s.length/3-1;u<l;u+=3){c=u+0,h=u+1,f=u+2;n.push(c,h,h,f,f,c)}}var d=new(Or(n)>65535?Tr:Sr)(n,1);d.version=a,e.update(d,34963);var p=i[t.id];p&&e.remove(p),i[t.id]=d}return{get:function(t,e){var i=r[e.id];return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Nr).setFromObject(t)),i=e._bufferGeometry),r[e.id]=i,n.memory.geometries++,i)},update:function(t){var n=t.index,r=t.attributes;for(var i in null!==n&&e.update(n,34963),r)e.update(r[i],34962);var o=t.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)e.update(a[s],34962)},getWireframeAttribute:function(t){var e=i[t.id];if(e){var n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return i[t.id]}}}function pi(t,e,n,r){var i,o,a;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)},this.renderInstances=function(s,u,l){var c;if(r.isWebGL2)c=t;else if(null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,l,o,u*a,s.maxInstancedCount),n.update(l,i,s.maxInstancedCount)}}function mi(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(r=r||1,e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 5:case 6:e.triangles+=r*(t-2);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function vi(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gi(t){var e={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,l=e[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];e[i.id]=l}var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++){0!==(d=l[c])[1]&&(h&&i.removeAttribute("morphTarget"+c),f&&i.removeAttribute("morphNormal"+c))}for(c=0;c<u;c++){(d=l[c])[0]=c,d[1]=s[c]}for(l.sort(vi),c=0;c<8;c++){var d;if(d=l[c]){var p=d[0],m=d[1];if(m){h&&i.addAttribute("morphTarget"+c,h[p]),f&&i.addAttribute("morphNormal"+c,f[p]),n[c]=m;continue}}n[c]=0}a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function yi(t,e){var n={};return{update:function(r){var i=e.render.frame,o=r.geometry,a=t.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),t.update(a),n[a.id]=i),a},dispose:function(){n={}}}}function bi(t,e,n,r,i,o,a,s,u,l){t=void 0!==t?t:[],e=void 0!==e?e:mt,a=void 0!==a?a:Xt,qn.call(this,t,e,n,r,i,o,a,s,u,l),this.flipY=!1}function _i(t,e,n,r){qn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=St,this.minFilter=St,this.wrapR=Mt,this.generateMipmaps=!1,this.flipY=!1}function wi(t,e,n,r){qn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=St,this.minFilter=St,this.wrapR=Mt,this.generateMipmaps=!1,this.flipY=!1}ri.physical={uniforms:Vr([ri.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ei.meshphysical_vert,fragmentShader:ei.meshphysical_frag},ai.prototype=Object.create(jr.prototype),ai.prototype.constructor=ai,si.prototype=Object.create(Nr.prototype),si.prototype.constructor=si,bi.prototype=Object.create(qn.prototype),bi.prototype.constructor=bi,bi.prototype.isCubeTexture=!0,Object.defineProperty(bi.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),_i.prototype=Object.create(qn.prototype),_i.prototype.constructor=_i,_i.prototype.isDataTexture2DArray=!0,wi.prototype=Object.create(qn.prototype),wi.prototype.constructor=wi,wi.prototype.isDataTexture3D=!0;var xi=new qn,Mi=new _i,Ei=new wi,Si=new bi,Ai=[],Ti=[],qi=new Float32Array(16),Pi=new Float32Array(9),Li=new Float32Array(4);function Oi(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=Ai[i];if(void 0===o&&(o=new Float32Array(i),Ai[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function Ci(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ii(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Ri(t,e){var n=Ti[e];void 0===n&&(n=new Int32Array(e),Ti[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function ki(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Ni(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ci(n,e))return;t.uniform2fv(this.addr,e),Ii(n,e)}}function Bi(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ci(n,e))return;t.uniform3fv(this.addr,e),Ii(n,e)}}function Di(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ci(n,e))return;t.uniform4fv(this.addr,e),Ii(n,e)}}function ji(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ci(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ii(n,e)}else{if(Ci(n,r))return;Li.set(r),t.uniformMatrix2fv(this.addr,!1,Li),Ii(n,r)}}function Fi(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ci(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ii(n,e)}else{if(Ci(n,r))return;Pi.set(r),t.uniformMatrix3fv(this.addr,!1,Pi),Ii(n,r)}}function zi(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ci(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ii(n,e)}else{if(Ci(n,r))return;qi.set(r),t.uniformMatrix4fv(this.addr,!1,qi),Ii(n,r)}}function Ui(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||xi,i)}function Vi(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Mi,i)}function Gi(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Ei,i)}function Hi(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Si,i)}function Wi(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Yi(t,e){var n=this.cache;Ci(n,e)||(t.uniform2iv(this.addr,e),Ii(n,e))}function Xi(t,e){var n=this.cache;Ci(n,e)||(t.uniform3iv(this.addr,e),Ii(n,e))}function Zi(t,e){var n=this.cache;Ci(n,e)||(t.uniform4iv(this.addr,e),Ii(n,e))}function Ji(t,e){t.uniform1fv(this.addr,e)}function Ki(t,e){t.uniform1iv(this.addr,e)}function Qi(t,e){t.uniform2iv(this.addr,e)}function $i(t,e){t.uniform3iv(this.addr,e)}function to(t,e){t.uniform4iv(this.addr,e)}function eo(t,e){var n=Oi(e,this.size,2);t.uniform2fv(this.addr,n)}function no(t,e){var n=Oi(e,this.size,3);t.uniform3fv(this.addr,n)}function ro(t,e){var n=Oi(e,this.size,4);t.uniform4fv(this.addr,n)}function io(t,e){var n=Oi(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function oo(t,e){var n=Oi(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function ao(t,e){var n=Oi(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function so(t,e,n){var r=e.length,i=Ri(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(e[o]||xi,i[o])}function uo(t,e,n){var r=e.length,i=Ri(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(e[o]||Si,i[o])}function lo(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return ki;case 35664:return Ni;case 35665:return Bi;case 35666:return Di;case 35674:return ji;case 35675:return Fi;case 35676:return zi;case 35678:case 36198:return Ui;case 35679:return Gi;case 35680:return Hi;case 36289:return Vi;case 5124:case 35670:return Wi;case 35667:case 35671:return Yi;case 35668:case 35672:return Xi;case 35669:case 35673:return Zi}}(e.type)}function co(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ji;case 35664:return eo;case 35665:return no;case 35666:return ro;case 35674:return io;case 35675:return oo;case 35676:return ao;case 35678:return so;case 35680:return uo;case 5124:case 35670:return Ki;case 35667:case 35671:return Qi;case 35668:case 35672:return $i;case 35669:case 35673:return to}}(e.type)}function ho(t){this.id=t,this.seq=[],this.map={}}co.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Ii(e,t)},ho.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var fo=/([\w\d_]+)(\])?(\[|\.)?/g;function po(t,e){t.seq.push(e),t.map[e.id]=e}function mo(t,e,n){var r=t.name,i=r.length;for(fo.lastIndex=0;;){var o=fo.exec(r),a=fo.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){po(n,void 0===l?new lo(s,t,e):new co(s,t,e));break}var c=n.map[s];void 0===c&&po(n,c=new ho(s)),n=c}}function vo(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);mo(i,t.getUniformLocation(e,i.name),this)}}function go(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}vo.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},vo.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},vo.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},vo.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var yo=0;function bo(t){switch(t){case Be:return["Linear","( value )"];case De:return["sRGB","( value )"];case Fe:return["RGBE","( value )"];case Ue:return["RGBM","( value, 7.0 )"];case Ve:return["RGBM","( value, 16.0 )"];case Ge:return["RGBD","( value, 256.0 )"];case je:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function _o(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function wo(t,e){var n=bo(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function xo(t,e){var n;switch(e){case lt:n="Linear";break;case ct:n="Reinhard";break;case ht:n="Uncharted2";break;case ft:n="OptimizedCineon";break;case dt:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Mo(t){return""!==t}function Eo(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function So(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Ao(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){var n=ei[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ao(n)}))}function To(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}))}function qo(t,e,n,r,i,o,a){var s=t.getContext(),u=r.defines,l=i.vertexShader,c=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===b?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===_&&(h="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case mt:case vt:f="ENVMAP_TYPE_CUBE";break;case _t:case wt:f="ENVMAP_TYPE_CUBE_UV";break;case gt:case yt:f="ENVMAP_TYPE_EQUIREC";break;case bt:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case vt:case yt:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ot:p="ENVMAP_BLENDING_MULTIPLY";break;case at:p="ENVMAP_BLENDING_MIX";break;case st:p="ENVMAP_BLENDING_ADD"}}var m,v,g,y,w,x=t.gammaFactor>0?t.gammaFactor:1,M=a.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mo).join("\n")}(r.extensions,o,e),E=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(u),S=s.createProgram();if(r.isRawShaderMaterial?((m=[E].filter(Mo).join("\n")).length>0&&(m+="\n"),(v=[M,E].filter(Mo).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,E,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Mo).join("\n"),v=[M,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,E,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+x,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ut?"#define TONE_MAPPING":"",o.toneMapping!==ut?ei.tonemapping_pars_fragment:"",o.toneMapping!==ut?xo("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?ei.encodings_pars_fragment:"",o.mapEncoding?wo("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?wo("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?wo("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?wo("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(g="linearToOutputTexel",y=o.outputEncoding,w=bo(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+w[0]+w[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Mo).join("\n")),l=So(l=Eo(l=Ao(l),o),o),c=So(c=Eo(c=Ao(c),o),o),l=To(l),c=To(c),a.isWebGL2&&!r.isRawShaderMaterial){var A=!1,T=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==l.match(T)&&null!==c.match(T)&&(A=!0,l=l.replace(T,""),c=c.replace(T,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",A?"":"out highp vec4 pc_fragColor;",A?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var q,P,L=v+c,O=go(s,35633,m+l),C=go(s,35632,L);if(s.attachShader(S,O),s.attachShader(S,C),void 0!==r.index0AttributeName?s.bindAttribLocation(S,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(S,0,"position"),s.linkProgram(S),t.debug.checkShaderErrors){var I=s.getProgramInfoLog(S).trim(),R=s.getShaderInfoLog(O).trim(),k=s.getShaderInfoLog(C).trim(),N=!0,B=!0;if(!1===s.getProgramParameter(S,35714)){N=!1;var D=_o(s,O,"vertex"),j=_o(s,C,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(S,35715),"gl.getProgramInfoLog",I,D,j)}else""!==I?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",I):""!==R&&""!==k||(B=!1);B&&(this.diagnostics={runnable:N,material:r,programLog:I,vertexShader:{log:R,prefix:m},fragmentShader:{log:k,prefix:v}})}return s.deleteShader(O),s.deleteShader(C),this.getUniforms=function(){return void 0===q&&(q=new vo(s,S)),q},this.getAttributes=function(){return void 0===P&&(P=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}(s,S)),P},this.destroy=function(){s.deleteProgram(S),this.program=void 0},this.name=i.name,this.id=yo++,this.code=n,this.usedTimes=1,this.program=S,this.vertexShader=O,this.fragmentShader=C,this}function Po(t,e,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Be,n===Be&&e&&(n=je),n}this.getParameters=function(e,r,o,s,u,l,c){var h=i[e.type],f=c.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,e.length);return o<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+o+"."),0):o}(c):0,d=n.precision;null!==e.precision&&(d=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var p=t.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:a(p?p.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:a(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:a(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:a(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===_t||e.envMap.mapping===wt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:a(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Xe,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===M,flipSided:e.side===x,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.push(t.gammaFactor),r.join()},this.acquireProgram=function(i,o,a,s){for(var u,l=0,c=r.length;l<c;l++){var h=r[l];if(h.code===s){++(u=h).usedTimes;break}}return void 0===u&&(u=new qo(t,e,s,i,o,a,n),r.push(u)),u},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function Lo(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function Oo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Co(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Io(){var t=[],e=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,u){var l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=o,l.program=o.program||i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=u),e++,l}return{opaque:n,transparent:r,init:function(){e=0,n.length=0,r.length=0},push:function(t,e,i,a,s,u){var l=o(t,e,i,a,s,u);(!0===i.transparent?r:n).push(l)},unshift:function(t,e,i,a,s,u){var l=o(t,e,i,a,s,u);(!0===i.transparent?r:n).unshift(l)},sort:function(){n.length>1&&n.sort(Oo),r.length>1&&r.sort(Co)}}}function Ro(){var t={};function e(n){var r=n.target;r.removeEventListener("dispose",e),delete t[r.id]}return{get:function(n,r){var i,o=t[n.id];return void 0===o?(i=new Io,t[n.id]={},t[n.id][r.id]=i,n.addEventListener("dispose",e)):void 0===(i=o[r.id])&&(i=new Io,o[r.id]=i),i},dispose:function(){t={}}}}function ko(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new mn,color:new fr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new dn};break;case"SpotLight":n={position:new mn,direction:new mn,color:new fr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new dn};break;case"PointLight":n={position:new mn,color:new fr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new dn,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new mn,skyColor:new fr,groundColor:new fr};break;case"RectAreaLight":n={color:new fr,position:new mn,halfWidth:new mn,halfHeight:new mn}}return t[e.id]=n,n}}}var No=0;function Bo(){for(var t=new ko,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=0;n<9;n++)e.probe.push(new mn);var r=new mn,i=new Cn,o=new Cn;return{setup:function(n,a,s){for(var u=0,l=0,c=0,h=0;h<9;h++)e.probe[h].set(0,0,0);for(var f=0,d=0,p=0,m=0,v=0,g=s.matrixWorldInverse,y=(h=0,n.length);h<y;h++){var b=n[h],_=b.color,w=b.intensity,x=b.distance,M=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=_.r*w,l+=_.g*w,c+=_.b*w;else if(b.isLightProbe)for(var E=0;E<9;E++)e.probe[E].addScaledVector(b.sh.coefficients[E],w);else if(b.isDirectionalLight){if((A=t.get(b)).color.copy(b.color).multiplyScalar(b.intensity),A.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(g),A.shadow=b.castShadow,b.castShadow){var S=b.shadow;A.shadowBias=S.bias,A.shadowRadius=S.radius,A.shadowMapSize=S.mapSize}e.directionalShadowMap[f]=M,e.directionalShadowMatrix[f]=b.shadow.matrix,e.directional[f]=A,f++}else if(b.isSpotLight){if((A=t.get(b)).position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(g),A.color.copy(_).multiplyScalar(w),A.distance=x,A.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(g),A.coneCos=Math.cos(b.angle),A.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),A.decay=b.decay,A.shadow=b.castShadow,b.castShadow){S=b.shadow;A.shadowBias=S.bias,A.shadowRadius=S.radius,A.shadowMapSize=S.mapSize}e.spotShadowMap[p]=M,e.spotShadowMatrix[p]=b.shadow.matrix,e.spot[p]=A,p++}else if(b.isRectAreaLight){(A=t.get(b)).color.copy(_).multiplyScalar(w),A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(g),o.identity(),i.copy(b.matrixWorld),i.premultiply(g),o.extractRotation(i),A.halfWidth.set(.5*b.width,0,0),A.halfHeight.set(0,.5*b.height,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),e.rectArea[m]=A,m++}else if(b.isPointLight){if((A=t.get(b)).position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(g),A.color.copy(b.color).multiplyScalar(b.intensity),A.distance=b.distance,A.decay=b.decay,A.shadow=b.castShadow,b.castShadow){S=b.shadow;A.shadowBias=S.bias,A.shadowRadius=S.radius,A.shadowMapSize=S.mapSize,A.shadowCameraNear=S.camera.near,A.shadowCameraFar=S.camera.far}e.pointShadowMap[d]=M,e.pointShadowMatrix[d]=b.shadow.matrix,e.point[d]=A,d++}else if(b.isHemisphereLight){var A;(A=t.get(b)).direction.setFromMatrixPosition(b.matrixWorld),A.direction.transformDirection(g),A.direction.normalize(),A.skyColor.copy(b.color).multiplyScalar(w),A.groundColor.copy(b.groundColor).multiplyScalar(w),e.hemi[v]=A,v++}}e.ambient[0]=u,e.ambient[1]=l,e.ambient[2]=c;var T=e.hash;T.directionalLength===f&&T.pointLength===d&&T.spotLength===p&&T.rectAreaLength===m&&T.hemiLength===v&&T.shadowsLength===a.length||(e.directional.length=f,e.spot.length=p,e.rectArea.length=m,e.point.length=d,e.hemi.length=v,T.directionalLength=f,T.pointLength=d,T.spotLength=p,T.rectAreaLength=m,T.hemiLength=v,T.shadowsLength=a.length,e.version=No++)},state:e}}function Do(){var t=new Bo,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function jo(){var t={};function e(n){var r=n.target;r.removeEventListener("dispose",e),delete t[r.id]}return{get:function(n,r){var i;return void 0===t[n.id]?(i=new Do,t[n.id]={},t[n.id][r.id]=i,n.addEventListener("dispose",e)):void 0===t[n.id][r.id]?(i=new Do,t[n.id][r.id]=i):i=t[n.id][r.id],i},dispose:function(){t={}}}}function Fo(t){yr.call(this),this.type="MeshDepthMaterial",this.depthPacking=He,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function zo(t){yr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new mn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Uo(t,e,n){for(var r=new ti,i=new Cn,o=new dn,a=new dn(n,n),s=new mn,u=new mn,l=new Array(4),c=new Array(4),h={},f={0:x,1:w,2:M},d=[new mn(1,0,0),new mn(-1,0,0),new mn(0,0,1),new mn(0,0,-1),new mn(0,1,0),new mn(0,-1,0)],p=[new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,0,1),new mn(0,0,-1)],m=[new Pn,new Pn,new Pn,new Pn,new Pn,new Pn],v=0;4!==v;++v){var g=0!=(1&v),y=0!=(2&v),_=new Fo({depthPacking:We,morphTargets:g,skinning:y});l[v]=_;var E=new zo({morphTargets:g,skinning:y});c[v]=E}var S=this;function A(e,n,r,i,o,a){var s=e.geometry,u=null,d=l,p=e.customDepthMaterial;if(r&&(d=c,p=e.customDistanceMaterial),p)u=p;else{var m=!1;n.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var v=0;m&&(v|=1),e.isSkinnedMesh&&n.skinning&&(v|=2),u=d[v]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var g=u.uuid,y=n.uuid,b=h[g];void 0===b&&(b={},h[g]=b);var _=b[y];void 0===_&&(_=u.clone(),b[y]=_),u=_}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:f[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function T(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=e.update(n),l=n.material;if(Array.isArray(l))for(var c=s.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var m=A(n,p,a,u,o.near,o.far);t.renderBufferDirect(o,null,s,m,n,d)}}else if(l.visible){m=A(n,l,a,u,o.near,o.far);t.renderBufferDirect(o,null,s,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)T(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=b,this.render=function(e,n,l){if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)&&0!==e.length){var c,h=t.getRenderTarget(),f=t.getActiveCubeFace(),v=t.getActiveMipmapLevel(),g=t.state;g.setBlending(P),g.buffers.color.setClear(1,1,1,1),g.buffers.depth.setTest(!0),g.setScissorTest(!1);for(var y=0,b=e.length;y<b;y++){var _=e[y],w=_.shadow,x=_&&_.isPointLight;if(void 0!==w){var M=w.camera;if(o.copy(w.mapSize),o.min(a),x){var E=o.x,A=o.y;m[0].set(2*E,A,E,A),m[1].set(0,A,E,A),m[2].set(3*E,A,E,A),m[3].set(E,A,E,A),m[4].set(3*E,0,E,A),m[5].set(E,0,E,A),o.x*=4,o.y*=2}if(null===w.map){var q={minFilter:St,magFilter:St,format:Zt};w.map=new Ln(o.x,o.y,q),w.map.texture.name=_.name+".shadowMap",M.updateProjectionMatrix()}w.isSpotLightShadow&&w.update(_);var L=w.map,O=w.matrix;u.setFromMatrixPosition(_.matrixWorld),M.position.copy(u),x?(c=6,O.makeTranslation(-u.x,-u.y,-u.z)):(c=1,s.setFromMatrixPosition(_.target.matrixWorld),M.lookAt(s),M.updateMatrixWorld(),O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(M.projectionMatrix),O.multiply(M.matrixWorldInverse)),t.setRenderTarget(L),t.clear();for(var C=0;C<c;C++){if(x){s.copy(M.position),s.add(d[C]),M.up.copy(p[C]),M.lookAt(s),M.updateMatrixWorld();var I=m[C];g.viewport(I)}i.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),r.setFromMatrix(i),T(n,l,M,x)}}else console.warn("THREE.WebGLShadowMap:",_,"has no shadow.")}S.needsUpdate=!1,t.setRenderTarget(h,f,v)}}}function Vo(t,e,n,r){var i=new function(){var e=!1,n=new Pn,r=null,i=new Pn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?ot(2929):at(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case K:t.depthFunc(512);break;case Q:t.depthFunc(519);break;case $:t.depthFunc(513);break;case tt:t.depthFunc(515);break;case et:t.depthFunc(514);break;case nt:t.depthFunc(518);break;case rt:t.depthFunc(516);break;case it:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?ot(2960):at(2960)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},s=t.getParameter(34921),u=new Uint8Array(s),l=new Uint8Array(s),c=new Uint8Array(s),h={},m=null,v=null,g=null,y=null,b=null,_=null,w=null,E=null,S=null,A=null,T=!1,q=null,N=null,B=null,D=null,j=null,F=t.getParameter(35661),z=!1,U=0,V=t.getParameter(7938);-1!==V.indexOf("WebGL")?(U=parseFloat(/^WebGL\ ([0-9])/.exec(V)[1]),z=U>=1):-1!==V.indexOf("OpenGL ES")&&(U=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(V)[1]),z=U>=2);var G=null,H={},W=new Pn,Y=new Pn;function X(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var Z={};function J(n,i){(u[n]=1,0===l[n]&&(t.enableVertexAttribArray(n),l[n]=1),c[n]!==i)&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),c[n]=i)}function ot(e){!0!==h[e]&&(t.enable(e),h[e]=!0)}function at(e){!1!==h[e]&&(t.disable(e),h[e]=!1)}function st(e,r,i,o,a,s,u,l){if(e!==P){if(g||(ot(3042),g=!0),e===R)a=a||r,s=s||i,u=u||o,r===b&&a===E||(t.blendEquationSeparate(n.convert(r),n.convert(a)),b=r,E=a),i===_&&o===w&&s===S&&u===A||(t.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),_=i,w=o,S=s,A=u),y=e,T=null;else if(e!==y||l!==T){if(b===k&&E===k||(t.blendEquation(32774),b=k,E=k),l)switch(e){case L:t.blendFuncSeparate(1,771,1,771);break;case O:t.blendFunc(1,1);break;case C:t.blendFuncSeparate(0,0,769,771);break;case I:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case L:t.blendFuncSeparate(770,771,1,771);break;case O:t.blendFunc(770,1);break;case C:t.blendFunc(0,769);break;case I:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}_=null,w=null,S=null,A=null,y=e,T=l}}else g&&(at(3042),g=!1)}function ut(e){q!==e&&(e?t.frontFace(2304):t.frontFace(2305),q=e)}function lt(e){e!==f?(ot(2884),e!==N&&(e===d?t.cullFace(1029):e===p?t.cullFace(1028):t.cullFace(1032))):at(2884),N=e}function ct(e,n,r){e?(ot(32823),D===n&&j===r||(t.polygonOffset(n,r),D=n,j=r)):at(32823)}function ht(e){void 0===e&&(e=33984+F-1),G!==e&&(t.activeTexture(e),G=e)}return Z[3553]=X(3553,3553,1),Z[34067]=X(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ot(2929),o.setFunc(tt),ut(!1),lt(d),ot(2884),st(P),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var t=0,e=u.length;t<e;t++)u[t]=0},enableAttribute:function(t){J(t,0)},enableAttributeAndDivisor:J,disableUnusedAttributes:function(){for(var e=0,n=l.length;e!==n;++e)l[e]!==u[e]&&(t.disableVertexAttribArray(e),l[e]=0)},enable:ot,disable:at,getCompressedTextureFormats:function(){if(null===m&&(m=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),r=0;r<n.length;r++)m.push(n[r]);return m},useProgram:function(e){return v!==e&&(t.useProgram(e),v=e,!0)},setBlending:st,setMaterial:function(t,e){t.side===M?at(2884):ot(2884);var n=t.side===x;e&&(n=!n),ut(n),t.blending===L&&!1===t.transparent?st(P):st(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);var r=t.stencilWrite;a.setTest(r),r&&(a.setFunc(t.stencilFunc,t.stencilRef,t.stencilMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),ct(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:ut,setCullFace:lt,setLineWidth:function(e){e!==B&&(z&&t.lineWidth(e),B=e)},setPolygonOffset:ct,setScissorTest:function(t){t?ot(3089):at(3089)},activeTexture:ht,bindTexture:function(e,n){null===G&&ht();var r=H[G];void 0===r&&(r={type:void 0,texture:void 0},H[G]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||Z[e]),r.type=e,r.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===W.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),W.copy(e))},viewport:function(e){!1===Y.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),Y.copy(e))},reset:function(){for(var e=0;e<l.length;e++)1===l[e]&&(t.disableVertexAttribArray(e),l[e]=0);h={},m=null,G=null,H={},v=null,y=null,q=null,N=null,i.reset(),o.reset(),a.reset()}}}function Go(t,e,n,r,i,o,a){var s,u={},l="undefined"!=typeof OffscreenCanvas;function c(t,e){return l?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function h(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?fn.floorPowerOfTwo:Math.floor,a=o(i*t.width),u=o(i*t.height);void 0===s&&(s=c(a,u));var l=n?c(a,u):s;return l.width=a,l.height=u,l.getContext("2d").drawImage(t,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+u+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function f(t){return fn.isPowerOfTwo(t.width)&&fn.isPowerOfTwo(t.height)}function d(t,e){return t.generateMipmaps&&e&&t.minFilter!==St&&t.minFilter!==Lt}function p(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function m(t,n){if(!i.isWebGL2)return t;var r=t;return 6403===t&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===t&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===t&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?e.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function v(t){return t===St||t===At||t===qt?9728:9729}function g(e){var n=e.target;n.removeEventListener("dispose",g),function(e){var n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&delete u[n.id],a.memory.textures--}function y(e){var n=e.target;n.removeEventListener("dispose",y),function(e){var n=r.get(e),i=r.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}(n),a.memory.textures--}var b=0;function _(t,e){var i=r.get(t);if(t.isVideoTexture&&function(t){var e=t.id,n=a.render.frame;u[e]!==n&&(u[e]=n,t.update())}(t),t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void S(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function w(e,a){var s=r.get(e);if(6===e.image.length)if(e.version>0&&s.__version!==e.version){E(s,e),n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY);for(var u=e&&e.isCompressedTexture,l=e.image[0]&&e.image[0].isDataTexture,c=[],v=0;v<6;v++)c[v]=u||l?l?e.image[v].image:e.image[v]:h(e.image[v],!1,!0,i.maxCubemapSize);var g=c[0],y=f(g)||i.isWebGL2,b=o.convert(e.format),_=o.convert(e.type),w=m(b,_);M(34067,e,y);for(v=0;v<6;v++)if(u)for(var x,S=c[v].mipmaps,A=0,T=S.length;A<T;A++)x=S[A],e.format!==Zt&&e.format!==Xt?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+v,A,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+v,A,w,x.width,x.height,0,b,_,x.data);else l?n.texImage2D(34069+v,0,w,c[v].width,c[v].height,0,b,_,c[v].data):n.texImage2D(34069+v,0,w,b,_,c[v]);s.__maxMipLevel=u?S.length-1:0,d(e,y)&&p(34067,e,g.width,g.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture)}function x(t,e){n.activeTexture(33984+e),n.bindTexture(34067,r.get(t).__webglTexture)}function M(n,a,s){var u;if(s?(t.texParameteri(n,10242,o.convert(a.wrapS)),t.texParameteri(n,10243,o.convert(a.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,o.convert(a.wrapR)),t.texParameteri(n,10240,o.convert(a.magFilter)),t.texParameteri(n,10241,o.convert(a.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===Mt&&a.wrapT===Mt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,v(a.magFilter)),t.texParameteri(n,10241,v(a.minFilter)),a.minFilter!==St&&a.minFilter!==Lt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=e.get("EXT_texture_filter_anisotropic")){if(a.type===zt&&null===e.get("OES_texture_float_linear"))return;if(a.type===Ut&&null===(i.isWebGL2||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function E(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",g),e.__webglTexture=t.createTexture(),a.memory.textures++)}function S(e,r,a){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),E(e,r),n.activeTexture(33984+a),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);var u=function(t){return!i.isWebGL2&&(t.wrapS!==Mt||t.wrapT!==Mt||t.minFilter!==St&&t.minFilter!==Lt)}(r)&&!1===f(r.image),l=h(r.image,u,!1,i.maxTextureSize),c=f(l)||i.isWebGL2,v=o.convert(r.format),g=o.convert(r.type),y=m(v,g);M(s,r,c);var b,_=r.mipmaps;if(r.isDepthTexture){if(y=6402,r.type===zt){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else i.isWebGL2&&(y=33189);r.format===$t&&6402===y&&r.type!==Dt&&r.type!==Ft&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Dt,g=o.convert(r.type)),r.format===te&&(y=34041,r.type!==Wt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Wt,g=o.convert(r.type))),n.texImage2D(3553,0,y,l.width,l.height,0,v,g,null)}else if(r.isDataTexture)if(_.length>0&&c){for(var w=0,x=_.length;w<x;w++)b=_[w],n.texImage2D(3553,w,y,b.width,b.height,0,v,g,b.data);r.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,l.width,l.height,0,v,g,l.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(w=0,x=_.length;w<x;w++)b=_[w],r.format!==Zt&&r.format!==Xt?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(3553,w,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,w,y,b.width,b.height,0,v,g,b.data);e.__maxMipLevel=_.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,y,l.width,l.height,l.depth,0,v,g,l.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,y,l.width,l.height,l.depth,0,v,g,l.data),e.__maxMipLevel=0;else if(_.length>0&&c){for(w=0,x=_.length;w<x;w++)b=_[w],n.texImage2D(3553,w,y,v,g,b);r.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,v,g,l),e.__maxMipLevel=0;d(r,c)&&p(3553,r,l.width,l.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function A(e,i,a,s){var u=o.convert(i.texture.format),l=o.convert(i.texture.type),c=m(u,l);n.texImage2D(s,0,c,i.width,i.height,0,u,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function T(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(r){var i=P(n);t.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=P(n);t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var a=m(o.convert(n.texture.format),o.convert(n.texture.type));if(r){i=P(n);t.renderbufferStorageMultisample(36161,i,a,n.width,n.height)}else t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function q(e){var n=r.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),_(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===$t)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==te)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),T(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),T(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function P(t){return i.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,t.samples):0}var L=!1,O=!1;this.allocateTextureUnit=function(){var t=b;return t>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+i.maxTextures),b+=1,t},this.resetTextureUnits=function(){b=0},this.setTexture2D=_,this.setTexture2DArray=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?S(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?S(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=w,this.setTextureCubeDynamic=x,this.setupRenderTarget=function(e){var s=r.get(e),u=r.get(e.texture);e.addEventListener("dispose",y),u.__webglTexture=t.createTexture(),a.memory.textures++;var l=!0===e.isWebGLRenderTargetCube,c=!0===e.isWebGLMultisampleRenderTarget,h=f(e)||i.isWebGL2;if(l){s.__webglFramebuffer=[];for(var v=0;v<6;v++)s.__webglFramebuffer[v]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),c)if(i.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var g=m(o.convert(e.texture.format),o.convert(e.texture.type)),b=P(e);t.renderbufferStorageMultisample(36161,b,g,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),T(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,u.__webglTexture),M(34067,e.texture,h);for(v=0;v<6;v++)A(s.__webglFramebuffer[v],e,36064,34069+v);d(e.texture,h)&&p(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,u.__webglTexture),M(3553,e.texture,h),A(s.__webglFramebuffer,e,36064,3553),d(e.texture,h)&&p(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&q(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(d(e,f(t)||i.isWebGL2)){var o=t.isWebGLRenderTargetCube?34067:3553,a=r.get(e).__webglTexture;n.bindTexture(o,a),p(o,e,t.width,t.height),n.bindTexture(o,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var o=e.width,a=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),t=t.texture),_(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?w(t,e):x(t,e)}}function Ho(t,e,n){return{convert:function(t){var r;if(t===xt)return 10497;if(t===Mt)return 33071;if(t===Et)return 33648;if(t===St)return 9728;if(t===At)return 9984;if(t===qt)return 9986;if(t===Lt)return 9729;if(t===Ot)return 9985;if(t===It)return 9987;if(t===kt)return 5121;if(t===Vt)return 32819;if(t===Gt)return 32820;if(t===Ht)return 33635;if(t===Nt)return 5120;if(t===Bt)return 5122;if(t===Dt)return 5123;if(t===jt)return 5124;if(t===Ft)return 5125;if(t===zt)return 5126;if(t===Ut){if(n.isWebGL2)return 5131;if(null!==(r=e.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(t===Yt)return 6406;if(t===Xt)return 6407;if(t===Zt)return 6408;if(t===Jt)return 6409;if(t===Kt)return 6410;if(t===$t)return 6402;if(t===te)return 34041;if(t===ee)return 6403;if(t===k)return 32774;if(t===N)return 32778;if(t===B)return 32779;if(t===F)return 0;if(t===z)return 1;if(t===U)return 768;if(t===V)return 769;if(t===G)return 770;if(t===H)return 771;if(t===W)return 772;if(t===Y)return 773;if(t===X)return 774;if(t===Z)return 775;if(t===J)return 776;if((t===ne||t===re||t===ie||t===oe)&&null!==(r=e.get("WEBGL_compressed_texture_s3tc"))){if(t===ne)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===re)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===ie)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===oe)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===ae||t===se||t===ue||t===le)&&null!==(r=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===ae)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===se)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ue)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===le)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===ce&&null!==(r=e.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((t===he||t===fe||t===de||t===pe||t===me||t===ve||t===ge||t===ye||t===be||t===_e||t===we||t===xe||t===Me||t===Ee)&&null!==(r=e.get("WEBGL_compressed_texture_astc")))return t;if(t===D||t===j){if(n.isWebGL2){if(t===D)return 32775;if(t===j)return 32776}if(null!==(r=e.get("EXT_blend_minmax"))){if(t===D)return r.MIN_EXT;if(t===j)return r.MAX_EXT}}if(t===Wt){if(n.isWebGL2)return 34042;if(null!==(r=e.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Wo(){nr.call(this),this.type="Group"}function Yo(t){Yr.call(this),this.cameras=t||[]}Fo.prototype=Object.create(yr.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isMeshDepthMaterial=!0,Fo.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},zo.prototype=Object.create(yr.prototype),zo.prototype.constructor=zo,zo.prototype.isMeshDistanceMaterial=!0,zo.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Wo.prototype=Object.assign(Object.create(nr.prototype),{constructor:Wo,isGroup:!0}),Yo.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Yo,isArrayCamera:!0});var Xo,Zo,Jo,Ko,Qo,$o,ta=new mn,ea=new mn;function na(t,e,n){ta.setFromMatrixPosition(e.matrixWorld),ea.setFromMatrixPosition(n.matrixWorld);var r=ta.distanceTo(ea),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,d=a*h,p=r/(-c+h),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=a+p,g=s+p,y=f-m,b=d+(r-m),_=u*s/g*v,w=l*s/g*v;t.projectionMatrix.makePerspective(y,b,_,w,v,g)}function ra(t){var e,n,r=this,i=null,o=null,a=null,s=[],u=new Cn,l=new Cn,c=1,h="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",w,!1));var f=new Cn,d=new pn,p=new mn,m=new Yr;m.viewport=new Pn,m.layers.enable(1);var v=new Yr;v.viewport=new Pn,v.layers.enable(2);var g=new Yo([m,v]);function y(){return null!==i&&!0===i.isPresenting}g.layers.enable(1),g.layers.enable(2);var b,_=new dn;function w(){if(y()){var o=i.getEyeParameters("left");e=2*o.renderWidth*c,n=o.renderHeight*c,b=t.getPixelRatio(),t.getSize(_),t.setDrawingBufferSize(e,n,1),m.viewport.set(0,0,e/2,n),v.viewport.set(e/2,0,e/2,n),S.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&t.setDrawingBufferSize(_.width,_.height,b),S.stop(),r.dispatchEvent({type:"sessionend"})}var x=[];function M(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=e.length;n<i;n++){var o=e[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("HTC Vive Focus")||o.id.startsWith("Spatial Controller"))){if(r===t)return o;r++}}}function E(t,r){null!==r&&4===r.length&&t.set(r[0]*e,r[1]*n,r[2]*e,r[3]*n)}this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Wo).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return i},this.setDevice=function(t){void 0!==t&&(i=t),S.setContext(t)},this.setFramebufferScaleFactor=function(t){c=t},this.setReferenceSpaceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(a=t)},this.getCamera=function(t){var e="local-floor"===h?1.6:0;if(!1===y())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(i.depthNear=t.near,i.depthFar=t.far,i.getFrameData(o),"local-floor"===h){var n=i.stageParameters;n?u.fromArray(n.sittingToStandingTransform):u.makeTranslation(0,e,0)}var r=o.pose,c=null!==a?a:t;c.matrix.copy(u),c.matrix.decompose(c.position,c.quaternion,c.scale),null!==r.orientation&&(d.fromArray(r.orientation),c.quaternion.multiply(d)),null!==r.position&&(d.setFromRotationMatrix(u),p.fromArray(r.position),p.applyQuaternion(d),c.position.add(p)),c.updateMatrixWorld(),m.near=t.near,v.near=t.near,m.far=t.far,v.far=t.far,m.matrixWorldInverse.fromArray(o.leftViewMatrix),v.matrixWorldInverse.fromArray(o.rightViewMatrix),l.getInverse(u),"local-floor"===h&&(m.matrixWorldInverse.multiply(l),v.matrixWorldInverse.multiply(l));var b=c.parent;null!==b&&(f.getInverse(b.matrixWorld),m.matrixWorldInverse.multiply(f),v.matrixWorldInverse.multiply(f)),m.matrixWorld.getInverse(m.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),m.projectionMatrix.fromArray(o.leftProjectionMatrix),v.projectionMatrix.fromArray(o.rightProjectionMatrix),na(g,m,v);var _=i.getLayers();if(_.length){var w=_[0];E(m.viewport,w.leftBounds),E(v.viewport,w.rightBounds)}return function(){for(var t=0;t<s.length;t++){var e=s[t],n=M(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&e.position.set(.2,-.6,-.05),null!==r.position&&e.position.fromArray(r.position),null!==r.orientation&&e.quaternion.fromArray(r.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(u),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var i="Daydream Controller"===n.id?0:1;void 0===x[t]&&(x[t]=!1),x[t]!==n.buttons[i].pressed&&(x[t]=n.buttons[i].pressed,!0===x[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),g},this.getStandingMatrix=function(){return u},this.isPresenting=y;var S=new ii;this.setAnimationLoop=function(t){S.setAnimationLoop(t),y()&&S.start()},this.submitFrame=function(){y()&&i.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",w)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function ia(t,e){var n=this,r=null,i=null,o="local-floor",a=null,s=[],u=[];function l(){return null!==r&&null!==i}var c=new Yr;c.layers.enable(1),c.viewport=new Pn;var h=new Yr;h.layers.enable(2),h.viewport=new Pn;var f=new Yo([c,h]);function d(t){for(var e=0;e<s.length;e++)u[e]===t.inputSource&&s[e].dispatchEvent({type:t.type})}function p(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),y.stop(),n.dispatchEvent({type:"sessionend"})}function m(t){i=t,y.setContext(r),y.start(),n.dispatchEvent({type:"sessionstart"})}function v(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Wo).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){o=t},this.getSession=function(){return r},this.setSession=function(t){null!==(r=t)&&(r.addEventListener("select",d),r.addEventListener("selectstart",d),r.addEventListener("selectend",d),r.addEventListener("end",p),r.updateRenderState({baseLayer:new XRWebGLLayer(r,e)}),r.requestReferenceSpace(o).then(m),u=r.inputSources,r.addEventListener("inputsourceschange",(function(){u=r.inputSources,console.log(u);for(var t=0;t<s.length;t++){s[t].userData.inputSource=u[t]}})))},this.getCamera=function(t){if(l()){var e=t.parent,n=f.cameras;v(f,e);for(var r=0;r<n.length;r++)v(n[r],e);t.matrixWorld.copy(f.matrixWorld);for(var i=t.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return na(f,c,h),f}return t},this.isPresenting=l;var g=null;var y=new ii;y.setAnimationLoop((function(e,n){if(null!==(a=n.getViewerPose(i))){var o=a.views,l=r.renderState.baseLayer;t.setFramebuffer(l.framebuffer);for(var c=0;c<o.length;c++){var h=o[c],d=l.getViewport(h),p=h.transform.inverse.matrix,m=f.cameras[c];m.matrix.fromArray(p).getInverse(m.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===c&&f.matrix.copy(m.matrix)}}for(c=0;c<s.length;c++){var v=s[c],y=u[c];if(y){var b=n.getPose(y.targetRaySpace,i);if(null!==b){v.matrix.fromArray(b.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}g&&g(e)})),this.setAnimationLoop=function(t){g=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Cn},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function oa(t){console.log("THREE.WebGLRenderer",l);var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,f=null,d=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=lt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,m,v,g,y,b,_,w,M,E,S,A,T,q,P,L,O,C,I=this,R=!1,k=null,N=0,B=0,D=null,j=null,F=-1,z={geometry:null,program:null,wireframe:!1},U=null,V=null,G=new Pn,H=new Pn,W=null,Y=e.width,X=e.height,Z=1,J=new Pn(0,0,Y,X),K=new Pn(0,0,Y,X),Q=!1,$=new ti,tt=new hi,et=!1,nt=!1,rt=new Cn,it=new mn;function ot(){return null===D?Z:1}try{var at={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",ft,!1),null===(p=n||e.getContext("webgl",at)||e.getContext("experimental-webgl",at)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function st(){m=new fi(p),(v=new ci(p,m,t)).isWebGL2||(m.get("WEBGL_depth_texture"),m.get("OES_texture_float"),m.get("OES_texture_half_float"),m.get("OES_texture_half_float_linear"),m.get("OES_standard_derivatives"),m.get("OES_element_index_uint"),m.get("ANGLE_instanced_arrays")),m.get("OES_texture_float_linear"),C=new Ho(p,m,v),(g=new Vo(p,m,C,v)).scissor(H.copy(K).multiplyScalar(Z).floor()),g.viewport(G.copy(J).multiplyScalar(Z).floor()),y=new mi(p),b=new Lo,_=new Go(p,m,g,b,v,C,y),w=new oi(p),M=new di(p,w,y),E=new yi(M,y),P=new gi(p),S=new Po(I,m,v),A=new Ro,T=new jo,q=new ui(I,g,E,s),L=new li(p,m,y,v),O=new pi(p,m,y,v),y.programs=S.programs,I.capabilities=v,I.extensions=m,I.properties=b,I.renderLists=A,I.state=g,I.info=y}st();var ut="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new ia(I,p):new ra(I);this.vr=ut;var ct=new Uo(I,E,v.maxTextureSize);function ht(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,st()}function dt(t){var e=t.target;e.removeEventListener("dispose",dt),function(t){pt(t),b.remove(t)}(e)}function pt(t){var e=b.get(t).program;t.program=void 0,void 0!==e&&S.releaseProgram(e)}this.shadowMap=ct,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=m.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=m.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(t){void 0!==t&&(Z=t,this.setSize(Y,X,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new dn),t.set(Y,X)},this.setSize=function(t,n,r){ut.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Y=t,X=n,e.width=Math.floor(t*Z),e.height=Math.floor(n*Z),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new dn),t.set(Y*Z,X*Z).floor()},this.setDrawingBufferSize=function(t,n,r){Y=t,X=n,Z=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Pn),t.copy(G)},this.getViewport=function(t){return t.copy(J)},this.setViewport=function(t,e,n,r){t.isVector4?J.set(t.x,t.y,t.z,t.w):J.set(t,e,n,r),g.viewport(G.copy(J).multiplyScalar(Z).floor())},this.getScissor=function(t){return t.copy(K)},this.setScissor=function(t,e,n,r){t.isVector4?K.set(t.x,t.y,t.z,t.w):K.set(t,e,n,r),g.scissor(H.copy(K).multiplyScalar(Z).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(t){g.setScissorTest(Q=t)},this.getClearColor=function(){return q.getClearColor()},this.setClearColor=function(){q.setClearColor.apply(q,arguments)},this.getClearAlpha=function(){return q.getClearAlpha()},this.setClearAlpha=function(){q.setClearAlpha.apply(q,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",ft,!1),A.dispose(),T.dispose(),b.dispose(),E.dispose(),ut.dispose(),vt.stop()},this.renderBufferImmediate=function(t,e){g.initAttributes();var n=b.get(t);t.hasPositions&&!n.position&&(n.position=p.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),t.hasColors&&!n.color&&(n.color=p.createBuffer());var r=e.getAttributes();t.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,t.positionArray,35048),g.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,t.normalArray,35048),g.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,t.uvArray,35048),g.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,t.colorArray,35048),g.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;g.setMaterial(r,a);var s=wt(t,e,r,i),u=!1;z.geometry===n.id&&z.program===s.id&&z.wireframe===(!0===r.wireframe)||(z.geometry=n.id,z.program=s.id,z.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(P.update(i,n,r,s),u=!0);var l,c=n.index,h=n.attributes.position,f=1;!0===r.wireframe&&(c=M.getWireframeAttribute(n),f=2);var d=L;null!==c&&(l=w.get(c),(d=O).setIndex(l)),u&&(!function(t,e,n){if(n&&n.isInstancedBufferGeometry&&!v.isWebGL2&&null===m.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g.initAttributes();var r=n.attributes,i=e.getAttributes(),o=t.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var l=u.normalized,c=u.itemSize,h=w.get(u);if(void 0===h)continue;var f=h.buffer,d=h.type,y=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var b=u.data,_=b.stride,x=u.offset;b&&b.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):g.enableAttribute(s),p.bindBuffer(34962,f),p.vertexAttribPointer(s,c,d,l,_*y,x*y)}else u.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):g.enableAttribute(s),p.bindBuffer(34962,f),p.vertexAttribPointer(s,c,d,l,0,0)}else if(void 0!==o){var M=o[a];if(void 0!==M)switch(M.length){case 2:p.vertexAttrib2fv(s,M);break;case 3:p.vertexAttrib3fv(s,M);break;case 4:p.vertexAttrib4fv(s,M);break;default:p.vertexAttrib1fv(s,M)}}}}g.disableUnusedAttributes()}(r,s,n),null!==c&&p.bindBuffer(34963,l.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var b=n.drawRange.start*f,_=n.drawRange.count*f,x=null!==o?o.start*f:0,E=null!==o?o.count*f:1/0,S=Math.max(b,x),A=Math.min(y,b+_,x+E)-1,T=Math.max(0,A-S+1);if(0!==T){if(i.isMesh)if(!0===r.wireframe)g.setLineWidth(r.wireframeLinewidth*ot()),d.setMode(1);else switch(i.drawMode){case Re:d.setMode(4);break;case ke:d.setMode(5);break;case Ne:d.setMode(6)}else if(i.isLine){var q=r.linewidth;void 0===q&&(q=1),g.setLineWidth(q*ot()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&d.renderInstances(n,S,T):d.render(S,T)}},this.compile=function(t,e){(d=T.get(t,e)).init(),t.traverse((function(t){t.isLight&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)_t(e.material[n],t.fog,e);else _t(e.material,t.fog,e)}))};var mt=null;var vt=new ii;function gt(t,e,n,r){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||$.intersectsSprite(t)){r&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);var i=E.update(t);(o=t.material).visible&&f.push(t,i,o,n,it.z,null)}}else if(t.isImmediateRenderObject)r&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt),f.push(t,null,t.material,n,it.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||$.intersectsObject(t))){r&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);i=E.update(t);var o=t.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var l=a[s],c=o[l.materialIndex];c&&c.visible&&f.push(t,i,c,n,it.z,l)}else o.visible&&f.push(t,i,o,n,it.z,null)}var h=t.children;for(s=0,u=h.length;s<u;s++)gt(h[s],e,n,r)}}function yt(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){V=n;for(var h=n.cameras,f=0,p=h.length;f<p;f++){var m=h[f];s.layers.test(m.layers)&&(g.viewport(G.copy(m.viewport)),d.setupLights(m),bt(s,e,m,u,l,c))}}else V=null,bt(s,e,n,u,l,c)}}function bt(t,e,n,r,i,o){if(t.onBeforeRender(I,e,n,r,i,o),d=T.get(e,V||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){g.setMaterial(i);var a=wt(n,e.fog,i,t);z.geometry=null,z.program=null,z.wireframe=!1,function(t,e){t.render((function(t){I.renderBufferImmediate(t,e)}))}(t,a)}else I.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(I,e,n,r,i,o),d=T.get(e,V||n)}function _t(t,e,n){var r=b.get(t),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=S.getParameters(t,i.state,o,e,tt.numPlanes,tt.numIntersection,n),u=S.getProgramCode(t,s),l=r.program,c=!0;if(void 0===l)t.addEventListener("dispose",dt);else if(l.code!==u)pt(t);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var h=ri[s.shaderID];r.shader={name:t.type,uniforms:Ur(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,I),u=S.getProgramCode(t,s),l=S.acquireProgram(t,r.shader,s,u),r.program=l,t.program=l}var f=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<I.maxMorphTargets;p++)f["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(p=0;p<I.maxMorphNormals;p++)f["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var m=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=tt.numPlanes,r.numIntersection=tt.numIntersection,m.clippingPlanes=tt.uniform),r.fog=e,r.lightsStateVersion=a,t.lights&&(m.ambientLightColor.value=i.state.ambient,m.lightProbe.value=i.state.probe,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),g=vo.seqWithValue(v.seq,m);r.uniformsList=g}function wt(t,e,n,r){_.resetTextureUnits();var i=b.get(n),o=d.state.lights;if(et&&(nt||t!==U)){var a=t===U&&n.id===F;tt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,a)}!1===n.needsUpdate&&(void 0===i.program||n.fog&&i.fog!==e||n.lights&&i.lightsStateVersion!==o.state.version?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===tt.numPlanes&&i.numIntersection===tt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(_t(n,e,r),n.needsUpdate=!1);var s,u,l=!1,c=!1,h=!1,f=i.program,m=f.getUniforms(),y=i.shader.uniforms;if(g.useProgram(f.program)&&(l=!0,c=!0,h=!0),n.id!==F&&(F=n.id,c=!0),l||U!==t){if(m.setValue(p,"projectionMatrix",t.projectionMatrix),v.logarithmicDepthBuffer&&m.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),U!==t&&(U=t,c=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var w=m.map.cameraPosition;void 0!==w&&w.setValue(p,it.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&m.setValue(p,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){m.setOptional(p,r,"bindMatrix"),m.setOptional(p,r,"bindMatrixInverse");var M=r.skeleton;if(M){var E=M.bones;if(v.floatVertexTextures){if(void 0===M.boneTexture){var S=Math.sqrt(4*E.length);S=fn.ceilPowerOfTwo(S),S=Math.max(S,4);var A=new Float32Array(S*S*4);A.set(M.boneMatrices);var T=new Qr(A,S,S,Zt,zt);T.needsUpdate=!0,M.boneMatrices=A,M.boneTexture=T,M.boneTextureSize=S}m.setValue(p,"boneTexture",M.boneTexture,_),m.setValue(p,"boneTextureSize",M.boneTextureSize)}else m.setOptional(p,M,"boneMatrices")}}return c&&(m.setValue(p,"toneMappingExposure",I.toneMappingExposure),m.setValue(p,"toneMappingWhitePoint",I.toneMappingWhitePoint),n.lights&&(u=h,(s=y).ambientLightColor.needsUpdate=u,s.lightProbe.needsUpdate=u,s.directionalLights.needsUpdate=u,s.pointLights.needsUpdate=u,s.spotLights.needsUpdate=u,s.rectAreaLights.needsUpdate=u,s.hemisphereLights.needsUpdate=u),e&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(y,e),n.isMeshBasicMaterial?xt(y,n):n.isMeshLambertMaterial?(xt(y,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(y,n)):n.isMeshPhongMaterial?(xt(y,n),n.isMeshToonMaterial?function(t,e){Mt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(y,n):Mt(y,n)):n.isMeshStandardMaterial?(xt(y,n),n.isMeshPhysicalMaterial?function(t,e){Et(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}(y,n):Et(y,n)):n.isMeshMatcapMaterial?(xt(y,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===x&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===x&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isMeshDepthMaterial?(xt(y,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isMeshDistanceMaterial?(xt(y,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(y,n)):n.isMeshNormalMaterial?(xt(y,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===x&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===x&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(y,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(y,n)):n.isPointsMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*Z,t.scale.value=.5*X,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(y,n):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(y,n):n.isShadowMaterial&&(y.color.value.copy(n.color),y.opacity.value=n.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=ni.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=ni.LTC_2),vo.upload(p,i.uniformsList,y,_)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(vo.upload(p,i.uniformsList,y,_),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&m.setValue(p,"center",r.center),m.setValue(p,"modelViewMatrix",r.modelViewMatrix),m.setValue(p,"normalMatrix",r.normalMatrix),m.setValue(p,"modelMatrix",r.matrixWorld),f}function xt(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=b.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function Mt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===x&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===x&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Et(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===x&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===x&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}vt.setAnimationLoop((function(t){ut.isPresenting()||mt&&mt(t)})),"undefined"!=typeof window&&vt.setContext(window),this.setAnimationLoop=function(t){mt=t,ut.setAnimationLoop(t),vt.start()},this.render=function(t,e){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),e&&e.isCamera){if(!R){z.geometry=null,z.program=null,z.wireframe=!1,F=-1,U=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ut.enabled&&(e=ut.getCamera(e)),(d=T.get(t,e)).init(),t.onBeforeRender(I,t,e,n||D),rt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),$.setFromMatrix(rt),nt=this.localClippingEnabled,et=tt.init(this.clippingPlanes,nt,e),(f=A.get(t,e)).init(),gt(t,e,0,I.sortObjects),!0===I.sortObjects&&f.sort(),et&&tt.beginShadows();var i=d.state.shadowsArray;ct.render(i,t,e),d.setupLights(e),et&&tt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),q.render(f,t,e,r);var o=f.opaque,a=f.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&yt(o,t,e,s),a.length&&yt(a,t,e,s)}else o.length&&yt(o,t,e),a.length&&yt(a,t,e);t.onAfterRender(I,t,e),null!==D&&(_.updateRenderTargetMipmap(D),_.updateMultisampleRenderTarget(D)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),ut.enabled&&ut.submitFrame(),f=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){k!==t&&p.bindFramebuffer(36160,t),k=t},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return D},this.setRenderTarget=function(t,e,n){D=t,N=e,B=n,t&&void 0===b.get(t).__webglFramebuffer&&_.setupRenderTarget(t);var r=k,i=!1;if(t){var o=b.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(r=o[e||0],i=!0):r=t.isWebGLMultisampleRenderTarget?b.get(t).__webglMultisampledFramebuffer:o,G.copy(t.viewport),H.copy(t.scissor),W=t.scissorTest}else G.copy(J).multiplyScalar(Z).floor(),H.copy(K).multiplyScalar(Z).floor(),W=Q;if(j!==r&&(p.bindFramebuffer(36160,r),j=r),g.viewport(G),g.scissor(H),g.setScissorTest(W),i){var a=b.get(t.texture);p.framebufferTexture2D(36160,36064,34069+(e||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){var s=b.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var u=!1;s!==j&&(p.bindFramebuffer(36160,s),u=!0);try{var l=t.texture,c=l.format,h=l.type;if(c!==Zt&&C.convert(c)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===kt||C.convert(h)===p.getParameter(35738)||h===zt&&(v.isWebGL2||m.get("OES_texture_float")||m.get("WEBGL_color_buffer_float"))||h===Ut&&(v.isWebGL2?m.get("EXT_color_buffer_float"):m.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&p.readPixels(e,n,r,i,C.convert(c),C.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&p.bindFramebuffer(36160,j)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,o=C.convert(e.format);_.setTexture2D(e,0),p.copyTexImage2D(3553,n||0,o,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=C.convert(n.format),s=C.convert(n.type);_.setTexture2D(n,0),e.isDataTexture?p.texSubImage2D(3553,r||0,t.x,t.y,i,o,a,s,e.image.data):p.texSubImage2D(3553,r||0,t.x,t.y,a,s,e.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function aa(t,e){this.name="",this.color=new fr(t),this.density=void 0!==e?e:25e-5}function sa(t,e,n){this.name="",this.color=new fr(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function ua(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function la(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function ca(t){yr.call(this),this.type="SpriteMaterial",this.color=new fr(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function ha(t){if(nr.call(this),this.type="Sprite",void 0===Xo){Xo=new Nr;var e=new ua(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Xo.setIndex([0,1,2,0,2,3]),Xo.addAttribute("position",new la(e,3,0,!1)),Xo.addAttribute("uv",new la(e,2,3,!1))}this.geometry=Xo,this.material=void 0!==t?t:new ca,this.center=new dn(.5,.5)}function fa(){nr.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function da(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Br.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Cn,this.bindMatrixInverse=new Cn}function pa(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Cn)}}function ma(){nr.call(this),this.type="Bone"}function va(t){yr.call(this),this.type="LineBasicMaterial",this.color=new fr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function ga(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),nr.call(this),this.type="Line",this.geometry=void 0!==t?t:new Nr,this.material=void 0!==e?e:new va({color:16777215*Math.random()})}function ya(t,e){ga.call(this,t,e),this.type="LineSegments"}function ba(t,e){ga.call(this,t,e),this.type="LineLoop"}function _a(t){yr.call(this),this.type="PointsMaterial",this.color=new fr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function wa(t,e){nr.call(this),this.type="Points",this.geometry=void 0!==t?t:new Nr,this.material=void 0!==e?e:new _a({color:16777215*Math.random()}),this.updateMorphTargets()}function xa(t,e,n,r,i,o,a,s,u){qn.call(this,t,e,n,r,i,o,a,s,u),this.format=void 0!==a?a:Xt,this.minFilter=void 0!==o?o:Lt,this.magFilter=void 0!==i?i:Lt,this.generateMipmaps=!1}function Ma(t,e,n,r,i,o,a,s,u,l,c,h){qn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ea(t,e,n,r,i,o,a,s,u){qn.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function Sa(t,e,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:$t)!==$t&&l!==te)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===$t&&(n=Dt),void 0===n&&l===te&&(n=Wt),qn.call(this,null,r,i,o,a,s,l,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:St,this.minFilter=void 0!==s?s:St,this.flipY=!1,this.generateMipmaps=!1}function Aa(t){Nr.call(this),this.type="WireframeGeometry";var e,n,r,i,o,a,s,u,l,c,h=[],f=[0,0],d={},p=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,r=m.length;e<r;e++){var v=m[e];for(n=0;n<3;n++)s=v[p[n]],u=v[p[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+","+f[1]]&&(d[l]={index1:f[0],index2:f[1]})}for(l in d)a=d[l],c=t.vertices[a.index1],h.push(c.x,c.y,c.z),c=t.vertices[a.index2],h.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,b,_,w,x,M;if(c=new mn,null!==t.index){for(g=t.attributes.position,y=t.index,0===(b=t.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(e=w=(_=b[i]).start,r=w+_.count;e<r;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),u=y.getX(e+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+","+f[1]]&&(d[l]={index1:f[0],index2:f[1]});for(l in d)a=d[l],c.fromBufferAttribute(g,a.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(e=0,r=(g=t.attributes.position).count/3;e<r;e++)for(n=0;n<3;n++)x=3*e+n,c.fromBufferAttribute(g,x),h.push(c.x,c.y,c.z),M=3*e+(n+1)%3,c.fromBufferAttribute(g,M),h.push(c.x,c.y,c.z)}this.addAttribute("position",new qr(h,3))}function Ta(t,e,n){jr.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new qa(t,e,n)),this.mergeVertices()}function qa(t,e,n){Nr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,o=[],a=[],s=[],u=[],l=1e-5,c=new mn,h=new mn,f=new mn,d=new mn,p=new mn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=e;i++){var g=i/e;t(g,v,h),a.push(h.x,h.y,h.z),g-l>=0?(t(g-l,v,f),d.subVectors(h,f)):(t(g+l,v,f),d.subVectors(f,h)),v-l>=0?(t(g,v-l,f),p.subVectors(h,f)):(t(g,v+l,f),p.subVectors(f,h)),c.crossVectors(d,p).normalize(),s.push(c.x,c.y,c.z),u.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var y=r*m+i,b=r*m+i+1,_=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,b,w),o.push(b,_,w)}this.setIndex(o),this.addAttribute("position",new qr(a,3)),this.addAttribute("normal",new qr(s,3)),this.addAttribute("uv",new qr(u,2))}function Pa(t,e,n,r){jr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new La(t,e,n,r)),this.mergeVertices()}function La(t,e,n,r){Nr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1;var i=[],o=[];function a(t,e,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var l=t.clone().lerp(n,i/a),c=e.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)u[i][o]=0===o&&i===a?l:l.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2==0?(s(u[i][f+1]),s(u[i+1][f]),s(u[i][f])):(s(u[i][f+1]),s(u[i+1][f+1]),s(u[i+1][f]))}}function s(t){i.push(t.x,t.y,t.z)}function u(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}function h(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}!function(t){for(var n=new mn,r=new mn,i=new mn,o=0;o<e.length;o+=3)u(e[o+0],n),u(e[o+1],r),u(e[o+2],i),a(n,r,i,t)}(r=r||0),function(t){for(var e=new mn,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){for(var t=new mn,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=c(t)/2/Math.PI+.5,r=h(t)/Math.PI+.5;o.push(n,1-r)}(function(){for(var t=new mn,e=new mn,n=new mn,r=new mn,a=new dn,s=new dn,u=new dn,h=0,f=0;h<i.length;h+=9,f+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),u.set(o[f+4],o[f+5]),r.copy(t).add(e).add(n).divideScalar(3);var d=c(r);l(a,f+0,t,d),l(s,f+2,e,d),l(u,f+4,n,d)}})(),function(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.addAttribute("position",new qr(i,3)),this.addAttribute("normal",new qr(i.slice(),3)),this.addAttribute("uv",new qr(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Oa(t,e){jr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ca(t,e)),this.mergeVertices()}function Ca(t,e){La.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ia(t,e){jr.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ra(t,e)),this.mergeVertices()}function Ra(t,e){La.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ka(t,e){jr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Na(t,e)),this.mergeVertices()}function Na(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];La.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ba(t,e){jr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Da(t,e)),this.mergeVertices()}function Da(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];La.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ja(t,e,n,r,i,o){jr.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Fa(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Fa(t,e,n,r,i){Nr.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8,i=i||!1;var o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new mn,l=new mn,c=new dn,h=new mn,f=[],d=[],p=[],m=[];function v(i){h=t.getPointAt(i/e,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);l.x=v*a.x+m*c.x,l.y=v*a.y+m*c.y,l.z=v*a.z+m*c.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=h.x+n*l.x,u.y=h.y+n*l.y,u.z=h.z+n*l.z,f.push(u.x,u.y,u.z)}}!function(){for(a=0;a<e;a++)v(a);v(!1===i?e:0),function(){for(a=0;a<=e;a++)for(s=0;s<=r;s++)c.x=a/e,c.y=s/r,p.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(a=1;a<=r;a++){var t=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(t,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.addAttribute("position",new qr(f,3)),this.addAttribute("normal",new qr(d,3)),this.addAttribute("uv",new qr(p,2))}function za(t,e,n,r,i,o,a){jr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ua(t,e,n,r,i,o)),this.mergeVertices()}function Ua(t,e,n,r,i,o){Nr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],f=new mn,d=new mn,p=new mn,m=new mn,v=new mn,g=new mn,y=new mn;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(T(b,i,o,t,p),T(b+.01,i,o,t,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var _=s/r*Math.PI*2,w=-e*Math.cos(_),x=e*Math.sin(_);f.x=p.x+(w*y.x+x*v.x),f.y=p.y+(w*y.y+x*v.y),f.z=p.z+(w*y.z+x*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var M=(r+1)*(s-1)+(a-1),E=(r+1)*s+(a-1),S=(r+1)*s+a,A=(r+1)*(s-1)+a;u.push(M,E,A),u.push(E,S,A)}function T(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new qr(l,3)),this.addAttribute("normal",new qr(c,3)),this.addAttribute("uv",new qr(h,2))}function Va(t,e,n,r,i){jr.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Ga(t,e,n,r,i)),this.mergeVertices()}function Ga(t,e,n,r,i){Nr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new mn,f=new mn,d=new mn;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var p=a/r*i,m=o/n*Math.PI*2;f.x=(t+e*Math.cos(m))*Math.cos(p),f.y=(t+e*Math.cos(m))*Math.sin(p),f.z=e*Math.sin(m),u.push(f.x,f.y,f.z),h.x=t*Math.cos(p),h.y=t*Math.sin(p),d.subVectors(f,h).normalize(),l.push(d.x,d.y,d.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.addAttribute("position",new qr(u,3)),this.addAttribute("normal",new qr(l,3)),this.addAttribute("uv",new qr(c,2))}Object.assign(ra.prototype,i.prototype),Object.assign(ia.prototype,i.prototype),Object.assign(aa.prototype,{isFogExp2:!0,clone:function(){return new aa(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(sa.prototype,{isFog:!0,clone:function(){return new sa(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(ua.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ua.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(la.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(la.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),ca.prototype=Object.create(yr.prototype),ca.prototype.constructor=ca,ca.prototype.isSpriteMaterial=!0,ca.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},ha.prototype=Object.assign(Object.create(nr.prototype),{constructor:ha,isSprite:!0,raycast:function(){var t=new mn,e=new mn,n=new mn,r=new dn,i=new dn,o=new Cn,a=new mn,s=new mn,u=new mn,l=new dn,c=new dn,h=new dn;function f(t,e,n,a,s,u){r.subVectors(t,n).addScalar(.5).multiply(a),void 0!==s?(i.x=u*r.x-s*r.y,i.y=s*r.x+u*r.y):i.copy(r),t.copy(e),t.x+=i.x,t.y+=i.y,t.applyMatrix4(o)}return function(r,i){e.setFromMatrixScale(this.matrixWorld),o.copy(r._camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(r._camera.matrixWorldInverse,this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix),r._camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&e.multiplyScalar(-n.z);var d,p,m=this.material.rotation;0!==m&&(p=Math.cos(m),d=Math.sin(m));var v=this.center;f(a.set(-.5,-.5,0),n,v,e,d,p),f(s.set(.5,-.5,0),n,v,e,d,p),f(u.set(.5,.5,0),n,v,e,d,p),l.set(0,0),c.set(1,0),h.set(1,1);var g=r.ray.intersectTriangle(a,s,u,!1,t);if(null!==g||(f(s.set(-.5,.5,0),n,v,e,d,p),c.set(0,1),null!==(g=r.ray.intersectTriangle(a,u,s,!1,t)))){var y=r.ray.origin.distanceTo(t);y<r.near||y>r.far||i.push({distance:y,point:t.clone(),uv:sr.getUV(t,a,s,u,l,c,h,new dn),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return nr.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),fa.prototype=Object.assign(Object.create(nr.prototype),{constructor:fa,isLOD:!0,copy:function(t){nr.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:(Zo=new mn,function(t,e){Zo.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Zo);this.getObjectForDistance(n).raycast(t,e)}),update:function(){var t=new mn,e=new mn;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(t){var e=nr.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),da.prototype=Object.assign(Object.create(Br.prototype),{constructor:da,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Pn,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Br.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(pa.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Cn;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(Jo=new Cn,Ko=new Cn,function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++){var a=t[i]?t[i].matrixWorld:Ko;Jo.multiplyMatrices(a,e[i]),Jo.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new pa(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),ma.prototype=Object.assign(Object.create(nr.prototype),{constructor:ma,isBone:!0}),va.prototype=Object.create(yr.prototype),va.prototype.constructor=va,va.prototype.isLineBasicMaterial=!0,va.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},ga.prototype=Object.assign(Object.create(nr.prototype),{constructor:ga,isLine:!0,computeLineDistances:(Qo=new mn,$o=new mn,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)Qo.fromBufferAttribute(e,r-1),$o.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=Qo.distanceTo($o);t.addAttribute("lineDistance",new qr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for((n=t.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this}),raycast:function(){var t=new Cn,e=new ar,n=new or;return function(r,i){var o=r.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var u=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,c=new mn,h=new mn,f=new mn,d=new mn,p=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes.position.array;if(null!==m)for(var g=m.array,y=0,b=g.length-1;y<b;y+=p){var _=g[y],w=g[y+1];if(c.fromArray(v,3*_),h.fromArray(v,3*w),!(e.distanceSqToSegment(c,h,d,f)>l))d.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(d))<r.near||E>r.far||i.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,b=v.length/3-1;y<b;y+=p){if(c.fromArray(v,3*y),h.fromArray(v,3*y+3),!(e.distanceSqToSegment(c,h,d,f)>l))d.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(d))<r.near||E>r.far||i.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var x=a.vertices,M=x.length;for(y=0;y<M-1;y+=p){var E;if(!(e.distanceSqToSegment(x[y],x[y+1],d,f)>l))d.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(d))<r.near||E>r.far||i.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ya.prototype=Object.assign(Object.create(ga.prototype),{constructor:ya,isLineSegments:!0,computeLineDistances:function(){var t=new mn,e=new mn;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)t.fromBufferAttribute(r,o),e.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);n.addAttribute("lineDistance",new qr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e)}return this}}()}),ba.prototype=Object.assign(Object.create(ga.prototype),{constructor:ba,isLineLoop:!0}),_a.prototype=Object.create(yr.prototype),_a.prototype.constructor=_a,_a.prototype.isPointsMaterial=!0,_a.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},wa.prototype=Object.assign(Object.create(nr.prototype),{constructor:wa,isPoints:!0,raycast:function(){var t=new Cn,e=new ar,n=new or;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new mn,f=new mn;if(a.isBufferGeometry){var d=a.index,p=a.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(p,3*y),w(h,y)}else{v=0;for(var b=p.length/3;v<b;v++)h.fromArray(p,3*v),w(h,v)}}else{var _=a.vertices;for(v=0,b=_.length;v<b;v++)w(_[v],v)}}function w(t,n){var a=e.distanceSqToPoint(t);if(a<c){e.closestPointToPoint(t,f),f.applyMatrix4(s);var u=r.ray.origin.distanceTo(f);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:f.clone(),index:n,face:null,object:o})}}}}(),updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),xa.prototype=Object.assign(Object.create(qn.prototype),{constructor:xa,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ma.prototype=Object.create(qn.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isCompressedTexture=!0,Ea.prototype=Object.create(qn.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isCanvasTexture=!0,Sa.prototype=Object.create(qn.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isDepthTexture=!0,Aa.prototype=Object.create(Nr.prototype),Aa.prototype.constructor=Aa,Ta.prototype=Object.create(jr.prototype),Ta.prototype.constructor=Ta,qa.prototype=Object.create(Nr.prototype),qa.prototype.constructor=qa,Pa.prototype=Object.create(jr.prototype),Pa.prototype.constructor=Pa,La.prototype=Object.create(Nr.prototype),La.prototype.constructor=La,Oa.prototype=Object.create(jr.prototype),Oa.prototype.constructor=Oa,Ca.prototype=Object.create(La.prototype),Ca.prototype.constructor=Ca,Ia.prototype=Object.create(jr.prototype),Ia.prototype.constructor=Ia,Ra.prototype=Object.create(La.prototype),Ra.prototype.constructor=Ra,ka.prototype=Object.create(jr.prototype),ka.prototype.constructor=ka,Na.prototype=Object.create(La.prototype),Na.prototype.constructor=Na,Ba.prototype=Object.create(jr.prototype),Ba.prototype.constructor=Ba,Da.prototype=Object.create(La.prototype),Da.prototype.constructor=Da,ja.prototype=Object.create(jr.prototype),ja.prototype.constructor=ja,Fa.prototype=Object.create(Nr.prototype),Fa.prototype.constructor=Fa,Fa.prototype.toJSON=function(){var t=Nr.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},za.prototype=Object.create(jr.prototype),za.prototype.constructor=za,Ua.prototype=Object.create(Nr.prototype),Ua.prototype.constructor=Ua,Va.prototype=Object.create(jr.prototype),Va.prototype.constructor=Va,Ga.prototype=Object.create(Nr.prototype),Ga.prototype.constructor=Ga;var Ha=function(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=Wa(t,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(t,e,n,r){var i,o,a,s,u,l=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(u=Wa(t,a,s,r,!1))===u.next&&(u.steiner=!0),l.push(ns(u));for(l.sort($a),i=0;i<l.length;i++)ts(l[i],n),n=Ya(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var p=n;p<h;p+=n)(s=t[p])<r&&(r=s),(u=t[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return Xa(f,d,n,r,i,l),d};function Wa(t,e,n,r,i){var o,a;if(i===function(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=cs(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=cs(o,t[o],t[o+1],a);return a&&as(a,a.next)&&(hs(a),a=a.next),a}function Ya(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!as(r,r.next)&&0!==os(r.prev,r,r.next))r=r.next;else{if(hs(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Xa(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=es(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Ja(t,r,i,o):Za(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),hs(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Xa(t=Ka(t,e,n),e,n,r,i,o,2):2===a&&Qa(t,e,n,r,i,o):Xa(Ya(t),e,n,r,i,o,1);break}}}function Za(t){var e=t.prev,n=t,r=t.next;if(os(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(rs(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&os(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ja(t,e,n,r){var i=t.prev,o=t,a=t.next;if(os(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=es(s,u,e,n,r),f=es(l,c,e,n,r),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&rs(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&os(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&rs(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&os(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&rs(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&os(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&rs(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&os(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ka(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!as(i,o)&&ss(i,r,r.next,o)&&us(i,o)&&us(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),hs(r),hs(r.next),r=t=o),r=r.next}while(r!==t);return r}function Qa(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&is(a,s)){var u=ls(a,s);return a=Ya(a,a.next),u=Ya(u,u.next),Xa(a,e,n,r,i,o),void Xa(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function $a(t,e){return t.x-e.x}function ts(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;r=n.next;for(;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&rs(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&us(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=ls(e,t);Ya(n,n.next)}}function es(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ns(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function rs(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function is(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ss(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&us(t,e)&&us(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function os(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function as(t,e){return t.x===e.x&&t.y===e.y}function ss(t,e,n,r){return!!(as(t,n)&&as(e,r)||as(t,r)&&as(n,e))||os(t,e,n)>0!=os(t,e,r)>0&&os(n,r,t)>0!=os(n,r,e)>0}function us(t,e){return os(t.prev,t,t.next)<0?os(t,e,t.next)>=0&&os(t,t.prev,e)>=0:os(t,e,t.prev)<0||os(t,t.next,e)<0}function ls(t,e){var n=new fs(t.i,t.x,t.y),r=new fs(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function cs(t,e,n,r){var i=new fs(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function hs(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function fs(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ds={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return ds.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];ps(t),ms(n,t);var o=t.length;e.forEach(ps);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,ms(n,e[a]);var s=Ha(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function ps(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ms(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function vs(t,e){jr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new gs(t,e)),this.mergeVertices()}function gs(t,e){Nr.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,r=[],i=[],o=0,a=t.length;o<a;o++){s(t[o])}function s(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:100,l=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3,p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:ys;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);var v,g,y,b,_,w,x,M,E=!1;p&&(v=p.getSpacedPoints(s),E=!0,l=!1,g=p.computeFrenetFrames(s,!1),y=new mn,b=new mn,_=new mn),l||(d=0,c=0,h=0,f=0);var S=t.extractPoints(a),A=S.shape,T=S.holes;if(!ds.isClockWise(A))for(A=A.reverse(),x=0,M=T.length;x<M;x++)w=T[x],ds.isClockWise(w)&&(T[x]=w.reverse());var q=ds.triangulateShape(A,T),P=A;for(x=0,M=T.length;x<M;x++)w=T[x],A=A.concat(w);function L(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var O,C,I,R,k,N,B=A.length,D=q.length;function j(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=e.x-s/f,m=e.y+a/f,v=((n.x-l/d-p)*l-(n.y+u/d-m)*u)/(a*l-s*u),g=(r=p+a*v-t.x)*r+(i=m+s*v-t.y)*i;if(g<=2)return new dn(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?u>Number.EPSILON&&(y=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new dn(r/o,i/o)}for(var F=[],z=0,U=P.length,V=U-1,G=z+1;z<U;z++,V++,G++)V===U&&(V=0),G===U&&(G=0),F[z]=j(P[z],P[V],P[G]);var H,W,Y=[],X=F.concat();for(x=0,M=T.length;x<M;x++){for(w=T[x],H=[],z=0,V=(U=w.length)-1,G=z+1;z<U;z++,V++,G++)V===U&&(V=0),G===U&&(G=0),H[z]=j(w[z],w[V],w[G]);Y.push(H),X=X.concat(H)}for(O=0;O<d;O++){for(I=O/d,R=c*Math.cos(I*Math.PI/2),C=h*Math.sin(I*Math.PI/2)+f,z=0,U=P.length;z<U;z++)J((k=L(P[z],F[z],C)).x,k.y,-R);for(x=0,M=T.length;x<M;x++)for(w=T[x],H=Y[x],z=0,U=w.length;z<U;z++)J((k=L(w[z],H[z],C)).x,k.y,-R)}for(C=h+f,z=0;z<B;z++)k=l?L(A[z],X[z],C):A[z],E?(b.copy(g.normals[0]).multiplyScalar(k.x),y.copy(g.binormals[0]).multiplyScalar(k.y),_.copy(v[0]).add(b).add(y),J(_.x,_.y,_.z)):J(k.x,k.y,0);for(W=1;W<=s;W++)for(z=0;z<B;z++)k=l?L(A[z],X[z],C):A[z],E?(b.copy(g.normals[W]).multiplyScalar(k.x),y.copy(g.binormals[W]).multiplyScalar(k.y),_.copy(v[W]).add(b).add(y),J(_.x,_.y,_.z)):J(k.x,k.y,u/s*W);for(O=d-1;O>=0;O--){for(I=O/d,R=c*Math.cos(I*Math.PI/2),C=h*Math.sin(I*Math.PI/2)+f,z=0,U=P.length;z<U;z++)J((k=L(P[z],F[z],C)).x,k.y,u+R);for(x=0,M=T.length;x<M;x++)for(w=T[x],H=Y[x],z=0,U=w.length;z<U;z++)k=L(w[z],H[z],C),E?J(k.x,k.y+v[s-1].y,v[s-1].x+R):J(k.x,k.y,u+R)}function Z(t,e){var n,r;for(z=t.length;--z>=0;){n=z,(r=z-1)<0&&(r=t.length-1);var i=0,o=s+2*d;for(i=0;i<o;i++){var a=B*i,u=B*(i+1);Q(e+n+a,e+r+a,e+r+u,e+n+u)}}}function J(t,e,n){o.push(t),o.push(e),o.push(n)}function K(t,e,i){$(t),$(e),$(i);var o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);tt(a[0]),tt(a[1]),tt(a[2])}function Q(t,e,i,o){$(t),$(e),$(o),$(e),$(i),$(o);var a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);tt(s[0]),tt(s[1]),tt(s[3]),tt(s[1]),tt(s[2]),tt(s[3])}function $(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function tt(t){i.push(t.x),i.push(t.y)}!function(){var t=r.length/3;if(l){var e=0,i=B*e;for(z=0;z<D;z++)K((N=q[z])[2]+i,N[1]+i,N[0]+i);for(i=B*(e=s+2*d),z=0;z<D;z++)K((N=q[z])[0]+i,N[1]+i,N[2]+i)}else{for(z=0;z<D;z++)K((N=q[z])[2],N[1],N[0]);for(z=0;z<D;z++)K((N=q[z])[0]+B*s,N[1]+B*s,N[2]+B*s)}n.addGroup(t,r.length/3-t,0)}(),function(){var t=r.length/3,e=0;for(Z(P,e),e+=P.length,x=0,M=T.length;x<M;x++)Z(w=T[x],e),e+=w.length;n.addGroup(t,r.length/3-t,1)}()}this.addAttribute("position",new qr(r,3)),this.addAttribute("uv",new qr(i,2)),this.computeVertexNormals()}vs.prototype=Object.create(jr.prototype),vs.prototype.constructor=vs,vs.prototype.toJSON=function(){var t=jr.prototype.toJSON.call(this);return bs(this.parameters.shapes,this.parameters.options,t)},gs.prototype=Object.create(Nr.prototype),gs.prototype.constructor=gs,gs.prototype.toJSON=function(){var t=Nr.prototype.toJSON.call(this);return bs(this.parameters.shapes,this.parameters.options,t)};var ys={generateTopUV:function(t,e,n,r,i){var o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],l=e[3*i],c=e[3*i+1];return[new dn(o,a),new dn(s,u),new dn(l,c)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],f=e[3*i],d=e[3*i+1],p=e[3*i+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-c)<.01?[new dn(a,1-u),new dn(l,1-h),new dn(f,1-p),new dn(m,1-g)]:[new dn(s,1-u),new dn(c,1-h),new dn(d,1-p),new dn(v,1-g)]}};function bs(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function _s(t,e){jr.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new ws(t,e)),this.mergeVertices()}function ws(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new jr;var r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),gs.call(this,r,e),this.type="TextBufferGeometry"}function xs(t,e,n,r,i,o,a){jr.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Ms(t,e,n,r,i,o,a)),this.mergeVertices()}function Ms(t,e,n,r,i,o,a){Nr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,l=Math.min(o+a,Math.PI),c=0,h=[],f=new mn,d=new mn,p=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],b=u/n,_=0;for(0==u&&0==o?_=.5/e:u==n&&l==Math.PI&&(_=-.5/e),s=0;s<=e;s++){var w=s/e;f.x=-t*Math.cos(r+w*i)*Math.sin(o+b*a),f.y=t*Math.cos(o+b*a),f.z=t*Math.sin(r+w*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),g.push(w+_,1-b),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++){var x=h[u][s+1],M=h[u][s],E=h[u+1][s],S=h[u+1][s+1];(0!==u||o>0)&&p.push(x,M,S),(u!==n-1||l<Math.PI)&&p.push(M,E,S)}this.setIndex(p),this.addAttribute("position",new qr(m,3)),this.addAttribute("normal",new qr(v,3)),this.addAttribute("uv",new qr(g,2))}function Es(t,e,n,r,i,o){jr.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Ss(t,e,n,r,i,o)),this.mergeVertices()}function Ss(t,e,n,r,i,o){Nr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},t=t||.5,e=e||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,l=[],c=[],h=[],f=[],d=t,p=(e-t)/(r=void 0!==r?Math.max(1,r):1),m=new mn,v=new dn;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,f.push(v.x,v.y);d+=p}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=a=u+g,b=a+n+1,_=a+n+2,w=a+1;l.push(y,b,w),l.push(b,_,w)}}this.setIndex(l),this.addAttribute("position",new qr(c,3)),this.addAttribute("normal",new qr(h,3)),this.addAttribute("uv",new qr(f,2))}function As(t,e,n,r){jr.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new Ts(t,e,n,r)),this.mergeVertices()}function Ts(t,e,n,r){Nr.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=fn.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],l=[],c=1/e,h=new mn,f=new dn;for(o=0;o<=e;o++){var d=n+o*c*r,p=Math.sin(d),m=Math.cos(d);for(a=0;a<=t.length-1;a++)h.x=t[a].x*p,h.y=t[a].y,h.z=t[a].x*m,u.push(h.x,h.y,h.z),f.x=o/e,f.y=a/(t.length-1),l.push(f.x,f.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){var v=i=a+o*t.length,g=i+t.length,y=i+t.length+1,b=i+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.addAttribute("position",new qr(u,3)),this.addAttribute("uv",new qr(l,2)),this.computeVertexNormals(),r===2*Math.PI){var _=this.attributes.normal.array,w=new mn,x=new mn,M=new mn;for(i=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)w.x=_[a+0],w.y=_[a+1],w.z=_[a+2],x.x=_[i+a+0],x.y=_[i+a+1],x.z=_[i+a+2],M.addVectors(w,x).normalize(),_[a+0]=_[i+a+0]=M.x,_[a+1]=_[i+a+1]=M.y,_[a+2]=_[i+a+2]=M.z}}function qs(t,e){jr.call(this),this.type="ShapeGeometry","object"===r(e)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Ps(t,e)),this.mergeVertices()}function Ps(t,e){Nr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(t))l(t);else for(var u=0;u<t.length;u++)l(t[u]),this.addGroup(a,s,u),a+=s,s=0;function l(t){var a,u,l,c=r.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;for(!1===ds.isClockWise(f)&&(f=f.reverse()),a=0,u=d.length;a<u;a++)l=d[a],!0===ds.isClockWise(l)&&(d[a]=l.reverse());var p=ds.triangulateShape(f,d);for(a=0,u=d.length;a<u;a++)l=d[a],f=f.concat(l);for(a=0,u=f.length;a<u;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=p.length;a<u;a++){var v=p[a],g=v[0]+c,y=v[1]+c,b=v[2]+c;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new qr(r,3)),this.addAttribute("normal",new qr(i,3)),this.addAttribute("uv",new qr(o,2))}function Ls(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function Os(t,e){Nr.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(fn.DEG2RAD*e),u=[0,0],l={},c=["a","b","c"];t.isBufferGeometry?(o=new jr).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:d,face2:void 0}:l[i].face2=d;for(i in l){var g=l[i];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new qr(a,3))}function Cs(t,e,n,r,i,o,a,s){jr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Is(t,e,n,r,i,o,a,s)),this.mergeVertices()}function Is(t,e,n,r,i,o,a,s){Nr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],f=[],d=0,p=[],m=n/2,v=0;function g(n){var i,o,p,g=new dn,y=new mn,b=0,_=!0===n?t:e,w=!0===n?1:-1;for(o=d,i=1;i<=r;i++)c.push(0,m*w,0),h.push(0,w,0),f.push(.5,.5),d++;for(p=d,i=0;i<=r;i++){var x=i/r*s+a,M=Math.cos(x),E=Math.sin(x);y.x=_*E,y.y=m*w,y.z=_*M,c.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*M+.5,g.y=.5*E*w+.5,f.push(g.x,g.y),d++}for(i=0;i<r;i++){var S=o+i,A=p+i;!0===n?l.push(A,A+1,S):l.push(A+1,A,S),b+=3}u.addGroup(v,b,!0===n?1:2),v+=b}!function(){var o,g,y=new mn,b=new mn,_=0,w=(e-t)/n;for(g=0;g<=i;g++){var x=[],M=g/i,E=M*(e-t)+t;for(o=0;o<=r;o++){var S=o/r,A=S*s+a,T=Math.sin(A),q=Math.cos(A);b.x=E*T,b.y=-M*n+m,b.z=E*q,c.push(b.x,b.y,b.z),y.set(T,w,q).normalize(),h.push(y.x,y.y,y.z),f.push(S,1-M),x.push(d++)}p.push(x)}for(o=0;o<r;o++)for(g=0;g<i;g++){var P=p[g][o],L=p[g+1][o],O=p[g+1][o+1],C=p[g][o+1];l.push(P,L,C),l.push(L,O,C),_+=6}u.addGroup(v,_,0),v+=_}(),!1===o&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new qr(c,3)),this.addAttribute("normal",new qr(h,3)),this.addAttribute("uv",new qr(f,2))}function Rs(t,e,n,r,i,o,a){Cs.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ks(t,e,n,r,i,o,a){Is.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Ns(t,e,n,r){jr.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Bs(t,e,n,r)),this.mergeVertices()}function Bs(t,e,n,r){Nr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],l=[],c=new mn,h=new dn;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=e;o++,i+=3){var f=n+o/e*r;c.x=t*Math.cos(f),c.y=t*Math.sin(f),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/t+1)/2,h.y=(s[i+1]/t+1)/2,l.push(h.x,h.y)}for(i=1;i<=e;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new qr(s,3)),this.addAttribute("normal",new qr(u,3)),this.addAttribute("uv",new qr(l,2))}_s.prototype=Object.create(jr.prototype),_s.prototype.constructor=_s,ws.prototype=Object.create(gs.prototype),ws.prototype.constructor=ws,xs.prototype=Object.create(jr.prototype),xs.prototype.constructor=xs,Ms.prototype=Object.create(Nr.prototype),Ms.prototype.constructor=Ms,Es.prototype=Object.create(jr.prototype),Es.prototype.constructor=Es,Ss.prototype=Object.create(Nr.prototype),Ss.prototype.constructor=Ss,As.prototype=Object.create(jr.prototype),As.prototype.constructor=As,Ts.prototype=Object.create(Nr.prototype),Ts.prototype.constructor=Ts,qs.prototype=Object.create(jr.prototype),qs.prototype.constructor=qs,qs.prototype.toJSON=function(){var t=jr.prototype.toJSON.call(this);return Ls(this.parameters.shapes,t)},Ps.prototype=Object.create(Nr.prototype),Ps.prototype.constructor=Ps,Ps.prototype.toJSON=function(){var t=Nr.prototype.toJSON.call(this);return Ls(this.parameters.shapes,t)},Os.prototype=Object.create(Nr.prototype),Os.prototype.constructor=Os,Cs.prototype=Object.create(jr.prototype),Cs.prototype.constructor=Cs,Is.prototype=Object.create(Nr.prototype),Is.prototype.constructor=Is,Rs.prototype=Object.create(Cs.prototype),Rs.prototype.constructor=Rs,ks.prototype=Object.create(Is.prototype),ks.prototype.constructor=ks,Ns.prototype=Object.create(jr.prototype),Ns.prototype.constructor=Ns,Bs.prototype=Object.create(Nr.prototype),Bs.prototype.constructor=Bs;var Ds=Object.freeze({WireframeGeometry:Aa,ParametricGeometry:Ta,ParametricBufferGeometry:qa,TetrahedronGeometry:Oa,TetrahedronBufferGeometry:Ca,OctahedronGeometry:Ia,OctahedronBufferGeometry:Ra,IcosahedronGeometry:ka,IcosahedronBufferGeometry:Na,DodecahedronGeometry:Ba,DodecahedronBufferGeometry:Da,PolyhedronGeometry:Pa,PolyhedronBufferGeometry:La,TubeGeometry:ja,TubeBufferGeometry:Fa,TorusKnotGeometry:za,TorusKnotBufferGeometry:Ua,TorusGeometry:Va,TorusBufferGeometry:Ga,TextGeometry:_s,TextBufferGeometry:ws,SphereGeometry:xs,SphereBufferGeometry:Ms,RingGeometry:Es,RingBufferGeometry:Ss,PlaneGeometry:ai,PlaneBufferGeometry:si,LatheGeometry:As,LatheBufferGeometry:Ts,ShapeGeometry:qs,ShapeBufferGeometry:Ps,ExtrudeGeometry:vs,ExtrudeBufferGeometry:gs,EdgesGeometry:Os,ConeGeometry:Rs,ConeBufferGeometry:ks,CylinderGeometry:Cs,CylinderBufferGeometry:Is,CircleGeometry:Ns,CircleBufferGeometry:Bs,BoxGeometry:Fr,BoxBufferGeometry:zr});function js(t){yr.call(this),this.type="ShadowMaterial",this.color=new fr(0),this.transparent=!0,this.setValues(t)}function Fs(t){Hr.call(this,t),this.type="RawShaderMaterial"}function zs(t){yr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new fr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ye,this.normalScale=new dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Us(t){zs.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Vs(t){yr.call(this),this.type="MeshPhongMaterial",this.color=new fr(16777215),this.specular=new fr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ye,this.normalScale=new dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Gs(t){Vs.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Hs(t){yr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ye,this.normalScale=new dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ws(t){yr.call(this),this.type="MeshLambertMaterial",this.color=new fr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ys(t){yr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new fr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ye,this.normalScale=new dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Xs(t){va.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}js.prototype=Object.create(yr.prototype),js.prototype.constructor=js,js.prototype.isShadowMaterial=!0,js.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.color.copy(t.color),this},Fs.prototype=Object.create(Hr.prototype),Fs.prototype.constructor=Fs,Fs.prototype.isRawShaderMaterial=!0,zs.prototype=Object.create(yr.prototype),zs.prototype.constructor=zs,zs.prototype.isMeshStandardMaterial=!0,zs.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Us.prototype=Object.create(zs.prototype),Us.prototype.constructor=Us,Us.prototype.isMeshPhysicalMaterial=!0,Us.prototype.copy=function(t){return zs.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},Vs.prototype=Object.create(yr.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isMeshPhongMaterial=!0,Vs.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Gs.prototype=Object.create(Vs.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isMeshToonMaterial=!0,Gs.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Hs.prototype=Object.create(yr.prototype),Hs.prototype.constructor=Hs,Hs.prototype.isMeshNormalMaterial=!0,Hs.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ws.prototype=Object.create(yr.prototype),Ws.prototype.constructor=Ws,Ws.prototype.isMeshLambertMaterial=!0,Ws.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ys.prototype=Object.create(yr.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isMeshMatcapMaterial=!0,Ys.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Xs.prototype=Object.create(va.prototype),Xs.prototype.constructor=Xs,Xs.prototype.isLineDashedMaterial=!0,Xs.prototype.copy=function(t){return va.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Zs=Object.freeze({ShadowMaterial:js,SpriteMaterial:ca,RawShaderMaterial:Fs,ShaderMaterial:Hr,PointsMaterial:_a,MeshPhysicalMaterial:Us,MeshStandardMaterial:zs,MeshPhongMaterial:Vs,MeshToonMaterial:Gs,MeshNormalMaterial:Hs,MeshLambertMaterial:Ws,MeshDepthMaterial:Fo,MeshDistanceMaterial:zo,MeshBasicMaterial:br,MeshMatcapMaterial:Ys,LineDashedMaterial:Xs,LineBasicMaterial:va,Material:yr}),Js={arraySlice:function(t,e,n){return Js.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}}};function Ks(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Qs(t,e,n,r){Ks.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function $s(t,e,n,r){Ks.call(this,t,e,n,r)}function tu(t,e,n,r){Ks.call(this,t,e,n,r)}function eu(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Js.convertArray(e,this.TimeBufferType),this.values=Js.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function nu(t,e,n){eu.call(this,t,e,n)}function ru(t,e,n,r){eu.call(this,t,e,n,r)}function iu(t,e,n,r){eu.call(this,t,e,n,r)}function ou(t,e,n,r){Ks.call(this,t,e,n,r)}function au(t,e,n,r){eu.call(this,t,e,n,r)}function su(t,e,n,r){eu.call(this,t,e,n,r)}function uu(t,e,n,r){eu.call(this,t,e,n,r)}function lu(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=fn.generateUUID(),this.duration<0&&this.resetDuration()}function cu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return iu;case"vector":case"vector2":case"vector3":case"vector4":return uu;case"color":return ru;case"quaternion":return au;case"bool":case"boolean":return nu;case"string":return su}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];Js.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Ks.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,t<(r=e[++n]))break e}o=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,t>=(i=e[--n-1]))break e}o=n,n=0}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Ks.prototype,{beforeStart_:Ks.prototype.copySampleValue_,afterEnd_:Ks.prototype.copySampleValue_}),Qs.prototype=Object.assign(Object.create(Ks.prototype),{constructor:Qs,DefaultSettings_:{endingStart:Oe,endingEnd:Oe},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ce:i=t,a=2*e-n;break;case Ie:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ce:o=t,s=2*n-e;break;case Ie:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(r-e),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,_=0;_!==a;++_)i[_]=v*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return i}}),$s.prototype=Object.assign(Object.create(Ks.prototype),{constructor:$s,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),tu.prototype=Object.assign(Object.create(Ks.prototype),{constructor:tu,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(eu,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Js.convertArray(t.times,Array),values:Js.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(eu.prototype,{constructor:eu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Pe,InterpolantFactoryMethodDiscrete:function(t){return new tu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new $s(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Qs(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case qe:e=this.InterpolantFactoryMethodDiscrete;break;case Pe:e=this.InterpolantFactoryMethodLinear;break;case Le:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qe;case this.InterpolantFactoryMethodLinear:return Pe;case this.InterpolantFactoryMethodSmooth:return Le}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Js.arraySlice(n,i,o),this.values=Js.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&Js.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=this.getInterpolation()===Le,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=e[l+f];if(d!==e[c+f]||d!==e[h+f]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];var p=a*n,m=i*n;for(f=0;f!==n;++f)e[m+f]=e[p+f]}++i}}if(o>0){t[i]=t[o];for(p=o*n,m=i*n,f=0;f!==n;++f)e[m+f]=e[p+f];++i}return i!==t.length&&(this.times=Js.arraySlice(t,0,i),this.values=Js.arraySlice(e,0,i*n)),this},clone:function(){var t=Js.arraySlice(this.times,0),e=Js.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),nu.prototype=Object.assign(Object.create(eu.prototype),{constructor:nu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:qe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ru.prototype=Object.assign(Object.create(eu.prototype),{constructor:ru,ValueTypeName:"color"}),iu.prototype=Object.assign(Object.create(eu.prototype),{constructor:iu,ValueTypeName:"number"}),ou.prototype=Object.assign(Object.create(Ks.prototype),{constructor:ou,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=(n-e)/(r-e),l=s+a;s!==l;s+=4)pn.slerpFlat(i,0,o,s-a,o,s,u);return i}}),au.prototype=Object.assign(Object.create(eu.prototype),{constructor:au,ValueTypeName:"quaternion",DefaultInterpolation:Pe,InterpolantFactoryMethodLinear:function(t){return new ou(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),su.prototype=Object.assign(Object.create(eu.prototype),{constructor:su,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:qe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),uu.prototype=Object.assign(Object.create(eu.prototype),{constructor:uu,ValueTypeName:"vector"}),Object.assign(lu,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(cu(n[i]).scale(r));return new lu(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,o=n.length;i!==o;++i)e.push(eu.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=Js.getKeyframeOrder(s);s=Js.sortedArray(s,1,l),u=Js.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new iu(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new lu(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(lu.CreateFromMorphTargetSequence(h,r[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];Js.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var d in c){var p=[],m=[];for(f=0;f!==l[h].morphTargets.length;++f){var v=l[h];p.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new iu(".morphTargetInfluence["+d+"]",p,m))}o=c.length*(a||1)}else{var g=".bones["+e[u].name+"]";n(uu,g+".position",l,"pos",r),n(au,g+".quaternion",l,"rot",r),n(uu,g+".scale",l,"scl",r)}}return 0===r.length?null:new lu(i,o,r)}}),Object.assign(lu.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new lu(this.name,this.duration,t)}});var hu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function fu(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var du=new fu,pu={};function mu(t){this.manager=void 0!==t?t:du}function vu(t){this.manager=void 0!==t?t:du}function gu(t){this.manager=void 0!==t?t:du,this._parser=null}function yu(t){this.manager=void 0!==t?t:du,this._parser=null}function bu(t){this.manager=void 0!==t?t:du}function _u(t){this.manager=void 0!==t?t:du}function wu(t){this.manager=void 0!==t?t:du}function xu(){this.type="Curve",this.arcLengthDivisions=200}function Mu(t,e,n,r,i,o,a,s){xu.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Eu(t,e,n,r,i,o){Mu.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Su(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;i(e,n,u*=a,l*=a)},calc:function(i){var o=i*i;return t+e*i+n*o+r*(o*i)}}}Object.assign(mu.prototype,{load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=hu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0===pu[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],l=a[3];l=decodeURIComponent(l),u&&(l=atob(l));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(l.length),d=0;d<l.length;d++)f[d]=l.charCodeAt(d);c="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var p=new DOMParser;c=p.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}setTimeout((function(){e&&e(c),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{pu[t]=[],pu[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",(function(e){var n=this.response;hu.add(t,n);var r=pu[t];if(delete pu[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),m.addEventListener("progress",(function(e){for(var n=pu[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}}),!1),m.addEventListener("error",(function(e){var n=pu[t];delete pu[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),m.addEventListener("abort",(function(e){var n=pu[t];delete pu[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(t),m}pu[t].push({onLoad:e,onProgress:n,onError:r})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(vu.prototype,{load:function(t,e,n,r){var i=this,o=new mu(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=lu.parse(t[n]);e.push(r)}return e},setPath:function(t){return this.path=t,this}}),Object.assign(gu.prototype,{load:function(t,e,n,r){var i=this,o=[],a=new Ma;a.image=o;var s=new mu(this.manager);function u(u){s.load(t[u],(function(t){var n=i._parser(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=Lt),a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c)u(c);else s.load(t,(function(t){var n=i._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Lt),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a},setPath:function(t){return this.path=t,this}}),Object.assign(yu.prototype,{load:function(t,e,n,r){var i=this,o=new Qr,a=new mu(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,(function(t){var n=i._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Mt,o.wrapT=void 0!==n.wrapT?n.wrapT:Mt,o.magFilter=void 0!==n.magFilter?n.magFilter:Lt,o.minFilter=void 0!==n.minFilter?n.minFilter:It,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Lt),o.needsUpdate=!0,e&&e(o,n))}),n,r),o},setPath:function(t){return this.path=t,this}}),Object.assign(bu.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=hu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),hu.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(_u.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=new bi,o=new bu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,6===++a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(wu.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=new qn,o=new bu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Xt:Zt,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(xu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)o+=(e=this.getPoint(n/t)).distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var r=this.getPoint(e);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i,o=new mn,a=[],s=[],u=[],l=new mn,c=new Cn;for(n=0;n<=t;n++)r=n/t,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new mn,u[0]=new mn;var h=Number.MAX_VALUE,f=Math.abs(a[0].x),d=Math.abs(a[0].y),p=Math.abs(a[0].z);for(f<=h&&(h=f,o.set(1,0,0)),d<=h&&(h=d,o.set(0,1,0)),p<=h&&o.set(0,0,1),l.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],l),u[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),l.crossVectors(a[n-1],a[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(fn.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(l,i))),u[n].crossVectors(a[n],s[n]);if(!0===e)for(i=Math.acos(fn.clamp(s[0].dot(s[t]),-1,1)),i/=t,a[0].dot(l.crossVectors(s[0],s[t]))>0&&(i=-i),n=1;n<=t;n++)s[n].applyMatrix4(c.makeRotationAxis(a[n],i*n)),u[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Mu.prototype=Object.create(xu.prototype),Mu.prototype.constructor=Mu,Mu.prototype.isEllipseCurve=!0,Mu.prototype.getPoint=function(t,e){for(var n=e||new dn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)},Mu.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Mu.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Mu.prototype.fromJSON=function(t){return xu.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Eu.prototype=Object.create(Mu.prototype),Eu.prototype.constructor=Eu,Eu.prototype.isArcCurve=!0;var Au=new mn,Tu=new Su,qu=new Su,Pu=new Su;function Lu(t,e,n,r){xu.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Ou(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function Cu(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Iu(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}function Ru(t,e,n,r){xu.call(this),this.type="CubicBezierCurve",this.v0=t||new dn,this.v1=e||new dn,this.v2=n||new dn,this.v3=r||new dn}function ku(t,e,n,r){xu.call(this),this.type="CubicBezierCurve3",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn,this.v3=r||new mn}function Nu(t,e){xu.call(this),this.type="LineCurve",this.v1=t||new dn,this.v2=e||new dn}function Bu(t,e){xu.call(this),this.type="LineCurve3",this.v1=t||new mn,this.v2=e||new mn}function Du(t,e,n){xu.call(this),this.type="QuadraticBezierCurve",this.v0=t||new dn,this.v1=e||new dn,this.v2=n||new dn}function ju(t,e,n){xu.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn}function Fu(t){xu.call(this),this.type="SplineCurve",this.points=t||[]}Lu.prototype=Object.create(xu.prototype),Lu.prototype.constructor=Lu,Lu.prototype.isCatmullRomCurve3=!0,Lu.prototype.getPoint=function(t,e){var n,r,i,o,a=e||new mn,s=this.points,u=s.length,l=(u-(this.closed?0:1))*t,c=Math.floor(l),h=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===h&&c===u-1&&(c=u-2,h=1),this.closed||c>0?n=s[(c-1)%u]:(Au.subVectors(s[0],s[1]).add(s[0]),n=Au),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?o=s[(c+2)%u]:(Au.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Au),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(r),f),p=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(o),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),Tu.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,d,p,m),qu.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,d,p,m),Pu.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,d,p,m)}else"catmullrom"===this.curveType&&(Tu.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),qu.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Pu.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Tu.calc(h),qu.calc(h),Pu.calc(h)),a},Lu.prototype.copy=function(t){xu.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Lu.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Lu.prototype.fromJSON=function(t){xu.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new mn).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ru.prototype=Object.create(xu.prototype),Ru.prototype.constructor=Ru,Ru.prototype.isCubicBezierCurve=!0,Ru.prototype.getPoint=function(t,e){var n=e||new dn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Iu(t,r.x,i.x,o.x,a.x),Iu(t,r.y,i.y,o.y,a.y)),n},Ru.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ru.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ru.prototype.fromJSON=function(t){return xu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},ku.prototype=Object.create(xu.prototype),ku.prototype.constructor=ku,ku.prototype.isCubicBezierCurve3=!0,ku.prototype.getPoint=function(t,e){var n=e||new mn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Iu(t,r.x,i.x,o.x,a.x),Iu(t,r.y,i.y,o.y,a.y),Iu(t,r.z,i.z,o.z,a.z)),n},ku.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ku.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ku.prototype.fromJSON=function(t){return xu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Nu.prototype=Object.create(xu.prototype),Nu.prototype.constructor=Nu,Nu.prototype.isLineCurve=!0,Nu.prototype.getPoint=function(t,e){var n=e||new dn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Nu.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Nu.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Nu.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Nu.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Nu.prototype.fromJSON=function(t){return xu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Bu.prototype=Object.create(xu.prototype),Bu.prototype.constructor=Bu,Bu.prototype.isLineCurve3=!0,Bu.prototype.getPoint=function(t,e){var n=e||new mn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Bu.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Bu.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Bu.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Bu.prototype.fromJSON=function(t){return xu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Du.prototype=Object.create(xu.prototype),Du.prototype.constructor=Du,Du.prototype.isQuadraticBezierCurve=!0,Du.prototype.getPoint=function(t,e){var n=e||new dn,r=this.v0,i=this.v1,o=this.v2;return n.set(Cu(t,r.x,i.x,o.x),Cu(t,r.y,i.y,o.y)),n},Du.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Du.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Du.prototype.fromJSON=function(t){return xu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ju.prototype=Object.create(xu.prototype),ju.prototype.constructor=ju,ju.prototype.isQuadraticBezierCurve3=!0,ju.prototype.getPoint=function(t,e){var n=e||new mn,r=this.v0,i=this.v1,o=this.v2;return n.set(Cu(t,r.x,i.x,o.x),Cu(t,r.y,i.y,o.y),Cu(t,r.z,i.z,o.z)),n},ju.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ju.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ju.prototype.fromJSON=function(t){return xu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Fu.prototype=Object.create(xu.prototype),Fu.prototype.constructor=Fu,Fu.prototype.isSplineCurve=!0,Fu.prototype.getPoint=function(t,e){var n=e||new dn,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Ou(a,s.x,u.x,l.x,c.x),Ou(a,s.y,u.y,l.y,c.y)),n},Fu.prototype.copy=function(t){xu.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},Fu.prototype.toJSON=function(){var t=xu.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},Fu.prototype.fromJSON=function(t){xu.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new dn).fromArray(r))}return this};var zu=Object.freeze({ArcCurve:Eu,CatmullRomCurve3:Lu,CubicBezierCurve:Ru,CubicBezierCurve3:ku,EllipseCurve:Mu,LineCurve:Nu,LineCurve3:Bu,QuadraticBezierCurve:Du,QuadraticBezierCurve3:ju,SplineCurve:Fu});function Uu(){xu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Vu(t){Uu.call(this),this.type="Path",this.currentPoint=new dn,t&&this.setFromPoints(t)}function Gu(t){Vu.call(this,t),this.uuid=fn.generateUUID(),this.type="Shape",this.holes=[]}function Hu(t,e){nr.call(this),this.type="Light",this.color=new fr(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Wu(t,e,n){Hu.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(nr.DefaultUp),this.updateMatrix(),this.groundColor=new fr(e)}function Yu(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new dn(512,512),this.map=null,this.matrix=new Cn}function Xu(){Yu.call(this,new Yr(50,1,.5,500))}function Zu(t,e,n,r,i,o){Hu.call(this,t,e),this.type="SpotLight",this.position.copy(nr.DefaultUp),this.updateMatrix(),this.target=new nr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Xu}function Ju(t,e,n,r){Hu.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Yu(new Yr(90,1,.5,500))}function Ku(t,e,n,r,i,o){Wr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Qu(){Yu.call(this,new Ku(-5,5,5,-5,.5,500))}function $u(t,e){Hu.call(this,t,e),this.type="DirectionalLight",this.position.copy(nr.DefaultUp),this.updateMatrix(),this.target=new nr,this.shadow=new Qu}function tl(t,e){Hu.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function el(t,e,n,r){Hu.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function nl(t){this.manager=void 0!==t?t:du,this.textures={}}Uu.prototype=Object.assign(Object.create(xu.prototype),{constructor:Uu,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Nu(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){xu.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=xu.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){xu.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new zu[r.type]).fromJSON(r))}return this}}),Vu.prototype=Object.assign(Object.create(Uu.prototype),{constructor:Vu,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Nu(this.currentPoint.clone(),new dn(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var i=new Du(this.currentPoint.clone(),new dn(t,e),new dn(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,i,o){var a=new Ru(this.currentPoint.clone(),new dn(t,e),new dn(n,r),new dn(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(t){var e=new Fu([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+u,e+l,n,r,i,o,a,s)},absellipse:function(t,e,n,r,i,o,a,s){var u=new Mu(t,e,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(t){return Uu.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Uu.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Uu.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Gu.prototype=Object.assign(Object.create(Vu.prototype),{constructor:Gu,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Vu.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=Vu.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){Vu.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new Vu).fromJSON(r))}return this}}),Hu.prototype=Object.assign(Object.create(nr.prototype),{constructor:Hu,isLight:!0,copy:function(t){return nr.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=nr.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Wu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Wu,isHemisphereLight:!0,copy:function(t){return Hu.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Yu.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Xu.prototype=Object.assign(Object.create(Yu.prototype),{constructor:Xu,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*fn.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix())}}),Zu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Zu,isSpotLight:!0,copy:function(t){return Hu.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ju.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Ju,isPointLight:!0,copy:function(t){return Hu.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Ku.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Ku,isOrthographicCamera:!0,copy:function(t,e){return Wr.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(a-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=nr.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Qu.prototype=Object.assign(Object.create(Yu.prototype),{constructor:Qu}),$u.prototype=Object.assign(Object.create(Hu.prototype),{constructor:$u,isDirectionalLight:!0,copy:function(t){return Hu.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),tl.prototype=Object.assign(Object.create(Hu.prototype),{constructor:tl,isAmbientLight:!0}),el.prototype=Object.assign(Object.create(Hu.prototype),{constructor:el,isRectAreaLight:!0,copy:function(t){return Hu.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Hu.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(nl.prototype,{load:function(t,e,n,r){var i=this,o=new mu(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var r=new Zs[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.uniforms)for(var i in t.uniforms){var o=t.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new fr).setHex(o.value);break;case"v2":r.uniforms[i].value=(new dn).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new mn).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new Pn).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new vn).fromArray(o.value);case"m4":r.uniforms[i].value=(new Cn).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var a in t.extensions)r.extensions[a]=t.extensions[a];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new dn).fromArray(s)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),r},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var rl={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function il(){Nr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function ol(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),_r.call(this,t,e,n),this.meshPerAttribute=r||1}function al(t){this.manager=void 0!==t?t:du}il.prototype=Object.assign(Object.create(Nr.prototype),{constructor:il,isInstancedBufferGeometry:!0,copy:function(t){return Nr.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Nr.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),ol.prototype=Object.assign(Object.create(_r.prototype),{constructor:ol,isInstancedBufferAttribute:!0,copy:function(t){return _r.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=_r.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Object.assign(al.prototype,{load:function(t,e,n,r){var i=this,o=new mu(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=t.isInstancedBufferGeometry?new il:new Nr,n=t.data.index;if(void 0!==n){var r=new sl[n.type](n.array);e.setIndex(new _r(r,1))}var i=t.data.attributes;for(var o in i){var a=i[o],s=(r=new sl[a.type](a.array),new(a.isInstancedBufferAttribute?ol:_r)(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),e.addAttribute(o,s)}var u=t.data.morphAttributes;if(u)for(var o in u){for(var l=u[o],c=[],h=0,f=l.length;h<f;h++){a=l[h],s=new _r(r=new sl[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),c.push(s)}e.morphAttributes[o]=c}var d=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==d){h=0;for(var p=d.length;h!==p;++h){var m=d[h];e.addGroup(m.start,m.count,m.materialIndex)}}var v=t.data.boundingSphere;if(void 0!==v){var g=new mn;void 0!==v.center&&g.fromArray(v.center),e.boundingSphere=new or(g,v.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var sl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ul(t){this.manager=void 0!==t?t:du,this.resourcePath=""}Object.assign(ul.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=this,o=void 0===this.path?rl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new mu(i.manager);a.setPath(this.path),a.load(t,(function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new Gu).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new al,i=0,o=t.length;i<o;i++){var a,s=t[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Ds[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Ds[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Ds[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Ds[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Ds[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Ds[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Ds[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Ds[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Ds[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Ds[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Ds[s.type]((new zu[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Ds[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Ds[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],l=0,c=s.shapes.length;l<c;l++){var h=e[s.shapes[l]];u.push(h)}a=new Ds[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],l=0,c=s.shapes.length;l<c;l++){h=e[s.shapes[l]];u.push(h)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new zu[f.type]).fromJSON(f)),a=new Ds[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var i=new nl;i.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=lu.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),o.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var o=new bu(new fu(e));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var u=t[a],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var f=l[c],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;r[u.uuid].push(i(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url;r[u.uuid]=i(d)}}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(e[s.image])?new bi(e[s.image]):new qn(e[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,pl)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],ml),a.wrapT=n(s.wrap[1],ml)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,vl)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,vl)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(t,e,n){var r;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new rr,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new fr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new sa(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new aa(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new Yr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new Ku(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new tl(t.color,t.intensity);break;case"DirectionalLight":r=new $u(t.color,t.intensity);break;case"PointLight":r=new Ju(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new el(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new Zu(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new Wu(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(t.geometry),s=o(t.material);r=a.bones&&a.bones.length>0?new da(a,s):new Br(a,s),void 0!==t.drawMode&&r.setDrawMode(t.drawMode);break;case"LOD":r=new fa;break;case"Line":r=new ga(i(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new ba(i(t.geometry),o(t.material));break;case"LineSegments":r=new ya(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new wa(i(t.geometry),o(t.material));break;case"Sprite":r=new ha(o(t.material));break;case"Group":r=new Wo;break;default:r=new nr}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var u=t.children,l=0;l<u.length;l++)r.add(this.parseObject(u[l],e,n));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var f=c[h],d=r.getObjectByProperty("uuid",f.object);void 0!==d&&r.addLevel(d,f.distance)}return r}});var ll,cl,hl,fl,dl,pl={UVMapping:pt,CubeReflectionMapping:mt,CubeRefractionMapping:vt,EquirectangularReflectionMapping:gt,EquirectangularRefractionMapping:yt,SphericalReflectionMapping:bt,CubeUVReflectionMapping:_t,CubeUVRefractionMapping:wt},ml={RepeatWrapping:xt,ClampToEdgeWrapping:Mt,MirroredRepeatWrapping:Et},vl={NearestFilter:St,NearestMipmapNearestFilter:At,NearestMipmapLinearFilter:qt,LinearFilter:Lt,LinearMipmapNearestFilter:Ot,LinearMipmapLinearFilter:It};function gl(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:du,this.options=void 0}function yl(){this.type="ShapePath",this.color=new fr,this.subPaths=[],this.currentPath=null}function bl(t){this.type="Font",this.data=t}function _l(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,l,c,h,f,d,p=new yl;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*e+n,s=m[v++]*e+r,p.moveTo(a,s);break;case"l":a=m[v++]*e+n,s=m[v++]*e+r,p.lineTo(a,s);break;case"q":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,p.quadraticCurveTo(c,h,u,l);break;case"b":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,f=m[v++]*e+n,d=m[v++]*e+r,p.bezierCurveTo(c,h,f,d,u,l)}}return{offsetX:o.ha*e,path:p}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}function wl(t){this.manager=void 0!==t?t:du}function xl(){}gl.prototype={constructor:gl,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=hu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===i.options?createImageBitmap(t):createImageBitmap(t,i.options)})).then((function(n){hu.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(yl.prototype,{moveTo:function(t,e){this.currentPath=new Vu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new Gu;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],u=-u,s=e[i],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=l*(t.x-a.x)-u*(t.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=ds.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],(u=new Gu).curves=s.curves,l.push(u),l;var c=!i(o[0].getPoints());c=t?!c:c;var h,f,d=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=t?!a:a)?(!c&&p[v]&&v++,p[v]={s:new Gu,p:h},p[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var b=!1,_=[],w=0,x=p.length;w<x;w++)d[w]=[];for(w=0,x=p.length;w<x;w++)for(var M=m[w],E=0;E<M.length;E++){for(var S=M[E],A=!0,T=0;T<p.length;T++)r(S.p,p[T].p)&&(w!==T&&_.push({froms:w,tos:T,hole:E}),A?(A=!1,d[T].push(S)):b=!0);A&&d[w].push(S)}_.length>0&&(b||(m=d))}g=0;for(var q=p.length;g<q;g++){u=p[g].s,l.push(u);for(var P=0,L=(f=m[g]).length;P<L;P++)u.holes.push(f[P].h)}return l}}),Object.assign(bl.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=_l(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(wl.prototype,{load:function(t,e,n,r){var i=this,o=new mu(this.manager);o.setPath(this.path),o.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new bl(t)},setPath:function(t){return this.path=t,this}}),xl.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],o=e[n+1];if(i.test(t))return o}return null}},Object.assign(xl.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:(ll={NoBlending:P,NormalBlending:L,AdditiveBlending:O,SubtractiveBlending:C,MultiplyBlending:I,CustomBlending:R},cl=new fr,hl=new wu,fl=new nl,function(t,e,n){var r={};function i(t,i,o,a,s){var u,l=e+t,c=xl.Handlers.get(l);null!==c?u=c.load(l):(hl.setCrossOrigin(n),u=hl.load(l)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=xt),1!==i[1]&&(u.wrapT=xt)),void 0!==o&&u.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(u.wrapS=xt),"mirror"===a[0]&&(u.wrapS=Et),"repeat"===a[1]&&(u.wrapT=xt),"mirror"===a[1]&&(u.wrapT=Et)),void 0!==s&&(u.anisotropy=s);var h=fn.generateUUID();return r[h]=u,h}var o={uuid:fn.generateUUID(),type:"MeshLambertMaterial"};for(var a in t){var s=t[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=ll[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=cl.fromArray(s).getHex();break;case"colorSpecular":o.specular=cl.fromArray(s).getHex();break;case"colorEmissive":o.emissive=cl.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=x;break;case"doubleSided":o.side=M;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=q),"face"===s&&(o.vertexColors=T);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),fl.setTextures(r),fl.parse(o)})});var Ml={getContext:function(){return void 0===dl&&(dl=new(window.AudioContext||window.webkitAudioContext)),dl},setContext:function(t){dl=t}};function El(t){this.manager=void 0!==t?t:du}function Sl(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new mn)}function Al(t,e){Hu.call(this,void 0,e),this.sh=void 0!==t?t:new Sl}function Tl(t,e,n){Al.call(this,void 0,n);var r=(new fr).set(t),i=(new fr).set(e),o=new mn(r.r,r.g,r.b),a=new mn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function ql(t,e){Al.call(this,void 0,e);var n=(new fr).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Pl(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ll(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Ol(){nr.call(this),this.type="AudioListener",this.context=Ml.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Cl(t){nr.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Il(t){Cl.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Rl(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function kl(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(El.prototype,{load:function(t,e,n,r){var i=new mu(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(t,(function(t){var n=t.slice(0);Ml.getContext().decodeAudioData(n,(function(t){e(t)}))}),n,r)},setPath:function(t){return this.path=t,this}}),Object.assign(Sl.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScale(o[1],.488603*r),e.addScale(o[2],.488603*i),e.addScale(o[3],.488603*n),e.addScale(o[4],n*r*1.092548),e.addScale(o[5],r*i*1.092548),e.addScale(o[6],.315392*(3*i*i-1)),e.addScale(o[7],n*i*1.092548),e.addScale(o[8],.546274*(n*n-r*r)),e},getIrradianceAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScale(o[1],1.023328*r),e.addScale(o[2],1.023328*i),e.addScale(o[3],1.023328*n),e.addScale(o[4],.858086*n*r),e.addScale(o[5],.858086*r*i),e.addScale(o[6],.743125*i*i-.247708),e.addScale(o[7],.858086*n*i),e.addScale(o[8],.429043*(n*n-r*r)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t){for(var e=this.coefficients,n=0;n<9;n++)e[n].fromArray(t,3*n);return this},toArray:function(){for(var t=[],e=this.coefficients,n=0;n<9;n++)e[n].toArray(t,3*n);return t}}),Object.assign(Sl,{getBasisAt:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}),Al.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Al,isLightProbe:!0,copy:function(t){return Hu.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return Hu.prototype.toJSON.call(this,t)}}),Tl.prototype=Object.assign(Object.create(Al.prototype),{constructor:Tl,isHemisphereLightProbe:!0,copy:function(t){return Al.prototype.copy.call(this,t),this},toJSON:function(t){return Al.prototype.toJSON.call(this,t)}}),ql.prototype=Object.assign(Object.create(Al.prototype),{constructor:ql,isAmbientLightProbe:!0,copy:function(t){return Al.prototype.copy.call(this,t),this},toJSON:function(t){return Al.prototype.toJSON.call(this,t)}}),Object.assign(Pl.prototype,{update:function(){var t,e,n,r,i,o,a,s,u=new Cn,l=new Cn;return function(c){if(t!==this||e!==c.focus||n!==c.fov||r!==c.aspect*this.aspect||i!==c.near||o!==c.far||a!==c.zoom||s!==this.eyeSep){t=this,e=c.focus,n=c.fov,r=c.aspect*this.aspect,i=c.near,o=c.far,a=c.zoom;var h,f,d=c.projectionMatrix.clone(),p=(s=this.eyeSep/2)*i/e,m=i*Math.tan(fn.DEG2RAD*n*.5)/a;l.elements[12]=-s,u.elements[12]=s,h=-m*r+p,f=m*r+p,d.elements[0]=2*i/(f-h),d.elements[8]=(f+h)/(f-h),this.cameraL.projectionMatrix.copy(d),h=-m*r-p,f=m*r-p,d.elements[0]=2*i/(f-h),d.elements[8]=(f+h)/(f-h),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(u)}}()}),Object.assign(Ll.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Ol.prototype=Object.assign(Object.create(nr.prototype),{constructor:Ol,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new mn,e=new pn,n=new mn,r=new mn,i=new Ll;return function(o){nr.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),a.positionX){var u=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(t.x,u),a.positionY.linearRampToValueAtTime(t.y,u),a.positionZ.linearRampToValueAtTime(t.z,u),a.forwardX.linearRampToValueAtTime(r.x,u),a.forwardY.linearRampToValueAtTime(r.y,u),a.forwardZ.linearRampToValueAtTime(r.z,u),a.upX.linearRampToValueAtTime(s.x,u),a.upY.linearRampToValueAtTime(s.y,u),a.upZ.linearRampToValueAtTime(s.z,u)}else a.setPosition(t.x,t.y,t.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),Cl.prototype=Object.assign(Object.create(nr.prototype),{constructor:Cl,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Il.prototype=Object.assign(Object.create(Cl.prototype),{constructor:Il,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var t=new mn,e=new pn,n=new mn,r=new mn;return function(i){if(nr.prototype.updateMatrixWorld.call(this,i),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(t,e,n),r.set(0,0,1).applyQuaternion(e);var o=this.panner;if(o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(t.x,a),o.positionY.linearRampToValueAtTime(t.y,a),o.positionZ.linearRampToValueAtTime(t.z,a),o.orientationX.linearRampToValueAtTime(r.x,a),o.orientationY.linearRampToValueAtTime(r.y,a),o.orientationZ.linearRampToValueAtTime(r.z,a)}else o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z)}}}()}),Object.assign(Rl.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(kl.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*e;this._mixBufferRegion(n,r,a,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){pn.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}});var Nl,Bl,Dl,jl,Fl,zl,Ul,Vl,Gl,Hl,Wl,Yl,Xl,Zl;function Jl(t,e,n){var r=n||Kl.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Kl(t,e,n){this.path=e,this.parsedPath=n||Kl.parseTrackName(e),this.node=Kl.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Ql(){this.uuid=fn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function $l(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),a={endingStart:Oe,endingEnd:Oe},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ae,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function tc(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ec(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function nc(t,e,n){ua.call(this,t,e),this.meshPerAttribute=n||1}function rc(t,e,n,r){this.ray=new ar(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ic(t,e){return t.distance-e.distance}function oc(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r))for(var i=t.children,o=0,a=i.length;o<a;o++)oc(i[o],e,n,!0)}function ac(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function sc(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function uc(t,e){this.min=void 0!==t?t:new dn(1/0,1/0),this.max=void 0!==e?e:new dn(-1/0,-1/0)}function lc(t,e){this.start=void 0!==t?t:new mn,this.end=void 0!==e?e:new mn}function cc(t){nr.call(this),this.material=t,this.render=function(){}}function hc(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new Nr,l=new qr(2*a*3,3);u.addAttribute("position",l),ya.call(this,u,new va({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function fc(t,e){nr.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new Nr,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new qr(r,3));var u=new va({fog:!1});this.cone=new ya(n,u),this.add(this.cone),this.update()}function dc(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new Nr,r=[],i=[],o=new fr(0,0,1),a=new fr(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new qr(r,3)),n.addAttribute("color",new qr(i,3));var l=new va({vertexColors:q,depthTest:!1,depthWrite:!1,transparent:!0});ya.call(this,n,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function pc(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new Ms(e,4,2),i=new br({wireframe:!0,fog:!1});Br.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function mc(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=new Nr;n.addAttribute("position",new qr([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var r=new va({fog:!1});ga.call(this,n,r);var i=new Nr;i.addAttribute("position",new qr([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Br(i,new br({side:x,fog:!1}))),this.update()}function vc(t,e,n){nr.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Ra(e);r.rotateY(.5*Math.PI),this.material=new br({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=q);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new _r(o,3)),this.add(new Br(r,this.material)),this.update()}function gc(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:""},r=new Hr({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),i=new Ms(1,32,16);Br.call(this,i,r),this.onBeforeRender()}function yc(t,e,n,r){t=t||10,e=e||10,n=new fr(void 0!==n?n:4473924),r=new fr(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],l=0,c=0,h=-a;l<=e;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=l===i?n:r;f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3}var d=new Nr;d.addAttribute("position",new qr(s,3)),d.addAttribute("color",new qr(u,3));var p=new va({vertexColors:q});ya.call(this,d,p)}function bc(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new fr(void 0!==i?i:4473924),o=new fr(void 0!==o?o:8947848);var a,s,u,l,c,h,f,d=[],p=[];for(l=0;l<=e;l++)u=l/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,d.push(0,0,0),d.push(a,0,s),f=1&l?i:o,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(l=0;l<=n;l++)for(f=1&l?i:o,h=t-t/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var m=new Nr;m.addAttribute("position",new qr(d,3)),m.addAttribute("color",new qr(p,3));var v=new va({vertexColors:q});ya.call(this,m,v)}function _c(t,e,n,r){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new Nr,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));i.addAttribute("position",new _r(a,3));var s=new va({color:65280}),u=new va({color:16776960});ga.call(this,i,[u,s]),this.update()}function wc(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Nr,l=new qr(2*a*3,3);u.addAttribute("position",l),ya.call(this,u,new va({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function xc(t,e,n){nr.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new Nr;r.addAttribute("position",new qr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new va({fog:!1});this.lightPlane=new ga(r,i),this.add(this.lightPlane),(r=new Nr).addAttribute("position",new qr([0,0,0,0,0,1],3)),this.targetLine=new ga(r,i),this.add(this.targetLine),this.update()}function Mc(t){var e=new Nr,n=new va({color:16777215,vertexColors:T}),r=[],i=[],o={},a=new fr(16755200),s=new fr(16711680),u=new fr(43775),l=new fr(16777215),c=new fr(3355443);function h(t,e,n){f(t,n),f(e,n)}function f(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",l),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.addAttribute("position",new qr(r,3)),e.addAttribute("color",new qr(i,3)),ya.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Ec(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Nr;i.setIndex(new _r(n,1)),i.addAttribute("position",new _r(r,3)),ya.call(this,i,new va({color:e})),this.matrixAutoUpdate=!1,this.update()}function Sc(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Nr;r.setIndex(new _r(n,1)),r.addAttribute("position",new qr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ya.call(this,r,new va({color:e})),this.geometry.computeBoundingSphere()}function Ac(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=new Nr;i.addAttribute("position",new qr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),ga.call(this,i,new va({color:r}));var o=new Nr;o.addAttribute("position",new qr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Br(o,new br({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function Tc(t,e,n,r,i,o){nr.call(this),void 0===t&&(t=new mn(0,0,1)),void 0===e&&(e=new mn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Wl&&((Wl=new Nr).addAttribute("position",new qr([0,0,0,0,1,0],3)),(Yl=new Is(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new ga(Wl,new va({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Br(Yl,new br({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function qc(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Nr;n.addAttribute("position",new qr(e,3)),n.addAttribute("color",new qr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new va({vertexColors:q});ya.call(this,n,r)}function Pc(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new vr(t,e,n,i,o,a)}Object.assign(Jl.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Kl,{Composite:Jl,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Kl.Composite(t,e,n):new Kl(t,e,n)},sanitizeNodeName:(Vl=new RegExp("[\\[\\]\\.:\\/]","g"),function(t){return t.replace(/\s/g,"_").replace(Vl,"")}),parseTrackName:(Nl="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Bl=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Dl=/(WCOD+)?/.source.replace("WCOD",Nl),jl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Fl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),zl=new RegExp("^"+Bl+Dl+jl+Fl+"$"),Ul=["material","materials","bones"],function(t){var e=zl.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Ul.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function t(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e||i.uuid===e)return i;var o=t(i.children);if(o)return o}return null}(t.children);if(r)return r}return null}}),Object.assign(Kl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Kl.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else{var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Kl.prototype,{_getValue_unbound:Kl.prototype.getValue,_setValue_unbound:Kl.prototype.setValue}),Object.assign(Ql.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=r[f];if(void 0===d){d=e++,r[f]=d,t.push(h);for(var p=0,m=s;p!==m;++p)a[p].push(new Kl(h,i[p],o[p]))}else if(d<n){u=t[d];var v=--n,g=t[v];r[g.uuid]=d,t[d]=g,r[f]=v,t[v]=h;for(p=0,m=s;p!==m;++p){var y=a[p],b=y[v],_=y[d];y[d]=b,void 0===_&&(_=new Kl(h,i[p],o[p])),y[v]=_}}else t[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=n[u];if(void 0!==l&&l>=e){var c=e++,h=t[c];n[h.uuid]=l,t[l]=h,n[u]=c,t[c]=s;for(var f=0,d=i;f!==d;++f){var p=r[f],m=p[c],v=p[l];p[l]=m,p[c]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=r[l];if(void 0!==c)if(delete r[l],c<n){var h=--n,f=t[h],d=t[y=--e];r[f.uuid]=c,t[c]=f,r[d.uuid]=h,t[h]=d,t.pop();for(var p=0,m=o;p!==m;++p){var v=(b=i[p])[h],g=b[y];b[c]=v,b[h]=g,b.pop()}}else{var y;r[(d=t[y=--e]).uuid]=c,t[c]=d,t.pop();for(p=0,m=o;p!==m;++p){var b;(b=i[p])[c]=b[y],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new Kl(d,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign($l.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Te;if(0===t)return-1===i?e:o&&1==(1&i)?n-e:e;if(r===Se){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=e;if(o&&1==(1&i))return n-e}return e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=Ce,r.endingEnd=Ce):(r.endingStart=t?this.zeroSlopeAtStart?Ce:Oe:Ie,r.endingEnd=e?this.zeroSlopeAtEnd?Ce:Oe:Ie)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),tc.prototype=Object.assign(Object.create(i.prototype),{constructor:tc,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;++(d=new kl(Kl.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),o[c]=d}a[c].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new $s(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?lu.findByName(n,t):t,o=null!==i?i.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new $l(this,i,e);return this._bindAction(l,s),this._addInactiveAction(l,o,r),l},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?lu.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){e[a]._update(r,t,i,o)}var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),ec.prototype.clone=function(){return new ec(void 0===this.value.clone?this.value:this.value.clone())},nc.prototype=Object.assign(Object.create(ua.prototype),{constructor:nc,isInstancedInterleavedBuffer:!0,copy:function(t){return ua.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(rc.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this._camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this._camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return oc(t,this,r,e),r.sort(ic),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)oc(t[i],this,r,e);return r.sort(ic),r}}),Object.assign(ac.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(fn.clamp(e/this.radius,-1,1))),this}}),Object.assign(sc.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}),Object.assign(uc.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new dn;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new dn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new dn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new dn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new dn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new dn;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(lc.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new mn),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new mn),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new mn),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){void 0===Gl&&(Gl=new mn,Hl=new mn),Gl.subVectors(t,this.start),Hl.subVectors(this.end,this.start);var n=Hl.dot(Hl),r=Hl.dot(Gl)/n;return e&&(r=fn.clamp(r,0,1)),r},closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new mn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),cc.prototype=Object.create(nr.prototype),cc.prototype.constructor=cc,cc.prototype.isImmediateRenderObject=!0,hc.prototype=Object.create(ya.prototype),hc.prototype.constructor=hc,hc.prototype.update=function(){var t=new mn,e=new mn,n=new vn;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var f=u[c],d=0,p=f.vertexNormals.length;d<p;d++){var m=s[f[r[d]]],v=f.vertexNormals[d];t.copy(m).applyMatrix4(i),e.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(l=0,d=0,p=g.count;d<p;d++)t.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(i),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1}o.needsUpdate=!0}}(),fc.prototype=Object.create(nr.prototype),fc.prototype.constructor=fc,fc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},fc.prototype.update=function(){var t=new mn;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),dc.prototype=Object.create(ya.prototype),dc.prototype.constructor=dc,dc.prototype.updateMatrixWorld=function(){var t=new mn,e=new Cn,n=new Cn;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(e.multiplyMatrices(n,l.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u,t.x,t.y,t.z),e.multiplyMatrices(n,l.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u+1,t.x,t.y,t.z),u+=2)}o.getAttribute("position").needsUpdate=!0,nr.prototype.updateMatrixWorld.call(this,r)}}(),pc.prototype=Object.create(Br.prototype),pc.prototype.constructor=pc,pc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},pc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},mc.prototype=Object.create(ga.prototype),mc.prototype.constructor=mc,mc.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},mc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},vc.prototype=Object.create(nr.prototype),vc.prototype.constructor=vc,vc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},vc.prototype.update=function(){var t=new mn,e=new fr,n=new fr;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?e:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),gc.prototype=Object.create(Br.prototype),gc.prototype.constructor=gc,gc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},gc.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},yc.prototype=Object.assign(Object.create(ya.prototype),{constructor:yc,copy:function(t){return ya.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),bc.prototype=Object.create(ya.prototype),bc.prototype.constructor=bc,_c.prototype=Object.create(ga.prototype),_c.prototype.constructor=_c,_c.prototype.update=function(){var t,e,n=this.audio,r=this.range,i=this.divisionsInnerAngle,o=this.divisionsOuterAngle,a=fn.degToRad(n.panner.coneInnerAngle),s=fn.degToRad(n.panner.coneOuterAngle),u=a/2,l=s/2,c=0,h=0,f=this.geometry,d=f.attributes.position;function p(n,i,o,a){var s=(i-n)/o;for(d.setXYZ(c,0,0,0),h++,t=n;t<i;t+=s)e=c+h,d.setXYZ(e,Math.sin(t)*r,0,Math.cos(t)*r),d.setXYZ(e+1,Math.sin(Math.min(t+s,i))*r,0,Math.cos(Math.min(t+s,i))*r),d.setXYZ(e+2,0,0,0),h+=3;f.addGroup(c,h,a),c+=h,h=0}f.clearGroups(),p(-l,-u,o,0),p(-u,u,i,1),p(u,l,o,0),d.needsUpdate=!0,a===s&&(this.material[0].visible=!1)},_c.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},wc.prototype=Object.create(ya.prototype),wc.prototype.constructor=wc,wc.prototype.update=function(){var t=new mn,e=new mn,n=new vn;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),e.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),u+=1,i.setXYZ(u,e.x,e.y,e.z),u+=1}i.needsUpdate=!0}}(),xc.prototype=Object.create(nr.prototype),xc.prototype.constructor=xc,xc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},xc.prototype.update=function(){var t=new mn,e=new mn,n=new mn;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=n.length()}}(),Mc.prototype=Object.create(ya.prototype),Mc.prototype.constructor=Mc,Mc.prototype.update=function(){var t,e,n=new mn,r=new Wr;function i(i,o,a,s){n.set(o,a,s).unproject(r);var u=e[i];if(void 0!==u)for(var l=t.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],n.x,n.y,n.z)}return function(){t=this.geometry,e=this.pointMap;r.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Ec.prototype=Object.create(ya.prototype),Ec.prototype.constructor=Ec,Ec.prototype.update=function(){var t=new ir;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Ec.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Ec.prototype.copy=function(t){return ya.prototype.copy.call(this,t),this.object=t.object,this},Ec.prototype.clone=function(){return(new this.constructor).copy(this)},Sc.prototype=Object.create(ya.prototype),Sc.prototype.constructor=Sc,Sc.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),nr.prototype.updateMatrixWorld.call(this,t))},Ac.prototype=Object.create(ga.prototype),Ac.prototype.constructor=Ac,Ac.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?x:w,this.lookAt(this.plane.normal),nr.prototype.updateMatrixWorld.call(this,t)},Tc.prototype=Object.create(nr.prototype),Tc.prototype.constructor=Tc,Tc.prototype.setDirection=(Zl=new mn,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Zl.set(t.z,0,-t.x).normalize(),Xl=Math.acos(t.y),this.quaternion.setFromAxisAngle(Zl,Xl))}),Tc.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Tc.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Tc.prototype.copy=function(t){return nr.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Tc.prototype.clone=function(){return(new this.constructor).copy(this)},qc.prototype=Object.create(ya.prototype),qc.prototype.constructor=qc;var Lc=0,Oc=1;function Cc(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Ic(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Rc(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new wa(t,e)}function kc(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ha(t)}function Nc(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new wa(t,e)}function Bc(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new _a(t)}function Dc(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new _a(t)}function jc(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new _a(t)}function Fc(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new mn(t,e,n)}function zc(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new _r(t,e).setDynamic(!0)}function Uc(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new wr(t,e)}function Vc(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new xr(t,e)}function Gc(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Mr(t,e)}function Hc(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Er(t,e)}function Wc(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Sr(t,e)}function Yc(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ar(t,e)}function Xc(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Tr(t,e)}function Zc(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new qr(t,e)}function Jc(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Pr(t,e)}function Kc(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Lu.call(this,t),this.type="catmullrom",this.closed=!0}function Qc(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Lu.call(this,t),this.type="catmullrom"}function $c(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Lu.call(this,t),this.type="catmullrom"}function th(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new qc(t)}function eh(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ec(t,e)}function nh(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ya(new Os(t.geometry),new va({color:void 0!==e?e:16777215}))}function rh(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ya(new Aa(t.geometry),new va({color:void 0!==e?e:16777215}))}function ih(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new mu(t)}function oh(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new yu(t)}xu.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(xu.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Uu.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new jr,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new mn(i.x,i.y,i.z||0))}return e}}),Object.assign(Vu.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Kc.prototype=Object.create(Lu.prototype),Qc.prototype=Object.create(Lu.prototype),$c.prototype=Object.create(Lu.prototype),Object.assign($c.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),yc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},dc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(xl.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),rl.extractUrlBase(t)}}),Object.assign(ul.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(uc.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ir.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),lc.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(fn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),fn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),fn.ceilPowerOfTwo(t)}}),Object.assign(vn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Cn.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new mn),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),$r.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},pn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(ar.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(sr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(sr,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),sr.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),sr.getNormal(t,e,n,r)}}),Object.assign(Gu.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new vs(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qs(this,t)}}),Object.assign(dn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(mn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(jr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(nr.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(nr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(fa.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(pa.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),da.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(xu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Yr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Hu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(_r.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Nr.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Nr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(gs.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(ec.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(yr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new fr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===E}}}),Object.defineProperties(Vs.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Hr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(oa.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(oa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Uo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Kr.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Ln.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(ra.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Cl.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new El).load(t,(function(t){e.setBuffer(t)})),this},Rl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Jr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var ah={merge:function(t,e,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function sh(){console.error("THREE.CanvasRenderer has been removed")}function uh(){console.error("THREE.JSONLoader has been removed.")}An.crossOrigin=void 0,An.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new wu;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},An.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new _u;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},An.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},An.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var lh={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function ch(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(5),o=n(21).f,a=n(23),s=n(24),u=n(123),l=n(173),c=n(79);t.exports=function(t,e){var n,h,f,d,p,m=t.target,v=t.global,g=t.stat;if(n=v?i:g?i[m]||u(m,{}):(i[m]||{}).prototype)for(h in e){if(d=e[h],f=t.noTargetGet?(p=o(n,h))&&p.value:n[h],!c(v?h:m+(g?".":"#")+h,t.forced)&&void 0!==f){if(r(d)===r(f))continue;l(d,f)}(t.sham||f&&f.sham)&&a(d,"sham",!0),s(n,h,d,t)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||r("object"==("undefined"==typeof window?"undefined":n(window))&&window)||r("object"==("undefined"==typeof self?"undefined":n(self))&&self)||r("object"==(void 0===e?"undefined":n(e))&&e)||function(){return this}()||Function("return this")()}).call(this,n(25))},function(t,e,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(20),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===n(t)?null!==t:"function"==typeof t}},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(3);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){var r=n(5),i=n(126),o=n(16),a=n(75),s=n(130),u=n(175),l=i("wks"),c=r.Symbol,h=u?c:c&&c.withoutSetter||a;t.exports=function(t){return o(l,t)||(s&&o(c,t)?l[t]=c[t]:l[t]=h("Symbol."+t)),l[t]}},function(t,e,n){var r=n(35),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";var r,i=n(147),o=n(9),a=n(5),s=n(7),u=n(16),l=n(84),c=n(23),h=n(24),f=n(13).f,d=n(36),p=n(51),m=n(10),v=n(75),g=a.Int8Array,y=g&&g.prototype,b=a.Uint8ClampedArray,_=b&&b.prototype,w=g&&d(g),x=y&&d(y),M=Object.prototype,E=M.isPrototypeOf,S=m("toStringTag"),A=v("TYPED_ARRAY_TAG"),T=i&&!!p&&"Opera"!==l(a.opera),q=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},O=function(t){if(!s(t))return!1;var e=l(t);return u(P,e)||u(L,e)};for(r in P)a[r]||(T=!1);if((!T||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},T))for(r in P)a[r]&&p(a[r],w);if((!T||!x||x===M)&&(x=w.prototype,T))for(r in P)a[r]&&p(a[r].prototype,x);if(T&&d(_)!==x&&p(_,x),o&&!u(x,S))for(r in q=!0,f(x,S,{get:function(){return s(this)?this[A]:void 0}}),P)a[r]&&c(a[r],A,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:q&&A,aTypedArray:function(t){if(O(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(p){if(E.call(w,t))return t}else for(var e in P)if(u(P,r)){var n=a[e];if(n&&(t===n||E.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(o){if(n)for(var r in P){var i=a[r];i&&u(i.prototype,t)&&delete i.prototype[t]}x[t]&&!n||h(x,t,n?e:T&&y[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(o){if(p){if(n)for(r in P)(i=a[r])&&u(i,t)&&delete i[t];if(w[t]&&!n)return;try{return h(w,t,n?e:T&&g[t]||e)}catch(t){}}for(r in P)!(i=a[r])||i[t]&&!n||h(i,t,e)}},isView:function(t){if(!s(t))return!1;var e=l(t);return"DataView"===e||u(P,e)||u(L,e)},isTypedArray:O,TypedArray:w,TypedArrayPrototype:x}},function(t,e,n){var r=n(9),i=n(171),o=n(8),a=n(39),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(22);t.exports=function(t){return Object(r(t))}},function(t,e,n){(function(n){var r;var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:a.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]];i&&!1===i.update(t)&&(i._isPlaying=!1,e||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var o,a=new i;a.Group=i,a._nextId=0,a.nextId=function(){return a._nextId++},"undefined"==typeof self&&void 0!==n&&n.hrtime?a.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?a.now=self.performance.now.bind(self.performance):void 0!==Date.now?a.now=Date.now:a.now=function(){return(new Date).getTime()},a.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=a.Easing.Linear.None,this._interpolationFunction=a.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||a,this._id=a.nextId()},a.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?a.now()+parseFloat(t):t:a.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,r;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,r=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var i=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,r):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?i+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=i+(o-i)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},a.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-a.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*a.Easing.Bounce.In(2*t):.5*a.Easing.Bounce.Out(2*t-1)+.5}}},a.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=a.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=a.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-e,r-s)*i(e,s)*t[s]*o(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=a.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=a.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(o=[1],function(t){var e=1;if(o[t])return o[t];for(var n=t;n>1;n--)e*=n;return o[t]=e,e}),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i;return(2*e-2*n+o+a)*(i*s)+(-3*e+3*n-2*o-a)*s+o*i+e}}},void 0===(r=function(){return a}.apply(e,[]))||(t.exports=r)}).call(this,n(17))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,r){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e,n){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"===e(t)?t.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{s=n(540).Buffer}catch(t){}function u(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var a=t.charCodeAt(o)-48;r<<=4,r|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return r}function l(t,e,n,r){for(var i=0,o=Math.min(t.length,n),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(t){return t instanceof a||null!==t&&"object"===e(t)&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,n,r){if("number"==typeof t)return this._initNumber(t,n,r);if("object"===e(t))return this._initArray(t,n,r);"hex"===n&&(n=16),i(n===(0|n)&&n>=2&&n<=36);var o=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&o++,16===n?this._parseHex(t,o):this._parseBase(t,n,o),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),n,r)},a.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initArray=function(t,e,n){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,a,s=0;if("be"===n)for(r=t.length-1,o=0;r>=0;r-=3)a=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(r=0,o=0;r<t.length;r+=3)a=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},a.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=u(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=u(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},a.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,c=n;c<s;c+=r)u=l(t,c,c+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var l=1;l<r;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),d=Math.max(0,l-t.length+1);d<=f;d++){var p=l-d|0;c+=(a=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&a}n.words[l]=0|h,u=0|c}return 0!==u?n.words[l]=0|u:n.length--,n.strip()}a.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var r=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<r|o)).toString(16);n=0!==(o=s>>>24-r&16777215)||a!==this.length-1?c[6-u.length]+u+n:u+n,(r+=2)>=26&&(r-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],d=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?m+n:c[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return i(void 0!==s),this.toArrayLike(s,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,n){var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-r;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var n=t/26|0,r=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<r:this.words[n]&~(1<<r),this.strip()},a.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],_=8191&b,w=b>>>13,x=0|a[4],M=8191&x,E=x>>>13,S=0|a[5],A=8191&S,T=S>>>13,q=0|a[6],P=8191&q,L=q>>>13,O=0|a[7],C=8191&O,I=O>>>13,R=0|a[8],k=8191&R,N=R>>>13,B=0|a[9],D=8191&B,j=B>>>13,F=0|s[0],z=8191&F,U=F>>>13,V=0|s[1],G=8191&V,H=V>>>13,W=0|s[2],Y=8191&W,X=W>>>13,Z=0|s[3],J=8191&Z,K=Z>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,dt=0|s[9],pt=8191&dt,mt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(l+(r=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(p,z),i=(i=Math.imul(p,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,G)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(y,z)|0,o=Math.imul(y,U),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var yt=(l+(r=r+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(f,Y)|0))<<13)|0;l=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(_,z),i=(i=Math.imul(_,U))+Math.imul(w,z)|0,o=Math.imul(w,U),r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,X)|0;var bt=(l+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,J)|0))<<13)|0;l=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(M,z),i=(i=Math.imul(M,U))+Math.imul(E,z)|0,o=Math.imul(E,U),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(g,Y)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,X)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,K)|0;var _t=(l+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(A,z),i=(i=Math.imul(A,U))+Math.imul(T,z)|0,o=Math.imul(T,U),r=r+Math.imul(M,G)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,K)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,K)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;l=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,z),i=(i=Math.imul(P,U))+Math.imul(L,z)|0,o=Math.imul(L,U),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(T,G)|0,o=o+Math.imul(T,H)|0,r=r+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0;var xt=(l+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(I,z)|0,o=Math.imul(I,U),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,X)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,X)|0,r=r+Math.imul(M,J)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,K)|0,r=r+Math.imul(_,$)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(g,nt)|0,i=(i=i+Math.imul(g,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(k,z),i=(i=Math.imul(k,U))+Math.imul(N,z)|0,o=Math.imul(N,U),r=r+Math.imul(C,G)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,X)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,K)|0,r=r+Math.imul(M,$)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var Et=(l+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(j,z)|0,o=Math.imul(j,U),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,K)|0,r=r+Math.imul(A,$)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(M,nt)|0,i=(i=i+Math.imul(M,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,r=r+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,lt)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var St=(l+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(D,G),i=(i=Math.imul(D,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,X)|0,r=r+Math.imul(C,J)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,K)|0,r=r+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(T,nt)|0,o=o+Math.imul(T,rt)|0,r=r+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,r=r+Math.imul(_,ut)|0,i=(i=i+Math.imul(_,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,r=r+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,ft)|0;var At=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(D,Y),i=(i=Math.imul(D,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,K)|0,r=r+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,r=r+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,lt)|0,r=r+Math.imul(_,ht)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(r=r+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((o=o+Math.imul(y,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(D,J),i=(i=Math.imul(D,K))+Math.imul(j,J)|0,o=Math.imul(j,K),r=r+Math.imul(k,$)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,r=r+Math.imul(C,nt)|0,i=(i=i+Math.imul(C,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,r=r+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var qt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(i=(i=i+Math.imul(_,mt)|0)+Math.imul(w,pt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,r=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(N,nt)|0,o=o+Math.imul(N,rt)|0,r=r+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,r=r+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var Pt=(l+(r=r+Math.imul(M,pt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(E,pt)|0))<<13)|0;l=((o=o+Math.imul(E,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(D,nt),i=(i=Math.imul(D,rt))+Math.imul(j,nt)|0,o=Math.imul(j,rt),r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,r=r+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,lt)|0,r=r+Math.imul(P,ht)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,mt)|0)+Math.imul(T,pt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(j,ot)|0,o=Math.imul(j,at),r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,lt)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,lt)|0,r=r+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(I,ht)|0,o=o+Math.imul(I,ft)|0;var Ot=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(L,pt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(j,ut)|0,o=Math.imul(j,lt),r=r+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(N,ht)|0,o=o+Math.imul(N,ft)|0;var Ct=(l+(r=r+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(I,pt)|0))<<13)|0;l=((o=o+Math.imul(I,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(j,ht)|0,o=Math.imul(j,ft);var It=(l+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,mt)|0)+Math.imul(N,pt)|0))<<13)|0;l=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863;var Rt=(l+(r=Math.imul(D,pt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(j,pt)|0))<<13)|0;return l=((o=Math.imul(j,mt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=vt,u[1]=gt,u[2]=yt,u[3]=bt,u[4]=_t,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=Et,u[9]=St,u[10]=At,u[11]=Tt,u[12]=qt,u[13]=Pt,u[14]=Lt,u[15]=Ot,u[16]=Ct,u[17]=It,u[18]=Rt,0!==l&&(u[19]=l,n.length++),n};function m(t,e,n){return(new v).mulp(t,e,n)}function v(t,e){this.x=t,this.y=e}Math.imul||(p=d),a.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):m(this,t,e)},v.prototype.makeRBT=function(t){for(var e=new Array(t),n=a.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},v.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},v.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},v.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,d=0;d<a;d++){var p=n[c+d],m=r[c+d],v=n[c+d+a],g=r[c+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[c+d]=p+v,r[c+d]=m+g,n[c+d+a]=p-v,r[c+d+a]=m-g,d!==s&&(y=u*h-l*f,f=u*f+l*h,h=y)}},v.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},v.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,n,r){for(var o=0,a=0;a<e;a++)o+=0|t[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<r;++a)n[a]=0;i(0===o),i(0==(-8192&o))},v.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},v.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,l,r),this.transform(a,o,s,u,r,i),this.transform(l,o,c,h,r,i);for(var d=0;d<r;d++){var p=s[d]*c[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*c[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),m(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,n=0;n<this.length;n++){var r=(0|this.words[n])*t,o=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new a(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,n=t%26,r=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<n;this.words[e]=u|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,n){var r;i("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(r-=a,r=Math.max(0,r),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=r);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,n){return i(0===this.negative),this.iushrn(t,e,n)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,r=1<<e;return!(this.length<=n)&&!!(this.words[n]&r)},a.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,n){var r,o,a=t.length+n;this._expand(a);var s=0;for(r=0;r<t.length;r++){o=(0|this.words[r+n])+s;var u=(0|t.words[r])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[r+n]=67108863&o}for(;r<this.length-n;r++)s=(o=(0|this.words[r+n])+s)>>26,this.words[r+n]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,r=0;r<this.length;r++)s=(o=-(0|this.words[r])+s)>>26,this.words[r]=67108863&o;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new a(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=r.clone()._ishlnsubmul(i,1,u);0===c.negative&&(r=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},a.prototype.divmod=function(t,e,n){return i(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(r=s.div.neg()),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:r,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(r=s.div.neg()),{div:r,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,o,s},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,n=0,r=this.length-1;r>=0;r--)n=(e*n+(0|this.words[r]))%t;return n},a.prototype.idivn=function(t){i(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*e;this.words[n]=r/t|0,e=r%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new a(1),o=new a(0),s=new a(0),u=new a(1),l=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++l;for(var c=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(c),o.isub(h)),r.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),r.isub(s),o.isub(u)):(n.isub(e),s.isub(r),u.isub(o))}return{a:s,b:u,gcd:n.iushln(l)}},a.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,o=new a(1),s=new a(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(s)):(n.isub(e),s.isub(o))}return(r=0===e.cmpn(1)?o:s).cmpn(0)<0&&r.iadd(t),r},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,n=(t-e)/26,r=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new M(t)},a.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},o(b,y),b.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(_,y),o(w,y),o(x,y),x.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new _;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},M.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},M.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var n=this.m.add(new a(1)).iushrn(2);return this.pow(t,n)}for(var r=this.m.subn(1),o=0;!r.isZero()&&0===r.andln(1);)o++,r.iushrn(1);i(!r.isZero());var s=new a(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,r),f=this.pow(t,r.addn(1).iushrn(1)),d=this.pow(t,r),p=o;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();i(v<p);var g=this.pow(h,new a(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],o=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],c=u-1;c>=0;c--){var h=l>>c&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4===++s||0===r&&0===c)&&(i=this.mul(i,n[o]),s=0,o=0)):s=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new E(t)},o(E,M),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(114)(t))},function(t,e,n){var r=n(50),i=n(74),o=n(14),a=n(11),s=n(81),u=[].push,l=function(t){var e=1==t,n=2==t,l=3==t,c=4==t,h=6==t,f=7==t,d=5==t||h;return function(p,m,v,g){for(var y,b,_=o(p),w=i(_),x=r(m,v,3),M=a(w.length),E=0,S=g||s,A=e?S(p,M):n||f?S(p,0):void 0;M>E;E++)if((d||E in w)&&(b=x(y=w[E],E,_),t))if(e)A[E]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return E;case 2:u.call(A,y)}else switch(t){case 4:return!1;case 7:u.call(A,y)}return h?-1:l||c?c:A}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(496),i=n(497),o=n(211);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return q(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return U(F(e,t.length-n),t,n,r)}function w(t,e,n,r){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return w(t,e,n,r)}function M(t,e,n,r){return U(z(e),t,n,r)}function E(t,e,n,r){return U(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,i),c=t.slice(e,n),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function q(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=j(t[o]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function k(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return o||k(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||k(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:F(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(25))},function(t,e,n){var r=n(9),i=n(96),o=n(44),a=n(30),s=n(39),u=n(16),l=n(171),c=Object.getOwnPropertyDescriptor;e.f=r?c:function(t,e){if(t=a(t),e=s(e,!0),l)try{return c(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(9),i=n(13),o=n(44);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(5),i=n(23),o=n(16),a=n(123),s=n(124),u=n(26),l=u.get,c=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var u,l=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(u=c(n)).source||(u.source=h.join("string"==typeof e?e:""))),t!==r?(l?!d&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e,n){var r,i,o,a=n(172),s=n(5),u=n(7),l=n(23),c=n(16),h=n(125),f=n(97),d=n(76),p=s.WeakMap;if(a){var m=h.state||(h.state=new p),v=m.get,g=m.has,y=m.set;r=function(t,e){return e.facade=t,y.call(m,t,e),e},i=function(t){return v.call(m,t)||{}},o=function(t){return g.call(m,t)}}else{var b=f("state");d[b]=!0,r=function(t,e){return e.facade=t,l(t,b,e),e},i=function(t){return c(t,b)?t[b]:{}},o=function(t){return c(t,b)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(77),i=n(16),o=n(178),a=n(13).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(9),i=n(3),o=n(16),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,c=o(e,0)?e[0]:u,h=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(l&&!r)return!0;var t={length:-1};l?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,c,h)}))}},function(t,e,n){var r=n(74),i=n(22);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(77),i=n(5),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){var r=n(22),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},function(t,e,n){var r=n(3);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e){t.exports=!1},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(16),i=n(14),o=n(97),a=n(132),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=n,n.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},function(t,e,n){"use strict";var r=e,i=n(18),o=n(37),a=n(248);r.assert=o,r.toArray=a.toArray,r.zero2=a.zero2,r.toHex=a.toHex,r.encode=a.encode,r.getNAF=function(t,e,n){var r=new Array(Math.max(t.bitLength(),n)+1);r.fill(0);for(var i=1<<e+1,o=t.clone(),a=0;a<r.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,r[a]=s,o.iushrn(1)}return r},r.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r=0,i=0;t.cmpn(-r)>0||e.cmpn(-i)>0;){var o,a,s,u=t.andln(3)+r&3,l=e.andln(3)+i&3;if(3===u&&(u=-1),3===l&&(l=-1),0==(1&u))o=0;else o=3!==(s=t.andln(7)+r&7)&&5!==s||2!==l?u:-u;if(n[0].push(o),0==(1&l))a=0;else a=3!==(s=e.andln(7)+i&7)&&5!==s||2!==u?l:-l;n[1].push(a),2*r===o+1&&(r=1-r),2*i===a+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return n},r.cachedProperty=function(t,e,n){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(13).f,i=n(16),o=n(10)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r,i=n(8),o=n(131),a=n(128),s=n(76),u=n(176),l=n(122),c=n(97),h=c("IE_PROTO"),f=function(){},d=function(t){return"<script>"+t+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=l("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(f.prototype=i(t),n=new f,f.prototype=null,n[h]=t):n=p(),void 0===e?n:o(n,e)}},function(t,e,n){"use strict";var r=n(37),i=n(4);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function s(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(var r=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);a<128?n[r++]=a:a<2048?(n[r++]=a>>6|192,n[r++]=63&a|128):o(t,i)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++i)),n[r++]=a>>18|240,n[r++]=a>>12&63|128,n[r++]=a>>6&63|128,n[r++]=63&a|128):(n[r++]=a>>12|224,n[r++]=a>>6&63|128,n[r++]=63&a|128)}else for(i=0;i<t.length;i++)n[i]=0|t[i];return n},e.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=s(t[n].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=a(i)),n+=u(i.toString(16))}return n},e.zero2=s,e.zero8=u,e.join32=function(t,e,n,i){var o=n-e;r(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var l;l="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=l>>>0}return a},e.split32=function(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var o=t[r];"big"===e?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,n){return t+e+n>>>0},e.sum32_4=function(t,e,n,r){return t+e+n+r>>>0},e.sum32_5=function(t,e,n,r,i){return t+e+n+r+i>>>0},e.sum64=function(t,e,n,r){var i=t[e],o=r+t[e+1]>>>0,a=(o<r?1:0)+n+i;t[e]=a>>>0,t[e+1]=o},e.sum64_hi=function(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0},e.sum64_lo=function(t,e,n,r){return e+r>>>0},e.sum64_4_hi=function(t,e,n,r,i,o,a,s){var u=0,l=e;return u+=(l=l+r>>>0)<e?1:0,u+=(l=l+o>>>0)<o?1:0,t+n+i+a+(u+=(l=l+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,n,r,i,o,a,s){return e+r+o+s>>>0},e.sum64_5_hi=function(t,e,n,r,i,o,a,s,u,l){var c=0,h=e;return c+=(h=h+r>>>0)<e?1:0,c+=(h=h+o>>>0)<o?1:0,c+=(h=h+s>>>0)<s?1:0,t+n+i+a+u+(c+=(h=h+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,n,r,i,o,a,s,u,l){return e+r+o+s+l>>>0},e.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},e.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},e.shr64_hi=function(t,e,n){return t>>>n},e.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},function(t,e,n){"use strict";e.LatLonSpherical=n(590),e.LatLonEllipsoidal=n(95);var r=n(591);for(var i in r)e.LatLonEllipsoidal[i]=r[i];e.LatLonVectors=n(592),e.Vector3d=n(170),e.Utm=n(263),e.Mgrs=n(593),e.OsGridRef=n(594),e.Dms=n(120)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(8),i=n(27),o=n(10)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(2),o=n(5),a=n(9),s=n(148),u=n(12),l=n(113),c=n(54),h=n(44),f=n(23),d=n(11),p=n(205),m=n(206),v=n(39),g=n(16),y=n(84),b=n(7),_=n(41),w=n(51),x=n(56).f,M=n(207),E=n(19).forEach,S=n(64),A=n(13),T=n(21),q=n(26),P=n(109),L=q.get,O=q.set,C=A.f,I=T.f,R=Math.round,k=o.RangeError,N=l.ArrayBuffer,B=l.DataView,D=u.NATIVE_ARRAY_BUFFER_VIEWS,j=u.TYPED_ARRAY_TAG,F=u.TypedArray,z=u.TypedArrayPrototype,U=u.aTypedArrayConstructor,V=u.isTypedArray,G=function(t,e){for(var n=0,r=e.length,i=new(U(t))(r);r>n;)i[n]=e[n++];return i},H=function(t,e){C(t,e,{get:function(){return L(this)[e]}})},W=function(t){var e;return t instanceof N||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},Y=function(t,e){return V(t)&&"symbol"!=r(e)&&e in t&&String(+e)==String(e)},X=function(t,e){return Y(t,e=v(e,!0))?h(2,t[e]):I(t,e)},Z=function(t,e,n){return!(Y(t,e=v(e,!0))&&b(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?C(t,e,n):(t[e]=n.value,t)};a?(D||(T.f=X,A.f=Z,H(z,"buffer"),H(z,"byteOffset"),H(z,"byteLength"),H(z,"length")),i({target:"Object",stat:!0,forced:!D},{getOwnPropertyDescriptor:X,defineProperty:Z}),t.exports=function(t,e,n){var r=t.match(/\d+$/)[0]/8,a=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,h=o[a],v=h,g=v&&v.prototype,y={},A=function(t,e){C(t,e,{get:function(){return function(t,e){var n=L(t);return n.view[u](e*r+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,i){var o=L(t);n&&(i=(i=R(i))<0?0:i>255?255:255&i),o.view[l](e*r+o.byteOffset,i,!0)}(this,e,t)},enumerable:!0})};D?s&&(v=e((function(t,e,n,i){return c(t,v,a),P(b(e)?W(e)?void 0!==i?new h(e,m(n,r),i):void 0!==n?new h(e,m(n,r)):new h(e):V(e)?G(v,e):M.call(v,e):new h(p(e)),t,v)})),w&&w(v,F),E(x(h),(function(t){t in v||f(v,t,h[t])})),v.prototype=g):(v=e((function(t,e,n,i){c(t,v,a);var o,s,u,l=0,h=0;if(b(e)){if(!W(e))return V(e)?G(v,e):M.call(v,e);o=e,h=m(n,r);var f=e.byteLength;if(void 0===i){if(f%r)throw k("Wrong length");if((s=f-h)<0)throw k("Wrong length")}else if((s=d(i)*r)+h>f)throw k("Wrong length");u=s/r}else u=p(e),o=new N(s=u*r);for(O(t,{buffer:o,byteOffset:h,byteLength:s,length:u,view:new B(o)});l<u;)A(t,l++)})),w&&w(v,F),g=v.prototype=_(z)),g.constructor!==v&&f(g,"constructor",v),j&&f(g,j,a),y[a]=v,i({global:!0,forced:v!=h,sham:!D},y),"BYTES_PER_ELEMENT"in v||f(v,"BYTES_PER_ELEMENT",r),"BYTES_PER_ELEMENT"in g||f(g,"BYTES_PER_ELEMENT",r),S(a)}):t.exports=function(){}},function(t,e,n){var r=n(35),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(8),i=n(179);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(8),o=n(133),a=n(11),s=n(50),u=n(83),l=n(180),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var h,f,d,p,m,v,g,y=n&&n.that,b=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),x=s(e,y,1+b+w),M=function(t){return h&&l(h),new c(!0,t)},E=function(t){return b?(i(t),w?x(t[0],t[1],M):x(t[0],t[1])):w?x(t,M):x(t)};if(_)h=t;else{if("function"!=typeof(f=u(t)))throw TypeError("Target is not iterable");if(o(f)){for(d=0,p=a(t.length);p>d;d++)if((m=E(t[d]))&&m instanceof c)return m;return new c(!1)}h=f.call(t)}for(v=h.next;!(g=v.call(h)).done;){try{m=E(g.value)}catch(t){throw l(h),t}if("object"==r(m)&&m&&m instanceof c)return m}return new c(!1)}},function(t,e,n){var r=n(10),i=n(41),o=n(13),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r=n(6).Buffer,i=n(510).Transform,o=n(61).StringDecoder;function a(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(4)(a,i),a.prototype.update=function(t,e,n){"string"==typeof t&&(t=r.from(t,e));var i=this._update(t);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,n){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{n(r)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var r=this._decoder.write(t);return n&&(r+=this._decoder.end()),r},t.exports=a},function(t,e,n){var r=n(174),i=n(128).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(45);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(39),i=n(13),o=n(44);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(76),o=n(7),a=n(16),s=n(13).f,u=n(75),l=n(88),c=u("meta"),h=0,f=Object.isExtensible||function(){return!0},d=function(t){s(t,c,{value:{objectID:"O"+ ++h,weakData:{}}})},p=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==r(t)?t:("string"==typeof t?"S":"P")+t;if(!a(t,c)){if(!f(t))return"F";if(!e)return"E";d(t)}return t[c].objectID},getWeakData:function(t,e){if(!a(t,c)){if(!f(t))return!0;if(!e)return!1;d(t)}return t[c].weakData},onFreeze:function(t){return l&&p.REQUIRED&&f(t)&&!a(t,c)&&d(t),t}};i[c]=!0},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,o="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(t,e){return new Promise((function(n,r){function i(){void 0!==o&&t.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==e&&(o=function(n){t.removeListener(e,i),r(n)},t.once("error",o)),t.once(e,i)}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var l=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(t))}function h(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var i,o,a,s;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=h(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function m(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function v(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},u.prototype.getMaxListeners=function(){return h(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)a(u,this,e);else{var l=u.length,c=g(u,l);for(n=0;n<l;++n)a(c[n],this,e)}return!0},u.prototype.addListener=function(t,e){return f(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return f(this,t,e,!0)},u.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return m(this,t,!0)},u.prototype.rawListeners=function(t){return m(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},u.prototype.listenerCount=v,u.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,n){"use strict";var r=n(6).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"ï¿½";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"ï¿½";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"ï¿½"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";var r=n(115),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=Object.create(n(91));o.inherits=n(4);var a=n(221),s=n(156);o.inherits(h,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){var r=n(45),i=n(5);t.exports="process"==r(i.process)},function(t,e,n){"use strict";var r=n(31),i=n(13),o=n(10),a=n(9),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(8);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(22),i="["+n(108)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e,n){var r=n(24);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";(function(e,r){var i=n(6).Buffer,o=e.crypto||e.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(t);if(t>0)if(t>65536)for(var a=0;a<t;a+=65536)o.getRandomValues(n.slice(a,a+65536));else o.getRandomValues(n);if("function"==typeof e)return r.nextTick((function(){e(null,n)}));return n}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(25),n(17))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i={};function o(t,e,n){n||(n=Error);var r=function(t){var n,r;function i(n,r,i){return t.call(this,function(t,n,r){return"string"==typeof e?e:e(t,n,r)}(n,r,i))||this}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);r.prototype.name=n.name,r.prototype.code=t,i[t]=r}function a(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}o("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(t,e,n){var i,o,s,u;if("string"==typeof e&&(o="not ",e.substr(!s||s<0?0:+s,o.length)===o)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))u="The ".concat(t," ").concat(i," ").concat(a(e,"type"));else{var l=function(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}(t,".")?"property":"argument";u='The "'.concat(t,'" ').concat(l," ").concat(i," ").concat(a(e,"type"))}return u+=". Received type ".concat(r(n))}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},function(t,e,n){"use strict";(function(e){var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=l;var i=n(213),o=n(217);n(4)(l,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var u=a[s];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(t){if(!(this instanceof l))return new l(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,n(17))},function(t,e,n){var r=n(6).Buffer;function i(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=r.from(t,e));for(var n=this._block,i=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var u=a%i,l=Math.min(o-s,i-u),c=0;c<l;c++)n[u+c]=t[s+c];s+=l,(a+=l)%i==0&&this._update(n)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i={};function o(t,e,n){n||(n=Error);var r=function(t){var n,r;function i(n,r,i){return t.call(this,function(t,n,r){return"string"==typeof e?e:e(t,n,r)}(n,r,i))||this}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);r.prototype.name=n.name,r.prototype.code=t,i[t]=r}function a(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}o("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(t,e,n){var i,o,s,u;if("string"==typeof e&&(o="not ",e.substr(!s||s<0?0:+s,o.length)===o)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))u="The ".concat(t," ").concat(i," ").concat(a(e,"type"));else{var l=function(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}(t,".")?"property":"argument";u='The "'.concat(t,'" ').concat(l," ").concat(i," ").concat(a(e,"type"))}return u+=". Received type ".concat(r(n))}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},function(t,e,n){"use strict";(function(e){var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=l;var i=n(242),o=n(246);n(4)(l,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var u=a[s];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(t){if(!(this instanceof l))return new l(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,n(17))},function(t,e,n){var r=n(3),i=n(45),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e){t.exports={}},function(t,e,n){var r=n(5);t.exports=r},function(t,e,n){var r=n(30),i=n(11),o=n(49),a=function(t){return function(e,n,a){var s,u=r(e),l=i(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(3),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==l||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(174),i=n(128);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(7),i=n(57),o=n(10)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e){t.exports={}},function(t,e,n){var r=n(84),i=n(82),o=n(10)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(134),i=n(45),o=n(10)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(3),i=n(10),o=n(86),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r,i,o=n(5),a=n(87),s=o.process,u=s&&s.versions,l=u&&u.v8;l?i=(r=l.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){var r=n(31);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(3);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){var r=n(7),i=n(45),o=n(10)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){"use strict";var r=n(4),i=n(149),o=n(152),a=n(153),s=n(55);function u(t){s.call(this,"digest"),this._hash=t}r(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new u(a(t))}},function(t,e,n){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"===n(t)},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"===n(t)&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===n(t)||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(20).Buffer)},function(t,e,n){(function(e){t.exports=function(t,n){for(var r=Math.min(t.length,n.length),i=new e(r),o=0;o<r;++o)i[o]=t[o]^n[o];return i}}).call(this,n(20).Buffer)},function(t,e,n){"use strict";var r=n(42),i=n(37);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t}else for(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(4),o=n(168).Reporter,a=n(166).Buffer;function s(t,e){o.call(this,e),a.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function u(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return u.isEncoderBuffer(t)||(t=new u(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=a.byteLength(t);else{if(!a.isBuffer(t))return e.error("Unsupported type: "+r(t));this.value=t,this.length=t.length}}i(s,o),e.DecoderBuffer=s,s.isDecoderBuffer=function(t){return t instanceof s||"object"===r(t)&&a.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},s.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},s.prototype.restore=function(t){var e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,o.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=u,u.isEncoderBuffer=function(t){return t instanceof u||"object"===r(t)&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},u.prototype.join=function(t,e){return t||(t=a.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(t,e),e+=n.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):a.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e,n){"use strict";if(t.exports)var r=n(170);if(t.exports)var i=n(120);function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);void 0===n&&(n=o.datum.WGS84),this.lat=Number(t),this.lon=Number(e),this.datum=n}o.ellipsoid={WGS84:{a:6378137,b:6356752.314245,f:1/298.257223563},Airy1830:{a:6377563.396,b:6356256.909,f:1/299.3249646},AiryModified:{a:6377340.189,b:6356034.448,f:1/299.3249646},Bessel1841:{a:6377397.155,b:6356078.962818,f:1/299.1528128},Clarke1866:{a:6378206.4,b:6356583.8,f:1/294.978698214},Clarke1880IGN:{a:6378249.2,b:6356515,f:1/293.466021294},GRS80:{a:6378137,b:6356752.31414,f:1/298.257222101},Intl1924:{a:6378388,b:6356911.946,f:1/297},WGS72:{a:6378135,b:6356750.5,f:1/298.26}},o.datum={ED50:{ellipsoid:o.ellipsoid.Intl1924,transform:[89.5,93.8,123.1,-1.2,0,0,.156]},Irl1975:{ellipsoid:o.ellipsoid.AiryModified,transform:[-482.53,130.596,-564.557,-8.15,-1.042,-.214,-.631]},NAD27:{ellipsoid:o.ellipsoid.Clarke1866,transform:[8,-160,-176,0,0,0,0]},NAD83:{ellipsoid:o.ellipsoid.GRS80,transform:[1.004,-1.91,-.515,-.0015,.0267,34e-5,.011]},NTF:{ellipsoid:o.ellipsoid.Clarke1880IGN,transform:[168,60,-320,0,0,0,0]},OSGB36:{ellipsoid:o.ellipsoid.Airy1830,transform:[-446.448,125.157,-542.06,20.4894,-.1502,-.247,-.8421]},Potsdam:{ellipsoid:o.ellipsoid.Bessel1841,transform:[-582,-105,-414,-8.3,1.04,.35,-3.08]},TokyoJapan:{ellipsoid:o.ellipsoid.Bessel1841,transform:[148,-507,-685,0,0,0,0]},WGS72:{ellipsoid:o.ellipsoid.WGS72,transform:[0,0,-4.5,-.22,0,0,.554]},WGS84:{ellipsoid:o.ellipsoid.WGS84,transform:[0,0,0,0,0,0,0]}},o.prototype.convertDatum=function(t){var e=this,n=null;if(e.datum==o.datum.WGS84&&(n=t.transform),t==o.datum.WGS84){n=[];for(var r=0;r<7;r++)n[r]=-e.datum.transform[r]}return null==n&&(e=this.convertDatum(o.datum.WGS84),n=t.transform),e.toCartesian().applyTransform(n).toLatLonE(t)},o.prototype.toCartesian=function(){var t=this.lat.toRadians(),e=this.lon.toRadians(),n=this.datum.ellipsoid.a,i=this.datum.ellipsoid.f,o=Math.sin(t),a=Math.cos(t),s=Math.sin(e),u=Math.cos(e),l=2*i-i*i,c=n/Math.sqrt(1-l*o*o);return new r((c+0)*a*u,(c+0)*a*s,(c*(1-l)+0)*o)},r.prototype.toLatLonE=function(t){var e=this.x,n=this.y,r=this.z,i=t.ellipsoid.a,a=t.ellipsoid.b,s=t.ellipsoid.f,u=2*s-s*s,l=u/(1-u),c=Math.sqrt(e*e+n*n),h=a*r/(i*c)*(1+l*a/Math.sqrt(c*c+r*r)),f=h/Math.sqrt(1+h*h),d=f/h,p=isNaN(d)?0:Math.atan2(r+l*a*f*f*f,c-u*i*d*d*d),m=Math.atan2(n,e),v=Math.sin(p);Math.cos(p),Math.sqrt(1-u*v*v);return new o(p.toDegrees(),m.toDegrees(),t)},r.prototype.applyTransform=function(t){var e=this.x,n=this.y,i=this.z,o=t[0],a=t[1],s=t[2],u=t[3]/1e6+1,l=(t[4]/3600).toRadians(),c=(t[5]/3600).toRadians(),h=(t[6]/3600).toRadians();return new r(o+e*u-n*h+i*c,a+e*h+n*u-i*l,s-e*c+n*l+i*u)},o.prototype.toString=function(t,e){return i.toLat(this.lat,t,e)+", "+i.toLon(this.lon,t,e)},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),t.exports&&(t.exports=o,t.exports.Vector3d=r)},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(126),i=n(75),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,n){var r=n(10)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r=n(27),i=n(14),o=n(74),a=n(11),s=function(t){return function(e,n,s,u){r(n);var l=i(e),c=o(l),h=a(l.length),f=t?h-1:0,d=t?-1:1;if(s<2)for(;;){if(f in c){u=c[f],f+=d;break}if(f+=d,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=d)f in c&&(u=n(u,c[f],f,l));return u}};t.exports={left:s(!1),right:s(!0)}},function(t,e,n){"use strict";var r=n(30),i=n(53),o=n(82),a=n(26),s=n(136),u=a.set,l=a.getterFor("Array Iterator");t.exports=s(Array,"Array",(function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";var r=n(34),i=n(5),o=n(3);t.exports=r||!o((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete i[t]}))},function(t,e,n){var r=n(35),i=n(22),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){"use strict";n(140);var r=n(24),i=n(3),o=n(10),a=n(104),s=n(23),u=o("species"),l=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c="$0"==="a".replace(/./,"$0"),h=o("replace"),f=!!/./[h]&&""===/./[h]("a","$0"),d=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var p=o(t),m=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),v=m&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!m||!v||"replace"===t&&(!l||!c||f)||"split"===t&&!d){var g=/./[p],y=n(p,""[t],(function(t,e,n,r,i){return e.exec===a?m&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=y[0],_=y[1];r(String.prototype,t,b),r(RegExp.prototype,p,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}h&&s(RegExp.prototype[p],"sham",!0)}},function(t,e,n){"use strict";var r,i,o=n(65),a=n(105),s=RegExp.prototype.exec,u=String.prototype.replace,l=s,c=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(c||f||h)&&(l=function(t){var e,n,r,i,a=this,l=h&&a.sticky,d=o.call(a),p=a.source,m=0,v=t;return l&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),v=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,m++),n=new RegExp("^(?:"+p+")",d)),f&&(n=new RegExp("^"+p+"$(?!\\s)",d)),c&&(e=a.lastIndex),r=s.call(l?n:a,v),l?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:c&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),f&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=l},function(t,e,n){"use strict";var r=n(3);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,n){"use strict";var r=n(102).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(45),o=n(104);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var a=n.call(t,e);if("object"!==r(a))throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e){t.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},function(t,e,n){var r=n(7),i=n(51);t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},function(t,e){var n=Math.expm1,r=Math.exp;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:r(t)-1}:n},function(t,e,n){"use strict";var r=n(27),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var r=n(2),i=n(5),o=n(79),a=n(24),s=n(59),u=n(52),l=n(54),c=n(7),h=n(3),f=n(98),d=n(40),p=n(109);t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),g=m?"set":"add",y=i[t],b=y&&y.prototype,_=y,w={},x=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(v||b.forEach&&!h((function(){(new y).entries().next()})))))_=n.getConstructor(e,t,m,g),s.REQUIRED=!0;else if(o(t,!0)){var M=new _,E=M[g](v?{}:-0,1)!=M,S=h((function(){M.has(1)})),A=f((function(t){new y(t)})),T=!v&&h((function(){for(var t=new y,e=5;e--;)t[g](e,e);return!t.has(-0)}));A||((_=e((function(e,n){l(e,_,t);var r=p(new y,e,_);return null!=n&&u(n,r[g],{that:r,AS_ENTRIES:m}),r}))).prototype=b,b.constructor=_),(S||T)&&(x("delete"),x("has"),m&&x("get")),(T||E)&&x(g),v&&b.clear&&delete b.clear}return w[t]=_,r({global:!0,forced:_!=y},w),d(_,t),v||n.setStrong(_,t,m),_}},function(t,e,n){"use strict";var r=n(5),i=n(9),o=n(147),a=n(23),s=n(67),u=n(3),l=n(54),c=n(35),h=n(11),f=n(205),d=n(432),p=n(36),m=n(51),v=n(56).f,g=n(13).f,y=n(135),b=n(40),_=n(26),w=_.get,x=_.set,M=r.ArrayBuffer,E=M,S=r.DataView,A=S&&S.prototype,T=Object.prototype,q=r.RangeError,P=d.pack,L=d.unpack,O=function(t){return[255&t]},C=function(t){return[255&t,t>>8&255]},I=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},R=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},k=function(t){return P(t,23,4)},N=function(t){return P(t,52,8)},B=function(t,e){g(t.prototype,e,{get:function(){return w(this)[e]}})},D=function(t,e,n,r){var i=f(n),o=w(t);if(i+e>o.byteLength)throw q("Wrong index");var a=w(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},j=function(t,e,n,r,i,o){var a=f(n),s=w(t);if(a+e>s.byteLength)throw q("Wrong index");for(var u=w(s.buffer).bytes,l=a+s.byteOffset,c=r(+i),h=0;h<e;h++)u[l+h]=c[o?h:e-h-1]};if(o){if(!u((function(){M(1)}))||!u((function(){new M(-1)}))||u((function(){return new M,new M(1.5),new M(NaN),"ArrayBuffer"!=M.name}))){for(var F,z=(E=function(t){return l(this,E),new M(f(t))}).prototype=M.prototype,U=v(M),V=0;U.length>V;)(F=U[V++])in E||a(E,F,M[F]);z.constructor=E}m&&p(A)!==T&&m(A,T);var G=new S(new E(2)),H=A.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||s(A,{setInt8:function(t,e){H.call(this,t,e<<24>>24)},setUint8:function(t,e){H.call(this,t,e<<24>>24)}},{unsafe:!0})}else E=function(t){l(this,E,"ArrayBuffer");var e=f(t);x(this,{bytes:y.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},S=function(t,e,n){l(this,S,"DataView"),l(t,E,"DataView");var r=w(t).byteLength,o=c(e);if(o<0||o>r)throw q("Wrong offset");if(o+(n=void 0===n?r-o:h(n))>r)throw q("Wrong length");x(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(B(E,"byteLength"),B(S,"buffer"),B(S,"byteLength"),B(S,"byteOffset")),s(S.prototype,{getInt8:function(t){return D(this,1,t)[0]<<24>>24},getUint8:function(t){return D(this,1,t)[0]},getInt16:function(t){var e=D(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=D(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return R(D(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return R(D(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return L(D(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return L(D(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){j(this,1,t,O,e)},setUint8:function(t,e){j(this,1,t,O,e)},setInt16:function(t,e){j(this,2,t,C,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){j(this,2,t,C,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){j(this,4,t,I,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){j(this,4,t,I,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){j(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){j(this,8,t,N,e,arguments.length>2?arguments[2]:void 0)}});b(E,"ArrayBuffer"),b(S,"DataView"),t.exports={ArrayBuffer:E,DataView:S}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(17))},function(t,e,n){var r=n(6).Buffer;function i(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,n=new Array(e),i=0;i<e;i++)n[i]=t.readUInt32BE(4*i);return n}function o(t){for(;0<t.length;t++)t[0]=0}function a(t,e,n,r,i){for(var o,a,s,u,l=n[0],c=n[1],h=n[2],f=n[3],d=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],v=t[3]^e[3],g=4,y=1;y<i;y++)o=l[d>>>24]^c[p>>>16&255]^h[m>>>8&255]^f[255&v]^e[g++],a=l[p>>>24]^c[m>>>16&255]^h[v>>>8&255]^f[255&d]^e[g++],s=l[m>>>24]^c[v>>>16&255]^h[d>>>8&255]^f[255&p]^e[g++],u=l[v>>>24]^c[d>>>16&255]^h[p>>>8&255]^f[255&m]^e[g++],d=o,p=a,m=s,v=u;return o=(r[d>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&v])^e[g++],a=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[v>>>8&255]<<8|r[255&d])^e[g++],s=(r[m>>>24]<<24|r[v>>>16&255]<<16|r[d>>>8&255]<<8|r[255&p])^e[g++],u=(r[v>>>24]<<24|r[d>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^e[g++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var n=[],r=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,n[a]=l,r[l]=a;var c=t[a],h=t[c],f=t[h],d=257*t[l]^16843008*l;i[0][a]=d<<24|d>>>8,i[1][a]=d<<16|d>>>16,i[2][a]=d<<8|d>>>24,i[3][a]=d,d=16843009*f^65537*h^257*c^16843008*a,o[0][l]=d<<24|d>>>8,o[1][l]=d<<16|d>>>16,o[2][l]=d<<8|d>>>24,o[3][l]=d,0===a?a=s=1:(a=c^t[t[t[f^c]]],s^=t[t[s]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:o}}();function l(t){this._key=i(t),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,r=4*(n+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<r;o++){var a=i[o-1];o%e==0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/e|0]<<24):e>6&&o%e==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),i[o]=i[o-e]^a}for(var l=[],c=0;c<r;c++){var h=r-c,f=i[h-(c%4?0:4)];l[c]=c<4||h<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(t){return a(t=i(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},l.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=r.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n},l.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var n=a(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=r.allocUnsafe(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[3],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[1],12),o},l.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=l},function(t,e,n){var r=n(6).Buffer,i=n(149);t.exports=function(t,e,n,o){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&(r.isBuffer(e)||(e=r.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,s=r.alloc(a),u=r.alloc(o||0),l=r.alloc(0);a>0||o>0;){var c=new i;c.update(l),c.update(t),e&&c.update(e),l=c.digest();var h=0;if(a>0){var f=s.length-a;h=Math.min(a,l.length),l.copy(s,f,0,h),a-=h}if(h<l.length&&o>0){var d=u.length-o,p=Math.min(o,l.length-h);l.copy(u,d,h,h+p),o-=p}}return l.fill(0),{key:s,iv:u}}},function(t,e,n){"use strict";var r=n(18),i=n(38),o=i.getNAF,a=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var n=t._getDoubles(),r=o(e,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;for(var a=[],u=0;u<r.length;u+=n.step){var l=0;for(e=u+n.step-1;e>=u;e--)l=(l<<1)+r[e];a.push(l)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),f=i;f>0;f--){for(u=0;u<a.length;u++){(l=a[u])===f?h=h.mixedAdd(n.points[u]):l===-f&&(h=h.mixedAdd(n.points[u].neg()))}c=c.add(h)}return c.toP()},u.prototype._wnafMul=function(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,a=o(e,n,this._bitLength),u=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(e=0;l>=0&&0===a[l];l--)e++;if(l>=0&&e++,u=u.dblp(e),l<0)break;var c=a[l];s(0!==c),u="affine"===t.type?c>0?u.mixedAdd(i[c-1>>1]):u.mixedAdd(i[-c-1>>1].neg()):c>0?u.add(i[c-1>>1]):u.add(i[-c-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,n,r,i){for(var s=this._wnafT1,u=this._wnafT2,l=this._wnafT3,c=0,h=0;h<r;h++){var f=(S=e[h])._getNAFPoints(t);s[h]=f.wnd,u[h]=f.points}for(h=r-1;h>=1;h-=2){var d=h-1,p=h;if(1===s[d]&&1===s[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],g=a(n[d],n[p]);c=Math.max(g[0].length,c),l[d]=new Array(c),l[p]=new Array(c);for(var y=0;y<c;y++){var b=0|g[0][y],_=0|g[1][y];l[d][y]=v[3*(b+1)+(_+1)],l[p][y]=0,u[d]=m}}else l[d]=o(n[d],s[d],this._bitLength),l[p]=o(n[p],s[p],this._bitLength),c=Math.max(l[d].length,c),c=Math.max(l[p].length,c)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(h=c;h>=0;h--){for(var M=0;h>=0;){var E=!0;for(y=0;y<r;y++)x[y]=0|l[y][h],0!==x[y]&&(E=!1);if(!E)break;M++,h--}if(h>=0&&M++,w=w.dblp(M),h<0)break;for(y=0;y<r;y++){var S,A=x[y];0!==A&&(A>0?S=u[y][A-1>>1]:A<0&&(S=u[y][-A-1>>1].neg()),w="affine"===S.type?w.mixedAdd(S):w.add(S))}}for(h=0;h<r;h++)u[h]=null;return i?w:w.toP()},u.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(575),o=n(582),a=n(583),s=n(158),u=n(228),l=n(6).Buffer;function c(t){var e;"object"!==r(t)||l.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=l.from(t));var n,c,h=a(t,e),f=h.tag,d=h.data;switch(f){case"CERTIFICATE":c=i.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=i.PublicKey.decode(d,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=i.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":d=function(t,e){var n=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=o[t.algorithm.decrypt.cipher.algo.join(".")],a=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,h=parseInt(i.split("-")[1],10)/8,f=u.pbkdf2Sync(e,n,r,h,"sha1"),d=s.createDecipheriv(i,f,a),p=[];return p.push(d.update(c)),p.push(d.final()),l.concat(p)}(d=i.EncryptedPrivateKey.decode(d,"der"),e);case"PRIVATE KEY":switch(n=(c=i.PrivateKey.decode(d,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:i.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=i.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return{curve:(d=i.ECPrivateKey.decode(d,"der")).parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+f)}}t.exports=c,c.signature=i.signature},function(t,e,n){"use strict";var r={parseDMS:function(t){if("number"==typeof t&&isFinite(t))return Number(t);var e,n=String(t).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==n[n.length-1]&&n.splice(n.length-1),""==n)return NaN;switch(n.length){case 3:e=n[0]/1+n[1]/60+n[2]/3600;break;case 2:e=n[0]/1+n[1]/60;break;case 1:e=n[0];break;default:return NaN}return/^-|[WS]$/i.test(t.trim())&&(e=-e),Number(e)},separator:"",toDMS:function(t,e,n){if(isNaN(t))return null;if(void 0===e&&(e="dms"),void 0===n)switch(e){case"d":case"deg":n=4;break;case"dm":case"deg+min":n=2;break;case"dms":case"deg+min+sec":n=0;break;default:e="dms",n=0}var i,o,a,s;switch(t=Math.abs(t),e){default:case"d":case"deg":(o=t.toFixed(n))<100&&(o="0"+o),o<10&&(o="0"+o),i=o+"Â°";break;case"dm":case"deg+min":o=Math.floor(t),60==(a=(60*t%60).toFixed(n))&&(a=0,o++),a<10&&(a="0"+a),i=(o=("000"+o).slice(-3))+"Â°"+r.separator+a+"â²";break;case"dms":case"deg+min+sec":o=Math.floor(t),a=Math.floor(3600*t/60)%60,60==(s=(3600*t%60).toFixed(n))&&(s=(0).toFixed(n),a++),60==a&&(a=0,o++),o=("000"+o).slice(-3),a=("00"+a).slice(-2),s<10&&(s="0"+s),i=o+"Â°"+r.separator+a+"â²"+r.separator+s+"â³"}return i},toLat:function(t,e,n){var i=r.toDMS(t,e,n);return null===i?"â":i.slice(1)+r.separator+(t<0?"S":"N")},toLon:function(t,e,n){var i=r.toDMS(t,e,n);return null===i?"â":i+r.separator+(t<0?"W":"E")},toBrng:function(t,e,n){t=(Number(t)+360)%360;var i=r.toDMS(t,e,n);return null===i?"â":i.replace("360","0")},compassPoint:function(t,e){void 0===e&&(e=3),t=(t%360+360)%360;var n=4*Math.pow(2,e-1);return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(t*n/360)%n*16/n]}};t.exports&&(t.exports=r)},function(t,e,n){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=n(68),e.createHash=e.Hash=n(90),e.createHmac=e.Hmac=n(225);var r=n(522),i=Object.keys(r),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var a=n(228);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var s=n(524);e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=n(539);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var l=n(544);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=n(585);var c=n(586);e.publicEncrypt=c.publicEncrypt,e.privateEncrypt=c.privateEncrypt,e.publicDecrypt=c.publicDecrypt,e.privateDecrypt=c.privateDecrypt;var h=n(589);e.randomFill=h.randomFill,e.randomFillSync=h.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e,n){var r=n(5),i=n(7),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(5),i=n(23);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(125),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(5),i=n(123),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(34),i=n(125);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.3",mode:r?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(31),i=n(56),o=n(129),a=n(8);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(3);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(9),i=n(13),o=n(8),a=n(80);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){var r=n(3);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(10),i=n(82),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r={};r[n(10)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){"use strict";var r=n(14),i=n(49),o=n(11);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(2),i=n(137),o=n(36),a=n(51),s=n(40),u=n(23),l=n(24),c=n(10),h=n(34),f=n(82),d=n(186),p=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,v=c("iterator"),g=function(){return this};t.exports=function(t,e,n,c,d,y,b){i(n,e,c);var _,w,x,M=function(t){if(t===d&&q)return q;if(!m&&t in A)return A[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},E=e+" Iterator",S=!1,A=t.prototype,T=A[v]||A["@@iterator"]||d&&A[d],q=!m&&T||M(d),P="Array"==e&&A.entries||T;if(P&&(_=o(P.call(new t)),p!==Object.prototype&&_.next&&(h||o(_)===p||(a?a(_,p):"function"!=typeof _[v]&&u(_,v,g)),s(_,E,!0,!0),h&&(f[E]=g))),"values"==d&&T&&"values"!==T.name&&(S=!0,q=function(){return T.call(this)}),h&&!b||A[v]===q||u(A,v,q),f[e]=q,d)if(w={values:M("values"),keys:y?q:M("keys"),entries:M("entries")},b)for(x in w)(m||S||!(x in A))&&l(A,x,w[x]);else r({target:e,proto:!0,forced:m||S},w);return w}},function(t,e,n){"use strict";var r=n(186).IteratorPrototype,i=n(41),o=n(44),a=n(40),s=n(82),u=function(){return this};t.exports=function(t,e,n){var l=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,l,!1,!0),s[l]=u,t}},function(t,e,n){var r=n(89);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(10)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){"use strict";var r=n(2),i=n(104);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,n){var r=n(11),i=n(142),o=n(22),a=Math.ceil,s=function(t){return function(e,n,s){var u,l,c=String(o(e)),h=c.length,f=void 0===s?" ":String(s),d=r(n);return d<=h||""==f?c:(u=d-h,(l=i.call(f,a(u/f.length))).length>u&&(l=l.slice(0,u)),t?c+l:l+c)}};t.exports={start:s(!1),end:s(!0)}},function(t,e,n){"use strict";var r=n(35),i=n(22);t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){var r=n(3),i=n(108);t.exports=function(t){return r((function(){return!!i[t]()||"âÂá "!="âÂá "[t]()||i[t].name!==t}))}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var r,i,o,a=n(5),s=n(3),u=n(50),l=n(176),c=n(122),h=n(200),f=n(63),d=a.location,p=a.setImmediate,m=a.clearImmediate,v=a.process,g=a.MessageChannel,y=a.Dispatch,b=0,_={},w=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},x=function(t){return function(){w(t)}},M=function(t){w(t.data)},E=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};p&&m||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},m=function(t){delete _[t]},f?r=function(t){v.nextTick(x(t))}:y&&y.now?r=function(t){y.now(x(t))}:g&&!h?(o=(i=new g).port2,i.port1.onmessage=M,r=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(E)?(r=E,a.addEventListener("message",M,!1)):r="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),w(t)}}:function(t){setTimeout(x(t),0)}),t.exports={set:p,clear:m}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,n){var r=n(5),i=n(3),o=n(98),a=n(12).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},function(t,e,n){"use strict";var r=n(4),i=n(212),o=n(6).Buffer,a=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function l(t,e,n,r,i,o,a){return u(t+(e&n|~e&r)+i+o|0,a)+e|0}function c(t,e,n,r,i,o,a){return u(t+(e&r|n&~r)+i+o|0,a)+e|0}function h(t,e,n,r,i,o,a){return u(t+(e^n^r)+i+o|0,a)+e|0}function f(t,e,n,r,i,o,a){return u(t+(n^(e|~r))+i+o|0,a)+e|0}r(s,i),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var n=this._a,r=this._b,i=this._c,o=this._d;n=l(n,r,i,o,t[0],3614090360,7),o=l(o,n,r,i,t[1],3905402710,12),i=l(i,o,n,r,t[2],606105819,17),r=l(r,i,o,n,t[3],3250441966,22),n=l(n,r,i,o,t[4],4118548399,7),o=l(o,n,r,i,t[5],1200080426,12),i=l(i,o,n,r,t[6],2821735955,17),r=l(r,i,o,n,t[7],4249261313,22),n=l(n,r,i,o,t[8],1770035416,7),o=l(o,n,r,i,t[9],2336552879,12),i=l(i,o,n,r,t[10],4294925233,17),r=l(r,i,o,n,t[11],2304563134,22),n=l(n,r,i,o,t[12],1804603682,7),o=l(o,n,r,i,t[13],4254626195,12),i=l(i,o,n,r,t[14],2792965006,17),n=c(n,r=l(r,i,o,n,t[15],1236535329,22),i,o,t[1],4129170786,5),o=c(o,n,r,i,t[6],3225465664,9),i=c(i,o,n,r,t[11],643717713,14),r=c(r,i,o,n,t[0],3921069994,20),n=c(n,r,i,o,t[5],3593408605,5),o=c(o,n,r,i,t[10],38016083,9),i=c(i,o,n,r,t[15],3634488961,14),r=c(r,i,o,n,t[4],3889429448,20),n=c(n,r,i,o,t[9],568446438,5),o=c(o,n,r,i,t[14],3275163606,9),i=c(i,o,n,r,t[3],4107603335,14),r=c(r,i,o,n,t[8],1163531501,20),n=c(n,r,i,o,t[13],2850285829,5),o=c(o,n,r,i,t[2],4243563512,9),i=c(i,o,n,r,t[7],1735328473,14),n=h(n,r=c(r,i,o,n,t[12],2368359562,20),i,o,t[5],4294588738,4),o=h(o,n,r,i,t[8],2272392833,11),i=h(i,o,n,r,t[11],1839030562,16),r=h(r,i,o,n,t[14],4259657740,23),n=h(n,r,i,o,t[1],2763975236,4),o=h(o,n,r,i,t[4],1272893353,11),i=h(i,o,n,r,t[7],4139469664,16),r=h(r,i,o,n,t[10],3200236656,23),n=h(n,r,i,o,t[13],681279174,4),o=h(o,n,r,i,t[0],3936430074,11),i=h(i,o,n,r,t[3],3572445317,16),r=h(r,i,o,n,t[6],76029189,23),n=h(n,r,i,o,t[9],3654602809,4),o=h(o,n,r,i,t[12],3873151461,11),i=h(i,o,n,r,t[15],530742520,16),n=f(n,r=h(r,i,o,n,t[2],3299628645,23),i,o,t[0],4096336452,6),o=f(o,n,r,i,t[7],1126891415,10),i=f(i,o,n,r,t[14],2878612391,15),r=f(r,i,o,n,t[5],4237533241,21),n=f(n,r,i,o,t[12],1700485571,6),o=f(o,n,r,i,t[3],2399980690,10),i=f(i,o,n,r,t[10],4293915773,15),r=f(r,i,o,n,t[1],2240044497,21),n=f(n,r,i,o,t[8],1873313359,6),o=f(o,n,r,i,t[15],4264355552,10),i=f(i,o,n,r,t[6],2734768916,15),r=f(r,i,o,n,t[13],1309151649,21),n=f(n,r,i,o,t[4],4149444226,6),o=f(o,n,r,i,t[11],3174756917,10),i=f(i,o,n,r,t[2],718787259,15),r=f(r,i,o,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(25))},function(t,e,n){"use strict";var r=n(69).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&e.readable,s=n.writable||!1!==n.writable&&e.writable,u=function(){e.writable||c()},l=e._writableState&&e._writableState.finished,c=function(){s=!1,l=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):s&&!l?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},m=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",c),e.on("abort",p),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",c),!1!==n.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",c),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},function(t,e,n){"use strict";var r=n(20).Buffer,i=n(4),o=n(212),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function m(t,e,n,r,i,o,a,s){return p(t+(e^n^r)+o+a|0,s)+i|0}function v(t,e,n,r,i,o,a,s){return p(t+(e&n|~e&r)+o+a|0,s)+i|0}function g(t,e,n,r,i,o,a,s){return p(t+((e|~n)^r)+o+a|0,s)+i|0}function y(t,e,n,r,i,o,a,s){return p(t+(e&r|n&~r)+o+a|0,s)+i|0}function b(t,e,n,r,i,o,a,s){return p(t+(e^(n|~r))+o+a|0,s)+i|0}i(d,o),d.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var n=0|this._a,r=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,_=0|this._a,w=0|this._b,x=0|this._c,M=0|this._d,E=0|this._e,S=0;S<80;S+=1){var A,T;S<16?(A=m(n,r,i,o,d,t[s[S]],h[0],l[S]),T=b(_,w,x,M,E,t[u[S]],f[0],c[S])):S<32?(A=v(n,r,i,o,d,t[s[S]],h[1],l[S]),T=y(_,w,x,M,E,t[u[S]],f[1],c[S])):S<48?(A=g(n,r,i,o,d,t[s[S]],h[2],l[S]),T=g(_,w,x,M,E,t[u[S]],f[2],c[S])):S<64?(A=y(n,r,i,o,d,t[s[S]],h[3],l[S]),T=v(_,w,x,M,E,t[u[S]],f[3],c[S])):(A=b(n,r,i,o,d,t[s[S]],h[4],l[S]),T=m(_,w,x,M,E,t[u[S]],f[4],c[S])),n=d,d=o,o=p(i,10),i=r,r=A,_=E,E=M,M=p(x,10),x=w,w=T}var q=this._b+i+M|0;this._b=this._c+o+E|0,this._c=this._d+d+_|0,this._d=this._e+n+w|0,this._e=this._a+r+x|0,this._a=q},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=d},function(t,e,n){(e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n(506),e.sha1=n(507),e.sha224=n(508),e.sha256=n(219),e.sha384=n(509),e.sha512=n(220)},function(t,e,n){(e=t.exports=n(221)).Stream=e,e.Readable=e,e.Writable=n(156),e.Duplex=n(62),e.Transform=n(224),e.PassThrough=n(516)},function(t,e,n){var r=n(20),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";(function(e,r,i){var o=n(115);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=g;var l=Object.create(n(91));l.inherits=n(4);var c={deprecate:n(150)},h=n(222),f=n(155).Buffer,d=i.Uint8Array||function(){};var p,m=n(223);function v(){}function g(t,e){s=s||n(62),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}(t,n,r,e,i);else{var a=x(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(_,t,n,a,i):_(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(s=s||n(62),!(p.call(y,this)||this instanceof s))return new y(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function b(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function _(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),E(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,b(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function M(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)}))}function E(t,e){var n=x(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(M,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}l.inherits(y,h),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof g)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof d);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,t,n))&&(i.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,r,i,o);return u}(this,i,s,t,e,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(17),n(514).setImmediate,n(25))},function(t,e,n){"use strict";var r=n(37);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var n=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<n;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,n=0,r=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,n),n+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,n=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),n+=this._flushBuffer(i,n);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,n;return t&&(e=this.update(t)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(n):n},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,n){var r=n(529),i=n(537),o=n(237);e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,n){var r={ECB:n(530),CBC:n(531),CFB:n(532),CFB8:n(533),CFB1:n(534),OFB:n(535),CTR:n(235),GCM:n(235)},i=n(237);for(var o in i)i[o].module=r[i[o].mode];t.exports=i},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i;function o(t){this.rand=t}if(t.exports=function(t){return i||(i=new o(null)),i.generate(t)},t.exports.Rand=o,o.prototype.generate=function(t){return this._rand(t)},o.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),n=0;n<e.length;n++)e[n]=this.rand.getByte();return e},"object"===("undefined"==typeof self?"undefined":r(self)))self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"===("undefined"==typeof window?"undefined":r(window))&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=n(541);if("function"!=typeof a.randomBytes)throw new Error("Not supported");o.prototype._rand=function(t){return a.randomBytes(t)}}catch(t){}},function(t,e,n){"use strict";var r=n(72).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&e.readable,s=n.writable||!1!==n.writable&&e.writable,u=function(){e.writable||c()},l=e._writableState&&e._writableState.finished,c=function(){s=!1,l=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):s&&!l?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},m=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",c),e.on("abort",p),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",c),!1!==n.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",c),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},function(t,e,n){(function(e){var r=n(554),i=n(68);function o(t){var e,n=t.modulus.byteLength();do{e=new r(i(n))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,n){var i=function(t){var e=o(t);return{blinder:e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(n),a=n.modulus.byteLength(),s=new r(t).mul(i.blinder).umod(n.modulus),u=s.toRed(r.mont(n.prime1)),l=s.toRed(r.mont(n.prime2)),c=n.coefficient,h=n.prime1,f=n.prime2,d=u.redPow(n.exponent1).fromRed(),p=l.redPow(n.exponent2).fromRed(),m=d.isub(p).imul(c).umod(h).imul(f);return p.iadd(m).imul(i.unblinder).umod(n.modulus).toArrayLike(e,"be",a)}a.getr=o,t.exports=a}).call(this,n(20).Buffer)},function(t,e,n){"use strict";var r=e;r.version=n(556).version,r.utils=n(38),r.rand=n(160),r.curve=n(249),r.curves=n(164),r.ec=n(567),r.eddsa=n(571)},function(t,e,n){"use strict";var r,i=e,o=n(165),a=n(249),s=n(38).assert;function u(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var n=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=u,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(566)}catch(t){r=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(t,e,n){var r=e;r.utils=n(42),r.common=n(93),r.sha=n(560),r.ripemd=n(564),r.hmac=n(565),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(t,e,n){"use strict";(function(e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,o=n(20),a=o.Buffer,s={};for(i in o)o.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(s[i]=o[i]);var u=s.Buffer={};for(i in a)a.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(u[i]=a[i]);if(s.Buffer.prototype=a.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(t,e,n){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+r(t));if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+r(t));return a(t,e,n)}),u.alloc||(u.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+r(t));if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var i=a(t);return e&&0!==e.length?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i}),!s.kStringMaxLength)try{s.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(t){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),t.exports=s}).call(this,n(17))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(168).Reporter,o=n(94).EncoderBuffer,a=n(94).DecoderBuffer,s=n(37),u=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(u);function c(t,e,n){var r={};this._baseState=r,r.name=n,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=c;var h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){var t=this._baseState,e={};h.forEach((function(n){e[n]=t[n]}));var n=new this.constructor(e.parent);return n._baseState=e,n},c.prototype._wrap=function(){var t=this._baseState;l.forEach((function(e){this[e]=function(){var n=new this.constructor(this);return t.children.push(n),n[e].apply(n,arguments)}}),this)},c.prototype._init=function(t){var e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),s.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(t){var e=this._baseState,n=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==n.length&&(s(null===e.children),e.children=n,n.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!==r(t)||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach((function(n){n==(0|n)&&(n|=0);var r=t[n];e[r]=n})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){c.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),u.forEach((function(t){c.prototype[t]=function(){var e=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(n),this}})),c.prototype.use=function(t){s(t);var e=this._baseState;return s(null===e.use),e.use=t,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(t){var e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},c.prototype.explicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},c.prototype.implicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},c.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},c.prototype.key=function(t){var e=this._baseState;return s(null===e.key),e.key=t,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(t){var e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},c.prototype.contains=function(t){var e=this._baseState;return s(null===e.use),e.contains=t,this},c.prototype._decode=function(t,e){var n=this._baseState;if(null===n.parent)return t.wrapResult(n.children[0]._decode(t,e));var r,i=n.default,o=!0,s=null;if(null!==n.key&&(s=t.enterKey(n.key)),n.optional){var u=null;if(null!==n.explicit?u=n.explicit:null!==n.implicit?u=n.implicit:null!==n.tag&&(u=n.tag),null!==u||n.any){if(o=this._peekTag(t,u,n.any),t.isError(o))return o}else{var l=t.save();try{null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),o=!0}catch(t){o=!1}t.restore(l)}}if(n.obj&&o&&(r=t.enterObject()),o){if(null!==n.explicit){var c=this._decodeTag(t,n.explicit);if(t.isError(c))return c;t=c}var h=t.offset;if(null===n.use&&null===n.choice){var f;n.any&&(f=t.save());var d=this._decodeTag(t,null!==n.implicit?n.implicit:n.tag,n.any);if(t.isError(d))return d;n.any?i=t.raw(f):t=d}if(e&&e.track&&null!==n.tag&&e.track(t.path(),h,t.length,"tagged"),e&&e.track&&null!==n.tag&&e.track(t.path(),t.offset,t.length,"content"),n.any||(i=null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(t,e)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var p=new a(i);i=this._getUse(n.contains,t._reporterState.obj)._decode(p,e)}}return n.obj&&o&&(i=t.leaveObject(r)),null===n.key||null===i&&!0!==o?null!==s&&t.exitKey(s):t.leaveKey(s,n.key,i),i},c.prototype._decodeGeneric=function(t,e,n){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],n):/str$/.test(t)?this._decodeStr(e,t,n):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],n):"objid"===t?this._decodeObjid(e,null,null,n):"gentime"===t||"utctime"===t?this._decodeTime(e,t,n):"null_"===t?this._decodeNull(e,n):"bool"===t?this._decodeBool(e,n):"objDesc"===t?this._decodeStr(e,t,n):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,n):e.error("unknown tag: "+t)},c.prototype._getUse=function(t,e){var n=this._baseState;return n.useDecoder=this._use(t,e),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(t,e){var n=this._baseState,r=null,i=!1;return Object.keys(n.choice).some((function(o){var a=t.save(),s=n.choice[o];try{var u=s._decode(t,e);if(t.isError(u))return!1;r={type:o,value:u},i=!0}catch(e){return t.restore(a),!1}return!0}),this),i?r:t.error("Choice not matched")},c.prototype._createEncoderBuffer=function(t){return new o(t,this.reporter)},c.prototype._encode=function(t,e,n){var r=this._baseState;if(null===r.default||r.default!==t){var i=this._encodeValue(t,e,n);if(void 0!==i&&!this._skipDefault(i,e,n))return i}},c.prototype._encodeValue=function(t,e,n){var o=this._baseState;if(null===o.parent)return o.children[0]._encode(t,e||new i);var a=null;if(this.reporter=e,o.optional&&void 0===t){if(null===o.default)return;t=o.default}var s=null,u=!1;if(o.any)a=this._createEncoderBuffer(t);else if(o.choice)a=this._encodeChoice(t,e);else if(o.contains)s=this._getUse(o.contains,n)._encode(t,e),u=!0;else if(o.children)s=o.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,e,t);if(null===n._baseState.key)return e.error("Child should have a key");var i=e.enterKey(n._baseState.key);if("object"!==r(t))return e.error("Child expected, but input is not object");var o=n._encode(t[n._baseState.key],e,t);return e.leaveKey(i),o}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===o.tag||"setof"===o.tag){if(!o.args||1!==o.args.length)return e.error("Too many args for : "+o.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var l=this.clone();l._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(n){var r=this._baseState;return this._getUse(r.args[0],t)._encode(n,e)}),l))}else null!==o.use?a=this._getUse(o.use,n)._encode(t,e):(s=this._encodePrimitive(o.tag,t),u=!0);if(!o.any&&null===o.choice){var c=null!==o.implicit?o.implicit:o.tag,h=null===o.implicit?"universal":"context";null===c?null===o.use&&e.error("Tag could be omitted only for .use()"):null===o.use&&(a=this._encodeComposite(c,u,h,s))}return null!==o.explicit&&(a=this._encodeComposite(o.explicit,!1,"context",a)),a},c.prototype._encodeChoice=function(t,e){var n=this._baseState,r=n.choice[t.type];return r||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(t.value,e)},c.prototype._encodePrimitive=function(t,e){var n=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},c.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},c.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,n){"use strict";var r=n(4);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,n){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){var e=this._reporterState,n=e.obj;return e.obj=t,n},i.prototype.error=function(t){var e,n=this._reporterState,r=t instanceof o;if(e=r?t:new o(n.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!n.options.partial)throw e;return r||n.errors.push(e),e},i.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,n){"use strict";function r(t){var e={};return Object.keys(t).forEach((function(n){(0|n)==n&&(n|=0);var r=t[n];e[r]=n})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r(e.tag)},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);this.x=Number(t),this.y=Number(e),this.z=Number(n)}r.prototype.plus=function(t){if(!(t instanceof r))throw new TypeError("v is not Vector3d object");return new r(this.x+t.x,this.y+t.y,this.z+t.z)},r.prototype.minus=function(t){if(!(t instanceof r))throw new TypeError("v is not Vector3d object");return new r(this.x-t.x,this.y-t.y,this.z-t.z)},r.prototype.times=function(t){return t=Number(t),new r(this.x*t,this.y*t,this.z*t)},r.prototype.dividedBy=function(t){return t=Number(t),new r(this.x/t,this.y/t,this.z/t)},r.prototype.dot=function(t){if(!(t instanceof r))throw new TypeError("v is not Vector3d object");return this.x*t.x+this.y*t.y+this.z*t.z},r.prototype.cross=function(t){if(!(t instanceof r))throw new TypeError("v is not Vector3d object");return new r(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},r.prototype.negate=function(){return new r(-this.x,-this.y,-this.z)},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},r.prototype.unit=function(){var t=this.length();return 1==t||0==t?this:new r(this.x/t,this.y/t,this.z/t)},r.prototype.angleTo=function(t,e){if(!(t instanceof r))throw new TypeError("v is not Vector3d object");if(!(e instanceof r||null==e))throw new TypeError("n is not Vector3d object");var n=null==e?1:Math.sign(this.cross(t).dot(e)),i=this.cross(t).length()*n,o=this.dot(t);return Math.atan2(i,o)},r.prototype.rotateAround=function(t,e){if(!(t instanceof r))throw new TypeError("axis is not Vector3d object");for(var n=this.unit(),i=[n.x,n.y,n.z],o=t.unit(),a=Math.sin(e),s=Math.cos(e),u=[[o.x*o.x*(1-s)+s,o.x*o.y*(1-s)-o.z*a,o.x*o.z*(1-s)+o.y*a],[o.y*o.x*(1-s)+o.z*a,o.y*o.y*(1-s)+s,o.y*o.z*(1-s)-o.x*a],[o.z*o.x*(1-s)-o.y*a,o.z*o.y*(1-s)+o.x*a,o.z*o.z*(1-s)+s]],l=[0,0,0],c=0;c<3;c++)for(var h=0;h<3;h++)l[c]+=u[c][h]*i[h];return new r(l[0],l[1],l[2])},r.prototype.toString=function(t){var e=void 0===t?3:Number(t);return"["+this.x.toFixed(e)+","+this.y.toFixed(e)+","+this.z.toFixed(e)+"]"},void 0===Math.sign&&(Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}),t.exports&&(t.exports=r)},function(t,e,n){var r=n(9),i=n(3),o=n(122);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(5),i=n(124),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){var r=n(16),i=n(127),o=n(21),a=n(13);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,l=0;l<n.length;l++){var c=n[l];r(t,c)||s(t,c,u(e,c))}}},function(t,e,n){var r=n(16),i=n(30),o=n(78).indexOf,a=n(76);t.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)!r(a,n)&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(130);t.exports=i&&!Symbol.sham&&"symbol"==r(Symbol.iterator)},function(t,e,n){var r=n(31);t.exports=r("document","documentElement")},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(30),o=n(56).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?function(t){try{return o(t)}catch(t){return s.slice()}}(t):o(i(t))}},function(t,e,n){var r=n(10);e.f=r},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){var r=n(8);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},function(t,e,n){"use strict";var r=n(50),i=n(14),o=n(284),a=n(133),s=n(11),u=n(58),l=n(83);t.exports=function(t){var e,n,c,h,f,d,p=i(t),m="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,y=void 0!==g,b=l(p),_=0;if(y&&(g=r(g,v>2?arguments[2]:void 0,2)),null==b||m==Array&&a(b))for(n=new m(e=s(p.length));e>_;_++)d=y?g(p[_],_):p[_],u(n,_,d);else for(f=(h=b.call(p)).next,n=new m;!(c=f.call(h)).done;_++)d=y?o(h,g,[c.value,_],!0):c.value,u(n,_,d);return n.length=_,n}},function(t,e,n){"use strict";var r=n(14),i=n(49),o=n(11),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),u=i(t,s),l=i(e,s),c=arguments.length>2?arguments[2]:void 0,h=a((void 0===c?s:i(c,s))-l,s-u),f=1;for(l<u&&u<l+h&&(f=-1,l+=h-1,u+=h-1);h-- >0;)l in n?n[u]=n[l]:delete n[u],u+=f,l+=f;return n}},function(t,e,n){"use strict";var r=n(57),i=n(11),o=n(50);t.exports=function t(e,n,a,s,u,l,c,h){for(var f,d=u,p=0,m=!!c&&o(c,h,3);p<s;){if(p in a){if(f=m?m(a[p],p,n):a[p],l>0&&r(f))d=t(e,n,f,i(f.length),d,l-1)-1;else{if(d>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[d]=f}d++}p++}return d}},function(t,e,n){"use strict";var r=n(19).forEach,i=n(46),o=n(29),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){"use strict";var r=n(30),i=n(35),o=n(11),a=n(46),s=n(29),u=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),d=c||!h||!f;t.exports=d?function(t){if(c)return l.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:l},function(t,e,n){"use strict";var r,i,o,a=n(3),s=n(36),u=n(23),l=n(16),c=n(10),h=n(34),f=c("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):d=!0);var p=null==r||a((function(){var t={};return r[f].call(t)!==t}));p&&(r={}),h&&!p||l(r,f)||u(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(t,e,n){"use strict";var r=n(27),i=n(7),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){"use strict";var r=n(9),i=n(3),o=n(80),a=n(129),s=n(96),u=n(14),l=n(74),c=Object.assign,h=Object.defineProperty;t.exports=!c||i((function(){if(r&&1!==c({b:1},c(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||"abcdefghijklmnopqrst"!=o(c({},e)).join("")}))?function(t,e){for(var n=u(t),i=arguments.length,c=1,h=a.f,f=s.f;i>c;)for(var d,p=l(arguments[c++]),m=h?o(p).concat(h(p)):o(p),v=m.length,g=0;v>g;)d=m[g++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:c},function(t,e,n){var r=n(9),i=n(80),o=n(30),a=n(96).f,s=function(t){return function(e){for(var n,s=o(e),u=i(s),l=u.length,c=0,h=[];l>c;)n=u[c++],r&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}};t.exports={entries:s(!0),values:s(!1)}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(87);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(t,e,n){var r=n(14),i=Math.floor,o="".replace,a=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,n,u,l,c){var h=n+t.length,f=u.length,d=s;return void 0!==l&&(l=r(l),d=a),o.call(c,d,(function(r,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=l[o.slice(1,-1)];break;default:var s=+o;if(0===s)return r;if(s>f){var c=i(s/10);return 0===c?r:c<=f?void 0===u[c-1]?o.charAt(1):u[c-1]+o.charAt(1):r}a=u[s-1]}return void 0===a?"":a}))}},function(t,e,n){"use strict";var r=n(102).charAt,i=n(26),o=n(136),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=s(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(5),i=n(66).trim,o=n(108),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");t.exports=u?function(t,e){var n=i(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},function(t,e,n){var r=n(5),i=n(66).trim,o=n(108),a=r.parseFloat,s=1/a(o+"-0")!=-1/0;t.exports=s?function(t){var e=i(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},function(t,e,n){var r=n(7),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){var r=n(45);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e){var n=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:n(1+t)}},function(t,e,n){var r=n(5);t.exports=r.Promise},function(t,e,n){var r=n(87);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r,i,o,a,s,u,l,c,h=n(5),f=n(21).f,d=n(145).set,p=n(200),m=n(422),v=n(63),g=h.MutationObserver||h.WebKitMutationObserver,y=h.document,b=h.process,_=h.Promise,w=f(h,"queueMicrotask"),x=w&&w.value;x||(r=function(){var t,e;for(v&&(t=b.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},p||v||m||!g||!y?_&&_.resolve?(l=_.resolve(void 0),c=l.then,a=function(){c.call(l,r)}):a=v?function(){b.nextTick(r)}:function(){d.call(h,r)}:(s=!0,u=y.createTextNode(""),new g(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(8),i=n(7),o=n(111);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(13).f,i=n(41),o=n(67),a=n(50),s=n(54),u=n(52),l=n(136),c=n(64),h=n(9),f=n(59).fastKey,d=n(26),p=d.set,m=d.getterFor;t.exports={getConstructor:function(t,e,n,l){var c=t((function(t,r){s(t,c,e),p(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=r&&u(r,t[l],{that:t,AS_ENTRIES:n})})),d=m(e),v=function(t,e,n){var r,i,o=d(t),a=g(t,e);return a?a.value=n:(o.last=a={index:i=f(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),h?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},g=function(t,e){var n,r=d(t),i=f(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(c.prototype,{clear:function(){for(var t=d(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=d(this),n=g(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),h?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=d(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),o(c.prototype,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),h&&r(c.prototype,"size",{get:function(){return d(this).size}}),c},setStrong:function(t,e,n){var r=e+" Iterator",i=m(e),o=m(r);l(t,e,(function(t,e){p(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),c(e)}}},function(t,e,n){"use strict";var r=n(67),i=n(59).getWeakData,o=n(8),a=n(7),s=n(54),u=n(52),l=n(19),c=n(16),h=n(26),f=h.set,d=h.getterFor,p=l.find,m=l.findIndex,v=0,g=function(t){return t.frozen||(t.frozen=new y)},y=function(){this.entries=[]},b=function(t,e){return p(t.entries,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=b(this,t);if(e)return e[1]},has:function(t){return!!b(this,t)},set:function(t,e){var n=b(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=m(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,l){var h=t((function(t,r){s(t,h,e),f(t,{type:e,id:v++,frozen:void 0}),null!=r&&u(r,t[l],{that:t,AS_ENTRIES:n})})),p=d(e),m=function(t,e,n){var r=p(t),a=i(o(e),!0);return!0===a?g(r).set(e,n):a[r.id]=n,t};return r(h.prototype,{delete:function(t){var e=p(this);if(!a(t))return!1;var n=i(t);return!0===n?g(e).delete(t):n&&c(n,e.id)&&delete n[e.id]},has:function(t){var e=p(this);if(!a(t))return!1;var n=i(t);return!0===n?g(e).has(t):n&&c(n,e.id)}}),r(h.prototype,n?{get:function(t){var e=p(this);if(a(t)){var n=i(t);return!0===n?g(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return m(this,t,e)}}:{add:function(t){return m(this,t,!0)}}),h}}},function(t,e,n){var r=n(35),i=n(11);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},function(t,e,n){var r=n(437);t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},function(t,e,n){var r=n(14),i=n(11),o=n(83),a=n(133),s=n(50),u=n(12).aTypedArrayConstructor;t.exports=function(t){var e,n,l,c,h,f,d=r(t),p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=o(d);if(null!=g&&!a(g))for(f=(h=g.call(d)).next,d=[];!(c=f.call(h)).done;)d.push(c.value);for(v&&p>2&&(m=s(m,arguments[2],2)),n=i(d.length),l=new(u(this))(n),e=0;n>e;e++)l[e]=v?m(d[e],e):d[e];return l}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(3),i=n(10),o=n(34),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(t,e,n){"use strict";n(100);var r=n(2),i=n(31),o=n(209),a=n(24),s=n(67),u=n(40),l=n(137),c=n(26),h=n(54),f=n(16),d=n(50),p=n(84),m=n(8),v=n(7),g=n(41),y=n(44),b=n(493),_=n(83),w=n(10),x=i("fetch"),M=i("Headers"),E=w("iterator"),S=c.set,A=c.getterFor("URLSearchParams"),T=c.getterFor("URLSearchParamsIterator"),q=/\+/g,P=Array(4),L=function(t){return P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},O=function(t){try{return decodeURIComponent(t)}catch(e){return t}},C=function(t){var e=t.replace(q," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(L(n--),O);return e}},I=/[!'()~]|%20/g,R={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},k=function(t){return R[t]},N=function(t){return encodeURIComponent(t).replace(I,k)},B=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:C(r.shift()),value:C(r.join("="))}))},D=function(t){this.entries.length=0,B(this.entries,t)},j=function(t,e){if(t<e)throw TypeError("Not enough arguments")},F=l((function(t,e){S(this,{type:"URLSearchParamsIterator",iterator:b(A(t).entries),kind:e})}),"Iterator",(function(){var t=T(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),z=function(){h(this,z,"URLSearchParams");var t,e,n,r,i,o,a,s,u,l=arguments.length>0?arguments[0]:void 0,c=this,d=[];if(S(c,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:D}),void 0!==l)if(v(l))if("function"==typeof(t=_(l)))for(n=(e=t.call(l)).next;!(r=n.call(e)).done;){if((a=(o=(i=b(m(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:s.value+""})}else for(u in l)f(l,u)&&d.push({key:u,value:l[u]+""});else B(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},U=z.prototype;s(U,{append:function(t,e){j(arguments.length,2);var n=A(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){j(arguments.length,1);for(var e=A(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){j(arguments.length,1);for(var e=A(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){j(arguments.length,1);for(var e=A(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){j(arguments.length,1);for(var e=A(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){j(arguments.length,1);for(var n,r=A(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)(n=i[u]).key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=A(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=A(this).entries,r=d(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new F(this,"keys")},values:function(){return new F(this,"values")},entries:function(){return new F(this,"entries")}},{enumerable:!0}),a(U,E,U.entries),a(U,"toString",(function(){for(var t,e=A(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(N(t.key)+"="+N(t.value));return n.join("&")}),{enumerable:!0}),u(z,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:z}),o||"function"!=typeof x||"function"!=typeof M||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(v(e=arguments[1])&&(n=e.body,"URLSearchParams"===p(n)&&((r=e.headers?new M(e.headers):new M).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=g(e,{body:y(0,String(n)),headers:y(0,r)}))),i.push(e)),x.apply(this,i)}}),t.exports={URLSearchParams:z,getState:A}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(6).Buffer,i=n(498).Transform;function o(t){i.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(4)(o,i),o.prototype._transform=function(t,e,n){var r=null;try{this.update(t,e)}catch(t){r=t}n(r)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var n=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)n[this._blockOffset++]=t[i++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,n){"use strict";(function(e,r){var i;t.exports=S,S.ReadableState=E;n(60).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=n(214),s=n(20).Buffer,u=e.Uint8Array||function(){};var l,c=n(499);l=c&&c.debuglog?c.debuglog("stream"):function(){};var h,f,d,p=n(500),m=n(215),v=n(216).getHighWaterMark,g=n(69).codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(4)(S,a);var x=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function E(t,e,r){i=i||n(70),t=t||{},"boolean"!=typeof r&&(r=e instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=v(this,t,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=n(61).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function S(t){if(i=i||n(70),!(this instanceof S))return new S(t);var e=this instanceof i;this._readableState=new E(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function A(t,e,n,r,i){l("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(l("onEofChunk"),e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?P(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,L(t)))}(t,a);else if(i||(o=function(t,e){var n;r=e,s.isBuffer(r)||r instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],e));var r;return n}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r)a.endEmitted?x(t,new w):T(t,a,e,!0);else if(a.ended)x(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?T(t,a,e,!1):O(t,a)):T(t,a,e,!1)}else r||(a.reading=!1,O(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function T(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&P(t)),O(t,e)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=m.destroy,S.prototype._undestroy=m.undestroy,S.prototype._destroy=function(t,e){e(t)},S.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),A(this,t,e,!1,n)},S.prototype.unshift=function(t){return A(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){h||(h=n(61).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function q(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function P(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(L,t))}function L(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function O(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(l("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function I(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function R(t){l("readable nexttick read 0"),t.read(0)}function k(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(l("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function D(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(j,e,t))}function j(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function F(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}S.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):P(this),null;if(0===(t=q(t,e))&&e.ended)return 0===e.length&&D(this),null;var r,i=e.needReadable;return l("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&l("length less than watermark",i=!0),e.ended||e.reading?l("reading or ended",i=!1):i&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=q(n,e))),null===(r=t>0?B(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(t){x(this,new _("_read()"))},S.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?u:v;function s(e,r){l("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",s),n.removeListener("end",u),n.removeListener("end",v),n.removeListener("data",f),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function u(){l("onend"),t.end()}i.endEmitted?r.nextTick(a):n.once("end",a),t.on("unpipe",s);var c=function(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",c);var h=!1;function f(e){l("ondata");var r=t.write(e);l("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==F(i.pipes,t))&&!h&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(e){l("onerror",e),v(),t.removeListener("error",d),0===o(t,"error")&&x(t,e)}function p(){t.removeListener("finish",m),v()}function m(){l("onfinish"),t.removeListener("close",p),v()}function v(){l("unpipe"),n.unpipe(t)}return n.on("data",f),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",d),t.once("close",p),t.once("finish",m),t.emit("pipe",n),i.flowing||(l("pipe resume"),n.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},S.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?P(this):i.reading||r.nextTick(R,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&r.nextTick(I,this),n},S.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(I,this),e},S.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(k,t,e))}(this,t)),t.paused=!1,this},S.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<M.length;o++)t.on(M[o],this.emit.bind(this,M[o]));return this._read=function(e){l("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=n(502)),f(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,e){return void 0===d&&(d=n(503)),d(S,t,e)})}).call(this,n(25),n(17))},function(t,e,n){t.exports=n(60).EventEmitter},function(t,e,n){"use strict";(function(e){function n(t,e){i(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):o?(e.nextTick(r,a),o(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,n(17))},function(t,e,n){"use strict";var r=n(69).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,n){"use strict";(function(e,r){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=S,S.WritableState=E;var a={deprecate:n(150)},s=n(214),u=n(20).Buffer,l=e.Uint8Array||function(){};var c,h=n(215),f=n(216).getHighWaterMark,d=n(69).codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,v=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,_=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function M(){}function E(t,e,a){o=o||n(70),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new v;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,o){--e.pendingcb,n?(r.nextTick(o,i),r.nextTick(O,t,e),t._writableState.errorEmitted=!0,x(t,i)):(o(i),t._writableState.errorEmitted=!0,x(t,i),O(t,e))}(t,n,i,e,o);else{var a=P(n)||t.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||q(t,n),i?r.nextTick(T,t,n,a,o):T(t,n,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(t){var e=this instanceof(o=o||n(70));if(!e&&!c.call(S,this))return new S(t);this._writableState=new E(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function A(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function T(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),O(t,e)}function q(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)o[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,A(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback;if(A(t,e,!1,e.objectMode?1:l.length,l,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function P(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function L(t,e){t._final((function(n){e.pendingcb--,n&&x(t,n),e.prefinished=!0,t.emit("prefinish"),O(t,e)}))}function O(t,e){var n=P(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,r.nextTick(L,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return n}n(4)(S,s),E.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(E.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===S&&(t&&t._writableState instanceof E)}})):c=function(t){return t instanceof this},S.prototype.pipe=function(){x(this,new g)},S.prototype.write=function(t,e,n){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=t,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof n&&(n=M),o.ending?function(t,e){var n=new _;x(t,n),r.nextTick(e,n)}(this,n):(s||function(t,e,n,i){var o;return null===n?o=new b:"string"==typeof n||e.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(x(t,o),r.nextTick(i,o),!1)}(this,o,t,n))&&(o.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else A(t,e,!1,s,r,i,o);return l}(this,o,s,t,e,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||q(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,n){n(new m("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,e,n){var i=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,n){e.ending=!0,O(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=h.destroy,S.prototype._undestroy=h.undestroy,S.prototype._destroy=function(t,e){e(t)}}).call(this,n(25),n(17))},function(t,e,n){"use strict";t.exports=c;var r=n(69).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(70);function l(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);u.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,n){f(t,e,n)}))}function f(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}n(4)(c,u),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,n){n(new i("_transform()"))},c.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,n){var r=n(4),i=n(71),o=n(6).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t,e,n){return n^t&(e^n)}function c(t,e,n){return t&e|n&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}r(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,p=0|this._f,m=0|this._g,v=0|this._h,g=0;g<16;++g)n[g]=t.readInt32BE(4*g);for(;g<64;++g)n[g]=0|(((e=n[g-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[g-7]+d(n[g-15])+n[g-16];for(var y=0;y<64;++y){var b=v+f(u)+l(u,p,m)+a[y]+n[y]|0,_=h(r)+c(r,i,o)|0;v=m,m=p,p=u,u=s+b|0,s=o,o=i,i=r,r=b+_|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=v+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},function(t,e,n){var r=n(4),i=n(71),o=n(6).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}function l(t,e,n){return n^t&(e^n)}function c(t,e,n){return t&e|n&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function v(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function g(t,e){return t>>>0<e>>>0?1:0}r(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,y=0|this._gh,b=0|this._hh,_=0|this._al,w=0|this._bl,x=0|this._cl,M=0|this._dl,E=0|this._el,S=0|this._fl,A=0|this._gl,T=0|this._hl,q=0;q<32;q+=2)e[q]=t.readInt32BE(4*q),e[q+1]=t.readInt32BE(4*q+4);for(;q<160;q+=2){var P=e[q-30],L=e[q-30+1],O=d(P,L),C=p(L,P),I=m(P=e[q-4],L=e[q-4+1]),R=v(L,P),k=e[q-14],N=e[q-14+1],B=e[q-32],D=e[q-32+1],j=C+N|0,F=O+k+g(j,C)|0;F=(F=F+I+g(j=j+R|0,R)|0)+B+g(j=j+D|0,D)|0,e[q]=F,e[q+1]=j}for(var z=0;z<160;z+=2){F=e[z],j=e[z+1];var U=c(n,r,i),V=c(_,w,x),G=h(n,_),H=h(_,n),W=f(s,E),Y=f(E,s),X=a[z],Z=a[z+1],J=l(s,u,y),K=l(E,S,A),Q=T+Y|0,$=b+W+g(Q,T)|0;$=($=($=$+J+g(Q=Q+K|0,K)|0)+X+g(Q=Q+Z|0,Z)|0)+F+g(Q=Q+j|0,j)|0;var tt=H+V|0,et=G+U+g(tt,H)|0;b=y,T=A,y=u,A=S,u=s,S=E,s=o+$+g(E=M+Q|0,M)|0,o=i,M=x,i=r,x=w,r=n,w=_,n=$+et+g(_=Q+tt|0,Q)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+M|0,this._el=this._el+E|0,this._fl=this._fl+S|0,this._gl=this._gl+A|0,this._hl=this._hl+T|0,this._ah=this._ah+n+g(this._al,_)|0,this._bh=this._bh+r+g(this._bl,w)|0,this._ch=this._ch+i+g(this._cl,x)|0,this._dh=this._dh+o+g(this._dl,M)|0,this._eh=this._eh+s+g(this._el,E)|0,this._fh=this._fh+u+g(this._fl,S)|0,this._gh=this._gh+y+g(this._gl,A)|0,this._hh=this._hh+b+g(this._hl,T)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},function(t,e,n){"use strict";(function(e,r){var i=n(115);t.exports=b;var o,a=n(211);b.ReadableState=y;n(60).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(222),l=n(155).Buffer,c=e.Uint8Array||function(){};var h=Object.create(n(91));h.inherits=n(4);var f=n(511),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n(512),v=n(223);h.inherits(b,u);var g=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var r=e instanceof(o=o||n(62));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(61).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||n(62),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function _(t,e,n,r,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,M(t)}(t,a)):(i||(o=function(t,e){var n;r=e,l.isBuffer(r)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):S(t,a)):w(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&M(t)),S(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),n=!0),_(this,t,e,!1,n)},b.prototype.unshift=function(t){return _(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=n(61).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function M(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(E,t):E(t))}function E(t){d("emit readable"),t.emit("readable"),P(t)}function S(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(A,t,e))}function A(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function T(t){d("readable nexttick read 0"),t.read(0)}function q(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),P(t),e.flowing&&!e.reading&&t.read(0)}function P(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=l.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function O(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(C,e,t))}function C(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function I(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?O(this):M(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&O(this),null;var r,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(n,e))),null===(r=t>0?L(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&O(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?c:b;function l(e,r){d("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),t.removeListener("close",g),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",v),t.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",m),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){d("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,P(t))}}(n);t.on("drain",h);var f=!1;var p=!1;function m(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==I(o.pipes,t))&&!f&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function v(e){d("onerror",e),b(),t.removeListener("error",v),0===s(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",y),b()}function y(){d("onfinish"),t.removeListener("close",g),b()}function b(){d("unpipe"),n.unpipe(t)}return n.on("data",m),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",v),t.once("close",g),t.once("finish",y),t.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=I(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},b.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&M(this):i.nextTick(T,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(q,t,e))}(this,t)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){d("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=L}).call(this,n(25),n(17))},function(t,e,n){t.exports=n(60).EventEmitter},function(t,e,n){"use strict";var r=n(115);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";t.exports=a;var r=n(62),i=Object.create(n(91));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(4),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){"use strict";var r=n(4),i=n(521),o=n(55),a=n(6).Buffer,s=n(226),u=n(152),l=n(153),c=a.alloc(128);function h(t,e){o.call(this,"digest"),"string"==typeof e&&(e=a.from(e));var n="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>n)?e=("rmd160"===t?new u:l(t)).update(e).digest():e.length<n&&(e=a.concat([e,c],n));for(var r=this._ipad=a.allocUnsafe(n),i=this._opad=a.allocUnsafe(n),s=0;s<n;s++)r[s]=54^e[s],i[s]=92^e[s];this._hash="rmd160"===t?new u:l(t),this._hash.update(r)}r(h,o),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new i(s,e):new h(t,e)}},function(t,e,n){var r=n(149);t.exports=function(t){return(new r).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,n){e.pbkdf2=n(523),e.pbkdf2Sync=n(231)},function(t,e){var n=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>n||e!=e)throw new TypeError("Bad key length")}},function(t,e,n){(function(e){var n;if(e.browser)n="utf-8";else if(e.version){n=parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";t.exports=n}).call(this,n(17))},function(t,e,n){var r=n(226),i=n(152),o=n(153),a=n(6).Buffer,s=n(229),u=n(230),l=n(232),c=a.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,n){var s=function(t){function e(e){return o(t).update(e).digest()}return"rmd160"===t||"ripemd160"===t?function(t){return(new i).update(t).digest()}:"md5"===t?r:e}(t),u="sha512"===t||"sha384"===t?128:64;e.length>u?e=s(e):e.length<u&&(e=a.concat([e,c],u));for(var l=a.allocUnsafe(u+h[t]),f=a.allocUnsafe(u+h[t]),d=0;d<u;d++)l[d]=54^e[d],f[d]=92^e[d];var p=a.allocUnsafe(u+n+4);l.copy(p,0,0,u),this.ipad1=p,this.ipad2=l,this.opad=f,this.alg=t,this.blocksize=u,this.hash=s,this.size=h[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,n,r,i){s(n,r);var o=new f(i=i||"sha1",t=l(t,u,"Password"),(e=l(e,u,"Salt")).length),c=a.allocUnsafe(r),d=a.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var p=0,m=h[i],v=Math.ceil(r/m),g=1;g<=v;g++){d.writeUInt32BE(g,e.length);for(var y=o.run(d,o.ipad1),b=y,_=1;_<n;_++){b=o.run(b,o.ipad2);for(var w=0;w<m;w++)y[w]^=b[w]}y.copy(c,p),p+=m}return c}},function(t,e,n){var r=n(6).Buffer;t.exports=function(t,e,n){if(r.isBuffer(t))return t;if("string"==typeof t)return r.from(t,e);if(ArrayBuffer.isView(t))return r.from(t.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},function(t,e,n){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,n){t[0+n]=e>>>24,t[1+n]=e>>>16&255,t[2+n]=e>>>8&255,t[3+n]=255&e},e.ip=function(t,e,n,r){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}n[r+0]=i>>>0,n[r+1]=o>>>0},e.rip=function(t,e,n,r){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+a&1,i<<=1,i|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},e.pc1=function(t,e,n,r){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,n,i){for(var o=0,a=0,s=r.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>r[u]&1;for(u=s;u<r.length;u++)a<<=1,a|=e>>>r[u]&1;n[i+0]=o>>>0,n[i+1]=a>>>0},e.expand=function(t,e,n){var r=0,i=0;r=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[n+0]=r>>>0,e[n+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var n=0,r=0;r<4;r++){n<<=4,n|=i[64*r+(t>>>18-6*r&63)]}for(r=0;r<4;r++){n<<=4,n|=i[256+64*r+(e>>>18-6*r&63)]}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,n=0;n<o.length;n++)e<<=1,e|=t>>>o[n]&1;return e>>>0},e.padSplit=function(t,e,n){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var i=[],o=0;o<e;o+=n)i.push(r.slice(o,o+n));return i.join(" ")}},function(t,e,n){"use strict";var r=n(37),i=n(4),o=n(233),a=n(157);function s(){this.tmp=new Array(2),this.keys=null}function u(t){a.call(this,t);var e=new s;this._desState=e,this.deriveKeys(e,t.key)}i(u,a),t.exports=u,u.create=function(t){return new u(t)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var n=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(n,i,t.tmp,0),n=t.tmp[0],i=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=l[a>>>1];n=o.r28shl(n,s),i=o.r28shl(i,s),o.pc2(n,i,t.keys,a)}},u.prototype._update=function(t,e,n,r){var i=this._desState,a=o.readUInt32BE(t,e),s=o.readUInt32BE(t,e+4);o.ip(a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,a,s,i.tmp,0):this._decrypt(i,a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],o.writeUInt32BE(n,a,r),o.writeUInt32BE(n,s,r+4)},u.prototype._pad=function(t,e){for(var n=t.length-e,r=e;r<t.length;r++)t[r]=n;return!0},u.prototype._unpad=function(t){for(var e=t[t.length-1],n=t.length-e;n<t.length;n++)r.equal(t[n],e);return t.slice(0,t.length-e)},u.prototype._encrypt=function(t,e,n,r,i){for(var a=e,s=n,u=0;u<t.keys.length;u+=2){var l=t.keys[u],c=t.keys[u+1];o.expand(s,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(l,c),f=s;s=(a^o.permute(h))>>>0,a=f}o.rip(s,a,r,i)},u.prototype._decrypt=function(t,e,n,r,i){for(var a=n,s=e,u=t.keys.length-2;u>=0;u-=2){var l=t.keys[u],c=t.keys[u+1];o.expand(a,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(l,c),f=a;a=(s^o.permute(h))>>>0,s=f}o.rip(a,s,r,i)}},function(t,e,n){var r=n(92),i=n(6).Buffer,o=n(236);function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var n=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*n)]);for(var s=0;s<n;s++){var u=a(t),l=o+16*s;t._cache.writeUInt32BE(u[0],l+0),t._cache.writeUInt32BE(u[1],l+4),t._cache.writeUInt32BE(u[2],l+8),t._cache.writeUInt32BE(u[3],l+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,c)}},function(t,e){t.exports=function(t){for(var e,n=t.length;n--;){if(255!==(e=t.readUInt8(n))){e++,t.writeUInt8(e,n);break}t.writeUInt8(0,n)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,n){var r=n(116),i=n(6).Buffer,o=n(55),a=n(4),s=n(536),u=n(92),l=n(236);function c(t,e,n,a){o.call(this);var u=i.alloc(4,0);this._cipher=new r.AES(e);var c=this._cipher.encryptBlock(u);this._ghash=new s(c),n=function(t,e,n){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var r=new s(n),o=e.length,a=o%16;r.update(e),a&&(a=16-a,r.update(i.alloc(a,0))),r.update(i.alloc(8,0));var u=8*o,c=i.alloc(8);c.writeUIntBE(u,0,8),r.update(c),t._finID=r.state;var h=i.from(t._finID);return l(h),h}(this,n,c),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}a(c,o),c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var n=0;t.length!==e.length&&n++;for(var r=Math.min(t.length,e.length),i=0;i<r;++i)n+=t[i]^e[i];return n}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},c.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=c},function(t,e,n){var r=n(116),i=n(6).Buffer,o=n(55);function a(t,e,n,a){o.call(this),this._cipher=new r.AES(e),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._mode=t}n(4)(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},function(t,e,n){var r=n(68);t.exports=y,y.simpleSieve=v,y.fermatTest=g;var i=n(18),o=new i(24),a=new(n(241)),s=new i(1),u=new i(2),l=new i(5),c=(new i(16),new i(8),new i(10)),h=new i(3),f=(new i(7),new i(11)),d=new i(4),p=(new i(12),null);function m(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<e&&t[i]<=r&&n%t[i]!=0;i++);e!==i&&t[i]<=r||(t[e++]=n)}return p=t,t}function v(t){for(var e=m(),n=0;n<e.length;n++)if(0===t.modn(e[n]))return 0===t.cmpn(e[n]);return!0}function g(t){var e=i.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function y(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var n,p;for(e=new i(e);;){for(n=new i(r(Math.ceil(t/8)));n.bitLength()>t;)n.ishrn(1);if(n.isEven()&&n.iadd(s),n.testn(1)||n.iadd(u),e.cmp(u)){if(!e.cmp(l))for(;n.mod(c).cmp(h);)n.iadd(d)}else for(;n.mod(o).cmp(f);)n.iadd(d);if(v(p=n.shrn(1))&&v(n)&&g(p)&&g(n)&&a.test(p)&&a.test(n))return n}}},function(t,e,n){var r=n(18),i=n(160);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),n=Math.ceil(e/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var n=e.sub(t);return t.add(this._randbelow(n))},o.prototype.test=function(t,e,n){var i=t.bitLength(),o=r.mont(t),a=new r(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var l=t.shrn(u),c=s.toRed(o);e>0;e--){var h=this._randrange(new r(2),s);n&&n(h);var f=h.toRed(o).redPow(l);if(0!==f.cmp(a)&&0!==f.cmp(c)){for(var d=1;d<u;d++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(c))break}if(d===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var n=t.bitLength(),i=r.mont(t),o=new r(1).toRed(i);e||(e=Math.max(1,n/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),l=a.toRed(i);e>0;e--){var c=this._randrange(new r(2),a),h=t.gcd(c);if(0!==h.cmpn(1))return h;var f=c.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(l)){for(var d=1;d<s;d++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(l))break}if(d===s)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,n){"use strict";(function(e,r){var i;t.exports=S,S.ReadableState=E;n(60).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=n(243),s=n(20).Buffer,u=e.Uint8Array||function(){};var l,c=n(546);l=c&&c.debuglog?c.debuglog("stream"):function(){};var h,f,d,p=n(547),m=n(244),v=n(245).getHighWaterMark,g=n(72).codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(4)(S,a);var x=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function E(t,e,r){i=i||n(73),t=t||{},"boolean"!=typeof r&&(r=e instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=v(this,t,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=n(61).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function S(t){if(i=i||n(73),!(this instanceof S))return new S(t);var e=this instanceof i;this._readableState=new E(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function A(t,e,n,r,i){l("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(l("onEofChunk"),e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?P(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,L(t)))}(t,a);else if(i||(o=function(t,e){var n;r=e,s.isBuffer(r)||r instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],e));var r;return n}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r)a.endEmitted?x(t,new w):T(t,a,e,!0);else if(a.ended)x(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?T(t,a,e,!1):O(t,a)):T(t,a,e,!1)}else r||(a.reading=!1,O(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function T(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&P(t)),O(t,e)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=m.destroy,S.prototype._undestroy=m.undestroy,S.prototype._destroy=function(t,e){e(t)},S.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),A(this,t,e,!1,n)},S.prototype.unshift=function(t){return A(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){h||(h=n(61).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function q(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function P(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(L,t))}function L(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function O(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(l("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function I(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function R(t){l("readable nexttick read 0"),t.read(0)}function k(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(l("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function D(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(j,e,t))}function j(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function F(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}S.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):P(this),null;if(0===(t=q(t,e))&&e.ended)return 0===e.length&&D(this),null;var r,i=e.needReadable;return l("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&l("length less than watermark",i=!0),e.ended||e.reading?l("reading or ended",i=!1):i&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=q(n,e))),null===(r=t>0?B(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(t){x(this,new _("_read()"))},S.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?u:v;function s(e,r){l("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",s),n.removeListener("end",u),n.removeListener("end",v),n.removeListener("data",f),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function u(){l("onend"),t.end()}i.endEmitted?r.nextTick(a):n.once("end",a),t.on("unpipe",s);var c=function(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",c);var h=!1;function f(e){l("ondata");var r=t.write(e);l("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==F(i.pipes,t))&&!h&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(e){l("onerror",e),v(),t.removeListener("error",d),0===o(t,"error")&&x(t,e)}function p(){t.removeListener("finish",m),v()}function m(){l("onfinish"),t.removeListener("close",p),v()}function v(){l("unpipe"),n.unpipe(t)}return n.on("data",f),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",d),t.once("close",p),t.once("finish",m),t.emit("pipe",n),i.flowing||(l("pipe resume"),n.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},S.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?P(this):i.reading||r.nextTick(R,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&r.nextTick(I,this),n},S.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(I,this),e},S.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(k,t,e))}(this,t)),t.paused=!1,this},S.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<M.length;o++)t.on(M[o],this.emit.bind(this,M[o]));return this._read=function(e){l("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=n(549)),f(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,e){return void 0===d&&(d=n(550)),d(S,t,e)})}).call(this,n(25),n(17))},function(t,e,n){t.exports=n(60).EventEmitter},function(t,e,n){"use strict";(function(e){function n(t,e){i(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):o?(e.nextTick(r,a),o(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,n(17))},function(t,e,n){"use strict";var r=n(72).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,n){"use strict";(function(e,r){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=S,S.WritableState=E;var a={deprecate:n(150)},s=n(243),u=n(20).Buffer,l=e.Uint8Array||function(){};var c,h=n(244),f=n(245).getHighWaterMark,d=n(72).codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,v=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,_=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function M(){}function E(t,e,a){o=o||n(73),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new v;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,o){--e.pendingcb,n?(r.nextTick(o,i),r.nextTick(O,t,e),t._writableState.errorEmitted=!0,x(t,i)):(o(i),t._writableState.errorEmitted=!0,x(t,i),O(t,e))}(t,n,i,e,o);else{var a=P(n)||t.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||q(t,n),i?r.nextTick(T,t,n,a,o):T(t,n,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(t){var e=this instanceof(o=o||n(73));if(!e&&!c.call(S,this))return new S(t);this._writableState=new E(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function A(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function T(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),O(t,e)}function q(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)o[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,A(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback;if(A(t,e,!1,e.objectMode?1:l.length,l,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function P(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function L(t,e){t._final((function(n){e.pendingcb--,n&&x(t,n),e.prefinished=!0,t.emit("prefinish"),O(t,e)}))}function O(t,e){var n=P(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,r.nextTick(L,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return n}n(4)(S,s),E.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(E.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===S&&(t&&t._writableState instanceof E)}})):c=function(t){return t instanceof this},S.prototype.pipe=function(){x(this,new g)},S.prototype.write=function(t,e,n){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=t,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof n&&(n=M),o.ending?function(t,e){var n=new _;x(t,n),r.nextTick(e,n)}(this,n):(s||function(t,e,n,i){var o;return null===n?o=new b:"string"==typeof n||e.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(x(t,o),r.nextTick(i,o),!1)}(this,o,t,n))&&(o.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else A(t,e,!1,s,r,i,o);return l}(this,o,s,t,e,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||q(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,n){n(new m("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,e,n){var i=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,n){e.ending=!0,O(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=h.destroy,S.prototype._undestroy=h.undestroy,S.prototype._destroy=function(t,e){e(t)}}).call(this,n(25),n(17))},function(t,e,n){"use strict";t.exports=c;var r=n(72).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(73);function l(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);u.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,n){f(t,e,n)}))}function f(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}n(4)(c,u),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,n){n(new i("_transform()"))},c.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,n){"use strict";var r=e;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",n=0;n<t.length;n++)e+=i(t[n].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else for(r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}return n},r.zero2=i,r.toHex=o,r.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,n){"use strict";var r=e;r.base=n(118),r.short=n(557),r.mont=n(558),r.edwards=n(559)},function(t,e,n){"use strict";var r=n(42).rotr32;function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function a(t,e,n){return t^e^n}e.ft_1=function(t,e,n,r){return 0===t?i(e,n,r):1===t||3===t?a(e,n,r):2===t?o(e,n,r):void 0},e.ch32=i,e.maj32=o,e.p32=a,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},function(t,e,n){"use strict";var r=n(42),i=n(93),o=n(250),a=n(37),s=r.sum32,u=r.sum32_4,l=r.sum32_5,c=o.ch32,h=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,m=o.g1_256,v=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}r.inherits(y,v),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=u(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],v=this.h[2],g=this.h[3],y=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var x=l(w,d(y),c(y,b,_),this.k[r],n[r]),M=s(f(i),h(i,o,v));w=_,_=b,b=y,y=s(g,x),g=v,v=o,o=i,i=s(x,M)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],v),this.h[3]=s(this.h[3],g),this.h[4]=s(this.h[4],y),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],_),this.h[7]=s(this.h[7],w)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(42),i=n(93),o=n(37),a=r.rotr64_hi,s=r.rotr64_lo,u=r.shr64_hi,l=r.shr64_lo,c=r.sum64,h=r.sum64_hi,f=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,v=r.sum64_5_lo,g=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function _(t,e,n,r,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,n,r,i,o){var a=e&r^~e&o;return a<0&&(a+=4294967296),a}function x(t,e,n,r,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function M(t,e,n,r,i,o){var a=e&r^e&o^r&o;return a<0&&(a+=4294967296),a}function E(t,e){var n=a(t,e,28)^a(e,t,2)^a(e,t,7);return n<0&&(n+=4294967296),n}function S(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function A(t,e){var n=a(t,e,14)^a(t,e,18)^a(e,t,9);return n<0&&(n+=4294967296),n}function T(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function q(t,e){var n=a(t,e,1)^a(t,e,8)^u(t,e,7);return n<0&&(n+=4294967296),n}function P(t,e){var n=s(t,e,1)^s(t,e,8)^l(t,e,7);return n<0&&(n+=4294967296),n}function L(t,e){var n=a(t,e,19)^a(e,t,29)^u(t,e,6);return n<0&&(n+=4294967296),n}function O(t,e){var n=s(t,e,19)^s(e,t,29)^l(t,e,6);return n<0&&(n+=4294967296),n}r.inherits(b,g),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,r=0;r<32;r++)n[r]=t[e+r];for(;r<n.length;r+=2){var i=L(n[r-4],n[r-3]),o=O(n[r-4],n[r-3]),a=n[r-14],s=n[r-13],u=q(n[r-30],n[r-29]),l=P(n[r-30],n[r-29]),c=n[r-32],h=n[r-31];n[r]=d(i,o,a,s,u,l,c,h),n[r+1]=p(i,o,a,s,u,l,c,h)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,r=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],l=this.h[5],d=this.h[6],p=this.h[7],g=this.h[8],y=this.h[9],b=this.h[10],q=this.h[11],P=this.h[12],L=this.h[13],O=this.h[14],C=this.h[15];o(this.k.length===n.length);for(var I=0;I<n.length;I+=2){var R=O,k=C,N=A(g,y),B=T(g,y),D=_(g,y,b,q,P),j=w(g,y,b,q,P,L),F=this.k[I],z=this.k[I+1],U=n[I],V=n[I+1],G=m(R,k,N,B,D,j,F,z,U,V),H=v(R,k,N,B,D,j,F,z,U,V);R=E(r,i),k=S(r,i),N=x(r,i,a,s,u),B=M(r,i,a,s,u,l);var W=h(R,k,N,B),Y=f(R,k,N,B);O=P,C=L,P=b,L=q,b=g,q=y,g=h(d,p,G,H),y=f(p,p,G,H),d=u,p=l,u=a,l=s,a=r,s=i,r=h(G,H,W,Y),i=f(G,H,W,Y)}c(this.h,0,r,i),c(this.h,2,a,s),c(this.h,4,u,l),c(this.h,6,d,p),c(this.h,8,g,y),c(this.h,10,b,q),c(this.h,12,P,L),c(this.h,14,O,C)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,r){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e,n){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"===e(t)?t.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{s=n(574).Buffer}catch(t){}function u(t,e,n){for(var r=0,o=Math.min(t.length,n),a=0,s=e;s<o;s++){var u,l=t.charCodeAt(s)-48;r<<=4,r|=u=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,a|=u}return i(!(240&a),"Invalid character in "+t),r}function l(t,e,n,r){for(var o=0,a=0,s=Math.min(t.length,n),u=e;u<s;u++){var l=t.charCodeAt(u)-48;o*=r,a=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&a<r,"Invalid character"),o+=a}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(a.isBN=function(t){return t instanceof a||null!==t&&"object"===e(t)&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,n,r){if("number"==typeof t)return this._initNumber(t,n,r);if("object"===e(t))return this._initArray(t,n,r);"hex"===n&&(n=16),i(n===(0|n)&&n>=2&&n<=36);var o=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&o++,16===n?this._parseHex(t,o):this._parseBase(t,n,o),"-"===t[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),n,r)},a.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initArray=function(t,e,n){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,a,s=0;if("be"===n)for(r=t.length-1,o=0;r>=0;r-=3)a=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(r=0,o=0;r<t.length;r+=3)a=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},a.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=u(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=u(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this._strip()},a.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,c=n;c<s;c+=r)u=l(t,c,c+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype._move=function(t){c(t,this)},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){a.prototype.inspect=h}else a.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var r=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<r|o)).toString(16);n=0!==(o=s>>>24-r&16777215)||a!==this.length-1?f[6-u.length]+u+n:u+n,(r+=2)>=26&&(r-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var l=d[t],c=p[t];n="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(c).toString(t);n=(h=h.idivn(c)).isZero()?m+n:f[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16,2)},s&&(a.prototype.toBuffer=function(t,e){return this.toArrayLike(s,t,e)}),a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function m(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var l=1;l<r;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),d=Math.max(0,l-t.length+1);d<=f;d++){var p=l-d|0;c+=(a=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&a}n.words[l]=0|h,u=0|c}return 0!==u?n.words[l]=0|u:n.length--,n._strip()}a.prototype.toArrayLike=function(t,e,n){this._strip();var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,r),a},a.prototype._toArrayLikeLE=function(t,e){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n++]=255&a,n<t.length&&(t[n++]=a>>8&255),n<t.length&&(t[n++]=a>>16&255),6===o?(n<t.length&&(t[n++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n<t.length)for(t[n++]=r;n<t.length;)t[n++]=0},a.prototype._toArrayLikeBE=function(t,e){for(var n=t.length-1,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n--]=255&a,n>=0&&(t[n--]=a>>8&255),n>=0&&(t[n--]=a>>16&255),6===o?(n>=0&&(t[n--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n>=0)for(t[n--]=r;n>=0;)t[n--]=0},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},a.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this._strip()},a.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},a.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this._strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var n=t/26|0,r=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<r:this.words[n]&~(1<<r),this._strip()},a.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var v=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],_=8191&b,w=b>>>13,x=0|a[4],M=8191&x,E=x>>>13,S=0|a[5],A=8191&S,T=S>>>13,q=0|a[6],P=8191&q,L=q>>>13,O=0|a[7],C=8191&O,I=O>>>13,R=0|a[8],k=8191&R,N=R>>>13,B=0|a[9],D=8191&B,j=B>>>13,F=0|s[0],z=8191&F,U=F>>>13,V=0|s[1],G=8191&V,H=V>>>13,W=0|s[2],Y=8191&W,X=W>>>13,Z=0|s[3],J=8191&Z,K=Z>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,dt=0|s[9],pt=8191&dt,mt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(l+(r=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(p,z),i=(i=Math.imul(p,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,G)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(y,z)|0,o=Math.imul(y,U),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var yt=(l+(r=r+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(f,Y)|0))<<13)|0;l=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(_,z),i=(i=Math.imul(_,U))+Math.imul(w,z)|0,o=Math.imul(w,U),r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,X)|0;var bt=(l+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,J)|0))<<13)|0;l=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(M,z),i=(i=Math.imul(M,U))+Math.imul(E,z)|0,o=Math.imul(E,U),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(g,Y)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,X)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,K)|0;var _t=(l+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(A,z),i=(i=Math.imul(A,U))+Math.imul(T,z)|0,o=Math.imul(T,U),r=r+Math.imul(M,G)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,K)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,K)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;l=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,z),i=(i=Math.imul(P,U))+Math.imul(L,z)|0,o=Math.imul(L,U),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(T,G)|0,o=o+Math.imul(T,H)|0,r=r+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0;var xt=(l+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(I,z)|0,o=Math.imul(I,U),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,X)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,X)|0,r=r+Math.imul(M,J)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,K)|0,r=r+Math.imul(_,$)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(g,nt)|0,i=(i=i+Math.imul(g,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(k,z),i=(i=Math.imul(k,U))+Math.imul(N,z)|0,o=Math.imul(N,U),r=r+Math.imul(C,G)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,X)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,K)|0,r=r+Math.imul(M,$)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var Et=(l+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(j,z)|0,o=Math.imul(j,U),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,K)|0,r=r+Math.imul(A,$)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(M,nt)|0,i=(i=i+Math.imul(M,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,r=r+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,lt)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var St=(l+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(D,G),i=(i=Math.imul(D,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,X)|0,r=r+Math.imul(C,J)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,K)|0,r=r+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(T,nt)|0,o=o+Math.imul(T,rt)|0,r=r+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,r=r+Math.imul(_,ut)|0,i=(i=i+Math.imul(_,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,r=r+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,ft)|0;var At=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(D,Y),i=(i=Math.imul(D,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,K)|0,r=r+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,r=r+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,lt)|0,r=r+Math.imul(_,ht)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(r=r+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((o=o+Math.imul(y,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(D,J),i=(i=Math.imul(D,K))+Math.imul(j,J)|0,o=Math.imul(j,K),r=r+Math.imul(k,$)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,r=r+Math.imul(C,nt)|0,i=(i=i+Math.imul(C,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,r=r+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var qt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(i=(i=i+Math.imul(_,mt)|0)+Math.imul(w,pt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,r=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(N,nt)|0,o=o+Math.imul(N,rt)|0,r=r+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,r=r+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var Pt=(l+(r=r+Math.imul(M,pt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(E,pt)|0))<<13)|0;l=((o=o+Math.imul(E,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(D,nt),i=(i=Math.imul(D,rt))+Math.imul(j,nt)|0,o=Math.imul(j,rt),r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,r=r+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,lt)|0,r=r+Math.imul(P,ht)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,mt)|0)+Math.imul(T,pt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(j,ot)|0,o=Math.imul(j,at),r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,lt)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,lt)|0,r=r+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(I,ht)|0,o=o+Math.imul(I,ft)|0;var Ot=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(L,pt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(j,ut)|0,o=Math.imul(j,lt),r=r+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(N,ht)|0,o=o+Math.imul(N,ft)|0;var Ct=(l+(r=r+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(I,pt)|0))<<13)|0;l=((o=o+Math.imul(I,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(j,ht)|0,o=Math.imul(j,ft);var It=(l+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,mt)|0)+Math.imul(N,pt)|0))<<13)|0;l=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863;var Rt=(l+(r=Math.imul(D,pt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(j,pt)|0))<<13)|0;return l=((o=Math.imul(j,mt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=vt,u[1]=gt,u[2]=yt,u[3]=bt,u[4]=_t,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=Et,u[9]=St,u[10]=At,u[11]=Tt,u[12]=qt,u[13]=Pt,u[14]=Lt,u[15]=Ot,u[16]=Ct,u[17]=It,u[18]=Rt,0!==l&&(u[19]=l,n.length++),n};function g(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function y(t,e,n){return g(t,e,n)}function b(t,e){this.x=t,this.y=e}Math.imul||(v=m),a.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?v(this,t,e):n<63?m(this,t,e):n<1024?g(this,t,e):y(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),n=a.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},b.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},b.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},b.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,d=0;d<a;d++){var p=n[c+d],m=r[c+d],v=n[c+d+a],g=r[c+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[c+d]=p+v,r[c+d]=m+g,n[c+d+a]=p-v,r[c+d+a]=m-g,d!==s&&(y=u*h-l*f,f=u*f+l*h,h=y)}},b.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},b.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,n,r){for(var o=0,a=0;a<e;a++)o+=0|t[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<r;++a)n[a]=0;i(0===o),i(0==(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},b.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,l,r),this.transform(a,o,s,u,r,i),this.transform(l,o,c,h,r,i);for(var d=0;d<r;d++){var p=s[d]*c[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*c[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n._strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),y(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var n=0,r=0;r<this.length;r++){var o=(0|this.words[r])*t,a=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=a>>>26,this.words[r]=67108863&a}return 0!==n&&(this.words[r]=n,this.length++),e?this.ineg():this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=t.words[r]>>>i&1}return e}(t);if(0===e.length)return new a(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,n=t%26,r=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<n;this.words[e]=u|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()},a.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,n){var r;i("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(r-=a,r=Math.max(0,r),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=r);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(t,e,n){return i(0===this.negative),this.iushrn(t,e,n)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,r=1<<e;return!(this.length<=n)&&!!(this.words[n]&r)},a.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this._strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,n){var r,o,a=t.length+n;this._expand(a);var s=0;for(r=0;r<t.length;r++){o=(0|this.words[r+n])+s;var u=(0|t.words[r])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[r+n]=67108863&o}for(;r<this.length-n;r++)s=(o=(0|this.words[r+n])+s)>>26,this.words[r+n]=67108863&o;if(0===s)return this._strip();for(i(-1===s),s=0,r=0;r<this.length;r++)s=(o=-(0|this.words[r])+s)>>26,this.words[r]=67108863&o;return this.negative=1,this._strip()},a.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new a(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=r.clone()._ishlnsubmul(i,1,u);0===c.negative&&(r=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s._strip(),r._strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},a.prototype.divmod=function(t,e,n){return i(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(r=s.div.neg()),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:r,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(r=s.div.neg()),{div:r,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modrn(t.words[0]))}:this._wordDiv(t,e);var r,o,s},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var n=(1<<26)%t,r=0,o=this.length-1;o>=0;o--)r=(n*r+(0|this.words[o]))%t;return e?-r:r},a.prototype.modn=function(t){return this.modrn(t)},a.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var n=0,r=this.length-1;r>=0;r--){var o=(0|this.words[r])+67108864*n;this.words[r]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new a(1),o=new a(0),s=new a(0),u=new a(1),l=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++l;for(var c=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(c),o.isub(h)),r.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),r.isub(s),o.isub(u)):(n.isub(e),s.isub(r),u.isub(o))}return{a:s,b:u,gcd:n.iushln(l)}},a.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,o=new a(1),s=new a(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(s)):(n.isub(e),s.isub(o))}return(r=0===e.cmpn(1)?o:s).cmpn(0)<0&&r.iadd(t),r},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,n=(t-e)/26,r=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new A(t)},a.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},o(x,w),x.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(M,w),o(E,w),o(S,w),S.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return _[t]=e,e},A.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},A.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var n=this.m.add(new a(1)).iushrn(2);return this.pow(t,n)}for(var r=this.m.subn(1),o=0;!r.isZero()&&0===r.andln(1);)o++,r.iushrn(1);i(!r.isZero());var s=new a(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,r),f=this.pow(t,r.addn(1).iushrn(1)),d=this.pow(t,r),p=o;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();i(v<p);var g=this.pow(h,new a(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],o=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],c=u-1;c>=0;c--){var h=l>>c&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4===++s||0===r&&0===c)&&(i=this.mul(i,n[o]),s=0,o=0)):s=0}u=26}return i},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new T(t)},o(T,A),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(114)(t))},function(t,e,n){"use strict";var r=e;r.bignum=n(18),r.define=n(576).define,r.base=n(579),r.constants=n(580),r.decoders=n(257),r.encoders=n(255)},function(t,e,n){"use strict";var r=e;r.der=n(256),r.pem=n(577)},function(t,e,n){"use strict";var r=n(4),i=n(166).Buffer,o=n(167),a=n(169);function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function l(t){return t<10?"0"+t:t}t.exports=s,s.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(u,o),u.prototype._encodeComposite=function(t,e,n,r){var o=function(t,e,n,r){var i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(a.tagByName.hasOwnProperty(t))i=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);i=t}if(i>=31)return r.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=a.tagClassByName[n||"universal"]<<6}(t,e,n,this.reporter);if(r.length<128){var s=i.alloc(2);return s[0]=o,s[1]=r.length,this._createEncoderBuffer([s,r])}for(var u=1,l=r.length;l>=256;l>>=8)u++;var c=i.alloc(2+u);c[0]=o,c[1]=128|u;for(var h=1+u,f=r.length;f>0;h--,f>>=8)c[h]=255&f;return this._createEncoderBuffer([c,r])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var n=i.alloc(2*t.length),r=0;r<t.length;r++)n.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(n)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,n){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(var r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t)){t=t.slice();for(var o=0;o<t.length;o++)t[o]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}for(var a=0,s=0;s<t.length;s++){var u=t[s];for(a++;u>=128;u>>=7)a++}for(var l=i.alloc(a),c=l.length-1,h=t.length-1;h>=0;h--){var f=t[h];for(l[c--]=127&f;(f>>=7)>0;)l[c--]=128|127&f}return this._createEncoderBuffer(l)},u.prototype._encodeTime=function(t,e){var n,r=new Date(t);return"gentime"===e?n=[l(r.getUTCFullYear()),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?n=[l(r.getUTCFullYear()%100),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(n,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){var n=t.toArray();!t.sign&&128&n[0]&&n.unshift(0),t=i.from(n)}if(i.isBuffer(t)){var r=t.length;0===t.length&&r++;var o=i.alloc(r);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);for(var a=1,s=t;s>=256;s>>=8)a++;for(var u=new Array(a),l=u.length-1;l>=0;l--)u[l]=255&t,t>>=8;return 128&u[0]&&u.unshift(0),this._createEncoderBuffer(i.from(u))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,n){var r,i=this._baseState;if(null===i.default)return!1;var o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,n).join()),o.length!==i.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==i.defaultBuffer[r])return!1;return!0}},function(t,e,n){"use strict";var r=e;r.der=n(258),r.pem=n(578)},function(t,e,n){"use strict";var r=n(4),i=n(18),o=n(94).DecoderBuffer,a=n(167),s=n(169);function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){a.call(this,"der",t)}function c(t,e){var n=t.readUInt8(e);if(t.isError(n))return n;var r=s.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){var o=n;for(n=0;128==(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;n<<=7,n|=127&o}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:s.tag[n]}}function h(t,e,n){var r=t.readUInt8(n);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;var i=127&r;if(i>4)return t.error("length octect is too long");r=0;for(var o=0;o<i;o++){r<<=8;var a=t.readUInt8(n);if(t.isError(a))return a;r|=a}return r}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},r(l,a),l.prototype._peekTag=function(t,e,n){if(t.isEmpty())return!1;var r=t.save(),i=c(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(r),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||n)},l.prototype._decodeTag=function(t,e,n){var r=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var i=h(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!n&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');var o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){var n=c(t,e);if(t.isError(n))return n;var r=h(t,n.primitive,e);if(t.isError(r))return r;var i=void 0;if(i=n.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===n.tagStr)break}},l.prototype._decodeList=function(t,e,n,r){for(var i=[];!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var a=n.decode(t,"der",r);if(t.isError(a)&&o)break;i.push(a)}return i},l.prototype._decodeStr=function(t,e){if("bitstr"===e){var n=t.readUInt8();return t.isError(n)?n:{unused:n,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<r.length/2;o++)i+=String.fromCharCode(r.readUInt16BE(2*o));return i}if("numstr"===e){var a=t.raw().toString("ascii");return this._isNumstr(a)?a:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var s=t.raw().toString("ascii");return this._isPrintstr(s)?s:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,n){for(var r,i=[],o=0,a=0;!t.isEmpty();)o<<=7,o|=127&(a=t.readUInt8()),0==(128&a)&&(i.push(o),o=0);128&a&&i.push(o);var s=i[0]/40|0,u=i[0]%40;if(r=n?i:[s,u].concat(i.slice(1)),e){var l=e[r.join(" ")];void 0===l&&(l=e[r.join(".")]),void 0!==l&&(r=l)}return r},l.prototype._decodeTime=function(t,e){var n,r,i,o,a,s,u=t.raw().toString();if("gentime"===e)n=0|u.slice(0,4),r=0|u.slice(4,6),i=0|u.slice(6,8),o=0|u.slice(8,10),a=0|u.slice(10,12),s=0|u.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|u.slice(0,2),r=0|u.slice(2,4),i=0|u.slice(4,6),o=0|u.slice(6,8),a=0|u.slice(8,10),s=0|u.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,r-1,i,o,a,s,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){var n=t.raw(),r=new i(n);return e&&(r=e[r.toString(10)]||r),r},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,e,n){var r=n(90),i=n(6).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var n,a=i.alloc(0),s=0;a.length<e;)n=o(s++),a=i.concat([a,r("sha1").update(t).update(n).digest()]);return a.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var n=t.length,r=-1;++r<n;)t[r]^=e[r];return t}},function(t,e,n){var r=n(18),i=n(6).Buffer;t.exports=function(t,e){return i.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},function(t,e,n){"use strict";if(t.exports)var r=n(95);function i(t,e,n,o,a,s,u){if(!(this instanceof i))return new i(t,e,n,o,a,s,u);if(void 0===a&&(a=r.datum.WGS84),void 0===s&&(s=null),void 0===u&&(u=null),!(1<=t&&t<=60))throw new Error("Invalid UTM zone "+t);if(!e.match(/[NS]/i))throw new Error("Invalid UTM hemisphere "+e);this.zone=Number(t),this.hemisphere=e.toUpperCase(),this.easting=Number(n),this.northing=Number(o),this.datum=a,this.convergence=null===s?null:Number(s),this.scale=null===u?null:Number(u)}r.prototype.toUtm=function(){if(isNaN(this.lat)||isNaN(this.lon))throw new Error("Invalid point");if(!(-80<=this.lat&&this.lat<=84))throw new Error("Outside UTM limits");var t=Math.floor((this.lon+180)/6)+1,e=(6*(t-1)-180+3).toRadians(),n="CDEFGHJKLMNPQRSTUVWXX".charAt(Math.floor(this.lat/8+10));31==t&&"V"==n&&this.lon>=3&&(t++,e+=6..toRadians()),32==t&&"X"==n&&this.lon<9&&(t--,e-=6..toRadians()),32==t&&"X"==n&&this.lon>=9&&(t++,e+=6..toRadians()),34==t&&"X"==n&&this.lon<21&&(t--,e-=6..toRadians()),34==t&&"X"==n&&this.lon>=21&&(t++,e+=6..toRadians()),36==t&&"X"==n&&this.lon<33&&(t--,e-=6..toRadians()),36==t&&"X"==n&&this.lon>=33&&(t++,e+=6..toRadians());for(var r=this.lat.toRadians(),o=this.lon.toRadians()-e,a=this.datum.ellipsoid.a,s=this.datum.ellipsoid.f,u=.9996,l=Math.sqrt(s*(2-s)),c=s/(2-s),h=c*c,f=c*h,d=c*f,p=c*d,m=c*p,v=Math.cos(o),g=Math.sin(o),y=Math.tan(o),b=Math.tan(r),_=Math.sinh(l*Math.atanh(l*b/Math.sqrt(1+b*b))),w=b*Math.sqrt(1+_*_)-_*Math.sqrt(1+b*b),x=Math.atan2(w,v),M=Math.asinh(g/Math.sqrt(w*w+v*v)),E=a/(1+c)*(1+1/4*h+1/64*d+1/256*m),S=[null,.5*c-2/3*h+5/16*f+41/180*d-127/288*p+7891/37800*m,13/48*h-.6*f+557/1440*d+281/630*p-1983433/1935360*m,61/240*f-103/140*d+15061/26880*p+167603/181440*m,49561/161280*d-179/168*p+6601661/7257600*m,34729/80640*p-3418889/1995840*m,.6650675310896665*m],A=x,T=1;T<=6;T++)A+=S[T]*Math.sin(2*T*x)*Math.cosh(2*T*M);var q=M;for(T=1;T<=6;T++)q+=S[T]*Math.cos(2*T*x)*Math.sinh(2*T*M);var P=u*E*q,L=u*E*A,O=1;for(T=1;T<=6;T++)O+=2*T*S[T]*Math.cos(2*T*x)*Math.cosh(2*T*M);var C=0;for(T=1;T<=6;T++)C+=2*T*S[T]*Math.sin(2*T*x)*Math.sinh(2*T*M);var I=Math.atan(w/Math.sqrt(1+w*w)*y)+Math.atan2(C,O),R=Math.sin(r),k=u*(Math.sqrt(1-l*l*R*R)*Math.sqrt(1+b*b)/Math.sqrt(w*w+v*v))*(E/a*Math.sqrt(O*O+C*C));P+=5e5,L<0&&(L+=1e7),P=Number(P.toFixed(6)),L=Number(L.toFixed(6));var N=Number(I.toDegrees().toFixed(9)),B=Number(k.toFixed(12));return new i(t,this.lat>=0?"N":"S",P,L,this.datum,N,B)},i.prototype.toLatLonE=function(){var t=this.zone,e=this.hemisphere,n=this.easting,i=this.northing;if(isNaN(t)||isNaN(n)||isNaN(i))throw new Error("Invalid coordinate");var o=this.datum.ellipsoid.a,a=this.datum.ellipsoid.f,s=.9996;n-=5e5,i="S"==e?i-1e7:i;for(var u=Math.sqrt(a*(2-a)),l=a/(2-a),c=l*l,h=l*c,f=l*h,d=l*f,p=l*d,m=o/(1+l)*(1+1/4*c+1/64*f+1/256*p),v=n/(s*m),g=i/(s*m),y=[null,.5*l-2/3*c+37/96*h-1/360*f-81/512*d+96199/604800*p,1/48*c+1/15*h-437/1440*f+46/105*d-1118711/3870720*p,17/480*h-37/840*f-209/4480*d+5569/90720*p,4397/161280*f-11/504*d-830251/7257600*p,4583/161280*d-108847/3991680*p,20648693/638668800*p],b=g,_=1;_<=6;_++)b-=y[_]*Math.sin(2*_*g)*Math.cosh(2*_*v);var w=v;for(_=1;_<=6;_++)w-=y[_]*Math.cos(2*_*g)*Math.sinh(2*_*v);var x=Math.sinh(w),M=Math.sin(b),E=Math.cos(b),S=M/Math.sqrt(x*x+E*E),A=S;do{var T=Math.sinh(u*Math.atanh(u*A/Math.sqrt(1+A*A))),q=A*Math.sqrt(1+T*T)-T*Math.sqrt(1+A*A),P=(S-q)/Math.sqrt(1+q*q)*(1+(1-u*u)*A*A)/((1-u*u)*Math.sqrt(1+A*A));A+=P}while(Math.abs(P)>1e-12);var L=A,O=Math.atan(L),C=Math.atan2(x,E),I=1;for(_=1;_<=6;_++)I-=2*_*y[_]*Math.cos(2*_*g)*Math.cosh(2*_*v);var R=0;for(_=1;_<=6;_++)R+=2*_*y[_]*Math.sin(2*_*g)*Math.sinh(2*_*v);var k=Math.atan(Math.tan(b)*Math.tanh(w))+Math.atan2(R,I),N=Math.sin(O),B=s*(Math.sqrt(1-u*u*N*N)*Math.sqrt(1+L*L)*Math.sqrt(x*x+E*E))*(m/o/Math.sqrt(I*I+R*R));C+=(6*(t-1)-180+3).toRadians();var D=Number(O.toDegrees().toFixed(11)),j=Number(C.toDegrees().toFixed(11)),F=Number(k.toDegrees().toFixed(9)),z=Number(B.toFixed(12)),U=new r(D,j,this.datum);return U.convergence=F,U.scale=z,U},i.parse=function(t,e){if(void 0===e&&(e=r.datum.WGS84),null==(t=t.trim().match(/\S+/g))||4!=t.length)throw new Error("Invalid UTM coordinate â"+t+"â");return new i(t[0],t[1],t[2],t[3],e)},i.prototype.toString=function(t){t=Number(t||0);var e=this.zone<10?"0"+this.zone:this.zone,n=this.hemisphere,r=this.easting,i=this.northing;return isNaN(e)||!n.match(/[NS]/)||isNaN(r)||isNaN(i)?"":e+" "+n+" "+r.toFixed(t)+" "+i.toFixed(t)},void 0===Math.sinh&&(Math.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2}),void 0===Math.cosh&&(Math.cosh=function(t){return(Math.exp(t)+Math.exp(-t))/2}),void 0===Math.tanh&&(Math.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}),void 0===Math.asinh&&(Math.asinh=function(t){return Math.log(t+Math.sqrt(1+t*t))}),void 0===Math.atanh&&(Math.atanh=function(t){return Math.log((1+t)/(1-t))/2}),t.exports&&(t.exports=i)},function(t,e,n){"use strict";(function(t){var r=n(0),i=n(1),o=n(15),a=n.n(o),s=n(121),u=n.n(s),l=n(43);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h=r.kb.f,f=(!1,function(t){for(var e,n=Object(r.ob)(t),i=Object(r.bb)(n),o=i.length,a=0,s=[];o>a;)e=i[a++],r.mb&&!h.call(n,e)||s.push(n[e]);return s});Object(r.a)(r.a.S,"Object",{values:function(t){return f(t)}}),Object(r.a)(r.a.P,"String",{repeat:function(t){var e=String(Object(r.Y)(this)),n="",i=Object(r.C)(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}}),Object(r.a)(r.a.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var d=Object(r.X)(!0);Object(r.a)(r.a.P,"Array",{includes:function(t){return d(this,t,arguments.length>1?arguments[1]:void 0)}}),Object(r.W)("includes");var p=Object(r.Z)("match"),m=function(t){var e;return Object(r.db)(t)&&(void 0!==(e=t[p])?!!e:"RegExp"==Object(r.ab)(t))},v=function(t,e,n){if(m(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(Object(r.Y)(t))},g=Object(r.Z)("match");Object(r.a)(r.a.P+r.a.F*function(t){var e=/./;try{"/./".includes(e)}catch(t){try{return e[g]=!1,!"/./".includes(e)}catch(t){}}return!0}(),"String",{includes:function(t){return!!~v(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}});var y,b=/"/g;(y={})["sub"]=function(){return t=this,e="sub",n="",i="",o=String(Object(r.Y)(t)),a="<"+e,""!==n&&(a+=" "+n+'="'+String(i).replace(b,"&quot;")+'"'),a+">"+o+"</"+e+">";var t,e,n,i,o,a},Object(r.a)(r.a.P+r.a.F*Object(r.cb)((function(){var t="".sub('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",y);var _=function(t,e,n,i){try{return i?e(Object(r.eb)(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&Object(r.eb)(o.call(t)),e}},w=function(t,e,n){e in t?r.fb.f(t,e,Object(r.gb)(0,n)):t[e]=n};Object(r.a)(r.a.S+r.a.F*!Object(r.hb)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,o,a=Object(r.ib)(t),s="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,c=void 0!==l,h=0,f=Object(r.jb)(a);if(c&&(l=Object(r.lb)(l,u>2?arguments[2]:void 0,2)),null==f||s==Array&&Object(r.nb)(f))for(n=new s(e=Object(r.pb)(a.length));e>h;h++)w(n,h,c?l(a[h],h):a[h]);else for(o=f.call(a),n=new s;!(i=o.next()).done;h++)w(n,h,c?_(o,l,[i.value,h],!0):i.value);return n.length=h,n}});var x=Object(r.rb)(!0);Object(r.qb)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=x(e,n),this._i+=t.length,{value:t,done:!1})}));var M=Object(r.sb)((function(t){var e={},n={},i=t.exports=function(t,i,o,a,s){var u,l,c,h,f=s?function(){return t}:Object(r.jb)(t),d=Object(r.lb)(o,a,i?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(Object(r.nb)(f)){for(u=Object(r.pb)(t.length);u>p;p++)if((h=i?d(Object(r.eb)(l=t[p])[0],l[1]):d(t[p]))===e||h===n)return h}else for(c=f.call(t);!(l=c.next()).done;)if((h=_(c,d,l.value,i))===e||h===n)return h};i.BREAK=e,i.RETURN=n})),E=function(t,e){if(!Object(r.db)(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},S=r.fb.f,A=r.tb.fastKey,T=r.mb?"_s":"size",q=function(t,e){var n,r=A(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n},P={getConstructor:function(t,e,n,i){var o=t((function(t,a){Object(r.ub)(t,o,e,"_i"),t._t=e,t._i=Object(r.b)(null),t._f=void 0,t._l=void 0,t[T]=0,null!=a&&M(a,n,t[i],t)}));return Object(r.c)(o.prototype,{clear:function(){for(var t=E(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[T]=0},delete:function(t){var n=E(this,e),r=q(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[T]--}return!!r},forEach:function(t){E(this,e);for(var n,i=Object(r.lb)(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!q(E(this,e),t)}}),r.mb&&S(o.prototype,"size",{get:function(){return E(this,e)[T]}}),o},def:function(t,e,n){var r,i,o=q(t,e);return o?o.v=n:(t._l=o={i:i=A(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[T]++,"F"!==i&&(t._i[i]=o)),t},getEntry:q,setStrong:function(t,e,n){Object(r.qb)(t,e,(function(t,n){this._t=E(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?Object(r.d)(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,Object(r.d)(1))}),n?"entries":"values",!n,!0),Object(r.e)(e)}},L=function(t,e){if(Object(r.eb)(t),!Object(r.db)(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},O=Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=Object(r.lb)(Function.call,r.f.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return L(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),C=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&Object(r.db)(i)&&O&&O(t,i),t},I=function(t,e,n,i,o,a){var s=r.g[t],u=s,l=o?"set":"add",c=u&&u.prototype,h={},f=function(t){var e=c[t];Object(r.i)(c,t,"delete"==t||"has"==t?function(t){return!(a&&!Object(r.db)(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!Object(r.db)(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof u&&(a||c.forEach&&!Object(r.cb)((function(){(new u).entries().next()})))){var d=new u,p=d[l](a?{}:-0,1)!=d,m=Object(r.cb)((function(){d.has(1)})),v=Object(r.hb)((function(t){new u(t)})),g=!a&&Object(r.cb)((function(){for(var t=new u,e=5;e--;)t[l](e,e);return!t.has(-0)}));v||((u=e((function(e,n){Object(r.ub)(e,u,t);var i=C(new s,e,u);return null!=n&&M(n,o,i[l],i),i}))).prototype=c,c.constructor=u),(m||g)&&(f("delete"),f("has"),o&&f("get")),(g||p)&&f(l),a&&c.clear&&delete c.clear}else u=i.getConstructor(e,t,o,l),Object(r.c)(u.prototype,n),r.tb.NEED=!0;return Object(r.h)(u,t),h[t]=u,Object(r.a)(r.a.G+r.a.W+r.a.F*(u!=s),h),a||i.setStrong(u,t,o),u},R=(I("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=P.getEntry(E(this,"Map"),t);return e&&e.v},set:function(t,e){return P.def(E(this,"Map"),0===t?0:t,e)}},P,!0),"\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff"),k="["+R+"]",N=RegExp("^"+k+k+"*"),B=RegExp(k+k+"*$"),D=function(t,e,n){var i={},o=Object(r.cb)((function(){return!!R[t]()||"âÂ"!="âÂ"[t]()})),a=i[t]=o?e(j):R[t];n&&(i[n]=a),Object(r.a)(r.a.P+r.a.F*o,"String",i)},j=D.trim=function(t,e){return t=String(Object(r.Y)(t)),1&e&&(t=t.replace(N,"")),2&e&&(t=t.replace(B,"")),t},F=D,z=r.k.f,U=r.f.f,V=r.fb.f,G=F.trim,H=r.g.Number,W=H,Y=H.prototype,X="Number"==Object(r.ab)(Object(r.b)(Y)),Z="trim"in String.prototype,J=function(t){var e=Object(r.l)(t,!1);if("string"==typeof e&&e.length>2){var n,i,o,a=(e=Z?e.trim():G(e,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var s,u=e.slice(2),l=0,c=u.length;l<c;l++)if((s=u.charCodeAt(l))<48||s>o)return NaN;return parseInt(u,i)}}return+e};if(!H(" 0o1")||!H("0b1")||H("+0x1")){H=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof H&&(X?Object(r.cb)((function(){Y.valueOf.call(n)})):"Number"!=Object(r.ab)(n))?C(new W(J(e)),n,H):J(e)};for(var K,Q=r.mb?z(W):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;Q.length>$;$++)Object(r.j)(W,K=Q[$])&&!Object(r.j)(H,K)&&V(H,K,U(W,K));H.prototype=Y,Y.constructor=H,Object(r.i)(r.g,"Number",H)}var tt=r.g.parseInt,et=F.trim,nt=/^[-+]?0[xX]/,rt=8!==tt(R+"08")||22!==tt(R+"0x16")?function(t,e){var n=et(String(t),3);return tt(n,e>>>0||(nt.test(n)?16:10))}:tt;Object(r.a)(r.a.S+r.a.F*(Number.parseInt!=rt),"Number",{parseInt:rt}),r.mb&&"g"!=/./g.flags&&r.fb.f(RegExp.prototype,"flags",{configurable:!0,get:r.m});var it=/./.toString,ot=function(t){Object(r.i)(RegExp.prototype,"toString",t,!0)};Object(r.cb)((function(){return"/a/b"!=it.call({source:"a",flags:"b"})}))?ot((function(){var t=Object(r.eb)(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r.mb&&t instanceof RegExp?r.m.call(t):void 0)})):"toString"!=it.name&&ot((function(){return it.call(this)}));var at=st;function st(){}st.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var n=0,r=e.length;n!==r;++n)t.push(e[n])},st.splice=function(t,e,n){n=n||1;for(var r=e,i=t.length-n;r<i;r++)t[r]=t[r+n];t.length=i},"undefined"!=typeof P2_ARRAY_TYPE?st.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?st.ARRAY_TYPE=Float32Array:st.ARRAY_TYPE=Array,st.extend=function(t,e){for(var n in e)t[n]=e[n]},st.defaults=function(t,e){for(var n in t=t||{},e)n in t||(t[n]=e[n]);return t};var ut=Object(r.sb)((function(t){var e=t.exports={};e.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},e.crossVZ=function(t,n,r){return e.rotate(t,n,-Math.PI/2),e.scale(t,t,r),t},e.crossZV=function(t,n,r){return e.rotate(t,r,Math.PI/2),e.scale(t,t,n),t},e.rotate=function(t,e,n){if(0!==n){var r=Math.cos(n),i=Math.sin(n),o=e[0],a=e[1];t[0]=r*o-i*a,t[1]=i*o+r*a}else t[0]=e[0],t[1]=e[1]},e.rotate90cw=function(t,e){var n=e[0],r=e[1];t[0]=r,t[1]=-n},e.toLocalFrame=function(t,n,r,i){e.copy(t,n),e.sub(t,t,r),e.rotate(t,t,-i)},e.toGlobalFrame=function(t,n,r,i){e.copy(t,n),e.rotate(t,t,i),e.add(t,t,r)},e.vectorToLocalFrame=function(t,n,r){e.rotate(t,n,-r)},e.vectorToGlobalFrame=function(t,n,r){e.rotate(t,n,r)},e.centroid=function(t,n,r,i){return e.add(t,n,r),e.add(t,t,i),e.scale(t,t,1/3),t},e.create=function(){var t=new at.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},e.clone=function(t){var e=new at.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new at.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},e.sub=e.subtract,e.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},e.mul=e.multiply,e.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},e.div=e.divide,e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},e.dist=e.distance,e.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},e.sqrDist=e.squaredDistance,e.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},e.len=e.length,e.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},e.sqrLen=e.squaredLength,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},e.reflect=function(t,e,n){var r=e[0]*n[0]+e[1]*n[1];t[0]=e[0]-2*n[0]*r,t[1]=e[1]-2*n[1]*r},e.getLineSegmentsIntersection=function(t,n,r,i,o){var a=e.getLineSegmentsIntersectionFraction(n,r,i,o);return!(a<0||(t[0]=n[0]+a*(r[0]-n[0]),t[1]=n[1]+a*(r[1]-n[1]),0))},e.getLineSegmentsIntersectionFraction=function(t,e,n,r){var i,o,a=e[0]-t[0],s=e[1]-t[1],u=r[0]-n[0],l=r[1]-n[1];return i=(-s*(t[0]-n[0])+a*(t[1]-n[1]))/(-u*s+a*l),o=(u*(t[1]-n[1])-l*(t[0]-n[0]))/(-u*s+a*l),i>=0&&i<=1&&o>=0&&o<=1?o:-1}})),lt=ct;function ct(t){this.lowerBound=ut.create(),t&&t.lowerBound&&ut.copy(this.lowerBound,t.lowerBound),this.upperBound=ut.create(),t&&t.upperBound&&ut.copy(this.upperBound,t.upperBound)}var ht=ut.create();ct.prototype.setFromPoints=function(t,e,n,r){var i=this.lowerBound,o=this.upperBound;"number"!=typeof n&&(n=0),0!==n?ut.rotate(i,t[0],n):ut.copy(i,t[0]),ut.copy(o,i);for(var a=Math.cos(n),s=Math.sin(n),u=1;u<t.length;u++){var l=t[u];if(0!==n){var c=l[0],h=l[1];ht[0]=a*c-s*h,ht[1]=s*c+a*h,l=ht}for(var f=0;f<2;f++)l[f]>o[f]&&(o[f]=l[f]),l[f]<i[f]&&(i[f]=l[f])}e&&(ut.add(this.lowerBound,this.lowerBound,e),ut.add(this.upperBound,this.upperBound,e)),r&&(this.lowerBound[0]-=r,this.lowerBound[1]-=r,this.upperBound[0]+=r,this.upperBound[1]+=r)},ct.prototype.copy=function(t){ut.copy(this.lowerBound,t.lowerBound),ut.copy(this.upperBound,t.upperBound)},ct.prototype.extend=function(t){for(var e=2;e--;){var n=t.lowerBound[e];this.lowerBound[e]>n&&(this.lowerBound[e]=n);var r=t.upperBound[e];this.upperBound[e]<r&&(this.upperBound[e]=r)}},ct.prototype.overlaps=function(t){var e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound;return(r[0]<=n[0]&&n[0]<=i[0]||e[0]<=i[0]&&i[0]<=n[0])&&(r[1]<=n[1]&&n[1]<=i[1]||e[1]<=i[1]&&i[1]<=n[1])},ct.prototype.containsPoint=function(t){var e=this.lowerBound,n=this.upperBound;return e[0]<=t[0]&&t[0]<=n[0]&&e[1]<=t[1]&&t[1]<=n[1]},ct.prototype.overlapsRay=function(t){var e=1/t.direction[0],n=1/t.direction[1],r=(this.lowerBound[0]-t.from[0])*e,i=(this.upperBound[0]-t.from[0])*e,o=(this.lowerBound[1]-t.from[1])*n,a=(this.upperBound[1]-t.from[1])*n,s=Math.max(Math.max(Math.min(r,i),Math.min(o,a))),u=Math.min(Math.min(Math.max(r,i),Math.max(o,a)));return u<0||s>u?-1:s};var ft=dt;function dt(){}dt.eq=function(t,e,n){return n=n||0,Math.abs(t-e)<n};var pt=mt;function mt(){}mt.lineInt=function(t,e,n){n=n||0;var r,i,o,a,s,u,l,c=[0,0];return r=t[1][1]-t[0][1],i=t[0][0]-t[1][0],o=r*t[0][0]+i*t[0][1],a=e[1][1]-e[0][1],s=e[0][0]-e[1][0],u=a*e[0][0]+s*e[0][1],l=r*s-a*i,ft.eq(l,0,n)||(c[0]=(s*o-i*u)/l,c[1]=(r*u-a*o)/l),c},mt.segmentsIntersect=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1],a=r[0]-n[0],s=r[1]-n[1];if(a*o-s*i==0)return!1;var u=(i*(n[1]-t[1])+o*(t[0]-n[0]))/(a*o-s*i),l=(a*(t[1]-n[1])+s*(n[0]-t[0]))/(s*i-a*o);return u>=0&&u<=1&&l>=0&&l<=1};var vt=gt;function gt(){}gt.area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},gt.left=function(t,e,n){return gt.area(t,e,n)>0},gt.leftOn=function(t,e,n){return gt.area(t,e,n)>=0},gt.right=function(t,e,n){return gt.area(t,e,n)<0},gt.rightOn=function(t,e,n){return gt.area(t,e,n)<=0};var yt=[],bt=[];gt.collinear=function(t,e,n,r){if(r){var i=yt,o=bt;i[0]=e[0]-t[0],i[1]=e[1]-t[1],o[0]=n[0]-e[0],o[1]=n[1]-e[1];var a=i[0]*o[0]+i[1]*o[1],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(s*u))<r}return 0==gt.area(t,e,n)},gt.sqdist=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r};var _t=wt;function wt(){this.vertices=[]}wt.prototype.at=function(t){var e=this.vertices,n=e.length;return e[t<0?t%n+n:t%n]},wt.prototype.first=function(){return this.vertices[0]},wt.prototype.last=function(){return this.vertices[this.vertices.length-1]},wt.prototype.clear=function(){this.vertices.length=0},wt.prototype.append=function(t,e,n){if(void 0===e)throw new Error("From is not given!");if(void 0===n)throw new Error("To is not given!");if(n-1<e)throw new Error("lol1");if(n>t.vertices.length)throw new Error("lol2");if(e<0)throw new Error("lol3");for(var r=e;r<n;r++)this.vertices.push(t.vertices[r])},wt.prototype.makeCCW=function(){for(var t=0,e=this.vertices,n=1;n<this.vertices.length;++n)(e[n][1]<e[t][1]||e[n][1]==e[t][1]&&e[n][0]>e[t][0])&&(t=n);vt.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},wt.prototype.reverse=function(){for(var t=[],e=0,n=this.vertices.length;e!==n;e++)t.push(this.vertices.pop());this.vertices=t},wt.prototype.isReflex=function(t){return vt.right(this.at(t-1),this.at(t),this.at(t+1))};var xt=[],Mt=[];function Et(t,e,n,r,i){i=i||0;var o=e[1]-t[1],a=t[0]-e[0],s=o*t[0]+a*t[1],u=r[1]-n[1],l=n[0]-r[0],c=u*n[0]+l*n[1],h=o*l-u*a;return ft.eq(h,0,i)?[0,0]:[(l*s-a*c)/h,(o*c-u*s)/h]}wt.prototype.canSee=function(t,e){var n,r,i=xt,o=Mt;if(vt.leftOn(this.at(t+1),this.at(t),this.at(e))&&vt.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;r=vt.sqdist(this.at(t),this.at(e));for(var a=0;a!==this.vertices.length;++a)if((a+1)%this.vertices.length!==t&&a!==t&&vt.leftOn(this.at(t),this.at(e),this.at(a+1))&&vt.rightOn(this.at(t),this.at(e),this.at(a))&&(i[0]=this.at(t),i[1]=this.at(e),o[0]=this.at(a),o[1]=this.at(a+1),n=pt.lineInt(i,o),vt.sqdist(this.at(t),n)<r))return!1;return!0},wt.prototype.copy=function(t,e,n){var r=n||new wt;if(r.clear(),t<e)for(var i=t;i<=e;i++)r.vertices.push(this.vertices[i]);else{for(i=0;i<=e;i++)r.vertices.push(this.vertices[i]);for(i=t;i<this.vertices.length;i++)r.vertices.push(this.vertices[i])}return r},wt.prototype.getCutEdges=function(){for(var t=[],e=[],n=[],r=new wt,i=Number.MAX_VALUE,o=0;o<this.vertices.length;++o)if(this.isReflex(o))for(var a=0;a<this.vertices.length;++a)if(this.canSee(o,a)){e=this.copy(o,a,r).getCutEdges(),n=this.copy(a,o,r).getCutEdges();for(var s=0;s<n.length;s++)e.push(n[s]);e.length<i&&(t=e,i=e.length,t.push([this.at(o),this.at(a)]))}return t},wt.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},wt.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].slice(r);if(o){e.splice(i,1),e.push(o[0],o[1]);break}}return e}return r=t,n=this.vertices.indexOf(r[0]),i=this.vertices.indexOf(r[1]),-1!=n&&-1!=i&&[this.copy(n,i),this.copy(i,n)]},wt.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var n=0;n<e-1;n++)if(pt.segmentsIntersect(t[e],t[e+1],t[n],t[n+1]))return!1;for(e=1;e<t.length-2;e++)if(pt.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},wt.prototype.quickDecomp=function(t,e,n,r,i,o){i=i||100,o=o||0,r=r||25,t=void 0!==t?t:[],e=e||[],n=n||[];var a=[0,0],s=[0,0],u=[0,0],l=0,c=0,h=0,f=0,d=0,p=0,m=0,v=new wt,g=new wt,y=this.vertices;if(y.length<3)return t;if(++o>i)return console.warn("quickDecomp: max level ("+i+") reached."),t;for(var b=0;b<this.vertices.length;++b)if(this.isReflex(b)){e.push(this.vertices[b]),l=c=Number.MAX_VALUE;for(var _=0;_<this.vertices.length;++_)vt.left(this.at(b-1),this.at(b),this.at(_))&&vt.rightOn(this.at(b-1),this.at(b),this.at(_-1))&&(u=Et(this.at(b-1),this.at(b),this.at(_),this.at(_-1)),vt.right(this.at(b+1),this.at(b),u)&&(h=vt.sqdist(this.vertices[b],u))<c&&(c=h,s=u,p=_)),vt.left(this.at(b+1),this.at(b),this.at(_+1))&&vt.rightOn(this.at(b+1),this.at(b),this.at(_))&&(u=Et(this.at(b+1),this.at(b),this.at(_),this.at(_+1)),vt.left(this.at(b-1),this.at(b),u)&&(h=vt.sqdist(this.vertices[b],u))<l&&(l=h,a=u,d=_));if(p==(d+1)%this.vertices.length)u[0]=(s[0]+a[0])/2,u[1]=(s[1]+a[1])/2,n.push(u),b<d?(v.append(this,b,d+1),v.vertices.push(u),g.vertices.push(u),0!=p&&g.append(this,p,this.vertices.length),g.append(this,0,b+1)):(0!=b&&v.append(this,b,this.vertices.length),v.append(this,0,d+1),v.vertices.push(u),g.vertices.push(u),g.append(this,p,b+1));else{if(p>d&&(d+=this.vertices.length),f=Number.MAX_VALUE,d<p)return t;for(_=p;_<=d;++_)vt.leftOn(this.at(b-1),this.at(b),this.at(_))&&vt.rightOn(this.at(b+1),this.at(b),this.at(_))&&(h=vt.sqdist(this.at(b),this.at(_)))<f&&(f=h,m=_%this.vertices.length);b<m?(v.append(this,b,m+1),0!=m&&g.append(this,m,y.length),g.append(this,0,b+1)):(0!=b&&v.append(this,b,y.length),v.append(this,0,m+1),g.append(this,m,b+1))}return v.vertices.length<g.vertices.length?(v.quickDecomp(t,e,n,r,i,o),g.quickDecomp(t,e,n,r,i,o)):(g.quickDecomp(t,e,n,r,i,o),v.quickDecomp(t,e,n,r,i,o)),t}return t.push(this),t},wt.prototype.removeCollinearPoints=function(t){for(var e=0,n=this.vertices.length-1;this.vertices.length>3&&n>=0;--n)vt.collinear(this.at(n-1),this.at(n),this.at(n+1),t)&&(this.vertices.splice(n%this.vertices.length,1),n--,e++);return e};var St={Polygon:_t,Point:vt},At=Tt;function Tt(t){t=t||{},this.body=null,this.position=ut.fromValues(0,0),t.position&&ut.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=Tt.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}Tt.idCounter=0,Tt.CIRCLE=1,Tt.PARTICLE=2,Tt.PLANE=4,Tt.CONVEX=8,Tt.LINE=16,Tt.BOX=32,Object.defineProperty(Tt,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),Tt.BOX}}),Tt.CAPSULE=64,Tt.HEIGHTFIELD=128,Tt.prototype.computeMomentOfInertia=function(t){},Tt.prototype.updateBoundingRadius=function(){},Tt.prototype.updateArea=function(){},Tt.prototype.computeAABB=function(t,e,n){},Tt.prototype.raycast=function(t,e,n,r){};var qt={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,n=0,r=0;r<e;r+=2)n+=(t[r+2]-t[r])*(t[r+1]+t[r+3]);return.5*-(n+=(t[0]-t[e])*(t[e+1]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(e<3)return[];for(var n=[],r=[],i=0;i<e;i++)r.push(i);i=0;for(var o=e;o>3;){var a=r[(i+0)%o],s=r[(i+1)%o],u=r[(i+2)%o],l=t[2*a],c=t[2*a+1],h=t[2*s],f=t[2*s+1],d=t[2*u],p=t[2*u+1],m=!1;if(qt._convex(l,c,h,f,d,p)){m=!0;for(var v=0;v<o;v++){var g=r[v];if(g!=a&&g!=s&&g!=u&&qt._PointInTriangle(t[2*g],t[2*g+1],l,c,h,f,d,p)){m=!1;break}}}if(m)n.push(a,s,u),r.splice((i+1)%o,1),o--,i=0;else if(i++>3*o)break}return n.push(r[0],r[1],r[2]),n},_PointInTriangle:function(t,e,n,r,i,o,a,s){var u=a-n,l=s-r,c=i-n,h=o-r,f=t-n,d=e-r,p=u*u+l*l,m=u*c+l*h,v=u*f+l*d,g=c*c+h*h,y=c*f+h*d,b=1/(p*g-m*m),_=(g*v-m*y)*b,w=(p*y-m*v)*b;return _>=0&&w>=0&&_+w<1},_convex:function(t,e,n,r,i,o){return(e-r)*(i-n)+(n-t)*(o-r)>=0}},Pt=qt,Lt=Ot;function Ot(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],n=0;n<e.length;n++){var r=ut.create();ut.copy(r,e[n]),this.vertices.push(r)}if(this.axes=[],t.axes)for(n=0;n<t.axes.length;n++){var i=ut.create();ut.copy(i,t.axes[n]),this.axes.push(i)}else for(n=0;n<this.vertices.length;n++){var o=this.vertices[n],a=this.vertices[(n+1)%this.vertices.length],s=ut.create();ut.sub(s,a,o),ut.rotate90cw(s,s),ut.normalize(s,s),this.axes.push(s)}if(this.centerOfMass=ut.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=At.CONVEX,At.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}Ot.prototype=new At,Ot.prototype.constructor=Ot;var Ct=ut.create(),It=ut.create();Ot.prototype.projectOntoLocalAxis=function(t,e){for(var n,r,i=null,o=null,a=(t=Ct,0);a<this.vertices.length;a++)n=this.vertices[a],r=ut.dot(n,t),(null===i||r>i)&&(i=r),(null===o||r<o)&&(o=r);if(o>i){var s=o;o=i,i=s}ut.set(e,o,i)},Ot.prototype.projectOntoWorldAxis=function(t,e,n,r){var i=It;this.projectOntoLocalAxis(t,r),0!==n?ut.rotate(i,t,n):i=t;var o=ut.dot(e,i);ut.set(r,r[0]+o,r[1]+o)},Ot.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var n=this.vertices[e];t.push(n[0],n[1])}var r=Pt.Triangulate(t);for(e=0;e<r.length;e+=3){var i=r[e],o=r[e+1],a=r[e+2];this.triangles.push([i,o,a])}};var Rt=ut.create(),kt=ut.create(),Nt=ut.create(),Bt=ut.create(),Dt=ut.create();ut.create(),ut.create(),ut.create(),ut.create(),Ot.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,n=this.centerOfMass,r=Rt,i=Nt,o=Bt,a=Dt,s=kt;ut.set(n,0,0);for(var u=0,l=0;l!==t.length;l++){var c=t[l];i=e[c[0]],o=e[c[1]],a=e[c[2]],ut.centroid(r,i,o,a);var h=Ot.triangleArea(i,o,a);u+=h,ut.scale(s,r,h),ut.add(n,n,s)}ut.scale(n,n,1/u)},Ot.prototype.computeMomentOfInertia=function(t){for(var e=0,n=0,r=this.vertices.length,i=r-1,o=0;o<r;i=o,o++){var a=this.vertices[i],s=this.vertices[o],u=Math.abs(ut.crossLength(a,s));e+=u*(ut.dot(s,s)+ut.dot(s,a)+ut.dot(a,a)),n+=u}return t/6*(e/n)},Ot.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,n=0;n!==t.length;n++){var r=ut.squaredLength(t[n]);r>e&&(e=r)}this.boundingRadius=Math.sqrt(e)},Ot.triangleArea=function(t,e,n){return.5*((e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1]))},Ot.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,n=0;n!==t.length;n++){var r=t[n],i=e[r[0]],o=e[r[1]],a=e[r[2]],s=Ot.triangleArea(i,o,a);this.area+=s}},Ot.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)};var jt=ut.create(),Ft=ut.create(),zt=ut.create();Ot.prototype.raycast=function(t,e,n,r){var i=jt,o=Ft,a=zt,s=this.vertices;ut.toLocalFrame(i,e.from,n,r),ut.toLocalFrame(o,e.to,n,r);for(var u=s.length,l=0;l<u&&!t.shouldStop(e);l++){var c=s[l],h=s[(l+1)%u],f=ut.getLineSegmentsIntersectionFraction(i,o,c,h);f>=0&&(ut.sub(a,h,c),ut.rotate(a,a,-Math.PI/2+r),ut.normalize(a,a),e.reportIntersection(t,f,a,l))}};var Ut=Vt;function Vt(t){t=t||{},this.from=t.from?ut.fromValues(t.from[0],t.from[1]):ut.create(),this.to=t.to?ut.fromValues(t.to[0],t.to[1]):ut.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:Vt.ANY,this.callback=t.callback||function(t){},this.direction=ut.create(),this.length=1,this.update()}Vt.prototype.constructor=Vt,Vt.CLOSEST=1,Vt.ANY=2,Vt.ALL=4,Vt.prototype.update=function(){var t=this.direction;ut.sub(t,this.to,this.from),this.length=ut.length(t),ut.normalize(t,t)},Vt.prototype.intersectBodies=function(t,e){for(var n=0,r=e.length;!t.shouldStop(this)&&n<r;n++){var i=e[n],o=i.getAABB();(o.overlapsRay(this)>=0||o.containsPoint(this.from))&&this.intersectBody(t,i)}};var Gt=ut.create();Vt.prototype.intersectBody=function(t,e){var n=this.checkCollisionResponse;if(!n||e.collisionResponse)for(var r=Gt,i=0,o=e.shapes.length;i<o;i++){var a=e.shapes[i];if((!n||a.collisionResponse)&&0!=(this.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&this.collisionMask)){ut.rotate(r,a.position,e.angle),ut.add(r,r,e.position);var s=a.angle+e.angle;if(this.intersectShape(t,a,s,r,e),t.shouldStop(this))break}}},Vt.prototype.intersectShape=function(t,e,n,r,i){(function(t,e,n){ut.sub(Ht,n,t);var r=ut.dot(Ht,e);return ut.scale(Wt,e,r),ut.add(Wt,Wt,t),ut.squaredDistance(n,Wt)})(this.from,this.direction,r)>e.boundingRadius*e.boundingRadius||(this._currentBody=i,this._currentShape=e,e.raycast(t,this,r,n),this._currentBody=this._currentShape=null)},Vt.prototype.getAABB=function(t){var e=this.to,n=this.from;ut.set(t.lowerBound,Math.min(e[0],n[0]),Math.min(e[1],n[1])),ut.set(t.upperBound,Math.max(e[0],n[0]),Math.max(e[1],n[1]))},ut.create(),Vt.prototype.reportIntersection=function(t,e,n,r){this.from,this.to;var i=this._currentShape,o=this._currentBody;if(!(this.skipBackfaces&&ut.dot(n,this.direction)>0))switch(this.mode){case Vt.ALL:t.set(n,i,o,e,r),this.callback(t);break;case Vt.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(n,i,o,e,r);break;case Vt.ANY:t.set(n,i,o,e,r)}};var Ht=ut.create(),Wt=ut.create(),Yt=Xt;function Xt(){this.normal=ut.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}Xt.prototype.reset=function(){ut.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},Xt.prototype.getHitDistance=function(t){return ut.distance(t.from,t.to)*this.fraction},Xt.prototype.hasHit=function(){return-1!==this.fraction},Xt.prototype.getHitPoint=function(t,e){ut.lerp(t,e.from,e.to,this.fraction)},Xt.prototype.stop=function(){this.isStopped=!0},Xt.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===Ut.ANY},Xt.prototype.set=function(t,e,n,r,i){ut.copy(this.normal,t),this.shape=e,this.body=n,this.fraction=r,this.faceIndex=i};var Zt=function(){},Jt=Zt;Zt.prototype={constructor:Zt,on:function(t,e,n){e.context=n||this,void 0===this._listeners&&(this._listeners={});var r=this._listeners;return void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;if(e){if(void 0!==n[t]&&-1!==n[t].indexOf(e))return!0}else if(void 0!==n[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var n=this._listeners,r=n[t].indexOf(e);return-1!==r&&n[t].splice(r,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i.call(i.context,t)}}return this}};var Kt=Qt;function Qt(t){t=t||{},Jt.call(this),this.id=t.id||++Qt._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=ut.create(),this.position=ut.fromValues(0,0),t.position&&ut.copy(this.position,t.position),this.interpolatedPosition=ut.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=ut.fromValues(0,0),this.previousAngle=0,this.velocity=ut.fromValues(0,0),t.velocity&&ut.copy(this.velocity,t.velocity),this.vlambda=ut.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=ut.create(),t.force&&ut.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=Qt.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=Qt.DYNAMIC:this.type=Qt.STATIC,this.boundingRadius=0,this.aabb=new lt,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=Qt.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}Qt.prototype=new Jt,Qt.prototype.constructor=Qt,Qt._idCounter=0,Qt.prototype.updateSolveMassProperties=function(){this.sleepState===Qt.SLEEPING||this.type===Qt.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},Qt.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},Qt.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},Qt.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var $t=new lt,te=ut.create();Qt.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,n=te,r=this.angle,i=0;i!==e;i++){var o=t[i],a=o.angle+r;ut.rotate(n,o.position,r),ut.add(n,n,this.position),o.computeAABB($t,n,a),0===i?this.aabb.copy($t):this.aabb.extend($t)}this.aabbNeedsUpdate=!1},Qt.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,n=0,r=0;r!==e;r++){var i=t[r],o=ut.length(i.position),a=i.boundingRadius;o+a>n&&(n=o+a)}this.boundingRadius=n},Qt.prototype.addShape=function(t,e,n){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?ut.copy(t.position,e):ut.set(t.position,0,0),t.angle=n||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},Qt.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},Qt.prototype.updateMassProperties=function(){if(this.type===Qt.STATIC||this.type===Qt.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,n=this.mass/e,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var i=0;i<e;i++){var o=t[i],a=ut.squaredLength(o.position);r+=o.computeMomentOfInertia(n)+n*a}this.inertia=r,this.invInertia=r>0?1/r:0}this.invMass=1/this.mass,ut.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}},ut.create(),Qt.prototype.applyForce=function(t,e){if(ut.add(this.force,this.force,t),e){var n=ut.crossLength(e,t);this.angularForce+=n}};var ee=ut.create(),ne=ut.create(),re=ut.create();Qt.prototype.applyForceLocal=function(t,e){e=e||re;var n=ee,r=ne;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(r,e),this.applyForce(n,r)};var ie=ut.create();Qt.prototype.applyImpulse=function(t,e){if(this.type===Qt.DYNAMIC){var n=ie;if(ut.scale(n,t,this.invMass),ut.multiply(n,this.massMultiplier,n),ut.add(this.velocity,n,this.velocity),e){var r=ut.crossLength(e,t);r*=this.invInertia,this.angularVelocity+=r}}};var oe=ut.create(),ae=ut.create(),se=ut.create();Qt.prototype.applyImpulseLocal=function(t,e){e=e||se;var n=oe,r=ae;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(r,e),this.applyImpulse(n,r)},Qt.prototype.toLocalFrame=function(t,e){ut.toLocalFrame(t,e,this.position,this.angle)},Qt.prototype.toWorldFrame=function(t,e){ut.toGlobalFrame(t,e,this.position,this.angle)},Qt.prototype.vectorToLocalFrame=function(t,e){ut.vectorToLocalFrame(t,e,this.angle)},Qt.prototype.vectorToWorldFrame=function(t,e){ut.vectorToGlobalFrame(t,e,this.angle)},Qt.prototype.fromPolygon=function(t,e){e=e||{};for(var n=this.shapes.length;n>=0;--n)this.removeShape(this.shapes[n]);var r,i=new St.Polygon;if(i.vertices=t,i.makeCCW(),"number"==typeof e.removeCollinearPoints&&i.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!i.isSimple())return!1;for(this.concavePath=i.vertices.slice(0),n=0;n<this.concavePath.length;n++){var o=[0,0];ut.copy(o,this.concavePath[n]),this.concavePath[n]=o}r=e.optimalDecomp?i.decomp():i.quickDecomp();var a=ut.create();for(n=0;n!==r.length;n++){for(var s=new Lt({vertices:r[n].vertices}),u=0;u!==s.vertices.length;u++)o=s.vertices[u],ut.sub(o,o,s.centerOfMass);ut.scale(a,s.centerOfMass,1),s.updateTriangles(),s.updateCenterOfMass(),s.updateBoundingRadius(),this.addShape(s,a)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0},ut.fromValues(0,0);var ue=ut.fromValues(0,0),le=ut.fromValues(0,0),ce=ut.fromValues(0,0);Qt.prototype.adjustCenterOfMass=function(){var t=ue,e=le,n=ce,r=0;ut.set(e,0,0);for(var i=0;i!==this.shapes.length;i++){var o=this.shapes[i];ut.scale(t,o.position,o.area),ut.add(e,e,t),r+=o.area}for(ut.scale(n,e,1/r),i=0;i!==this.shapes.length;i++)o=this.shapes[i],ut.sub(o.position,o.position,n);for(ut.add(this.position,this.position,n),i=0;this.concavePath&&i<this.concavePath.length;i++)ut.sub(this.concavePath[i],this.concavePath[i],n);this.updateMassProperties(),this.updateBoundingRadius()},Qt.prototype.setZeroForce=function(){ut.set(this.force,0,0),this.angularForce=0},Qt.prototype.resetConstraintVelocity=function(){var t=this.vlambda;ut.set(t,0,0),this.wlambda=0},Qt.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;ut.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},Qt.prototype.applyDamping=function(t){if(this.type===Qt.DYNAMIC){var e=this.velocity;ut.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},Qt.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=Qt.AWAKE,this.idleTime=0,t!==Qt.AWAKE&&this.emit(Qt.wakeUpEvent)},Qt.prototype.sleep=function(){this.sleepState=Qt.SLEEPING,this.angularVelocity=0,this.angularForce=0,ut.set(this.velocity,0,0),ut.set(this.force,0,0),this.emit(Qt.sleepEvent)},Qt.prototype.sleepTick=function(t,e,n){this.allowSleep&&this.type!==Qt.SLEEPING&&(this.wantsToSleep=!1,this.sleepState,ut.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=Qt.AWAKE):(this.idleTime+=n,this.sleepState=Qt.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep()))},Qt.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var he=ut.create(),fe=ut.create();Qt.prototype.integrate=function(t){var e=this.invMass,n=this.force,r=this.position,i=this.velocity;ut.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),ut.scale(he,n,t*e),ut.multiply(he,this.massMultiplier,he),ut.add(i,he,i),this.integrateToTimeOfImpact(t)||(ut.scale(fe,i,t),ut.add(r,r,fe),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var de=new Yt,pe=new Ut({mode:Ut.ALL}),me=ut.create(),ve=ut.create(),ge=ut.create(),ye=ut.create();Qt.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||ut.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;ut.normalize(me,this.velocity),ut.scale(ve,this.velocity,t),ut.add(ve,ve,this.position),ut.sub(ge,ve,this.position);var e,n=this.angularVelocity*t,r=ut.length(ge),i=1,o=this;if(de.reset(),pe.callback=function(t){t.body!==o&&(e=t.body,t.getHitPoint(ve,pe),ut.sub(ge,ve,o.position),i=ut.length(ge)/r,t.stop())},ut.copy(pe.from,this.position),ut.copy(pe.to,ve),pe.update(),this.world.raycast(de,pe),!e)return!1;var a=this.angle;ut.copy(ye,this.position);for(var s=0,u=0,l=0,c=i;c>=u&&s<this.ccdIterations;)s++,l=(c-u)/2,ut.scale(fe,ge,i),ut.add(this.position,ye,fe),this.angle=a+n*i,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?u=l:c=l;return i=l,ut.copy(this.position,ye),this.angle=a,ut.scale(fe,ge,i),ut.add(this.position,this.position,fe),this.fixedRotation||(this.angle+=n*i),!0},Qt.prototype.getVelocityAtPoint=function(t,e){return ut.crossVZ(t,e,this.angularVelocity),ut.subtract(t,this.velocity,t),t},Qt.sleepyEvent={type:"sleepy"},Qt.sleepEvent={type:"sleep"},Qt.wakeUpEvent={type:"wakeup"},Qt.DYNAMIC=1,Qt.STATIC=2,Qt.KINEMATIC=4,Qt.AWAKE=0,Qt.SLEEPY=1,Qt.SLEEPING=2;var be=_e;function _e(t,e,n,r){this.minForce=void 0===n?-Number.MAX_VALUE:n,this.maxForce=void 0===r?Number.MAX_VALUE:r,this.bodyA=t,this.bodyB=e,this.stiffness=_e.DEFAULT_STIFFNESS,this.relaxation=_e.DEFAULT_RELAXATION,this.G=new at.ARRAY_TYPE(6);for(var i=0;i<6;i++)this.G[i]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}_e.prototype.constructor=_e,_e.DEFAULT_STIFFNESS=1e6,_e.DEFAULT_RELAXATION=4,_e.prototype.update=function(){var t=this.stiffness,e=this.relaxation,n=this.timeStep;this.a=4/(n*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(n*n*t*(1+4*e)),this.needsUpdate=!1},_e.prototype.gmult=function(t,e,n,r,i){return t[0]*e[0]+t[1]*e[1]+t[2]*n+t[3]*r[0]+t[4]*r[1]+t[5]*i},_e.prototype.computeB=function(t,e,n){var r=this.computeGW();return-this.computeGq()*t-r*e-this.computeGiMf()*n};var we=ut.create(),xe=ut.create();_e.prototype.computeGq=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=(e.position,n.position,e.angle),i=n.angle;return this.gmult(t,we,r,xe,i)+this.offset},_e.prototype.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.velocity,i=n.velocity,o=e.angularVelocity,a=n.angularVelocity;return this.gmult(t,r,o,i,a)+this.relativeVelocity},_e.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.vlambda,i=n.vlambda,o=e.wlambda,a=n.wlambda;return this.gmult(t,r,o,i,a)};var Me=ut.create(),Ee=ut.create();_e.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,n=t.force,r=t.angularForce,i=e.force,o=e.angularForce,a=t.invMassSolve,s=e.invMassSolve,u=t.invInertiaSolve,l=e.invInertiaSolve,c=this.G;return ut.scale(Me,n,a),ut.multiply(Me,t.massMultiplier,Me),ut.scale(Ee,i,s),ut.multiply(Ee,e.massMultiplier,Ee),this.gmult(c,Me,r*u,Ee,o*l)},_e.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,n=t.invMassSolve,r=e.invMassSolve,i=t.invInertiaSolve,o=e.invInertiaSolve,a=this.G;return a[0]*a[0]*n*t.massMultiplier[0]+a[1]*a[1]*n*t.massMultiplier[1]+a[2]*a[2]*i+a[3]*a[3]*r*e.massMultiplier[0]+a[4]*a[4]*r*e.massMultiplier[1]+a[5]*a[5]*o};var Se=ut.create(),Ae=ut.create(),Te=ut.create();ut.create(),ut.create(),ut.create(),_e.prototype.addToWlambda=function(t){var e=this.bodyA,n=this.bodyB,r=Se,i=Ae,o=Te,a=e.invMassSolve,s=n.invMassSolve,u=e.invInertiaSolve,l=n.invInertiaSolve,c=this.G;i[0]=c[0],i[1]=c[1],o[0]=c[3],o[1]=c[4],ut.scale(r,i,a*t),ut.multiply(r,r,e.massMultiplier),ut.add(e.vlambda,e.vlambda,r),e.wlambda+=u*c[2]*t,ut.scale(r,o,s*t),ut.multiply(r,r,n.massMultiplier),ut.add(n.vlambda,n.vlambda,r),n.wlambda+=l*c[5]*t},_e.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)};var qe=Pe;function Pe(t,e,n){n=n||{},be.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0,this.ratio="number"==typeof n.ratio?n.ratio:1,this.setRatio(this.ratio)}Pe.prototype=new be,Pe.prototype.constructor=Pe,Pe.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},Pe.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},Pe.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t};var Le=Oe;function Oe(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=Oe.AABB}Oe.AABB=1,Oe.BOUNDING_CIRCLE=2,Oe.prototype.setWorld=function(t){this.world=t},Oe.prototype.getCollisionPairs=function(t){};var Ce=ut.create();Oe.boundingRadiusCheck=function(t,e){ut.sub(Ce,t.position,e.position);var n=ut.squaredLength(Ce),r=t.boundingRadius+e.boundingRadius;return n<=r*r},Oe.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},Oe.prototype.boundingVolumeCheck=function(t,e){var n;switch(this.boundingVolumeType){case Oe.BOUNDING_CIRCLE:n=Oe.boundingRadiusCheck(t,e);break;case Oe.AABB:n=Oe.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return n},Oe.canCollide=function(t,e){var n=Kt.KINEMATIC,r=Kt.STATIC;return!(t.type===r&&e.type===r||t.type===n&&e.type===r||t.type===r&&e.type===n||t.type===n&&e.type===n||t.sleepState===Kt.SLEEPING&&e.sleepState===Kt.SLEEPING||t.sleepState===Kt.SLEEPING&&e.type===r||e.sleepState===Kt.SLEEPING&&t.type===r)},Oe.NAIVE=1,Oe.SAP=2;var Ie=Re;function Re(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=At.CAPSULE,At.call(this,t)}Re.prototype=new At,Re.prototype.constructor=Re,Re.prototype.computeMomentOfInertia=function(t){var e=this.radius,n=this.length+e,r=2*e;return t*(r*r+n*n)/12},Re.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},Re.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var ke=ut.create();Re.prototype.computeAABB=function(t,e,n){var r=this.radius;ut.set(ke,this.length/2,0),0!==n&&ut.rotate(ke,ke,n),ut.set(t.upperBound,Math.max(ke[0]+r,-ke[0]+r),Math.max(ke[1]+r,-ke[1]+r)),ut.set(t.lowerBound,Math.min(ke[0]-r,-ke[0]-r),Math.min(ke[1]-r,-ke[1]-r)),ut.add(t.lowerBound,t.lowerBound,e),ut.add(t.upperBound,t.upperBound,e)};var Ne=ut.create(),Be=ut.create(),De=ut.create(),je=ut.create(),Fe=ut.fromValues(0,1);Re.prototype.raycast=function(t,e,n,r){for(var i=e.from,o=e.to,a=(e.direction,Ne),s=Be,u=De,l=je,c=this.length/2,h=0;h<2;h++){var f=this.radius*(2*h-1);if(ut.set(u,-c,f),ut.set(l,c,f),ut.toGlobalFrame(u,u,n,r),ut.toGlobalFrame(l,l,n,r),(p=ut.getLineSegmentsIntersectionFraction(i,o,u,l))>=0&&(ut.rotate(s,Fe,r),ut.scale(s,s,2*h-1),e.reportIntersection(t,p,s,-1),t.shouldStop(e)))return}var d=Math.pow(this.radius,2)+Math.pow(c,2);for(h=0;h<2;h++){ut.set(u,c*(2*h-1),0),ut.toGlobalFrame(u,u,n,r);var p,m=Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2),v=2*((o[0]-i[0])*(i[0]-u[0])+(o[1]-i[1])*(i[1]-u[1])),g=Math.pow(i[0]-u[0],2)+Math.pow(i[1]-u[1],2)-Math.pow(this.radius,2);if(!((p=Math.pow(v,2)-4*m*g)<0))if(0===p){if(ut.lerp(a,i,o,p),ut.squaredDistance(a,n)>d&&(ut.sub(s,a,u),ut.normalize(s,s),e.reportIntersection(t,p,s,-1),t.shouldStop(e)))return}else{var y=Math.sqrt(p),b=1/(2*m),_=(-v-y)*b,w=(-v+y)*b;if(_>=0&&_<=1&&(ut.lerp(a,i,o,_),ut.squaredDistance(a,n)>d&&(ut.sub(s,a,u),ut.normalize(s,s),e.reportIntersection(t,_,s,-1),t.shouldStop(e))))return;if(w>=0&&w<=1&&(ut.lerp(a,i,o,w),ut.squaredDistance(a,n)>d&&(ut.sub(s,a,u),ut.normalize(s,s),e.reportIntersection(t,w,s,-1),t.shouldStop(e))))return}}};var ze=Ue;function Ue(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=At.CIRCLE,At.call(this,t)}Ue.prototype=new At,Ue.prototype.constructor=Ue,Ue.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},Ue.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},Ue.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},Ue.prototype.computeAABB=function(t,e,n){var r=this.radius;ut.set(t.upperBound,r,r),ut.set(t.lowerBound,-r,-r),e&&(ut.add(t.lowerBound,t.lowerBound,e),ut.add(t.upperBound,t.upperBound,e))};var Ve=ut.create(),Ge=ut.create();Ue.prototype.raycast=function(t,e,n,r){var i=e.from,o=e.to,a=this.radius,s=Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2),u=2*((o[0]-i[0])*(i[0]-n[0])+(o[1]-i[1])*(i[1]-n[1])),l=Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2)-Math.pow(a,2),c=Math.pow(u,2)-4*s*l,h=Ve,f=Ge;if(!(c<0))if(0===c)ut.lerp(h,i,o,c),ut.sub(f,h,n),ut.normalize(f,f),e.reportIntersection(t,c,f,-1);else{var d=Math.sqrt(c),p=1/(2*s),m=(-u-d)*p,v=(-u+d)*p;if(m>=0&&m<=1&&(ut.lerp(h,i,o,m),ut.sub(f,h,n),ut.normalize(f,f),e.reportIntersection(t,m,f,-1),t.shouldStop(e)))return;v>=0&&v<=1&&(ut.lerp(h,i,o,v),ut.sub(f,h,n),ut.normalize(f,f),e.reportIntersection(t,v,f,-1))}};var He=We;function We(t,e,n,r){this.type=n,r=at.defaults(r,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=r.collideConnected,r.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}We.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},We.DISTANCE=1,We.GEAR=2,We.LOCK=3,We.PRISMATIC=4,We.REVOLUTE=5,We.prototype.setStiffness=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var r=e[n];r.stiffness=t,r.needsUpdate=!0}},We.prototype.setRelaxation=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var r=e[n];r.relaxation=t,r.needsUpdate=!0}};var Ye=Xe;function Xe(t,e){be.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=ut.create(),this.penetrationVec=ut.create(),this.contactPointB=ut.create(),this.normalA=ut.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}Xe.prototype=new be,Xe.prototype.constructor=Xe,Xe.prototype.computeB=function(t,e,n){var r,i,o=this.bodyA,a=this.bodyB,s=this.contactPointA,u=this.contactPointB,l=o.position,c=a.position,h=this.penetrationVec,f=this.normalA,d=this.G,p=ut.crossLength(s,f),m=ut.crossLength(u,f);return d[0]=-f[0],d[1]=-f[1],d[2]=-p,d[3]=f[0],d[4]=f[1],d[5]=m,ut.add(h,c,u),ut.sub(h,h,l),ut.sub(h,h,s),this.firstImpact&&0!==this.restitution?(i=0,r=1/e*(1+this.restitution)*this.computeGW()):(i=ut.dot(f,h)+this.offset,r=this.computeGW()),-i*t-r*e-n*this.computeGiMf()};var Ze=ut.create(),Je=ut.create(),Ke=ut.create();Xe.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(Ze,this.contactPointA),this.bodyB.getVelocityAtPoint(Je,this.contactPointB),ut.subtract(Ke,Ze,Je),ut.dot(this.normalA,Ke)};var Qe=$e;function $e(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}$e.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},$e.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},$e.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this};var tn=en;function en(){Qe.apply(this,arguments)}en.prototype=new Qe,en.prototype.constructor=en,en.prototype.create=function(){return new Ye},en.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this};var nn=rn;function rn(t){this.id=t||rn.idCounter++}rn.idCounter=0;var on=an;function an(t,e,n){if(n=n||{},!(t instanceof nn&&e instanceof nn))throw new Error("First two arguments must be Material instances.");this.id=an.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==n.friction?Number(n.friction):.3,this.restitution=void 0!==n.restitution?Number(n.restitution):0,this.stiffness=void 0!==n.stiffness?Number(n.stiffness):be.DEFAULT_STIFFNESS,this.relaxation=void 0!==n.relaxation?Number(n.relaxation):be.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==n.frictionStiffness?Number(n.frictionStiffness):be.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==n.frictionRelaxation?Number(n.frictionRelaxation):be.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==n.surfaceVelocity?Number(n.surfaceVelocity):0,this.contactSkinSize=.005}an.idCounter=0;var sn=un;function un(t,e,n){n=at.defaults(n,{localAnchorA:[0,0],localAnchorB:[0,0]}),He.call(this,t,e,He.DISTANCE,n),this.localAnchorA=ut.fromValues(n.localAnchorA[0],n.localAnchorA[1]),this.localAnchorB=ut.fromValues(n.localAnchorB[0],n.localAnchorB[1]);var r,i=this.localAnchorA,o=this.localAnchorB;if(this.distance=0,"number"==typeof n.distance)this.distance=n.distance;else{var a=ut.create(),s=ut.create(),u=ut.create();ut.rotate(a,i,t.angle),ut.rotate(s,o,e.angle),ut.add(u,e.position,s),ut.sub(u,u,a),ut.sub(u,u,t.position),this.distance=ut.length(u)}r=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce;var l=new be(t,e,-r,r);this.equations=[l],this.maxForce=r,u=ut.create();var c=ut.create(),h=ut.create(),f=this;l.computeGq=function(){var t=this.bodyA,e=this.bodyB,n=t.position,r=e.position;return ut.rotate(c,i,t.angle),ut.rotate(h,o,e.angle),ut.add(u,r,h),ut.sub(u,u,c),ut.sub(u,u,n),ut.length(u)-f.distance},this.setMaxForce(r),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}un.prototype=new He,un.prototype.constructor=un;var ln=ut.create(),cn=ut.create(),hn=ut.create();un.prototype.update=function(){var t=this.equations[0],e=this.bodyA,n=this.bodyB,r=(this.distance,e.position),i=n.position,o=this.equations[0],a=t.G;ut.rotate(cn,this.localAnchorA,e.angle),ut.rotate(hn,this.localAnchorB,n.angle),ut.add(ln,i,hn),ut.sub(ln,ln,cn),ut.sub(ln,ln,r),this.position=ut.length(ln);var s=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(o.maxForce=0,o.minForce=-this.maxForce,this.distance=this.upperLimit,s=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(o.maxForce=this.maxForce,o.minForce=0,this.distance=this.lowerLimit,s=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||s){o.enabled=!0,ut.normalize(ln,ln);var u=ut.crossLength(cn,ln),l=ut.crossLength(hn,ln);a[0]=-ln[0],a[1]=-ln[1],a[2]=-u,a[3]=ln[0],a[4]=ln[1],a[5]=l}else o.enabled=!1},un.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},un.prototype.getMaxForce=function(){return this.equations[0].maxForce};var fn=dn;function dn(t,e,n){be.call(this,t,e,-n,n),this.contactPointA=ut.create(),this.contactPointB=ut.create(),this.t=ut.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}dn.prototype=new be,dn.prototype.constructor=dn,dn.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},dn.prototype.getSlipForce=function(){return this.maxForce},dn.prototype.computeB=function(t,e,n){this.bodyA,this.bodyB;var r=this.contactPointA,i=this.contactPointB,o=this.t,a=this.G;return a[0]=-o[0],a[1]=-o[1],a[2]=-ut.crossLength(r,o),a[3]=o[0],a[4]=o[1],a[5]=ut.crossLength(i,o),-this.computeGW()*e-n*this.computeGiMf()};var pn=mn;function mn(){Qe.apply(this,arguments)}mn.prototype=new Qe,mn.prototype.constructor=mn,mn.prototype.create=function(){return new fn},mn.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this};var vn=gn;function gn(t,e,n){n=n||{},He.call(this,t,e,He.GEAR,n),this.ratio=void 0!==n.ratio?n.ratio:1,this.angle=void 0!==n.angle?n.angle:e.angle-this.ratio*t.angle,n.angle=this.angle,n.ratio=this.ratio,this.equations=[new qe(t,e,n)],void 0!==n.maxTorque&&this.setMaxTorque(n.maxTorque)}gn.prototype=new He,gn.prototype.constructor=gn,gn.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},gn.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},gn.prototype.getMaxTorque=function(t){return this.equations[0].maxForce};var yn=bn;function bn(t,e){t=t||{},Jt.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}bn.prototype=new Jt,bn.prototype.constructor=bn,bn.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var _n={bodies:[]};bn.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),_n.bodies.length=0,e.getBodies(_n.bodies),_n.bodies.length&&this.solve(t,_n))},bn.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},bn.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},bn.prototype.addEquations=function(t){for(var e=0,n=t.length;e!==n;e++){var r=t[e];r.enabled&&this.equations.push(r)}},bn.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},bn.prototype.removeAllEquations=function(){this.equations.length=0},bn.GS=1,bn.ISLAND=2;var wn=xn;function xn(t){yn.call(this,t,yn.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new at.ARRAY_TYPE(this.arrayStep),this.Bs=new at.ARRAY_TYPE(this.arrayStep),this.invCs=new at.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}xn.prototype=new yn,xn.prototype.constructor=xn,xn.prototype.solve=function(t,e){this.sortEquations();var n=0,r=this.iterations,i=this.frictionIterations,o=this.equations,a=o.length,s=Math.pow(this.tolerance*a,2),u=e.bodies,l=e.bodies.length,c=(ut.add,ut.set,this.useZeroRHS),h=this.lambda;if(this.usedIterations=0,a)for(var f=0;f!==l;f++)u[f].updateSolveMassProperties();h.length<a&&(h=this.lambda=new at.ARRAY_TYPE(a+this.arrayStep),this.Bs=new at.ARRAY_TYPE(a+this.arrayStep),this.invCs=new at.ARRAY_TYPE(a+this.arrayStep)),function(t){for(var e=t.length;e--;)t[e]=0}(h);var d,p,m=this.invCs,v=this.Bs;for(h=this.lambda,f=0;f!==o.length;f++){var g;((g=o[f]).timeStep!==t||g.needsUpdate)&&(g.timeStep=t,g.update()),v[f]=g.computeB(g.a,g.b,t),m[f]=g.computeInvC(g.epsilon)}if(0!==a){for(f=0;f!==l;f++)u[f].resetConstraintVelocity();if(i){for(n=0;n!==i;n++){for(d=0,p=0;p!==a;p++){g=o[p];var y=xn.iterateEquation(p,g,g.epsilon,v,m,h,c,t,n);d+=Math.abs(y)}if(this.usedIterations++,d*d<=s)break}for(xn.updateMultipliers(o,h,1/t),p=0;p!==a;p++){var b=o[p];if(b instanceof fn){for(var _=0,w=0;w!==b.contactEquations.length;w++)_+=b.contactEquations[w].multiplier;_*=b.frictionCoefficient/b.contactEquations.length,b.maxForce=_,b.minForce=-_}}}for(n=0;n!==r;n++){for(d=0,p=0;p!==a;p++)g=o[p],y=xn.iterateEquation(p,g,g.epsilon,v,m,h,c,t,n),d+=Math.abs(y);if(this.usedIterations++,d*d<=s)break}for(f=0;f!==l;f++)u[f].addConstraintVelocity();xn.updateMultipliers(o,h,1/t)}},xn.updateMultipliers=function(t,e,n){for(var r=t.length;r--;)t[r].multiplier=e[r]*n},xn.iterateEquation=function(t,e,n,r,i,o,a,s,u){var l=r[t],c=i[t],h=o[t],f=e.computeGWlambda(),d=e.maxForce,p=e.minForce;a&&(l=0);var m=c*(l-f-n*h),v=h+m;return v<p*s?m=p*s-h:v>d*s&&(m=d*s-h),o[t]+=m,e.addToWlambda(m),m};var Mn=En;function En(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==c(arguments[1]))for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,void 0!==t.maxValue&&void 0!==t.minValue||this.updateMaxMinValues(),t.type=At.HEIGHTFIELD,At.call(this,t)}En.prototype=new At,En.prototype.constructor=En,En.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],n=t[0],r=0;r!==t.length;r++){var i=t[r];i>e&&(e=i),i<n&&(n=i)}this.maxValue=e,this.minValue=n},En.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},En.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},En.prototype.updateArea=function(){for(var t=this.heights,e=0,n=0;n<t.length-1;n++)e+=(t[n]+t[n+1])/2*this.elementWidth;this.area=e};var Sn=[ut.create(),ut.create(),ut.create(),ut.create()];En.prototype.computeAABB=function(t,e,n){ut.set(Sn[0],0,this.maxValue),ut.set(Sn[1],this.elementWidth*this.heights.length,this.maxValue),ut.set(Sn[2],this.elementWidth*this.heights.length,this.minValue),ut.set(Sn[3],0,this.minValue),t.setFromPoints(Sn,e,n)},En.prototype.getLineSegment=function(t,e,n){var r=this.heights,i=this.elementWidth;ut.set(t,n*i,r[n]),ut.set(e,(n+1)*i,r[n+1])},En.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},En.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return Math.min(this.heights.length,Math.max(e,0))},ut.create();var An=ut.create(),Tn=ut.create(),qn=ut.create(),Pn=ut.create(),Ln=ut.create();ut.fromValues(0,1),En.prototype.raycast=function(t,e,n,r){var i=e.from,o=e.to,a=(e.direction,An),s=Tn,u=qn,l=Pn,c=Ln;ut.toLocalFrame(l,i,n,r),ut.toLocalFrame(c,o,n,r);var h=this.getClampedSegmentIndex(l),f=this.getClampedSegmentIndex(c);if(h>f){var d=h;h=f,f=d}for(var p=0;p<this.heights.length-1;p++){this.getLineSegment(s,u,p);var m=ut.getLineSegmentsIntersectionFraction(l,c,s,u);if(m>=0&&(ut.sub(a,u,s),ut.rotate(a,a,r+Math.PI/2),ut.normalize(a,a),e.reportIntersection(t,m,a,-1),t.shouldStop(e)))return}};var On=Cn;function Cn(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=At.LINE,At.call(this,t)}Cn.prototype=new At,Cn.prototype.constructor=Cn,Cn.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},Cn.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var In=[ut.create(),ut.create()];Cn.prototype.computeAABB=function(t,e,n){var r=this.length/2;ut.set(In[0],-r,0),ut.set(In[1],r,0),t.setFromPoints(In,e,n,0)},ut.create();var Rn=ut.create(),kn=ut.create(),Nn=ut.create(),Bn=ut.fromValues(0,1);Cn.prototype.raycast=function(t,e,n,r){var i=e.from,o=e.to,a=kn,s=Nn,u=this.length/2;ut.set(a,-u,0),ut.set(s,u,0),ut.toGlobalFrame(a,a,n,r),ut.toGlobalFrame(s,s,n,r);var l=ut.getLineSegmentsIntersectionFraction(a,s,i,o);if(l>=0){var c=Rn;ut.rotate(c,Bn,r),e.reportIntersection(t,l,c,-1)}};var Dn=jn;function jn(t,e,n){n=n||{},He.call(this,t,e,He.LOCK,n);var r=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce,i=(n.localAngleB,new be(t,e,-r,r)),o=new be(t,e,-r,r),a=new be(t,e,-r,r),s=ut.create(),u=ut.create(),l=this;i.computeGq=function(){return ut.rotate(s,l.localOffsetB,t.angle),ut.sub(u,e.position,t.position),ut.sub(u,u,s),u[0]},o.computeGq=function(){return ut.rotate(s,l.localOffsetB,t.angle),ut.sub(u,e.position,t.position),ut.sub(u,u,s),u[1]};var c=ut.create(),h=ut.create();a.computeGq=function(){return ut.rotate(c,l.localOffsetB,e.angle-l.localAngleB),ut.scale(c,c,-1),ut.sub(u,t.position,e.position),ut.add(u,u,c),ut.rotate(h,c,-Math.PI/2),ut.normalize(h,h),ut.dot(u,h)},this.localOffsetB=ut.create(),n.localOffsetB?ut.copy(this.localOffsetB,n.localOffsetB):(ut.sub(this.localOffsetB,e.position,t.position),ut.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof n.localAngleB?this.localAngleB=n.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(i,o,a),this.setMaxForce(r)}jn.prototype=new He,jn.prototype.constructor=jn,jn.prototype.setMaxForce=function(t){for(var e=this.equations,n=0;n<this.equations.length;n++)e[n].maxForce=t,e[n].minForce=-t},jn.prototype.getMaxForce=function(){return this.equations[0].maxForce};var Fn=ut.create(),zn=ut.create(),Un=ut.create(),Vn=ut.fromValues(1,0),Gn=ut.fromValues(0,1);jn.prototype.update=function(){var t=this.equations[0],e=this.equations[1],n=this.equations[2],r=this.bodyA,i=this.bodyB;ut.rotate(Fn,this.localOffsetB,r.angle),ut.rotate(zn,this.localOffsetB,i.angle-this.localAngleB),ut.scale(zn,zn,-1),ut.rotate(Un,zn,Math.PI/2),ut.normalize(Un,Un),t.G[0]=-1,t.G[1]=0,t.G[2]=-ut.crossLength(Fn,Vn),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-ut.crossLength(Fn,Gn),e.G[4]=1,n.G[0]=-Un[0],n.G[1]=-Un[1],n.G[3]=Un[0],n.G[4]=Un[1],n.G[5]=ut.crossLength(zn,Un)};var Hn=Wn;function Wn(){this.data={},this.keys=[]}Wn.prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},Wn.prototype.getByKey=function(t){return t|=0,this.data[t]},Wn.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},Wn.prototype.set=function(t,e,n){if(!n)throw new Error("No data!");var r=this.getKey(t,e);return this.data[r]||this.keys.push(r),this.data[r]=n,r},Wn.prototype.reset=function(){for(var t=this.data,e=this.keys,n=e.length;n--;)delete t[e[n]];e.length=0},Wn.prototype.copy=function(t){this.reset(),at.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var n=t.keys[e];this.data[n]=t.data[n]}};var Yn=Xn;function Xn(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,n=this.height=t.height||1,r=[ut.fromValues(-e/2,-n/2),ut.fromValues(e/2,-n/2),ut.fromValues(e/2,n/2),ut.fromValues(-e/2,n/2)],i=[ut.fromValues(1,0),ut.fromValues(0,1)];t.vertices=r,t.axes=i,t.type=At.BOX,Lt.call(this,t)}Xn.prototype=new Lt,Xn.prototype.constructor=Xn,Xn.prototype.computeMomentOfInertia=function(t){var e=this.width,n=this.height;return t*(n*n+e*e)/12},Xn.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2},ut.create(),ut.create(),ut.create(),ut.create(),Xn.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)},Xn.prototype.updateArea=function(){this.area=this.width*this.height};var Zn=ut.sub,Jn=ut.add,Kn=ut.dot,Qn=_r,$n=ut.fromValues(0,1),tr=ut.fromValues(0,0),er=ut.fromValues(0,0),nr=ut.fromValues(0,0),rr=ut.fromValues(0,0),or=ut.fromValues(0,0),ar=ut.fromValues(0,0),sr=ut.fromValues(0,0),ur=ut.fromValues(0,0),lr=ut.fromValues(0,0),cr=ut.fromValues(0,0),hr=ut.fromValues(0,0),fr=ut.fromValues(0,0),dr=ut.fromValues(0,0),pr=ut.fromValues(0,0),mr=ut.fromValues(0,0),vr=ut.fromValues(0,0),gr=ut.fromValues(0,0),yr=ut.fromValues(0,0),br=[];function _r(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new tn({size:32}),this.frictionEquationPool=new pn({size:64}),this.restitution=0,this.stiffness=be.DEFAULT_STIFFNESS,this.relaxation=be.DEFAULT_RELAXATION,this.frictionStiffness=be.DEFAULT_STIFFNESS,this.frictionRelaxation=be.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new Hn,this.contactSkinSize=.01}var wr=ut.create(),xr=ut.create();function Mr(t,e){ut.set(t.vertices[0],.5*-e.length,-e.radius),ut.set(t.vertices[1],.5*e.length,-e.radius),ut.set(t.vertices[2],.5*e.length,e.radius),ut.set(t.vertices[3],.5*-e.length,e.radius)}_r.prototype.bodiesOverlap=function(t,e){for(var n=wr,r=xr,i=0,o=t.shapes.length;i!==o;i++){var a=t.shapes[i];t.toWorldFrame(n,a.position);for(var s=0,u=e.shapes.length;s!==u;s++){var l=e.shapes[s];if(e.toWorldFrame(r,l.position),this[a.type|l.type](t,a,n,a.angle+t.angle,e,l,r,l.angle+e.angle,!0))return!0}}return!1},_r.prototype.collidedLastStep=function(t,e){var n=0|t.id,r=0|e.id;return!!this.collidingBodiesLastStep.get(n,r)},_r.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var n=t[e],r=n.bodyA.id,i=n.bodyB.id;this.collidingBodiesLastStep.set(r,i,!0)}for(var o=this.contactEquations,a=this.frictionEquations,s=0;s<o.length;s++)this.contactEquationPool.release(o[s]);for(s=0;s<a.length;s++)this.frictionEquationPool.release(a[s]);this.contactEquations.length=this.frictionEquations.length=0},_r.prototype.createContactEquation=function(t,e,n,r){var i=this.contactEquationPool.get();return i.bodyA=t,i.bodyB=e,i.shapeA=n,i.shapeB=r,i.restitution=this.restitution,i.firstImpact=!this.collidedLastStep(t,e),i.stiffness=this.stiffness,i.relaxation=this.relaxation,i.needsUpdate=!0,i.enabled=this.enabledEquations,i.offset=this.contactSkinSize,i},_r.prototype.createFrictionEquation=function(t,e,n,r){var i=this.frictionEquationPool.get();return i.bodyA=t,i.bodyB=e,i.shapeA=n,i.shapeB=r,i.setSlipForce(this.slipForce),i.frictionCoefficient=this.frictionCoefficient,i.relativeVelocity=this.surfaceVelocity,i.enabled=this.enabledEquations,i.needsUpdate=!0,i.stiffness=this.frictionStiffness,i.relaxation=this.frictionRelaxation,i.contactEquations.length=0,i},_r.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return ut.copy(e.contactPointA,t.contactPointA),ut.copy(e.contactPointB,t.contactPointB),ut.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},_r.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],n=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),r=e.bodyA;e.bodyB,ut.set(n.contactPointA,0,0),ut.set(n.contactPointB,0,0),ut.set(n.t,0,0);for(var i=0;i!==t;i++)(e=this.contactEquations[this.contactEquations.length-1-i]).bodyA===r?(ut.add(n.t,n.t,e.normalA),ut.add(n.contactPointA,n.contactPointA,e.contactPointA),ut.add(n.contactPointB,n.contactPointB,e.contactPointB)):(ut.sub(n.t,n.t,e.normalA),ut.add(n.contactPointA,n.contactPointA,e.contactPointB),ut.add(n.contactPointB,n.contactPointB,e.contactPointA)),n.contactEquations.push(e);var o=1/t;return ut.scale(n.contactPointA,n.contactPointA,o),ut.scale(n.contactPointB,n.contactPointB,o),ut.normalize(n.t,n.t),ut.rotate90cw(n.t,n.t),n},_r.prototype[At.LINE|At.CONVEX]=_r.prototype.convexLine=function(t,e,n,r,i,o,a,s,u){return!u&&0},_r.prototype[At.LINE|At.BOX]=_r.prototype.lineBox=function(t,e,n,r,i,o,a,s,u){return!u&&0};var Er=new Yn({width:1,height:1}),Sr=ut.create();_r.prototype[At.CAPSULE|At.CONVEX]=_r.prototype[At.CAPSULE|At.BOX]=_r.prototype.convexCapsule=function(t,e,n,r,i,o,a,s,u){var l=Sr;ut.set(l,o.length/2,0),ut.rotate(l,l,s),ut.add(l,l,a);var c=this.circleConvex(i,o,l,s,t,e,n,r,u,o.radius);ut.set(l,-o.length/2,0),ut.rotate(l,l,s),ut.add(l,l,a);var h=this.circleConvex(i,o,l,s,t,e,n,r,u,o.radius);if(u&&(c||h))return!0;var f=Er;return Mr(f,o),this.convexConvex(t,e,n,r,i,f,a,s,u)+c+h},_r.prototype[At.CAPSULE|At.LINE]=_r.prototype.lineCapsule=function(t,e,n,r,i,o,a,s,u){return!u&&0};var Ar=ut.create(),Tr=ut.create(),qr=new Yn({width:1,height:1});_r.prototype[At.CAPSULE|At.CAPSULE]=_r.prototype.capsuleCapsule=function(t,e,n,r,i,o,a,s,u){for(var l=Ar,c=Tr,h=0,f=0;f<2;f++){ut.set(l,(0===f?-1:1)*e.length/2,0),ut.rotate(l,l,r),ut.add(l,l,n);for(var d=0;d<2;d++){ut.set(c,(0===d?-1:1)*o.length/2,0),ut.rotate(c,c,s),ut.add(c,c,a),this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var p=this.circleCircle(t,e,l,r,i,o,c,s,u,e.radius,o.radius);if(this.enableFrictionReduction&&(this.enableFriction=g),u&&p)return!0;h+=p}}this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var m=qr;Mr(m,e);var v=this.convexCapsule(t,m,n,r,i,o,a,s,u);if(this.enableFrictionReduction&&(this.enableFriction=g),u&&v)return!0;if(h+=v,this.enableFrictionReduction){var g=this.enableFriction;this.enableFriction=!1}Mr(m,o);var y=this.convexCapsule(i,m,a,s,t,e,n,r,u);return this.enableFrictionReduction&&(this.enableFriction=g),!(!u||!y)||(h+=y,this.enableFrictionReduction&&h&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(h)),h)},_r.prototype[At.LINE|At.LINE]=_r.prototype.lineLine=function(t,e,n,r,i,o,a,s,u){return!u&&0},_r.prototype[At.PLANE|At.LINE]=_r.prototype.planeLine=function(t,e,n,r,i,o,a,s,u){var l=tr,c=er,h=nr,f=rr,d=or,p=ar,m=sr,v=ur,g=lr,y=br,b=0;ut.set(l,-o.length/2,0),ut.set(c,o.length/2,0),ut.rotate(h,l,s),ut.rotate(f,c,s),Jn(h,h,a),Jn(f,f,a),ut.copy(l,h),ut.copy(c,f),Zn(d,c,l),ut.normalize(p,d),ut.rotate90cw(g,p),ut.rotate(v,$n,r),y[0]=l,y[1]=c;for(var _=0;_<y.length;_++){var w=y[_];Zn(m,w,n);var x=Kn(m,v);if(x<0){if(u)return!0;var M=this.createContactEquation(t,i,e,o);b++,ut.copy(M.normalA,v),ut.normalize(M.normalA,M.normalA),ut.scale(m,v,x),Zn(M.contactPointA,w,m),Zn(M.contactPointA,M.contactPointA,t.position),Zn(M.contactPointB,w,a),Jn(M.contactPointB,M.contactPointB,a),Zn(M.contactPointB,M.contactPointB,i.position),this.contactEquations.push(M),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}}return!u&&(this.enableFrictionReduction||b&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(b)),b)},_r.prototype[At.PARTICLE|At.CAPSULE]=_r.prototype.particleCapsule=function(t,e,n,r,i,o,a,s,u){return this.circleLine(t,e,n,r,i,o,a,s,u,o.radius,0)},_r.prototype[At.CIRCLE|At.LINE]=_r.prototype.circleLine=function(t,e,n,r,i,o,a,s,u,l,c){l=l||0,c=void 0!==c?c:e.radius;var h=tr,f=er,d=nr,p=rr,m=or,v=ar,g=sr,y=ur,b=lr,_=cr,w=hr,x=fr,M=dr,E=pr,S=br;ut.set(y,-o.length/2,0),ut.set(b,o.length/2,0),ut.rotate(_,y,s),ut.rotate(w,b,s),Jn(_,_,a),Jn(w,w,a),ut.copy(y,_),ut.copy(b,w),Zn(v,b,y),ut.normalize(g,v),ut.rotate90cw(m,g),Zn(x,n,y);var A=Kn(x,m);Zn(p,y,a),Zn(M,n,a);var T=c+l;if(Math.abs(A)<T){ut.scale(h,m,A),Zn(d,n,h),ut.scale(f,m,Kn(m,M)),ut.normalize(f,f),ut.scale(f,f,l),Jn(d,d,f);var q=Kn(g,d),P=Kn(g,y),L=Kn(g,b);if(q>P&&q<L){if(u)return!0;var O=this.createContactEquation(t,i,e,o);return ut.scale(O.normalA,h,-1),ut.normalize(O.normalA,O.normalA),ut.scale(O.contactPointA,O.normalA,c),Jn(O.contactPointA,O.contactPointA,n),Zn(O.contactPointA,O.contactPointA,t.position),Zn(O.contactPointB,d,a),Jn(O.contactPointB,O.contactPointB,a),Zn(O.contactPointB,O.contactPointB,i.position),this.contactEquations.push(O),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O)),1}}S[0]=y,S[1]=b;for(var C=0;C<S.length;C++){var I=S[C];if(Zn(x,I,n),ut.squaredLength(x)<Math.pow(T,2))return!!u||(O=this.createContactEquation(t,i,e,o),ut.copy(O.normalA,x),ut.normalize(O.normalA,O.normalA),ut.scale(O.contactPointA,O.normalA,c),Jn(O.contactPointA,O.contactPointA,n),Zn(O.contactPointA,O.contactPointA,t.position),Zn(O.contactPointB,I,a),ut.scale(E,O.normalA,-l),Jn(O.contactPointB,O.contactPointB,E),Jn(O.contactPointB,O.contactPointB,a),Zn(O.contactPointB,O.contactPointB,i.position),this.contactEquations.push(O),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O)),1)}return 0},_r.prototype[At.CIRCLE|At.CAPSULE]=_r.prototype.circleCapsule=function(t,e,n,r,i,o,a,s,u){return this.circleLine(t,e,n,r,i,o,a,s,u,o.radius)},_r.prototype[At.CIRCLE|At.CONVEX]=_r.prototype[At.CIRCLE|At.BOX]=_r.prototype.circleConvex=function(t,e,n,r,i,o,a,s,u,l){l="number"==typeof l?l:e.radius;for(var c=tr,h=er,f=nr,d=rr,p=or,m=cr,v=hr,g=dr,y=pr,b=mr,_=vr,w=!1,x=Number.MAX_VALUE,M=o.vertices,E=0;E!==M.length+1;E++){var S=M[E%M.length],A=M[(E+1)%M.length];if(ut.rotate(c,S,s),ut.rotate(h,A,s),Jn(c,c,a),Jn(h,h,a),Zn(f,h,c),ut.normalize(d,f),ut.rotate90cw(p,d),ut.scale(y,p,-e.radius),Jn(y,y,n),Ir(y,o,a,s)){ut.sub(b,c,y);var T=Math.abs(ut.dot(b,p));T<x&&(ut.copy(_,y),x=T,ut.scale(g,p,T),ut.add(g,g,y),w=!0)}}if(w){if(u)return!0;var q=this.createContactEquation(t,i,e,o);return ut.sub(q.normalA,_,n),ut.normalize(q.normalA,q.normalA),ut.scale(q.contactPointA,q.normalA,l),Jn(q.contactPointA,q.contactPointA,n),Zn(q.contactPointA,q.contactPointA,t.position),Zn(q.contactPointB,g,a),Jn(q.contactPointB,q.contactPointB,a),Zn(q.contactPointB,q.contactPointB,i.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1}if(l>0)for(E=0;E<M.length;E++){var P=M[E];if(ut.rotate(v,P,s),Jn(v,v,a),Zn(m,v,n),ut.squaredLength(m)<Math.pow(l,2))return!!u||(q=this.createContactEquation(t,i,e,o),ut.copy(q.normalA,m),ut.normalize(q.normalA,q.normalA),ut.scale(q.contactPointA,q.normalA,l),Jn(q.contactPointA,q.contactPointA,n),Zn(q.contactPointA,q.contactPointA,t.position),Zn(q.contactPointB,v,a),Jn(q.contactPointB,q.contactPointB,a),Zn(q.contactPointB,q.contactPointB,i.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1)}return 0};var Pr=ut.create(),Lr=ut.create(),Or=ut.create(),Cr=ut.create();function Ir(t,e,n,r){for(var i=Pr,o=Lr,a=Or,s=Cr,u=t,l=e.vertices,c=null,h=0;h!==l.length+1;h++){var f=l[h%l.length],d=l[(h+1)%l.length];ut.rotate(i,f,r),ut.rotate(o,d,r),Jn(i,i,n),Jn(o,o,n),Zn(a,i,u),Zn(s,o,u);var p=ut.crossLength(a,s);if(null===c&&(c=p),p*c<=0)return!1;c=p}return!0}_r.prototype[At.PARTICLE|At.CONVEX]=_r.prototype[At.PARTICLE|At.BOX]=_r.prototype.particleConvex=function(t,e,n,r,i,o,a,s,u){var l=tr,c=er,h=nr,f=rr,d=or,p=ar,m=sr,v=cr,g=dr,y=gr,b=yr,_=Number.MAX_VALUE,w=!1,x=o.vertices;if(!Ir(n,o,a,s))return 0;if(u)return!0;for(var M=0;M!==x.length+1;M++){var E=x[M%x.length],S=x[(M+1)%x.length];ut.rotate(l,E,s),ut.rotate(c,S,s),Jn(l,l,a),Jn(c,c,a),Zn(h,c,l),ut.normalize(f,h),ut.rotate90cw(d,f),Zn(v,n,l),Kn(v,d),Zn(p,l,a),Zn(m,n,a),ut.sub(y,l,n);var A=Math.abs(ut.dot(y,d));A<_&&(_=A,ut.scale(g,d,A),ut.add(g,g,n),ut.copy(b,d),w=!0)}if(w){var T=this.createContactEquation(t,i,e,o);return ut.scale(T.normalA,b,-1),ut.normalize(T.normalA,T.normalA),ut.set(T.contactPointA,0,0),Jn(T.contactPointA,T.contactPointA,n),Zn(T.contactPointA,T.contactPointA,t.position),Zn(T.contactPointB,g,a),Jn(T.contactPointB,T.contactPointB,a),Zn(T.contactPointB,T.contactPointB,i.position),this.contactEquations.push(T),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(T)),1}return 0},_r.prototype[At.CIRCLE]=_r.prototype.circleCircle=function(t,e,n,r,i,o,a,s,u,l,c){var h=tr;l=l||e.radius,c=c||o.radius,Zn(h,n,a);var f=l+c;if(ut.squaredLength(h)>Math.pow(f,2))return 0;if(u)return!0;var d=this.createContactEquation(t,i,e,o);return Zn(d.normalA,a,n),ut.normalize(d.normalA,d.normalA),ut.scale(d.contactPointA,d.normalA,l),ut.scale(d.contactPointB,d.normalA,-c),Jn(d.contactPointA,d.contactPointA,n),Zn(d.contactPointA,d.contactPointA,t.position),Jn(d.contactPointB,d.contactPointB,a),Zn(d.contactPointB,d.contactPointB,i.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1},_r.prototype[At.PLANE|At.CONVEX]=_r.prototype[At.PLANE|At.BOX]=_r.prototype.planeConvex=function(t,e,n,r,i,o,a,s,u){var l=tr,c=er,h=nr,f=0;ut.rotate(c,$n,r);for(var d=0;d!==o.vertices.length;d++){var p=o.vertices[d];if(ut.rotate(l,p,s),Jn(l,l,a),Zn(h,l,n),Kn(h,c)<=0){if(u)return!0;f++;var m=this.createContactEquation(t,i,e,o);Zn(h,l,n),ut.copy(m.normalA,c);var v=Kn(h,m.normalA);ut.scale(h,m.normalA,v),Zn(m.contactPointB,l,i.position),Zn(m.contactPointA,l,h),Zn(m.contactPointA,m.contactPointA,t.position),this.contactEquations.push(m),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m))}}return this.enableFrictionReduction&&this.enableFriction&&f&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f},_r.prototype[At.PARTICLE|At.PLANE]=_r.prototype.particlePlane=function(t,e,n,r,i,o,a,s,u){var l=tr,c=er;s=s||0,Zn(l,n,a),ut.rotate(c,$n,s);var h=Kn(l,c);if(h>0)return 0;if(u)return!0;var f=this.createContactEquation(i,t,o,e);return ut.copy(f.normalA,c),ut.scale(l,f.normalA,h),Zn(f.contactPointA,n,l),Zn(f.contactPointA,f.contactPointA,i.position),Zn(f.contactPointB,n,t.position),this.contactEquations.push(f),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(f)),1},_r.prototype[At.CIRCLE|At.PARTICLE]=_r.prototype.circleParticle=function(t,e,n,r,i,o,a,s,u){var l=tr;if(Zn(l,a,n),ut.squaredLength(l)>Math.pow(e.radius,2))return 0;if(u)return!0;var c=this.createContactEquation(t,i,e,o);return ut.copy(c.normalA,l),ut.normalize(c.normalA,c.normalA),ut.scale(c.contactPointA,c.normalA,e.radius),Jn(c.contactPointA,c.contactPointA,n),Zn(c.contactPointA,c.contactPointA,t.position),Zn(c.contactPointB,a,i.position),this.contactEquations.push(c),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(c)),1};var Rr=new ze({radius:1}),kr=ut.create(),Nr=ut.create();ut.create(),_r.prototype[At.PLANE|At.CAPSULE]=_r.prototype.planeCapsule=function(t,e,n,r,i,o,a,s,u){var l,c=kr,h=Nr,f=Rr;ut.set(c,-o.length/2,0),ut.rotate(c,c,s),Jn(c,c,a),ut.set(h,o.length/2,0),ut.rotate(h,h,s),Jn(h,h,a),f.radius=o.radius,this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var d=this.circlePlane(i,f,c,0,t,e,n,r,u),p=this.circlePlane(i,f,h,0,t,e,n,r,u);if(this.enableFrictionReduction&&(this.enableFriction=l),u)return d||p;var m=d+p;return this.enableFrictionReduction&&m&&this.frictionEquations.push(this.createFrictionFromAverage(m)),m},_r.prototype[At.CIRCLE|At.PLANE]=_r.prototype.circlePlane=function(t,e,n,r,i,o,a,s,u){var l=t,c=e,h=n,f=i,d=a,p=s;p=p||0;var m=tr,v=er,g=nr;Zn(m,h,d),ut.rotate(v,$n,p);var y=Kn(v,m);if(y>c.radius)return 0;if(u)return!0;var b=this.createContactEquation(f,l,o,e);return ut.copy(b.normalA,v),ut.scale(b.contactPointB,b.normalA,-c.radius),Jn(b.contactPointB,b.contactPointB,h),Zn(b.contactPointB,b.contactPointB,l.position),ut.scale(g,b.normalA,y),Zn(b.contactPointA,m,g),Jn(b.contactPointA,b.contactPointA,d),Zn(b.contactPointA,b.contactPointA,f.position),this.contactEquations.push(b),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b)),1},_r.prototype[At.CONVEX]=_r.prototype[At.CONVEX|At.BOX]=_r.prototype[At.BOX]=_r.prototype.convexConvex=function(t,e,n,r,i,o,a,s,u,l){var c=tr,h=er,f=nr,d=rr,p=or,m=sr,v=ur,g=lr,y=0;if(l="number"==typeof l?l:0,!_r.findSeparatingAxis(e,n,r,o,a,s,c))return 0;Zn(v,a,n),Kn(c,v)>0&&ut.scale(c,c,-1);var b=_r.getClosestEdge(e,r,c,!0),_=_r.getClosestEdge(o,s,c);if(-1===b||-1===_)return 0;for(var w=0;w<2;w++){var x,M=b,E=_,S=e,A=o,T=n,q=a,P=r,L=s,O=t,C=i;0===w&&(x=M,M=E,E=x,x=S,S=A,A=x,x=T,T=q,q=x,x=P,P=L,L=x,x=O,O=C,C=x);for(var I=E;I<E+2;I++){var R=A.vertices[(I+A.vertices.length)%A.vertices.length];ut.rotate(h,R,L),Jn(h,h,q);for(var k=0,N=M-1;N<M+2;N++){var B=S.vertices[(N+S.vertices.length)%S.vertices.length],D=S.vertices[(N+1+S.vertices.length)%S.vertices.length];ut.rotate(f,B,P),ut.rotate(d,D,P),Jn(f,f,T),Jn(d,d,T),Zn(p,d,f),ut.rotate90cw(g,p),ut.normalize(g,g),Zn(v,h,f);var j=Kn(g,v);(N===M&&j<=l||N!==M&&j<=0)&&k++}if(k>=3){if(u)return!0;var F=this.createContactEquation(O,C,S,A);y++,B=S.vertices[M%S.vertices.length],D=S.vertices[(M+1)%S.vertices.length],ut.rotate(f,B,P),ut.rotate(d,D,P),Jn(f,f,T),Jn(d,d,T),Zn(p,d,f),ut.rotate90cw(F.normalA,p),ut.normalize(F.normalA,F.normalA),Zn(v,h,f),j=Kn(F.normalA,v),ut.scale(m,F.normalA,j),Zn(F.contactPointA,h,T),Zn(F.contactPointA,F.contactPointA,m),Jn(F.contactPointA,F.contactPointA,T),Zn(F.contactPointA,F.contactPointA,O.position),Zn(F.contactPointB,h,q),Jn(F.contactPointB,F.contactPointB,q),Zn(F.contactPointB,F.contactPointB,C.position),this.contactEquations.push(F),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(F))}}}return this.enableFrictionReduction&&this.enableFriction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y};var Br=ut.fromValues(0,0);_r.projectConvexOntoAxis=function(t,e,n,r,i){var o,a,s=null,u=null,l=Br;ut.rotate(l,r,-n);for(var c=0;c<t.vertices.length;c++)o=t.vertices[c],a=Kn(o,l),(null===s||a>s)&&(s=a),(null===u||a<u)&&(u=a);if(u>s){var h=u;u=s,s=h}var f=Kn(e,r);ut.set(i,u+f,s+f)};var Dr=ut.fromValues(0,0),jr=ut.fromValues(0,0),Fr=ut.fromValues(0,0),zr=ut.fromValues(0,0),Ur=ut.fromValues(0,0),Vr=ut.fromValues(0,0);_r.findSeparatingAxis=function(t,e,n,r,i,o,a){var s=null,u=!1,l=!1,c=Dr,h=jr,f=Fr,d=zr,p=Ur,m=Vr;if(t instanceof Yn&&r instanceof Yn)for(var v=0;2!==v;v++){var g=t,y=n;1===v&&(g=r,y=o);for(var b=0;2!==b;b++){0===b?ut.set(d,0,1):1===b&&ut.set(d,1,0),0!==y&&ut.rotate(d,d,y),_r.projectConvexOntoAxis(t,e,n,d,p),_r.projectConvexOntoAxis(r,i,o,d,m);var _=p,w=m;p[0]>m[0]&&(w=p,_=m),u=(x=w[0]-_[1])<=0,(null===s||x>s)&&(ut.copy(a,d),s=x,l=u)}}else for(v=0;2!==v;v++)for(g=t,y=n,1===v&&(g=r,y=o),b=0;b!==g.vertices.length;b++){var x;ut.rotate(h,g.vertices[b],y),ut.rotate(f,g.vertices[(b+1)%g.vertices.length],y),Zn(c,f,h),ut.rotate90cw(d,c),ut.normalize(d,d),_r.projectConvexOntoAxis(t,e,n,d,p),_r.projectConvexOntoAxis(r,i,o,d,m),_=p,w=m,p[0]>m[0]&&(w=p,_=m),u=(x=w[0]-_[1])<=0,(null===s||x>s)&&(ut.copy(a,d),s=x,l=u)}return l};var Gr=ut.fromValues(0,0),Hr=ut.fromValues(0,0),Wr=ut.fromValues(0,0);_r.getClosestEdge=function(t,e,n,r){var i=Gr,o=Hr,a=Wr;ut.rotate(i,n,-e),r&&ut.scale(i,i,-1);for(var s=-1,u=t.vertices.length,l=-1,c=0;c!==u;c++){Zn(o,t.vertices[(c+1)%u],t.vertices[c%u]),ut.rotate90cw(a,o),ut.normalize(a,a);var h=Kn(a,i);(-1===s||h>l)&&(s=c%u,l=h)}return s};var Yr=ut.create(),Xr=ut.create(),Zr=ut.create(),Jr=ut.create(),Kr=ut.create(),Qr=ut.create(),$r=ut.create();_r.prototype[At.CIRCLE|At.HEIGHTFIELD]=_r.prototype.circleHeightfield=function(t,e,n,r,i,o,a,s,u,l){var c=o.heights,h=(l=l||e.radius,o.elementWidth),f=Xr,d=Yr,p=Kr,m=$r,v=Qr,g=Zr,y=Jr,b=Math.floor((n[0]-l-a[0])/h),_=Math.ceil((n[0]+l-a[0])/h);b<0&&(b=0),_>=c.length&&(_=c.length-1);for(var w=c[b],x=c[_],M=b;M<_;M++)c[M]<x&&(x=c[M]),c[M]>w&&(w=c[M]);if(n[1]-l>w)return!u&&0;var E=!1;for(M=b;M<_;M++){ut.set(g,M*h,c[M]),ut.set(y,(M+1)*h,c[M+1]),ut.add(g,g,a),ut.add(y,y,a),ut.sub(v,y,g),ut.rotate(v,v,Math.PI/2),ut.normalize(v,v),ut.scale(d,v,-l),ut.add(d,d,n),ut.sub(f,d,g);var S=ut.dot(f,v);if(d[0]>=g[0]&&d[0]<y[0]&&S<=0){if(u)return!0;E=!0,ut.scale(f,v,-S),ut.add(p,d,f),ut.copy(m,v);var A=this.createContactEquation(i,t,o,e);ut.copy(A.normalA,m),ut.scale(A.contactPointB,A.normalA,-l),Jn(A.contactPointB,A.contactPointB,n),Zn(A.contactPointB,A.contactPointB,t.position),ut.copy(A.contactPointA,p),ut.sub(A.contactPointA,A.contactPointA,i.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A))}}if(E=!1,l>0)for(M=b;M<=_;M++)if(ut.set(g,M*h,c[M]),ut.add(g,g,a),ut.sub(f,n,g),ut.squaredLength(f)<Math.pow(l,2)){if(u)return!0;E=!0,A=this.createContactEquation(i,t,o,e),ut.copy(A.normalA,f),ut.normalize(A.normalA,A.normalA),ut.scale(A.contactPointB,A.normalA,-l),Jn(A.contactPointB,A.contactPointB,n),Zn(A.contactPointB,A.contactPointB,t.position),Zn(A.contactPointA,g,a),Jn(A.contactPointA,A.contactPointA,a),Zn(A.contactPointA,A.contactPointA,i.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A))}return E?1:0};var ti=ut.create(),ei=ut.create(),ni=ut.create(),ri=new Lt({vertices:[ut.create(),ut.create(),ut.create(),ut.create()]});_r.prototype[At.BOX|At.HEIGHTFIELD]=_r.prototype[At.CONVEX|At.HEIGHTFIELD]=_r.prototype.convexHeightfield=function(t,e,n,r,i,o,a,s,u){var l=o.heights,c=o.elementWidth,h=ti,f=ei,d=ni,p=ri,m=Math.floor((t.aabb.lowerBound[0]-a[0])/c),v=Math.ceil((t.aabb.upperBound[0]-a[0])/c);m<0&&(m=0),v>=l.length&&(v=l.length-1);for(var g=l[m],y=l[v],b=m;b<v;b++)l[b]<y&&(y=l[b]),l[b]>g&&(g=l[b]);if(t.aabb.lowerBound[1]>g)return!u&&0;var _=0;for(b=m;b<v;b++)ut.set(h,b*c,l[b]),ut.set(f,(b+1)*c,l[b+1]),ut.add(h,h,a),ut.add(f,f,a),ut.set(d,.5*(f[0]+h[0]),.5*(f[1]+h[1]-100)),ut.sub(p.vertices[0],f,d),ut.sub(p.vertices[1],h,d),ut.copy(p.vertices[2],p.vertices[1]),ut.copy(p.vertices[3],p.vertices[0]),p.vertices[2][1]-=100,p.vertices[3][1]-=100,_+=this.convexConvex(t,e,n,r,i,p,d,0,u);return _};var ii=oi;function oi(t){(t=t||{}).type=At.PLANE,At.call(this,t)}oi.prototype=new At,oi.prototype.constructor=oi,oi.prototype.computeMomentOfInertia=function(t){return 0},oi.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},oi.prototype.computeAABB=function(t,e,n){var r=n%(2*Math.PI),i=ut.set,o=t.lowerBound,a=t.upperBound;i(o,-1e7,-1e7),i(a,1e7,1e7),0===r?a[1]=0:r===Math.PI/2?o[0]=0:r===Math.PI?o[1]=0:r===3*Math.PI/2&&(a[0]=0)},oi.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var ai=ut.create(),si=(ut.create(),ut.create(),ut.create()),ui=ut.create();oi.prototype.raycast=function(t,e,n,r){var i=e.from,o=e.to,a=e.direction,s=ai,u=si,l=ui;ut.set(u,0,1),ut.rotate(u,u,r),ut.sub(l,i,n);var c=ut.dot(l,u);if(ut.sub(l,o,n),!(c*ut.dot(l,u)>0||ut.squaredDistance(i,o)<c*c)){var h=ut.dot(u,a);ut.sub(s,i,n);var f=-ut.dot(u,s)/h/e.length;e.reportIntersection(t,f,u,-1)}};var li=ci;function ci(t){(t=t||{}).type=At.PARTICLE,At.call(this,t)}ci.prototype=new At,ci.prototype.constructor=ci,ci.prototype.computeMomentOfInertia=function(t){return 0},ci.prototype.updateBoundingRadius=function(){this.boundingRadius=0},ci.prototype.computeAABB=function(t,e,n){ut.copy(t.lowerBound,e),ut.copy(t.upperBound,e)};var hi=fi;function fi(){Le.call(this,Le.NAIVE)}fi.prototype=new Le,fi.prototype.constructor=fi,fi.prototype.getCollisionPairs=function(t){var e=t.bodies,n=this.result;n.length=0;for(var r=0,i=e.length;r!==i;r++)for(var o=e[r],a=0;a<r;a++){var s=e[a];Le.canCollide(o,s)&&this.boundingVolumeCheck(o,s)&&n.push(o,s)}return n},fi.prototype.aabbQuery=function(t,e,n){n=n||[];for(var r=t.bodies,i=0;i<r.length;i++){var o=r[i];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(e)&&n.push(o)}return n};var di=pi;function pi(t,e){be.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}pi.prototype=new be,pi.prototype.constructor=pi,pi.prototype.computeB=function(t,e,n){var r=this.G;r[2]=-1,r[5]=this.ratio;var i=this.computeGiMf();return-this.computeGW()*e-n*i};var mi=vi;function vi(t,e,n){n=n||{},be.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0;var r=this.G;r[2]=1,r[5]=-1}vi.prototype=new be,vi.prototype.constructor=vi;var gi=ut.create(),yi=ut.create(),bi=ut.fromValues(1,0),_i=ut.fromValues(0,1);vi.prototype.computeGq=function(){return ut.rotate(gi,bi,this.bodyA.angle+this.angle),ut.rotate(yi,_i,this.bodyB.angle),ut.dot(gi,yi)};var wi=Ti,xi=ut.create(),Mi=ut.create(),Ei=ut.fromValues(1,0),Si=ut.fromValues(0,1),Ai=ut.create();function Ti(t,e,n){n=n||{},He.call(this,t,e,He.REVOLUTE,n);var r=this.maxForce=void 0!==n.maxForce?n.maxForce:Number.MAX_VALUE;this.pivotA=ut.create(),this.pivotB=ut.create(),n.worldPivot?(ut.sub(this.pivotA,n.worldPivot,t.position),ut.sub(this.pivotB,n.worldPivot,e.position),ut.rotate(this.pivotA,this.pivotA,-t.angle),ut.rotate(this.pivotB,this.pivotB,-e.angle)):(ut.copy(this.pivotA,n.localPivotA),ut.copy(this.pivotB,n.localPivotB));var i=this.equations=[new be(t,e,-r,r),new be(t,e,-r,r)],o=i[0],a=i[1],s=this;o.computeGq=function(){return ut.rotate(xi,s.pivotA,t.angle),ut.rotate(Mi,s.pivotB,e.angle),ut.add(Ai,e.position,Mi),ut.sub(Ai,Ai,t.position),ut.sub(Ai,Ai,xi),ut.dot(Ai,Ei)},a.computeGq=function(){return ut.rotate(xi,s.pivotA,t.angle),ut.rotate(Mi,s.pivotB,e.angle),ut.add(Ai,e.position,Mi),ut.sub(Ai,Ai,t.position),ut.sub(Ai,Ai,xi),ut.dot(Ai,Si)},a.minForce=o.minForce=-r,a.maxForce=o.maxForce=r,this.motorEquation=new di(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new mi(t,e),this.lowerLimitEquation=new mi(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}Ti.prototype=new He,Ti.prototype.constructor=Ti,Ti.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},Ti.prototype.update=function(){var t,e=this.bodyA,n=this.bodyB,r=this.pivotA,i=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),s=o[1],u=this.upperLimit,l=this.lowerLimit,c=this.upperLimitEquation,h=this.lowerLimitEquation,f=this.angle=n.angle-e.angle;this.upperLimitEnabled&&f>u?(c.angle=u,-1===o.indexOf(c)&&o.push(c)):-1!==(t=o.indexOf(c))&&o.splice(t,1),this.lowerLimitEnabled&&f<l?(h.angle=l,-1===o.indexOf(h)&&o.push(h)):-1!==(t=o.indexOf(h))&&o.splice(t,1),ut.rotate(xi,r,e.angle),ut.rotate(Mi,i,n.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-ut.crossLength(xi,Ei),a.G[3]=1,a.G[4]=0,a.G[5]=ut.crossLength(Mi,Ei),s.G[0]=0,s.G[1]=-1,s.G[2]=-ut.crossLength(xi,Si),s.G[3]=0,s.G[4]=1,s.G[5]=ut.crossLength(Mi,Si)},Ti.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},Ti.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},Ti.prototype.motorIsEnabled=function(){return!!this.motorEnabled},Ti.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},Ti.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity};var qi=Pi;function Pi(t,e,n){n=n||{},He.call(this,t,e,He.PRISMATIC,n);var r=ut.fromValues(0,0),i=ut.fromValues(1,0),o=ut.fromValues(0,0);n.localAnchorA&&ut.copy(r,n.localAnchorA),n.localAxisA&&ut.copy(i,n.localAxisA),n.localAnchorB&&ut.copy(o,n.localAnchorB),this.localAnchorA=r,this.localAnchorB=o,this.localAxisA=i;var a=this.maxForce=void 0!==n.maxForce?n.maxForce:Number.MAX_VALUE,s=new be(t,e,-a,a),u=new ut.create,l=new ut.create,c=new ut.create,h=new ut.create;if(s.computeGq=function(){return ut.dot(c,h)},s.updateJacobian=function(){var n=this.G,a=t.position,s=e.position;ut.rotate(u,r,t.angle),ut.rotate(l,o,e.angle),ut.add(c,s,l),ut.sub(c,c,a),ut.sub(c,c,u),ut.rotate(h,i,t.angle+Math.PI/2),n[0]=-h[0],n[1]=-h[1],n[2]=-ut.crossLength(u,h)+ut.crossLength(h,c),n[3]=h[0],n[4]=h[1],n[5]=ut.crossLength(l,h)},this.equations.push(s),!n.disableRotationalLock){var f=new mi(t,e,-a,a);this.equations.push(f)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==n.lowerLimit,this.upperLimitEnabled=void 0!==n.upperLimit,this.lowerLimit=void 0!==n.lowerLimit?n.lowerLimit:0,this.upperLimit=void 0!==n.upperLimit?n.upperLimit:1,this.upperLimitEquation=new Ye(t,e),this.lowerLimitEquation=new Ye(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=a,this.motorEquation=new be(t,e),this.motorEnabled=!1,this.motorSpeed=0;var d=this,p=this.motorEquation;p.computeGW,p.computeGq=function(){return 0},p.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.velocity,i=n.velocity,o=e.angularVelocity,a=n.angularVelocity;return this.gmult(t,r,o,i,a)+d.motorSpeed}}Pi.prototype=new He,Pi.prototype.constructor=Pi;var Li=ut.create(),Oi=ut.create(),Ci=ut.create(),Ii=ut.create(),Ri=ut.create(),ki=ut.create();Pi.prototype.update=function(){var t=this.equations,e=t[0],n=this.upperLimit,r=this.lowerLimit,i=this.upperLimitEquation,o=this.lowerLimitEquation,a=this.bodyA,s=this.bodyB,u=this.localAxisA,l=this.localAnchorA,c=this.localAnchorB;e.updateJacobian(),ut.rotate(Li,u,a.angle),ut.rotate(Ii,l,a.angle),ut.add(Oi,Ii,a.position),ut.rotate(Ri,c,s.angle),ut.add(Ci,Ri,s.position);var h,f=this.position=ut.dot(Ci,Li)-ut.dot(Oi,Li);if(this.motorEnabled){var d=this.motorEquation.G;d[0]=Li[0],d[1]=Li[1],d[2]=ut.crossLength(Li,Ri),d[3]=-Li[0],d[4]=-Li[1],d[5]=-ut.crossLength(Li,Ii)}this.upperLimitEnabled&&f>n?(ut.scale(i.normalA,Li,-1),ut.sub(i.contactPointA,Oi,a.position),ut.sub(i.contactPointB,Ci,s.position),ut.scale(ki,Li,n),ut.add(i.contactPointA,i.contactPointA,ki),-1===t.indexOf(i)&&t.push(i)):-1!==(h=t.indexOf(i))&&t.splice(h,1),this.lowerLimitEnabled&&f<r?(ut.scale(o.normalA,Li,1),ut.sub(o.contactPointA,Oi,a.position),ut.sub(o.contactPointB,Ci,s.position),ut.scale(ki,Li,r),ut.sub(o.contactPointB,o.contactPointB,ki),-1===t.indexOf(o)&&t.push(o)):-1!==(h=t.indexOf(o))&&t.splice(h,1)},Pi.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},Pi.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},Pi.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)};var Ni=Bi;function Bi(){Le.call(this,Le.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var n=t.axisList.indexOf(e.body);-1!==n&&t.axisList.splice(n,1)}}Bi.prototype=new Le,Bi.prototype.constructor=Bi,Bi.prototype.setWorld=function(t){this.axisList.length=0,at.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},Bi.sortAxisList=function(t,e){e|=0;for(var n=1,r=t.length;n<r;n++){for(var i=t[n],o=n-1;o>=0&&!(t[o].aabb.lowerBound[e]<=i.aabb.lowerBound[e]);o--)t[o+1]=t[o];t[o+1]=i}return t},Bi.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;Bi.sortAxisList(t,e)},Bi.prototype.getCollisionPairs=function(t){var e=this.axisList,n=this.result,r=this.axisIndex;n.length=0;for(var i=e.length;i--;){var o=e[i];o.aabbNeedsUpdate&&o.updateAABB()}this.sortList();for(var a=0,s=0|e.length;a!==s;a++)for(var u=e[a],l=a+1;l<s;l++){var c=e[l];if(!(c.aabb.lowerBound[r]<=u.aabb.upperBound[r]))break;Le.canCollide(u,c)&&this.boundingVolumeCheck(u,c)&&n.push(u,c)}return n},Bi.prototype.aabbQuery=function(t,e,n){n=n||[],this.sortList();var r=this.axisIndex,i="x";1===r&&(i="y"),2===r&&(i="z");for(var o=this.axisList,a=(e.lowerBound[i],e.upperBound[i],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(e)&&n.push(s)}return n};var Di=ji;function ji(t,e,n){n=at.defaults(n,{stiffness:100,damping:1}),this.stiffness=n.stiffness,this.damping=n.damping,this.bodyA=t,this.bodyB=e}ji.prototype.applyForce=function(){};var Fi=zi;function zi(t,e){this.chassisBody=t,this.wheels=[],this.groundBody=new Kt({mass:0}),this.world=null;var n=this;this.preStepCallback=function(){n.update()}}function Ui(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new fn(t.chassisBody,t.groundBody),this.sideEquation=new fn(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=ut.fromValues(0,1),e.localForwardVector&&ut.copy(this.localForwardVector,e.localForwardVector),this.localPosition=ut.fromValues(0,0),e.localPosition&&ut.copy(this.localPosition,e.localPosition),He.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}zi.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.addConstraint(n)}},zi.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.removeConstraint(n)}this.world=null},zi.prototype.addWheel=function(t){var e=new Ui(this,t);return this.wheels.push(e),e},zi.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},Ui.prototype=new He,Ui.prototype.setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},Ui.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var Vi=ut.create(),Gi=ut.create();Ui.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(Gi,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(Vi,Gi),ut.dot(Vi,Gi)};var Hi=ut.create();Ui.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),ut.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),ut.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),ut.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),ut.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),ut.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),ut.normalize(Hi,this.forwardEquation.t),ut.scale(Hi,Hi,this.engineForce),this.vehicle.chassisBody.applyForce(Hi,this.forwardEquation.contactPointA)};var Wi=Yi;function Yi(t,e,n){n=n||{},Di.call(this,t,e,n),this.localAnchorA=ut.fromValues(0,0),this.localAnchorB=ut.fromValues(0,0),n.localAnchorA&&ut.copy(this.localAnchorA,n.localAnchorA),n.localAnchorB&&ut.copy(this.localAnchorB,n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB);var r=ut.create(),i=ut.create();this.getWorldAnchorA(r),this.getWorldAnchorB(i);var o=ut.distance(r,i);this.restLength="number"==typeof n.restLength?n.restLength:o}Yi.prototype=new Di,Yi.prototype.constructor=Yi,Yi.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},Yi.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},Yi.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},Yi.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var Xi=ut.create(),Zi=ut.create(),Ji=ut.create(),Ki=ut.create(),Qi=ut.create(),$i=ut.create(),to=ut.create(),eo=ut.create(),no=ut.create();Yi.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restLength,r=this.bodyA,i=this.bodyB,o=Xi,a=Zi,s=Ji,u=Ki,l=no,c=Qi,h=$i,f=to,d=eo;this.getWorldAnchorA(c),this.getWorldAnchorB(h),ut.sub(f,c,r.position),ut.sub(d,h,i.position),ut.sub(o,h,c);var p=ut.len(o);ut.normalize(a,o),ut.sub(s,i.velocity,r.velocity),ut.crossZV(l,i.angularVelocity,d),ut.add(s,s,l),ut.crossZV(l,r.angularVelocity,f),ut.sub(s,s,l),ut.scale(u,a,-t*(p-n)-e*ut.dot(s,a)),ut.sub(r.force,r.force,u),ut.add(i.force,i.force,u);var m=ut.crossLength(f,u),v=ut.crossLength(d,u);r.angularForce-=m,i.angularForce+=v};var ro=io;function io(t,e,n){n=n||{},Di.call(this,t,e,n),this.restAngle="number"==typeof n.restAngle?n.restAngle:e.angle-t.angle}io.prototype=new Di,io.prototype.constructor=io,io.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restAngle,r=this.bodyA,i=this.bodyB,o=-t*(i.angle-r.angle-n)-e*(i.angularVelocity-r.angularVelocity)*0;r.angularForce-=o,i.angularForce+=o};var oo="Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",ao=["p2.js","p2","physics","engine","2d"],so={node:"*"},uo={type:"git",url:"https://github.com/schteppe/p2.js.git"},lo={url:"https://github.com/schteppe/p2.js/issues"},co=[{type:"MIT"}],ho={grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},fo={"poly-decomp":"0.1.1"},po={name:"p2",version:"0.7.1",description:"A JavaScript 2D physics engine.",author:oo,keywords:ao,main:"./src/p2.js",engines:so,repository:uo,bugs:lo,licenses:co,devDependencies:ho,dependencies:fo},mo=Object.freeze({__proto__:null,name:"p2",version:"0.7.1",description:"A JavaScript 2D physics engine.",author:oo,keywords:ao,main:"./src/p2.js",engines:so,repository:uo,bugs:lo,licenses:co,devDependencies:ho,dependencies:fo,default:po}),vo=go;function go(t,e,n,r){this.shapeA=e,this.shapeB=r,this.bodyA=t,this.bodyB=n}go.prototype.set=function(t,e,n,r){go.call(this,t,e,n,r)};var yo=bo;function bo(){Qe.apply(this,arguments)}bo.prototype=new Qe,bo.prototype.constructor=bo,bo.prototype.create=function(){return new vo},bo.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this};var _o=wo;function wo(){this.overlappingShapesLastState=new Hn,this.overlappingShapesCurrentState=new Hn,this.recordPool=new yo({size:16}),this.tmpDict=new Hn,this.tmpArray1=[]}wo.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,n=t.keys.length;n--;){var r=t.keys[n],i=t.getByKey(r);e.getByKey(r),i&&this.recordPool.release(i)}t.reset(),t.copy(e),e.reset()},wo.prototype.setOverlapping=function(t,e,n,r){this.overlappingShapesLastState;var i=this.overlappingShapesCurrentState;if(!i.get(e.id,r.id)){var o=this.recordPool.get();o.set(t,e,n,r),i.set(e.id,r.id,o)}},wo.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},wo.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},wo.prototype.bodiesAreOverlapping=function(t,e){for(var n=this.overlappingShapesCurrentState,r=n.keys.length;r--;){var i=n.keys[r],o=n.data[i];if(o.bodyA===t&&o.bodyB===e||o.bodyA===e&&o.bodyB===t)return!0}return!1},wo.prototype.getDiff=function(t,e,n){var r=t,i=e;(n=n||[]).length=0;for(var o=i.keys.length;o--;){var a=i.keys[o],s=i.data[a];if(!s)throw new Error("Key "+a+" had no data!");r.data[a]||n.push(s)}return n},wo.prototype.isNewOverlap=function(t,e){var n=0|t.id,r=0|e.id,i=this.overlappingShapesLastState,o=this.overlappingShapesCurrentState;return!i.get(n,r)&&!!o.get(n,r)},wo.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},wo.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},wo.prototype.getBodyDiff=function(t,e){e=e||[];for(var n=this.tmpDict,r=t.length;r--;){var i=t[r];n.set(0|i.bodyA.id,0|i.bodyB.id,i)}for(r=n.keys.length;r--;)(i=n.getByKey(n.keys[r]))&&e.push(i.bodyA,i.bodyB);return n.reset(),e};var xo=Mo;function Mo(){this.equations=[],this.bodies=[]}Mo.prototype.reset=function(){this.equations.length=this.bodies.length=0};var Eo=[];Mo.prototype.getBodies=function(t){var e=t||[],n=this.equations;Eo.length=0;for(var r=0;r!==n.length;r++){var i=n[r];-1===Eo.indexOf(i.bodyA.id)&&(e.push(i.bodyA),Eo.push(i.bodyA.id)),-1===Eo.indexOf(i.bodyB.id)&&(e.push(i.bodyB),Eo.push(i.bodyB.id))}return e},Mo.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===Kt.DYNAMIC&&!e.wantsToSleep)return!1}return!0},Mo.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++)this.bodies[t].sleep();return!0};var So=Ao;function Ao(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}Ao.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null};var To=qo;function qo(){Qe.apply(this,arguments)}qo.prototype=new Qe,qo.prototype.constructor=qo,qo.prototype.create=function(){return new So},qo.prototype.destroy=function(t){return t.reset(),this};var Po=Lo;function Lo(){Qe.apply(this,arguments)}Lo.prototype=new Qe,Lo.prototype.constructor=Lo,Lo.prototype.create=function(){return new xo},Lo.prototype.destroy=function(t){return t.reset(),this};var Oo=Co;function Co(t){this.nodePool=new To({size:16}),this.islandPool=new Po({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}Co.getUnvisitedNode=function(t){for(var e=t.length,n=0;n!==e;n++){var r=t[n];if(!r.visited&&r.body.type===Kt.DYNAMIC)return r}return!1},Co.prototype.visit=function(t,e,n){e.push(t.body);for(var r=t.equations.length,i=0;i!==r;i++){var o=t.equations[i];-1===n.indexOf(o)&&n.push(o)}},Co.prototype.bfs=function(t,e,n){var r=this.queue;for(r.length=0,r.push(t),t.visited=!0,this.visit(t,e,n);r.length;)for(var i,o=r.pop();i=Co.getUnvisitedNode(o.neighbors);)i.visited=!0,this.visit(i,e,n),i.body.type===Kt.DYNAMIC&&r.push(i)},Co.prototype.split=function(t){for(var e=t.bodies,n=this.nodes,r=this.equations;n.length;)this.nodePool.release(n.pop());for(var i=0;i!==e.length;i++){var o=this.nodePool.get();o.body=e[i],n.push(o)}for(var a=0;a!==r.length;a++){var s=r[a],u=(i=e.indexOf(s.bodyA),e.indexOf(s.bodyB)),l=n[i],c=n[u];l.neighbors.push(c),c.neighbors.push(l),l.equations.push(s),c.equations.push(s)}var h,f=this.islands;for(i=0;i<f.length;i++)this.islandPool.release(f[i]);for(f.length=0;h=Co.getUnvisitedNode(n);){var d=this.islandPool.get();this.bfs(h,d.bodies,d.equations),f.push(d)}return f};var Io=Object(r.n)(mo),Ro=ko;function ko(t){Jt.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new wn,this.narrowphase=new Qn(this),this.islandManager=new Oo,this.gravity=ut.fromValues(0,-9.78),t.gravity&&ut.copy(this.gravity,t.gravity),this.frictionGravity=ut.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new Ni,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new nn,this.defaultContactMaterial=new on(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=ko.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new _o}ko.prototype=new Object(Jt.prototype),ko.prototype.constructor=ko,ko.NO_SLEEPING=1,ko.BODY_SLEEPING=2,ko.ISLAND_SLEEPING=4,ko.prototype.addConstraint=function(t){this.constraints.push(t)},ko.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},ko.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&at.splice(this.contactMaterials,e,1)},ko.prototype.getContactMaterial=function(t,e){for(var n=this.contactMaterials,r=0,i=n.length;r!==i;r++){var o=n[r];if(o.materialA.id===t.id&&o.materialB.id===e.id||o.materialA.id===e.id&&o.materialB.id===t.id)return o}return!1},ko.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&at.splice(this.constraints,e,1)},ut.create(),ut.create(),ut.create(),ut.create(),ut.create(),ut.create();var No=ut.create(),Bo=ut.fromValues(0,0),Do=ut.fromValues(0,0);ut.fromValues(0,0),ut.fromValues(0,0),ko.prototype.step=function(t,e,n){if(n=n||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var r=0;this.accumulator>=t&&r<n;)this.internalStep(t),this.time+=t,this.accumulator-=t,r++;for(var i=this.accumulator%t/t,o=0;o!==this.bodies.length;o++){var a=this.bodies[o];ut.lerp(a.interpolatedPosition,a.previousPosition,a.position,i),a.interpolatedAngle=a.previousAngle+i*(a.angle-a.previousAngle)}}};var jo=[];ko.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,n=this.springs,r=this.bodies,i=this.gravity,o=this.solver,a=this.bodies.length,s=this.broadphase,u=this.narrowphase,l=this.constraints,c=No,h=(ut.scale,ut.add),f=(ut.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var d=ut.length(this.gravity);0===d&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=d)}if(this.applyGravity)for(var p=0;p!==a;p++){var m=(v=r[p]).force;v.type===Kt.DYNAMIC&&v.sleepState!==Kt.SLEEPING&&(ut.scale(c,i,v.mass*v.gravityScale),h(m,m,c))}if(this.applySpringForces)for(p=0;p!==e;p++)n[p].applyForce();if(this.applyDamping)for(p=0;p!==a;p++){var v;(v=r[p]).type===Kt.DYNAMIC&&v.applyDamping(t)}var g=s.getCollisionPairs(this),y=this.disabledBodyCollisionPairs;for(p=y.length-2;p>=0;p-=2)for(var b=g.length-2;b>=0;b-=2)(y[p]===g[b]&&y[p+1]===g[b+1]||y[p+1]===g[b]&&y[p]===g[b+1])&&g.splice(b,2);var _=l.length;for(p=0;p!==_;p++){var w=l[p];if(!w.collideConnected)for(b=g.length-2;b>=0;b-=2)(w.bodyA===g[b]&&w.bodyB===g[b+1]||w.bodyB===g[b]&&w.bodyA===g[b+1])&&g.splice(b,2)}this.postBroadphaseEvent.pairs=g,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,u.reset(this),p=0;for(var x=g.length;p!==x;p+=2)for(var M=g[p],E=g[p+1],S=0,A=M.shapes.length;S!==A;S++)for(var T=M.shapes[S],q=T.position,P=T.angle,L=0,O=E.shapes.length;L!==O;L++){var C=E.shapes[L],I=C.position,R=C.angle,k=this.defaultContactMaterial;if(T.material&&C.material){var N=this.getContactMaterial(T.material,C.material);N&&(k=N)}this.runNarrowphase(u,M,T,q,P,E,C,I,R,k,this.frictionGravity)}for(p=0;p!==a;p++)(F=r[p])._wakeUpAfterNarrowphase&&(F.wakeUp(),F._wakeUpAfterNarrowphase=!1);if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(jo);var B=this.endContactEvent;for(L=jo.length;L--;){var D=jo[L];B.shapeA=D.shapeA,B.shapeB=D.shapeB,B.bodyA=D.bodyA,B.bodyB=D.bodyB,this.emit(B)}jo.length=0}var j=this.preSolveEvent;for(j.contactEquations=u.contactEquations,j.frictionEquations=u.frictionEquations,this.emit(j),j.contactEquations=j.frictionEquations=null,_=l.length,p=0;p!==_;p++)l[p].update();if(u.contactEquations.length||u.frictionEquations.length||_)if(this.islandSplit){for(f.equations.length=0,at.appendArray(f.equations,u.contactEquations),at.appendArray(f.equations,u.frictionEquations),p=0;p!==_;p++)at.appendArray(f.equations,l[p].equations);for(f.split(this),p=0;p!==f.islands.length;p++)(V=f.islands[p]).equations.length&&o.solveIsland(t,V)}else{for(o.addEquations(u.contactEquations),o.addEquations(u.frictionEquations),p=0;p!==_;p++)o.addEquations(l[p].equations);this.solveConstraints&&o.solve(t,this),o.removeAllEquations()}for(p=0;p!==a;p++){var F;(F=r[p]).integrate(t)}for(p=0;p!==a;p++)r[p].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var z=this.impactEvent;for(p=0;p!==u.contactEquations.length;p++){var U=u.contactEquations[p];U.firstImpact&&(z.bodyA=U.bodyA,z.bodyB=U.bodyB,z.shapeA=U.shapeA,z.shapeB=U.shapeB,z.contactEquation=U,this.emit(z))}}if(this.sleepMode===ko.BODY_SLEEPING)for(p=0;p!==a;p++)r[p].sleepTick(this.time,!1,t);else if(this.sleepMode===ko.ISLAND_SLEEPING&&this.islandSplit){for(p=0;p!==a;p++)r[p].sleepTick(this.time,!0,t);for(p=0;p<this.islandManager.islands.length;p++){var V;(V=this.islandManager.islands[p]).wantsToSleep()&&V.sleep()}}this.stepping=!1;var G=this.bodiesToBeRemoved;for(p=0;p!==G.length;p++)this.removeBody(G[p]);G.length=0,this.emit(this.postStepEvent)},ko.prototype.runNarrowphase=function(t,e,n,r,i,o,a,s,u,l,c){if(0!=(n.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&n.collisionMask)){ut.rotate(Bo,r,e.angle),ut.rotate(Do,s,o.angle),ut.add(Bo,Bo,e.position),ut.add(Do,Do,o.position);var h,f=i+e.angle,d=u+o.angle;t.enableFriction=l.friction>0,t.frictionCoefficient=l.friction,h=e.type===Kt.STATIC||e.type===Kt.KINEMATIC?o.mass:o.type===Kt.STATIC||o.type===Kt.KINEMATIC?e.mass:e.mass*o.mass/(e.mass+o.mass),t.slipForce=l.friction*c*h,t.restitution=l.restitution,t.surfaceVelocity=l.surfaceVelocity,t.frictionStiffness=l.frictionStiffness,t.frictionRelaxation=l.frictionRelaxation,t.stiffness=l.stiffness,t.relaxation=l.relaxation,t.contactSkinSize=l.contactSkinSize,t.enabledEquations=e.collisionResponse&&o.collisionResponse&&n.collisionResponse&&a.collisionResponse;var p=t[n.type|a.type],m=0;if(p){var v=n.sensor||a.sensor,g=t.frictionEquations.length;m=n.type<a.type?p.call(t,e,n,Bo,f,o,a,Do,d,v):p.call(t,o,a,Do,d,e,n,Bo,f,v);var y=t.frictionEquations.length-g;if(m){if(e.allowSleep&&e.type===Kt.DYNAMIC&&e.sleepState===Kt.SLEEPING&&o.sleepState===Kt.AWAKE&&o.type!==Kt.STATIC&&ut.squaredLength(o.velocity)+Math.pow(o.angularVelocity,2)>=2*Math.pow(o.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0),o.allowSleep&&o.type===Kt.DYNAMIC&&o.sleepState===Kt.SLEEPING&&e.sleepState===Kt.AWAKE&&e.type!==Kt.STATIC&&ut.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(o._wakeUpAfterNarrowphase=!0),this.overlapKeeper.setOverlapping(e,n,o,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(n,a)){var b=this.beginContactEvent;if(b.shapeA=n,b.shapeB=a,b.bodyA=e,b.bodyB=o,b.contactEquations.length=0,"number"==typeof m)for(var _=t.contactEquations.length-m;_<t.contactEquations.length;_++)b.contactEquations.push(t.contactEquations[_]);this.emit(b)}if("number"==typeof m&&y>1)for(_=t.frictionEquations.length-y;_<t.frictionEquations.length;_++){var w=t.frictionEquations[_];w.setSlipForce(w.getSlipForce()/y)}}}}},ko.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},ko.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&at.splice(this.springs,e,1)},ko.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},ko.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(at.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},ko.prototype.getBodyById=function(t){for(var e=this.bodies,n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}return!1},ko.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},ko.prototype.enableBodyCollision=function(t,e){for(var n=this.disabledBodyCollisionPairs,r=0;r<n.length;r+=2)if(n[r]===t&&n[r+1]===e||n[r+1]===t&&n[r]===e)return void n.splice(r,2)},ko.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);var n=this.bodies;for(e=n.length-1;e>=0;e--)this.removeBody(n[e]);var r=this.springs;for(e=r.length-1;e>=0;e--)this.removeSpring(r[e]);var i=this.contactMaterials;for(e=i.length-1;e>=0;e--)this.removeContactMaterial(i[e]);ko.apply(this)};var Fo=ut.create(),zo=(ut.fromValues(0,0),ut.fromValues(0,0));ko.prototype.hitTest=function(t,e,n){n=n||0;var r=new Kt({position:t}),i=new li,o=t,a=Fo,s=zo;r.addShape(i);for(var u=this.narrowphase,l=[],c=0,h=e.length;c!==h;c++)for(var f=e[c],d=0,p=f.shapes.length;d!==p;d++){var m=f.shapes[d];ut.rotate(a,m.position,f.angle),ut.add(a,a,f.position);var v=m.angle+f.angle;(m instanceof ze&&u.circleParticle(f,m,a,v,r,i,o,0,!0)||m instanceof Lt&&u.particleConvex(r,i,o,0,f,m,a,v,!0)||m instanceof ii&&u.particlePlane(r,i,o,0,f,m,a,v,!0)||m instanceof Ie&&u.particleCapsule(r,i,o,0,f,m,a,v,!0)||m instanceof li&&ut.squaredLength(ut.sub(s,a,t))<n*n)&&l.push(f)}return l},ko.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,n=0;n!==e.length;n++)for(var r=e[n],i=0;i!==r.equations.length;i++){var o=r.equations[i];o.stiffness=t,o.needsUpdate=!0}var a=this.contactMaterials;for(n=0;n!==a.length;n++)(r=a[n]).stiffness=r.frictionStiffness=t;(r=this.defaultContactMaterial).stiffness=r.frictionStiffness=t},ko.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var n=this.constraints[e],r=0;r!==n.equations.length;r++){var i=n.equations[r];i.relaxation=t,i.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++)(n=this.contactMaterials[e]).relaxation=n.frictionRelaxation=t;(n=this.defaultContactMaterial).relaxation=n.frictionRelaxation=t};var Uo=new lt,Vo=[];ko.prototype.raycast=function(t,e){return e.getAABB(Uo),this.broadphase.aabbQuery(this,Uo,Vo),e.intersectBodies(t,Vo),Vo.length=0,t.hasHit()};var Go=Object(r.sb)((function(t){var e=t.exports={AABB:lt,AngleLockEquation:qe,Body:Kt,Broadphase:Le,Capsule:Ie,Circle:ze,Constraint:He,ContactEquation:Ye,ContactEquationPool:tn,ContactMaterial:on,Convex:Lt,DistanceConstraint:sn,Equation:be,EventEmitter:Jt,FrictionEquation:fn,FrictionEquationPool:pn,GearConstraint:vn,GSSolver:wn,Heightfield:Mn,Line:On,LockConstraint:Dn,Material:nn,Narrowphase:Qn,NaiveBroadphase:hi,Particle:li,Plane:ii,Pool:Qe,RevoluteConstraint:wi,PrismaticConstraint:qi,Ray:Ut,RaycastResult:Yt,Box:Yn,RotationalVelocityEquation:di,SAPBroadphase:Ni,Shape:At,Solver:yn,Spring:Di,TopDownVehicle:Fi,LinearSpring:Wi,RotationalSpring:ro,Utils:at,World:Ro,vec2:ut,version:Io.version};Object.defineProperty(e,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})})),Ho=(Go.AABB,Go.AngleLockEquation,Go.Body,Go.Broadphase,Go.Capsule,Go.Circle,Go.Constraint,Go.ContactEquation,Go.ContactEquationPool,Go.ContactMaterial,Go.Convex,Go.DistanceConstraint,Go.Equation,Go.EventEmitter,Go.FrictionEquation,Go.FrictionEquationPool,Go.GearConstraint,Go.GSSolver,Go.Heightfield,Go.Line,Go.LockConstraint,Go.Material,Go.Narrowphase,Go.NaiveBroadphase,Go.Particle,Go.Plane,Go.Pool,Go.RevoluteConstraint,Go.PrismaticConstraint,Go.Ray,Go.RaycastResult,Go.Box,Go.RotationalVelocityEquation,Go.SAPBroadphase,Go.Shape,Go.Solver,Go.Spring,Go.TopDownVehicle,Go.LinearSpring,Go.RotationalSpring,Go.Utils,Go.World,Go.vec2,Go.version,Object(r.sb)((function(t){t.exports=function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var e=t.length,n=-1;n++<e;)for(var r=n+1;r<t.length;++r)t[n]===t[r]&&t.splice(r--,1);return t},t.exports.immutable=function(e){if(!Array.isArray(e))throw new TypeError("array-unique expects an array.");for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=e[i];return t.exports(r)}}))),Wo=(Ho.immutable,Object(r.sb)((function(t){!function(e){var n=/^\s+/,r=/\s+$/,i=0,o=e.round,a=e.min,s=e.max,u=e.random;function l(t,u){if(u=u||{},(t=t||"")instanceof l)return t;if(!(this instanceof l))return new l(t,u);var h=function(t){var i={r:0,g:0,b:0},o=1,u=null,l=null,h=null,f=!1,d=!1;return"string"==typeof t&&(t=function(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e,i=!1;if(q[t])t=q[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=z.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=z.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=z.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=z.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=z.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=z.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=z.hex8.exec(t))?{r:I(e[1]),g:I(e[2]),b:I(e[3]),a:B(e[4]),format:i?"name":"hex8"}:(e=z.hex6.exec(t))?{r:I(e[1]),g:I(e[2]),b:I(e[3]),format:i?"name":"hex"}:(e=z.hex4.exec(t))?{r:I(e[1]+""+e[1]),g:I(e[2]+""+e[2]),b:I(e[3]+""+e[3]),a:B(e[4]+""+e[4]),format:i?"name":"hex8"}:!!(e=z.hex3.exec(t))&&{r:I(e[1]+""+e[1]),g:I(e[2]+""+e[2]),b:I(e[3]+""+e[3]),format:i?"name":"hex"}}(t)),"object"==c(t)&&(U(t.r)&&U(t.g)&&U(t.b)?(i=function(t,e,n){return{r:255*O(t,255),g:255*O(e,255),b:255*O(n,255)}}(t.r,t.g,t.b),f=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):U(t.h)&&U(t.s)&&U(t.v)?(u=k(t.s),l=k(t.v),i=function(t,n,r){t=6*O(t,360),n=O(n,100),r=O(r,100);var i=e.floor(t),o=t-i,a=r*(1-n),s=r*(1-o*n),u=r*(1-(1-o)*n),l=i%6;return{r:255*[r,s,a,a,u,r][l],g:255*[u,r,r,s,a,a][l],b:255*[a,a,u,r,r,s][l]}}(t.h,u,l),f=!0,d="hsv"):U(t.h)&&U(t.s)&&U(t.l)&&(u=k(t.s),h=k(t.l),i=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=O(t,360),e=O(e,100),n=O(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,u,h),f=!0,d="hsl"),t.hasOwnProperty("a")&&(o=t.a)),o=L(o),{ok:f,format:t.format||d,r:a(255,s(i.r,0)),g:a(255,s(i.g,0)),b:a(255,s(i.b,0)),a:o}}(t);this._originalInput=t,this._r=h.r,this._g=h.g,this._b=h.b,this._a=h.a,this._roundA=o(100*this._a)/100,this._format=u.format||h.format,this._gradientType=u.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=h.ok,this._tc_id=i++}function h(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,o=s(t,e,n),u=a(t,e,n),l=(o+u)/2;if(o==u)r=i=0;else{var c=o-u;switch(i=l>.5?c/(2-o-u):c/(o+u),o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,l:l}}function f(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,o=s(t,e,n),u=a(t,e,n),l=o,c=o-u;if(i=0===o?0:c/o,o==u)r=0;else{switch(o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,v:l}}function d(t,e,n,r){var i=[R(o(t).toString(16)),R(o(e).toString(16)),R(o(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function p(t,e,n,r){return[R(N(r)),R(o(t).toString(16)),R(o(e).toString(16)),R(o(n).toString(16))].join("")}function m(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s-=e/100,n.s=C(n.s),l(n)}function v(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s+=e/100,n.s=C(n.s),l(n)}function g(t){return l(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l+=e/100,n.l=C(n.l),l(n)}function b(t,e){e=0===e?0:e||10;var n=l(t).toRgb();return n.r=s(0,a(255,n.r-o(-e/100*255))),n.g=s(0,a(255,n.g-o(-e/100*255))),n.b=s(0,a(255,n.b-o(-e/100*255))),l(n)}function _(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l-=e/100,n.l=C(n.l),l(n)}function w(t,e){var n=l(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,l(n)}function x(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function M(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+120)%360,s:e.s,l:e.l}),l({h:(n+240)%360,s:e.s,l:e.l})]}function E(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+90)%360,s:e.s,l:e.l}),l({h:(n+180)%360,s:e.s,l:e.l}),l({h:(n+270)%360,s:e.s,l:e.l})]}function S(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+72)%360,s:e.s,l:e.l}),l({h:(n+216)%360,s:e.s,l:e.l})]}function A(t,e,n){e=e||6,n=n||30;var r=l(t).toHsl(),i=360/n,o=[l(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(l(r));return o}function T(t,e){e=e||6;for(var n=l(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(l({h:r,s:i,v:o})),o=(o+s)%1;return a}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,n,r,i=this.toRgb();return t=i.r/255,n=i.g/255,r=i.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=L(t),this._roundA=o(100*this._a)/100,this},toHsv:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=f(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),r=o(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=h(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=h(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),r=o(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return d(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var a=[R(o(t).toString(16)),R(o(e).toString(16)),R(o(n).toString(16)),R(N(r))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*O(this._r,255))+"%",g:o(100*O(this._g,255))+"%",b:o(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*O(this._r,255))+"%, "+o(100*O(this._g,255))+"%, "+o(100*O(this._b,255))+"%)":"rgba("+o(100*O(this._r,255))+"%, "+o(100*O(this._g,255))+"%, "+o(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+p(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=l(t);n="#"+p(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return l(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},l.fromRatio=function(t,e){if("object"==c(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:k(t[r]));t=n}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:u(),g:u(),b:u()})},l.mix=function(t,e,n){n=0===n?0:n||50;var r=l(t).toRgb(),i=l(e).toRgb(),o=n/100;return l({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},l.readability=function(t,n){var r=l(t),i=l(n);return(e.max(r.getLuminance(),i.getLuminance())+.05)/(e.min(r.getLuminance(),i.getLuminance())+.05)},l.isReadable=function(t,e,n){var r,i,o,a,s,u=l.readability(t,e);switch(i=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),r={level:a,size:s}).level+r.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},l.mostReadable=function(t,e,n){var r,i,o,a,s=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<e.length;c++)(r=l.readability(t,e[c]))>u&&(u=r,s=l(e[c]));return l.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,l.mostReadable(t,["#fff","#000"],n))};var q=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=l.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(q);function L(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function O(t,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=a(n,s(0,parseFloat(t))),r&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function C(t){return a(1,s(0,t))}function I(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function k(t){return t<=1&&(t=100*t+"%"),t}function N(t){return e.round(255*parseFloat(t)).toString(16)}function B(t){return I(t)/255}var D,j,F,z=(j="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",F="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function U(t){return!!z.CSS_UNIT.exec(t)}t.exports?t.exports=l:window.tinycolor=l}(Math)}))),Yo=Object(r.o)(5),Xo=!0;"find"in[]&&Array(1).find((function(){Xo=!1})),Object(r.a)(r.a.P+r.a.F*Xo,"Array",{find:function(t){return Yo(this,t,arguments.length>1?arguments[1]:void 0)}}),Object(r.W)("find");for(var Zo=u.a.randomBytes,Jo=function(){return Zo(16)},Ko=[],Qo=0;Qo<256;++Qo)Ko[Qo]=(Qo+256).toString(16).substr(1);var $o,ta,ea=function(t,e){var n=e||0,r=Ko;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]},na=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||Jo)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var o=0;o<16;++o)e[r+o]=i[o];return e||ea(i)};function ra(t,e){var n,r,o=(n=t.map((function(t){return t.object})),r=new i.Box3,n.forEach((function(t){var e=new i.Box3;e.setFromObject(t),r.union(e)})),r);return e&&(o.max.add(new i.Vector3(0,0,e)),o.min.sub(new i.Vector3(0,0,e))),o}function ia(t){t&&(t.map&&(t.map.dispose(),t.map=void 0),t.dispose())}function oa(){if(!$o)try{($o=localStorage.getItem("mi-uuid"))||($o=na(),localStorage.setItem("mi-uuid",$o))}catch(t){$o="NLS-"+na()}return $o}function aa(){if(!ta)try{(ta=sessionStorage.getItem("mi-session"))||(ta=na(),sessionStorage.setItem("mi-session",ta))}catch(t){ta="NSS-"+na()}return ta}function sa(t){return"string"==typeof t?t:t.id}function ua(t,e){return null==e?t:"string"==typeof t?e.find((function(e){return e.id==t})):t}function la(t){return(new i.Box3).setFromObject(t)}function ca(t){var e=t.min,n=t.max;return[new i.Vector3(e.x,e.y,e.z),new i.Vector3(n.x,e.y,e.z),new i.Vector3(e.x,n.y,e.z),new i.Vector3(n.x,n.y,e.z),new i.Vector3(e.x,e.y,n.z),new i.Vector3(n.x,e.y,n.z),new i.Vector3(e.x,n.y,n.z),new i.Vector3(n.x,n.y,n.z)]}function ha(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return r=this,i=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(u,c)),o}}function fa(t){var e=[];for(var n in t)e.push(n+": "+t[n]);return e.join("; ")}function da(t,e,n){var r=t*(Math.PI/180)/2,i=e/2;return n*Math.tan(r)/i}function pa(t,e,n){var r=t.max.y,i=e/2,o=n/2*Math.PI/180;return i/Math.tan(o)+r}function ma(t,e,n){for(var r=[t],o=(e.x-t.x)/n,a=(e.y-t.y)/n,s=(e.z-t.z)/n,u=1;u<n;u++){var l=t.clone(),c=new i.Vector3(u*o,u*a,u*s);l.add(c),r.push(l)}return r.push(e),r}function va(t){return t&&"object"===Object(r.p)(t)&&!Array.isArray(t)}i.Object3D.prototype.destroy=function(){for(var t=this.children.length-1;t>=0;t--)this.children[t].destroy();this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.parent&&this.parent.remove(this),this.texture&&(this.texture.dispose(),this.texture=void 0),Array.isArray(this.material)?this.material.forEach((function(t){ia(t)})):void 0!==this.material&&ia(this.material),this.material=void 0};var ga=new Map([["question-mark",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M25.86,2.59A10.12,10.12,0,0,0,22.4.65a14,14,0,0,0-8.85.14A10.33,10.33,0,0,0,10,3.1,9.78,9.78,0,0,0,7.72,6.68,10,10,0,0,0,7,11h6a6.3,6.3,0,0,1,.18-2.33,5.57,5.57,0,0,1,1-1.77,4.05,4.05,0,0,1,1.5-1.13,6.87,6.87,0,0,1,4.5-.08,4.4,4.4,0,0,1,1.6.88,3.37,3.37,0,0,1,.93,1.22A3.84,3.84,0,0,1,23,9.29a3.15,3.15,0,0,1-.38,1.5,10.54,10.54,0,0,1-1.26,1.72,18.9,18.9,0,0,1-1.78,1.8c-.71.66-1.4,1.34-2,2C16.31,17.55,14,19,14,21v6h6V23c0-.63,0-1,1-2s1.24-1.3,2-2,1.69-1.66,2.5-2.52a14,14,0,0,0,2.28-2.81,7.51,7.51,0,0,0,1.08-4.05,9.68,9.68,0,0,0-.78-3.91A8.34,8.34,0,0,0,25.86,2.59Z"/><circle cx="17" cy="33" r="3"/></svg>'],["arrow","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAAAAAB5Gfe6AAAQkHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZpZciQ7rkT/uYpeAicQ5HI4mr0dvOX3ATOl0li3q3SVJkUqFMEBcHc4IuX2///fcf/hK7cSXRatpZXi+cott9h5U/3j63EMPt+fL1/h+fPdeff6NnJMHNPjD2U/7+qcl183aH6eH+/PO52PN7E+B3qZ+Tlgspkjb57X1edAKT7Oh+fvrj3v6/nNdp7ftd057abHnz78npVgLGG8FF3cKSTPz2oXJFaQWuocCz9D0mhnEu8Tx54k6dexc98F77vY+f48n96HwvnyvKB8iNHzfJCvY3cj9HZF4dfM7/6QZ4j+7deb2J2z6jn7sbueC5Eq7rmpl63cd1w4GCrd2wov5Vt4r/fVeFW2OMnYIpuD13ShhUi0T8hhhR5O2Pc4w2SJOe5IuGOMM6Z7rhL+FudNSrZXOFFJz3KpkqtJ1hKn4+tawp233flmqMy8AlfGwGCBOz693Fcn/+b1OtA5Bt0QfH2NFeuKFnCWYZmzn1xFQsJ5xlRufO/LvcGNf5PYRAblhrmywe7HY4gh4Re20s1z4jrx2fkHNYKu5wCEiLmFxYREBnwJSUIJXmPUEIhjJT+dlceU4yADQSSu4A65SamQnBptbu7RcK+NEh+nkRYSIZBGSQ0EIlk5C/jRXMFQlyTZiUgRlSpNekklFymlaDGN6po0q2hR1apNe001V6mlaq211d5iS0iYtNLUtdpa651JO0N37u5c0fuII408ZJSho442+gQ+M0+ZZeqss82+4koL+q+y1K262uo7bKC085Zdtu662+4HrJ108pFTjp562umvWXtm9X3WwofM/T5r4Zk1y1i+1+mvrHFa9WWIYHIiljMyFnMg42oZANDRcuZryDla5ixnvkVIIZGsBbHkrGAZI4N5hygnvObuV+Z+mzcn+Y/yFr/LnLPU/RuZc5a6Z+Y+5+2LrK1+K0q6CTIWWkx9OggbF+zaY+1Wk/766H46wF8ONFY+O8hBMEc7oc4Vdh+8JsE+PUSrVjr70Zz1+H56PH3o9sRR1ql5Ha8bUMQxpe89Tki8Sb0tE23cw3DcfEo+ugnj2G3WEmononVfoag71pVjR+EmAE53eT5tqYfEHl/7ThMusaI+St0jktFa9gKnreiQqCNpZ2mJdSkbaiK6DrovYR4/JhJfRsx5d5EVZnEIPetHnU5KynJPTSuCPuC0lOuXH7n1DNq7DpUtHbhM5lDA0c2bnDCJoOObMnyj+aPjPwx0yiDUxKKsg35VnRnBEVhonKwK5hOk5NttUrhr2+tMOXkPJb1RZ+iAelYjL2MuO3pGRQ78GdxwOOaTAcJZcewq7ilB1RJCSozUdSEdwVJVb6asiBsHH1Bqgbiv3Cmkkis6ktVnZGRRwMNJjUA3Ao2127YWdhAIblxF51hzMcZsVZc0r0dJo5Liqfn41Q+q193SGhhkMkgaLJRNnEpqBtyVvbcVffIk+LE9QPFBTMTQe0aWkMXMnx3dy5sfHreDE60Ql50E+SqRcmfK16L2p0Ol8JFATu3qASXy7SvmiGW2cdMBxsty44CvtLogfGlv7WkCSV0WId2270EaD5Ym40cs+SAwZuNjPSTywAvEfLmzQhtLDntfCnhl/fNmUNnzyA2g76Zn0SP+c+I6bCC0FONUQ4L50e95dif+DH/m9htQjBEhPPpOjYjmm2ChbfEMIUaYtAIxmWJHlilLU8ZRs9pCsHbDpFaRgZljz2QandjDIBPZDGTuoZW1KdlYh52ALzisKJRNWSQmLAWx8iv9mGttT15bBc2oxd57bZtVF98CYtK3UH22Yd/A7WaKa+ZjNTOXEzNhMJ5kmQOvfzsbxbZALJ2xwGBjX2HFQybhi7kpbA7DVpS3RxMJwFyHwGk5gs6a4lrRHVqhYT0QTJC9UZcC9Yrelkn6yXch68NKNtG7CiU3vf/zMZAYXPWdrR9XZ/ctMV1sJQ2wJEGxzaHs7LmmHIwnUwbwnNAapBY9xhE19DNJW3ua0dDk/AjwITacR0PqZxkbyJ+E5jYbxI84x1TBE+y90hwDCYZIM0tqAKPZfCzFrbH8kYCm3eqQkZ2+2GovcL8Suokyg8yyCJes6dcouSLiNSLb0ETJU+/N/WFsBBSOXBbm9Cwp4CzlOag7ro7R2vC19nSsCPmAjIEMiobFwaoVXhjTU2XMpgEsDH/L3Sx54OCTMUSXI/IIA2V4QcLQpwVz12pInI0bY56pIQ2BSGRLL+yLfZ7JkiimbK+aepsbwRStpokx5gCqe1hjdMAwcINbkk5jmedrNRAG5pUXPe0sZIoXy1h7lSDxApzheg24JeDNtDS1oBDBUC4iWZFilBPhZx0Kqx2lihpbG9q4sYidksCN4yRYhNM4nxfBbTi4E3AT6B3igbvs9Gv8ZkHsIfdlep+2HelEDbkJdNjqZQ90B7k6OIoFfkkPNoY+z0gzACa1f2qcBYxVJpT2QQgS19dKQlbC24S92xiEAFRKB5Uy1qrBgOtwIge55G0kRPfIytGx0tMOrGfrijB2FHOk/TKcMjDTMPeBo4FnXD5cQ8vtdgoAN0yuzZQHQI09wm/5vAB6RHyI9rYKiZ6YWC6rbaiLmDtoaToC1bViXQFNtgWsOfEEKCleC3GWPSfgQWRQWMgw/9FDgvOZrFAT3SmsA3DLbqlsSppQG5QeOjPXavUUkxF/qgLM05vW5o7UakuBqo2ZW8Nj0LB7imVJC9QSA+wd7RPztIUZ80xQZq0ROrc8CSVncWzkTA/RwmunldCPAQKjqVC7bhRuTIv0plbk7gOX4m5OAi2YesYZ0KBQRToG8iv9x8dgGtgECYRBeEU87OxoSc8epu+s7Mq/MN0VbBT19dii7ekO66UZwdAMtoAVQd13J5nwZe98OgGslmVqAGBkeLZNVNVlWpV18qihntXKnBZvrDIVgFpx4q5poLqREOVplMPSpTF2KvjBAzDpprkruXIaaUmUD4Xo2yrGWcYlixKIwRFjl0jPQhKznUXZAoSjlg9c/NwAI4p3Q/w5bCNfhUZS7bGfqesHqKAlyZZxZgNrhGevZXccaqBys4NEqB3Vqfptji9uUrhCL6yXFqxtm0hhLyYU3Tjd8I/HZaWD1oyVjnG5hhpCN5yHSf8BQUZlVNd00OP4M0TK+JSM7iqWi01SinFkCQXWxiZJLqqAHiEt3G3I2WYd46KU9pIJIOkoRQYCcEAAPguHo0Y4k8Hl6SW50MoW0uZU8jJOUghKo38Nl5ZSwsJNAUC2/lFZWkfMjrU8dFrTjHpJnUrLCILQIxINiYdQlDXaE/razQ4jjQluN5jW1Eh/S7yYvI5gigSjdLYU9TiFXAcHjISiLhQd9obb3OQmwY+YqVwiBMCkOGLXaK/ljBShh56c1g0uyIb2lBRKO7ZTAFncw5c5UGjGSy3CsI1Jt2mtruZkfhBZmbR+842Yu1eDiWEl0V6LZcGem6Ct+LW4Wy3oAjyNObazKBHomhJ3HMKEKHgiGksH+Ig1nTidfNMyA+oYHqVFaRGLiQreVLc9GvQgftKjW9cfUSKNYL80rqU7Um2rwqQJR1ai31Wq7vzKJEsFHDj0bAEMUKXgvfD5bWbaLPBTKz1Nk/Fg+GUZvUzFw80CLaKtPAACVAWrismh863FU4IJ0716SXBUNVb/SDMVvZgDt34CXoOq1JKvg0n08gPHTwXBNgD5W8pZZ8E9EVWcv1DZMB2NFysIwkqBSaH5QRmsAHdkHB+UANvLJvFpQKAahSmYTLEd2AFO+5rsqRRU6sVv5IP0wsSPLcWsbC1Y95mte71CUm6RJJWwkg6Q4k+xWMM0ByElJPQ6j2ED5hY42ALpZRytx9RlgQlJLijzhKi5eX5JBSIRGfo9o2xhd/0aWku8OS+4D9ZnovHDQMPaYo4qm2mlZbUnd7pR6oQj29Z2BqJ9n3LRT+MTLu3IR+ZP2TCPh3EDw8H1NHpoT7FibNYU8WHd9ESHcY12aDOQCUBddi4Ucp+4yuzz8ybcCCu1h8zvzXhDN4HYLq1R+U0xzUqg5QSA3iSBgdDouy55Ifx0DaeEhgezxBRGmoEJ6AJitVuzwtKPlUskHgU2F0LS7AFIwW5jPu0RUL7sp+fkNk0ee8P6uXYgl40WM+cdCOW21r13e0ivt0ff/mYcUfrQZWs2BiN6G+MDTGz1BKORmUTNQp9YGSHFxAeTkQrKd6FoVUogyytW25OLy3OpaO5oZCQp46aPzb5LnJiFEIwAKkmbYVYIjzVv3vj7rA6HignEeQAXTAHKDhoD7Uujh0QjtsB6fTP1NzO7T1Nzq4F1GnfHdXCG1Yxjwdtjf+PGRGTzEtEAUCz7KLfTdItLwCXuSOAzVjaZB6LvbUZhYGWmifSZlcMDnGHPd6gPeiK9erhpiw7ZP9ahTrMhFDa1J53m9ri2DloziqGETTcVSppCbTDDjExg6RrZ6cPEzB8XArEjQSB29odrUoLyoS/65RfM9fprGGjlHpbhGgbYD8MtmW1eFcAWX5dbcMHcl8sUI2k+H7GPW9VrArw3G+BefcCrCaAT/N53YLvP26Uy0kMFnDEZz0DJkmQqEOlL7SlKweYhH8gxpYeAYi0f9magqPbMYZuUI6007lSZQoyoGfYQHsNRzHXR3MMINTSMZpq1KD2A5MDJgtMLdRU6R4CEOJcKGiIJ7K6P/vAM6xpECHI8rRHsaEj6smkngAUjXTzrRoSI48ZpHOqgOY5OejKVdpnmiYUChQnVdIPa6ekGqRSRgEO119oDHOiIUQ5ciYVgaF1oG8Udo8WYtD+DEi8D/w8rAJE2k2PoyV0oMtpauxreaFjpujAvxFlwBhjuNqM9P0IfI5iD8Nh8y1kG4igjJkDNkOijnlLhItAd9lhRd670yNRTu95cR/Xuu0c5WO4DEFk5YQAPtLvU4TYPGRh4APPEDNiuuwR6SC21JoFbQBBMr+zJmT32QplNI6p16PbculN/pCX1wAyTWGTeJ774aln0gvQikw7TmkfsNbdQNs0adutYUDqNtGc0RqngUYdhUYuHSL1/eLrgvqDTC5neu++vufRkEgP9D2T64Kg/c4n+s7k3dDr3me8nOr0c72MRNmgF7D4WySPP0YAI/bI4eixwc7K13QiRiL85A8fnSsUj+mvTrsZtVUEQZ6sTpVafW8nYJZyaZS0U+0xIb6et9PhhtoObozQbjKAoDf6eiFgx1UUvpUYj1GweH0MNMrofhynfWn7+KYu7n5r83hN9aqm+6qjcH7dUlgvZVLV3xqq4fbP16qv+eofuTz43eomAqfS7GBAB9zEE31WJ37eVIPtdGN5A8nMYPvvLt8t2/V/6gM19G4g/hIL7UXf9JgbuLRZ+AoW//AzyMxTcWyz8BAruLRZ+AgX3r3y2+mT/PwfiN1DoVI+QT3CZDmvb8022JeYb6HiQPQpPPvboFB+i1MZdcqWZqthHmix6vttw0UAI1z8oEnGwVe++c7JamxslC+8xKJE41XJmug1npz+6CUAKyURd9gSxo+kWxvtZth848GBlws/0SKjYhmbZ9IiV+mcGBSdWHk8sqSr2zz5J7QME/0yD+z4Pe+JuGn1MV/vUyZwOHojWPlmPXgf9CuoeN9UAT+FGwaLg44v3dWe6QpvuL3Ln/p3k/2AgqNDcfwHgqUmIIqn+hwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4wYRESAMujenGAAAB9FJREFUeNrtnWlsFVUUx899fS1gUoKioEY+WBRUEohGkUhAKxgEjSgGoRGB4AJCNKAIJBJZJSiyGYMKKkIoLlEUKhUraxFkKUE2kU1aCrRgW2jpg9f29R2/sBTo67v3zL2zvfP73MzM+XU6mf+5504BGIZhGIZhGIZhGIZhGMZGGq3JvSmR62++BXHH7Ylbf9ouRMT99yVq/e0PICIiHumUmPV3PooXOf5EItafXoCXOdUn8ep/pgjrUDY40ervX4JXUTEiocoXL5/FawiNEwlU/6hzeB3hqQljQIwJYT3UzEkQA2JiGOslsiAhDIgZ1RiD6NIEMBD8NIKxyQr6vv7FtdgQa31uILg0ig2zsZmv4//yePUj7rjNv/U3yUEJ/r7Xr/XfvBmlOPKwT+vfhpIUdvdj/Wm7UZpTz/mv/g4HUYGyQb5r/+SjEhXD/VV/j5OoSGisj16LRe9iVCY8xTcGxIulSKBmtk8MiKHlSMIn8ViMqkQivojHgfcuIJ0VAc/XPzmMVljrcQOBmdVojY1NvVx/8mcRtEqeh+NxypJatM6+ezxb/7Io6uBwR4/e/1moicJunvz956A2ip/1Xv3Nt6JGSgd6rf47/0KtlHssHrfZi5rxVDwWDx5C7XgoHotHC9AANbO8YqBXERohMt8bv/8X/kNDRDM9cA+IgWVojhWuNxAYXo4mWePyeBwYHUKz5Lo6HidNvICmybvVxfXPqEbz7Gvr2vrn1KAdHH7IpX//8yNoD8dcGY+TM6NoF26MxzLTL26Mx0majtM4q5ed7yhNulVsd5WAxqset/mGS6/d5CIBLXI62/7I6ZKyzjUC0rIfsP+hE3zkxt9c8vy7tPnJbiKfuyP+Xdn8ZDeuiMei+zF0juWOGyBNv+iMxw4bEBkl6CzOxmPx6ll0mryWDtb/ViU6z17H4rEYG0I3cMiheByYFEZ34Ew8Dn5UjW7BiXisY/rFDfGYmgWCCwcngXto0q08z1YBSUsy3NWgb5Qe2WSjgJRlfdy2RJPcNXm9bQIarexpsP5VdxHjcbMcm2Q3/5P64i71U8k/ELuLNsVjcct2cnST+rGg+Jo4XmhLPBZ376GOfoOkAIB5NWTHxuu/nzj9ElkA8gLgA+pLlvF43IU4/VI9G1QEAHnIPjfVaP1PnqRdVngKqAkActDMa2Hw/u9zijjjNg5UBcBr1FbD3jbG6h9QSruk8ovfyFESABnUWSNT8VgMI06/lF7aBqomAJ4n3m+G4nHgbeJfZfHljcCKAqDHcWo87m2g/gnE53LhlS+lqQqATv9S4/FL2u//qcT2T34XoAuAdvuJBspf11z/LOKbyYG6q4bqAqDVTqKByjFa21/U6ZfdaWBNADTdTDQQnqSv/pRMYjrZevVLCUUAiF+JBqpnaqv/J2I+zb3mxZwkAMTPDq8ep1A3P/1y3ZOEJABgiaPxuOnvxLN/B7oEwELq/sPl1utvSdz8VPsl6BMAn1AbBKut1t96F+3ENXOFTgFiehXRwAZL8Vi0JW5+qppW7+HIAgDGnyca2G4hHouOh2knvTARdAuAkedsj8cinTj9Ujka9AuAV87YHI/F08TNT2eHgQkB0I/aIDhGmuIU/YnnKxkAZgTAU8SGHC0eDyJufiqKfTKrAqBrPtFAiXo8HlFBO1VBA7ebZQHQifhUVo7H4p2QgQeOdQHQbp8t8Tg4idj+2dPgwJIGAdBqhw3xmDz9EuelQ4cASP3DeDwOziW+ecdbldEiACDbcDxOWkBs/8QNHpoEAPXjLNFMmfpv+IZ4+PjRU5cAWGwwHqcQNz/J2NUmAMgjavHjMfEPTGpvvz4BQH1MrzMkoHoW2CsAppEaBFskemQUA+HJYLcAeJfQINgpNVuvbiA0FuwXAG8qNwh2S07WqxqQ/saPXgEwRDGu7W8te2Q1A6XSH0HWLAD6nVa5zoPS9asZKJb/DLZuAdDzhPx1Hu2gkobkDRQq/J8w7QJAfstevuI3+WQN1F39dkAAtP9H7jpPdFVtiMgZOKC0Z9aAAEiT+mrbScLQjIyBXWngtABokRf/kKefonRF4xvYqrjmYEQApG6Md8SyvrS+eDwDG5QbzUYExL3QMxnUlZGGD5wFbhEADQ7YVwyhr401YCD6LbhHACyK3SA4N9TK6mhMA5EvwE0CYF6sBkFopLXl8exYq9/gLgHwYf3x+PxoqwMC9RoIvw9uE1D/gH3VeOsjItnSq9/OCqhvwL5qAoABA5XU28qsAHjj2tW8mukABgzEXP12WgAMvrpBEPkYwICB2KvfjguAvnUH7GvnARgwUGRhEt24gLoD9tGvAAwYKLDyySzzAqDzpQH76CIAAwYOWtqNYoMAaH9xwP57AAMG9ljbj2SHALhjJyLijwAGDGyzuCPNFgGQuhlxpfw1yR94dfAxi5cmojI/lRyx+rtaX9XDhADr2CVABc//JycWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWIDToH8FyJUWtVWAALedDoFhGIZhGIZhGIZhGIYxyf+YwEMsIhMo/AAAAABJRU5ErkJggg=="],["door",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="36 14.99 28 7.99 28 12.99 17 12.99 17 16.99 28 16.99 28 21.99 36 14.99"/><path d="M24,29H15V7L6,2H24v9h2V0H0V29l14.94,7L15,31H26V19H24Z"/></svg>'],["elevator",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="27 4 26 3 24 5 24 0 22 0 22 5 20 3 19 4 23 8 27 4"/><polygon points="17 4 16 5 14 3 14 8 12 8 12 3 10 5 9 4 13 0 17 4"/></svg>'],["elevator-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 5 19 3 19 8 17 8 17 3 15 5 14 4 18 0 22 4"/></svg>'],["elevator-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 3 19 5 19 0 17 0 17 5 15 3 14 4 18 8 22 4"/></svg>'],["elevator-alt",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="4 16 18 0 31.99 16 4 16"/><polygon points="31.99 20 18 36 4 20 31.99 20"/></svg>'],["escalator-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="30.18 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.69 27.59 30.18 26.18"/></svg>'],["escalator-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="25.67 34 29.84 29.18 29.84 32.18 31.84 32.18 31.84 26.18 24.84 26.18 24.84 28.18 27.84 28.18 24.16 32.58 25.67 34"/></svg>'],["ramp",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/></svg>'],["ramp-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="18.18 4.18 14 9 14 6 12 6 12 12 19 12 19 10 16 10 19.69 5.59 18.18 4.18"/></svg>'],["ramp-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="13.82 13.82 18 9 18 12 20 12 20 6 13 6 13 8 16 8 12.31 12.41 13.82 13.82"/></svg>'],["sligntTurnLeft",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M10,0,26,2s-5.59,5.68-5.56,5.71C23.32,10.88,23.94,15.27,24,18V36H20V18c-.05-2.09-.54-5.32-2.47-7.53L12,16Z"/></svg>'],["sightTurnRight",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M26,0,10,2s5.59,5.68,5.57,5.71C12.68,10.88,12.06,15.27,12,18V36h4V18c.06-2.09.54-5.32,2.47-7.53L24,16Z"/></svg>'],["stairs",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="35.99 2 30 2 25.99 2 25.99 6.59 25.99 8.84 24 8.84 19.99 8.84 19.99 13.43 19.99 15.67 13.99 15.67 13.99 15.69 13.99 20.27 13.99 22.52 12 22.52 7.99 22.52 7.99 27.12 7.99 29.36 0 29.36 0 33.95 7.99 33.95 11.99 33.95 12 33.95 12 27.12 13.99 27.12 18 27.12 18 22.52 18 20.27 19.99 20.27 24 20.27 24 15.67 24 13.43 25.99 13.43 30 13.43 30 8.84 30 6.59 35.99 6.59 35.99 2"/></svg>'],["stairs-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="30.17 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.68 27.59 30.17 26.18"/></svg>'],["stairs-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="24.83 33.82 29 29 29 32 31 32 31 26 24 26 24 28 27 28 23.32 32.41 24.83 33.82"/></svg>'],["turnLeft",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M5,10,17,0V8a11,11,0,0,1,8.44,3.5c2.88,3.2,3.5,7.8,3.56,10.5V36H25V22c-.05-2.11-.54-5.61-2.53-7.82A7.1,7.1,0,0,0,17,12v8Z"/></svg>'],["turnRight",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M29,10,17,0V8a11,11,0,0,0-8.44,3.5C5.68,14.7,5.06,19.3,5,22V36H9V22c.06-2.11.54-5.61,2.53-7.82A7.1,7.1,0,0,1,17,12v8Z"/></svg>'],["uTurn",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M20,0c-5.38,0-9.79,5.34-10,12H2L12,24,22,12H14c.19-4.39,2.86-8,6-8s6,4.58,6,10V36h4V14C30,6.13,25.6,0,20,0Z"/></svg>'],["blue-arrow",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M21,3c-.44-.92-1-3-3-3s-2.63,2.16-3,3C15,3,2,29,2,33a2.65,2.65,0,0,0,3,3c2,0,6.1-2.2,9-4,2-1,3-2,4-2s2,1,4,2c0,0,7,4,9,4a2.65,2.65,0,0,0,3-3C34,29,21,3,21,3Z"/></svg>'],["start",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,4A14,14,0,1,1,4,18,14,14,0,0,1,18,4m0-4A18,18,0,1,0,36,18,18,18,0,0,0,18,0Z"/><circle cx="18" cy="18" r="6"/></svg>'],["destination-marker-back",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Zm0,19a5,5,0,1,1,5-5A5,5,0,0,1,18,19Z"/></svg>'],["destination-marker-front",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Z"/></svg>'],["smart-label-pin-back",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="25px" height="30px" viewBox="0 0 25 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Marker Pin</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-104.5%" y="-63.3%" width="309.1%" height="259.8%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="2" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-204.000000, -523.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <path stroke="#FFFFFF" stroke-width="1.5" d="M4.95868222,15.5191099 C4.09118889,14.6145045 3.08708286,13.4178617 1.94340415,11.9271041 C0.219570966,9.68012899 -0.75,7.4435468 -0.75,5.73529412 C-0.75,2.16043095 2.04102866,-0.75 5.5,-0.75 C8.95897134,-0.75 11.75,2.16043095 11.75,5.73529412 C11.75,7.44173178 10.7794284,9.68143336 9.05659585,11.9271041 C7.91291714,13.4178617 6.90881111,14.6145045 6.04131778,15.5191099 L5.5,16.0835856 L4.95868222,15.5191099 Z" fill="#FFFFFF" fill-rule="evenodd"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n'],["smart-label-pin-front",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="27px" viewBox="0 0 23 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Oval Copy 25</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-90.9%" y="-53.3%" width="281.8%" height="236.1%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="0.5" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-205.000000, -524.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n'],["smart-label-circle-back",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <defs>\n      <filter id="f3" x="-50%" y="-50%" width="200%" height="200%">\n        <feMorphology radius="3" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n        <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n        <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n        <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n        <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.4 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n      </filter>\n    </defs>\n    <circle cx="50" cy="50" r="40" fill="white" filter="url(#f3)"/>\n    <circle cx="50" cy="50" r="40" fill="white"/>\n</svg>\n'],["smart-label-circle-front",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <circle cx="50" cy="50" r="30" />\n</svg>\n']]),ya=(I("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return P.def(E(this,"Set"),t=0===t?0:t,t)}},P),function(t,e,n){this.touch=t,this.camera=e,this.cameraPlane=n,this.viewCoordinate={x:t.x,y:t.y},this.camera.updateMatrixWorld(),this.camera.updateMatrix(),this.snapHolderMatrix=this.camera.matrixWorld.clone(),this.snapCamera=this.camera.clone(),this.snapshotCameraState=function(){this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraPosition=this.camera.position;var t=new i.Vector3(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster=this.raycaster||new i.Raycaster,this.raycaster.setFromCamera(t,this.snapCamera);var e=this.raycaster.intersectObject(this.cameraPlane,!1);this.worldCoordinate=e&&e[0]&&e[0].point,this.snapshotted=!0},this.updateAnchorState=function(t,e){this.camera=t,this.snapCamera=t.clone(),this.snapHolderMatrix=t.matrixWorld.clone(),this.updateViewCoordinate(e),this.snapshotCameraState()},this.updateViewCoordinate=function(t){this.viewCoordinate={x:t.x,y:t.y}},this.reUnproject=function(){var t=new i.Vector3(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster.setFromCamera(t,this.snapCamera);var e=this.raycaster.intersectObject(this.cameraPlane,!1)[0];if(e)return e.point},this.snapshotCameraState()});function ba(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function _a(t,e){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function wa(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}var xa=function(t,e){this.input1=t,this.input2=e,this.lastAngle=ba(t,e),this.lastDistance=_a(t,e),this.first=t,this.second=e,this.update=function(t,e){var n=_a(t,e);this.input1=t,this.input2=e;var r=ba(t,e);this.lastAngle=r,this.lastDistance=n,this.first=wa(this.first,t),this.second=wa(this.second,e)}},Ma=n(15),Ea="animated",Sa="always_on_top",Aa="all",Ta="tween",qa="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",Pa="varying vec2 vUv;uniform sampler2D staticSceneColorTexture;uniform sampler2D staticSceneDepthTexture;uniform sampler2D animatedSceneColorTexture;uniform sampler2D animatedSceneDepthTexture;uniform sampler2D alwaysOnTopSceneColorTexture;vec4 alphaBlend(vec4 background,vec4 foreground){vec3 resultColor=(foreground.rgb*foreground.a+background.rgb*background.a*(1.0-foreground.a));float resultAlpha=foreground.a+background.a*(1.0-foreground.a);return vec4(resultColor/resultAlpha,resultAlpha);}vec4 alphaBlendPremultipliedAlpha(vec4 background,vec4 foreground){return foreground+(background*(1.0-foreground.a));}void main(){float staticDepth=texture2D(staticSceneDepthTexture,vUv).r;float animatedDepth=texture2D(animatedSceneDepthTexture,vUv).r;vec4 staticColor=texture2D(staticSceneColorTexture,vUv).rgba;vec4 animatedColor=texture2D(animatedSceneColorTexture,vUv).rgba;if(staticDepth<animatedDepth){animatedColor.a*=0.0;}vec4 lowerColor=alphaBlend(staticColor,animatedColor);vec4 alwaysOnTopColor=texture2D(alwaysOnTopSceneColorTexture,vUv).rgba;gl_FragColor=alphaBlendPremultipliedAlpha(lowerColor,alwaysOnTopColor);}",La=function(){function t(e){var n=this;Object(r.t)(this,t),e.multiBufferRendering=e.multiBufferRendering||!1,this.contextLost=!1,this.implementation=e.multiBufferRendering?new Ca(e):new Oa(e),this.onWebGLContextCreationError=e.onWebGLContextCreationError,this.onWebGLContextLost=e.onWebGLContextLost,this.onWebGLContextRestored=e.onWebGLContextRestored,this.webGLContextCreationErrorListener=this.domElement().addEventListener("webglcontextcreationerror",(function(t){return n.reportWebGlContextCreationError(t)})),this.webGLContextLostListener=this.domElement().addEventListener("webglcontextlost",(function(t){return n.reportWebGlContextLost(t)})),this.webGLContextRestoredListener=this.domElement().addEventListener("webglcontextrestored",(function(t){return n.reportWebGLContextRestored(t)}));var o=e.backgroundColor;null==o&&(o=new i.Color(16777215));var a=e.backgroundAlpha;null==a&&(a=1),this.shouldConsiderAlpha=e.alpha||!1,this.antialias=e.antialias||!1,this.setBackgroundColor(o,a)}return Object(r.s)(t,[{key:"destroy",value:function(){this.domElement().removeEventListener("webglcontextcreationerror",this.webGLContextCreationErrorListener),this.domElement().removeEventListener("webglcontextlost",this.webGLContextLostListener),this.domElement().removeEventListener("webglcontextrestored",this.webGLContextRestoredListener),this.implementation.destroy()}},{key:"render",value:function(t,e,n,r){this.implementation.render(t,e,n,r)}},{key:"getMaxAnisotropy",value:function(){return this.implementation.renderer.capabilities.getMaxAnisotropy()}},{key:"getBufferSize",value:function(){return this.implementation.renderer.getSize(new i.Vector2)}},{key:"getContext",value:function(){return this.implementation.renderer.getContext()}},{key:"preloadTexture",value:function(t){this.implementation.renderer.setTexture2D(t,0)}},{key:"setBufferSize",value:function(t,e){this.implementation.setBufferSize(t,e)}},{key:"setBackgroundColor",value:function(t,e){this.shouldConsiderAlpha||(e=1),e=(e=void 0!==e?+e:1)>=0&&e<=1?e:1,this.implementation.setBackgroundColor(t,e)}},{key:"setMapboxOutdoorContext",value:function(t){this.implementation.setMapboxOutdoorContext(t)}},{key:"domElement",value:function(){return this.implementation.renderer.domElement}},{key:"isAvailable",value:function(){return null!=this.implementation.renderer&&!this.contextLost}},{key:"disposeOfRenderLists",value:function(){this.implementation.renderer.renderLists.dispose()}},{key:"reportWebGlContextCreationError",value:function(t){this.onWebGLContextCreationError&&this.onWebGLContextCreationError(t)}},{key:"reportWebGlContextLost",value:function(t){t.preventDefault(),this.onWebGLContextLost&&this.onWebGLContextLost(t),this.contextLost=!0}},{key:"reportWebGLContextRestored",value:function(){this.onWebGLContextRestored&&this.onWebGLContextRestored(),this.contextLost=!1}},{key:"backgroundColor",get:function(){return this.implementation.backgroundColor}},{key:"backgroundAlpha",get:function(){return this.implementation.backgroundAlpha}}]),t}(),Oa=function(){function t(e){Object(r.t)(this,t);try{this.renderer=new i.WebGLRenderer({alpha:e.alpha||!1,antialias:e.antialias,preserveDrawingBuffer:!0})}catch(t){e.onWebGLRendererError&&e.onWebGLRendererError(t)}this.backgroundColor=new i.Color,this.backgroundAlpha=1,this.mapboxOutdoorContext=null}return Object(r.s)(t,[{key:"destroy",value:function(){this.renderer.dispose()}},{key:"render",value:function(t,e,n,r){r.layers.enable(0),r.layers.enable(1),r.layers.enable(2),this.renderer.autoClear=!1,this.renderer.setClearColor(this.backgroundColor,this.backgroundAlpha),this.renderer.setRenderTarget(e),this.renderer.clear(),this.renderer.render(n,r),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new i.Vector2),camera:r}),this.renderer.state.reset())}},{key:"setBufferSize",value:function(t,e){this.renderer.setSize(t,e,!1)}},{key:"setBackgroundColor",value:function(t,e){this.backgroundColor=t,this.backgroundAlpha=e}},{key:"setMapboxOutdoorContext",value:function(t){this.mapboxOutdoorContext=t}}]),t}(),Ca=function(){function t(e){Object(r.t)(this,t);try{this.renderer=new i.WebGLRenderer({alpha:e.alpha||!1,antialias:!1,preserveDrawingBuffer:!0})}catch(t){e.onWebGLRendererError&&e.onWebGLRendererError(t)}this.backgroundColor=new i.Color,this.backgroundAlpha=1,this.mapboxOutdoorContext=null,this.staticSceneRenderTarget=new i.WebGLRenderTarget(this.renderer.width,this.renderer.height),this.staticSceneRenderTarget.texture.format=i.RGBAFormat,this.staticSceneRenderTarget.texture.minFilter=i.NearestFilter,this.staticSceneRenderTarget.texture.magFilter=i.NearestFilter,this.staticSceneRenderTarget.texture.generateMipmaps=!1,this.staticSceneRenderTarget.stencilBuffer=!0,this.staticSceneRenderTarget.depthBuffer=!0,this.staticSceneRenderTarget.depthTexture=new i.DepthTexture,this.staticSceneRenderTarget.depthTexture.type=i.UnsignedIntType,this.staticSceneRenderTarget.depthTexture.format=i.DepthStencilFormat,this.animatedSceneRenderTarget=new i.WebGLRenderTarget(this.renderer.width,this.renderer.height),this.animatedSceneRenderTarget.texture.format=i.RGBAFormat,this.animatedSceneRenderTarget.stencilBuffer=!0,this.animatedSceneRenderTarget.texture.minFilter=i.NearestFilter,this.animatedSceneRenderTarget.texture.magFilter=i.NearestFilter,this.animatedSceneRenderTarget.texture.generateMipmaps=!1,this.animatedSceneRenderTarget.stencilBuffer=!0,this.animatedSceneRenderTarget.depthBuffer=!0,this.animatedSceneRenderTarget.depthTexture=new i.DepthTexture,this.animatedSceneRenderTarget.depthTexture.type=i.UnsignedIntType,this.animatedSceneRenderTarget.depthTexture.format=i.DepthStencilFormat,this.alwaysOnTopSceneRenderTarget=new i.WebGLRenderTarget(this.renderer.width,this.renderer.height),this.alwaysOnTopSceneRenderTarget.texture.format=i.RGBAFormat,this.alwaysOnTopSceneRenderTarget.texture.minFilter=i.NearestFilter,this.alwaysOnTopSceneRenderTarget.texture.magFilter=i.NearestFilter,this.alwaysOnTopSceneRenderTarget.texture.generateMipmaps=!1,this.alwaysOnTopSceneRenderTarget.stencilBuffer=!0,this.alwaysOnTopSceneRenderTarget.depthBuffer=!0,this.alwaysOnTopSceneRenderTarget.depthTexture=new i.DepthTexture,this.alwaysOnTopSceneRenderTarget.depthTexture.type=i.UnsignedIntType,this.alwaysOnTopSceneRenderTarget.depthTexture.format=i.DepthStencilFormat,this.compositeUniforms={staticSceneColorTexture:{type:"t",value:this.staticSceneRenderTarget.texture},staticSceneDepthTexture:{type:"t",value:this.staticSceneRenderTarget.depthTexture},animatedSceneColorTexture:{type:"t",value:this.animatedSceneRenderTarget.texture},animatedSceneDepthTexture:{type:"t",value:this.animatedSceneRenderTarget.depthTexture},alwaysOnTopSceneColorTexture:{type:"t",value:this.alwaysOnTopSceneRenderTarget.texture}},this.compositeCamera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.compositeMaterial=new i.ShaderMaterial({uniforms:this.compositeUniforms,vertexShader:qa,fragmentShader:Pa}),this.compositeFullscreenQuad=new i.Mesh(new i.PlaneBufferGeometry(2,2),this.compositeMaterial),this.compositeScene=new i.Scene,this.compositeScene.add(this.compositeFullscreenQuad)}return Object(r.s)(t,[{key:"destroy",value:function(){this.staticSceneRenderTarget.dispose(),this.animatedSceneRenderTarget.dispose(),this.alwaysOnTopSceneRenderTarget.dispose(),this.renderer.dispose()}},{key:"renderComposite",value:function(t){this.renderer.setRenderTarget(t),this.renderer.clear(),this.renderer.getContext().depthMask(!1),this.renderer.render(this.compositeScene,this.compositeCamera),this.renderer.getContext().depthMask(!0)}},{key:"renderToAnimatedBuffer",value:function(t,e){e.layers.set(1),this.renderer.setClearColor(new i.Color,0),this.renderer.setRenderTarget(this.animatedSceneRenderTarget),this.renderer.clear(),this.renderer.render(t,e)}},{key:"renderAnimated",value:function(t,e,n){this.renderToAnimatedBuffer(e,n),this.renderComposite(t)}},{key:"renderToAlwaysOnTopBuffer",value:function(t,e){e.layers.set(2),this.renderer.setClearColor(new i.Color,0),this.renderer.setRenderTarget(this.alwaysOnTopSceneRenderTarget),this.renderer.clear(),this.renderer.render(t,e)}},{key:"renderAlwaysOnTop",value:function(t,e,n){this.renderToAlwaysOnTopBuffer(e,n),this.renderComposite(t)}},{key:"renderAll",value:function(t,e,n){n.layers.set(0),this.renderer.autoClear=!1,this.renderer.setClearColor(this.backgroundColor,this.backgroundAlpha),this.renderer.setRenderTarget(this.staticSceneRenderTarget),this.renderer.clear(),this.renderer.render(e,n),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new i.Vector2),camera:n,renderTarget:this.staticSceneRenderTarget}),this.renderer.state.reset()),this.renderToAnimatedBuffer(e,n),this.renderToAlwaysOnTopBuffer(e,n),this.renderComposite(t)}},{key:"render",value:function(t,e,n,r){t===Ea?this.renderAnimated(e,n,r):t===Sa?this.renderAlwaysOnTop(e,n,r):t===Aa?this.renderAll(e,n,r):console.error("Renderer.render called with invalid renderTask")}},{key:"setBufferSize",value:function(t,e){this.renderer.setSize(t,e,!1),this.staticSceneRenderTarget.setSize(t,e),this.animatedSceneRenderTarget.setSize(t,e),this.alwaysOnTopSceneRenderTarget.setSize(t,e)}},{key:"setBackgroundColor",value:function(t,e){this.backgroundColor=t,this.backgroundAlpha=e}},{key:"setMapboxOutdoorContext",value:function(t){this.mapboxOutdoorContext=t}}]),t}(),Ia=r.g.isFinite;Object(r.a)(r.a.S,"Number",{isFinite:function(t){return"number"==typeof t&&Ia(t)}});var Ra=5,ka=4,Na=3,Ba=2,Da=1,ja=0,Fa=-1,za=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.t)(this,t),this._callback=e.callback,this._frameCount=null!=e.frameCount?e.frameCount:1,this._ordering=null!=e.ordering?e.ordering:0,this._supersededBy=null!=e.supersededBy?new Set(e.supersededBy):new Set,this.name=e.name,this.userdata=e.userdata,this._remainingFrameCount=this._frameCount,this._lastFrameTime=0}return Object(r.s)(t,[{key:"getLastFrameTime",value:function(){return this._lastFrameTime}}]),t}(),Ua=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.t)(this,t),null!=e.group&&null!=e.priority)throw new Error("cannot specify task priority individually within group");if(null!=e.group&&null!=e.postponeOnAdd)throw new Error("cannot specify task postpone individually within group");this._callback=e.callback,this._group=null!=e.group?e.group:null,this._priority=null!=e.priority?e.priority:0,this._postponed=null!=e.postponeOnAdd&&e.postponeOnAdd,this.name=e.name,this.userdata=e.userdata,this._complete=!1,this._scheduled=!1,this._cancelled=!1,this._lastFrameTime=0}return Object(r.s)(t,[{key:"isComplete",value:function(){return this._complete}},{key:"getLastFrameTime",value:function(){return this._lastFrameTime}}]),t}(),Va=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.t)(this,t),this._onComplete=null!=e.onComplete?e.onComplete:function(){},this._priority=null!=e.priority?e.priority:0,this._postponed=null!=e.postponeOnAdd&&e.postponeOnAdd,this.name=e.name,this.userdata=e.userdata,this._tasks=new Set,this._scheduledTasks=new Set,this._scheduled=!1,this._cancelled=!1}return Object(r.s)(t,[{key:"isComplete",value:function(){return 0===this._scheduledTasks.size}},{key:"getTasks",value:function(){return Array.from(this._tasks.values())}},{key:"clear",value:function(){this._tasks.clear(),this._scheduledTasks.clear()}},{key:"_popTask",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._scheduledTasks[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;return this._scheduledTasks.delete(o),o}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}]),t}(),Ga=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.t)(this,t),this._maxMillisecondsPerFrame=null!=e.maxMillisecondsPerFrame?e.maxMillisecondsPerFrame:32,this._time=null}return Object(r.s)(t,[{key:"beginFrame",value:function(){this._time=performance.now()+this._maxMillisecondsPerFrame}},{key:"hasTimeRemaining",value:function(){return performance.now()<=this._time}}]),t}(),Ha=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.t)(this,t),this._timer=null!=e.timer?e.timer:new Ga,this._performance=null!=e.performance&&e.performance,this._scheduledUpdatesByOrdering=new Wa,this._scheduledTasksByPriority=new Wa,this._postponedTasks=new Set,this._requestAnimationFrameHandle=null,this._updatesToRunThisFrame=[],this._lastFrameTime=0,this._updatesRunLastFrame=new Set,this.update=this.update.bind(this)}return Object(r.s)(t,[{key:"clear",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._scheduledTasksByPriority.values()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value._cancelled=!0}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var o=!0,a=!1,s=void 0;try{for(var u,l=this._postponedTasks.values()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)u.value._cancelled=!0}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}this._scheduledUpdatesByOrdering=new Wa,this._scheduledTasksByPriority=new Wa,this._postponedTasks=new Set,this._lastFrameTime=0,this._updatesRunLastFrame.clear()}},{key:"destroy",value:function(){this.clear()}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){null==this._requestAnimationFrameHandle&&(this._requestAnimationFrameHandle=requestAnimationFrame(this.update))}))},{key:"update",value:function(t){var e;this._timer.beginFrame(),this._performance&&(e=performance.now());for(var n=this._scheduledUpdatesByOrdering.keys(),r=n.length-1;r>=0;--r){var i=n[r],o=!0,a=!1,s=void 0;try{for(var u,l=this._scheduledUpdatesByOrdering.get(i).values()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;this._updatesToRunThisFrame.push(c)}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}}var h=!0,f=!1,d=void 0;try{for(var p,m=this._updatesToRunThisFrame[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var v=p.value;--v._remainingFrameCount,v._remainingFrameCount<=0&&this._scheduledUpdatesByOrdering.delete(v._ordering,v),v._superseded=!1;var g=!0,y=!1,b=void 0;try{for(var _,w=this._updatesToRunThisFrame[Symbol.iterator]();!(g=(_=w.next()).done);g=!0){var x=_.value;v._supersededBy.has(x)&&(v._superseded=!0)}}catch(t){y=!0,b=t}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}}}catch(t){f=!0,d=t}finally{try{h||null==m.return||m.return()}finally{if(f)throw d}}for(var M=0;M<this._updatesToRunThisFrame.length;++M)this._updatesToRunThisFrame[M]._superseded&&(this._updatesToRunThisFrame.splice(M,1),--M);var E=!0,S=!1,A=void 0;try{for(var T,q=this._updatesToRunThisFrame[Symbol.iterator]();!(E=(T=q.next()).done);E=!0){var P=T.value,L=void 0;this._performance&&(L=performance.now()),P._callback(t),this._performance&&(P._lastFrameTime=performance.now()-L)}}catch(t){S=!0,A=t}finally{try{E||null==q.return||q.return()}finally{if(S)throw A}}this._updatesRunLastFrame.clear();var O=!0,C=!1,I=void 0;try{for(var R,k=this._updatesToRunThisFrame[Symbol.iterator]();!(O=(R=k.next()).done);O=!0){var N=R.value;this._updatesRunLastFrame.add(N)}}catch(t){C=!0,I=t}finally{try{O||null==k.return||k.return()}finally{if(C)throw I}}if(this._updatesToRunThisFrame.splice(0,this._updatesToRunThisFrame.length),this._scheduledTasksByPriority.size>0)do{this._executeOneTask(t)}while(this._timer.hasTimeRemaining()&&this._scheduledTasksByPriority.size>0);this._performance&&(this._lastFrameTime=performance.now()-e),this._requestAnimationFrameHandle=null,(this._scheduledUpdatesByOrdering.size>0||this._scheduledTasksByPriority.size>0)&&this.requestAnimationFrame()}},{key:"flushTasks",value:function(){for(;this._scheduledTasksByPriority.size>0;)this._executeOneTask(performance.now())}},{key:"getLastFrameTime",value:function(){return this._lastFrameTime}},{key:"getUpdatesRunLastFrame",value:function(){return this._updatesRunLastFrame}},{key:"_executeOneTask",value:function(t){var e,n=this._scheduledTasksByPriority.popFromMaxKey(),r=null;console.assert(void 0!==n),Object.getPrototypeOf(n)===Va.prototype&&(n=(r=n)._popTask()),console.assert(void 0!==n),console.assert(Object.getPrototypeOf(n)===Ua.prototype),this._performance&&(e=performance.now()),n._callback(t),n._complete=!0,this._performance&&(n._lastFrameTime=performance.now()-e),null!=r&&(r.isComplete()?(r.clear(),r._onComplete()):this._scheduledTasksByPriority.insert(r._priority,r))}},{key:"scheduleUpdate",value:function(t){t._remainingFrameCount=t._frameCount,this._scheduledUpdatesByOrdering.insert(t._ordering,t),this.requestAnimationFrame()}},{key:"scheduleTask",value:function(t){if(Object.getPrototypeOf(t)===Va)throw new Error("frame task groups are automatically scheduled when a task is added to them and cannot be manually scheduled: ",t.name);if(t._scheduled)throw new Error("cannot schedule already scheduled task: ",t.name);if(t._cancelled)throw new Error("cannot schedule cancelled task: ",t.name);var e=t;null!=t._group&&(t._group._tasks.add(t),t._group._scheduledTasks.add(t),e=t._group),e._postponed?this._postponedTasks.add(e):this._scheduledTasksByPriority.insert(e._priority,e),t._scheduled=!0,e._scheduled=!0,this.requestAnimationFrame()}},{key:"cancelUpdate",value:function(t){this._scheduledUpdatesByOrdering.delete(t._ordering,t)}},{key:"cancelTask",value:function(t){if(!t._scheduled)throw new Error("cannot cancel task that has not been scheduled: "+t.name);if(t._cancelled)throw new Error("cannot cancel task that has already been cancelled: "+t.name);if(null!=t._group){var e=t._group.isComplete();t._group._tasks.delete(t),t._group._scheduledTasks.delete(t),t._group.isComplete()&&(this._scheduledTasksByPriority.delete(t._group._priority,t._group),e||t._group._onComplete())}else this._scheduledTasksByPriority.delete(t._priority,t),this._postponedTasks.delete(t);Object.getPrototypeOf(t)===Ua.prototype?t._cancelled=!0:t.clear()}},{key:"postponeTask",value:function(t){if(null!=t._group)throw new Error("cannot postpone individual tasks in group: "+t.name);if(t._cancelled)throw new Error("cannot postpone cancelled task: "+t.name);if(!t._postponed){if(Object.getPrototypeOf(t)===Ua.prototype){if(t._complete)return;if(!t._scheduled)throw new Error("cannot postpone task that has not been scheduled: "+t.name)}this._scheduledTasksByPriority.delete(t._priority,t),Object.getPrototypeOf(t)!==Ua.prototype&&t.isComplete()||this._postponedTasks.add(t),t._postponed=!0}}},{key:"resumeTask",value:function(t){if(null!=t._group)throw new Error("cannot resume individual tasks in groups");if(t._cancelled)throw new Error("cannot resume cancelled task");if(t._postponed){if(Object.getPrototypeOf(t)===Ua.prototype){if(t._complete)return;if(!t._scheduled)throw new Error("cannot resume unscheduled task")}this._postponedTasks.delete(t),Object.getPrototypeOf(t)!==Ua.prototype&&t.isComplete()||this._scheduledTasksByPriority.insert(t._priority,t),t._postponed=!1,this.requestAnimationFrame()}}},{key:"setTaskPriority",value:function(t,e){if(Object.getPrototypeOf(t)===Ua.prototype&&!t._scheduled)throw new Error("task must be scheduled to be reprioritized");this._scheduledTasksByPriority.has(t._priority,t)&&(this._scheduledTasksByPriority.delete(t._priority,t),this._scheduledTasksByPriority.insert(e,t)),t._priority=e}}]),t}(),Wa=function(){function t(){Object(r.t)(this,t),this._map=new Map,this._size=0,this._sortedKeys=[]}return Object(r.s)(t,[{key:"has",value:function(t,e){return null!=this._map.get(t)&&this._map.get(t).has(e)}},{key:"get",value:function(t){return this._map.get(t)}},{key:"insert",value:function(t,e){if(console.assert("number"==typeof t&&Number.isFinite(t)),null==this._map.get(t)){this._map.set(t,new Set);for(var n=0;n<=this._sortedKeys.length;++n)if(n===this._sortedKeys.length||t<this._sortedKeys[n]){this._sortedKeys.splice(n,0,t);break}}this._map.get(t).has(e)||(this._map.get(t).add(e),++this._size)}},{key:"delete",value:function(t,e){null!=this._map.get(t)&&this._map.get(t).has(e)&&(this._map.get(t).delete(e),--this._size,0===this._map.get(t).size&&(this._map.delete(t),this._sortedKeys.splice(this._sortedKeys.indexOf(t),1)))}},{key:"pop",value:function(t){if(null!=this._map.get(t)){var e,n=!0,r=!1,i=void 0;try{for(var o,a=this._map.get(t).values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){e=o.value,this._map.get(t).delete(e),--this._size;break}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return 0===this._map.get(t).size&&(this._map.delete(t),this._sortedKeys.splice(this._sortedKeys.indexOf(t),1)),e}}},{key:"popFromMaxKey",value:function(){if(this._sortedKeys.length>0)return this.pop(this._sortedKeys[this._sortedKeys.length-1])}},{key:"values",value:function(){var t,e=this,n=this._map.keys(),i=null,o=(Object(r.u)(t={},Symbol.iterator,(function(){return o})),Object(r.u)(t,"next",(function(){if(null==i){var t=n.next();if(t.done)return t;i=e._map.get(t.value).values()}for(var r=i.next();r.done;){var o=n.next();if(o.done)return o;r=(i=e._map.get(o.value).values()).next()}return r})),t);return o}},{key:"keys",value:function(){return this._sortedKeys}},{key:"size",get:function(){var t=0,e=!0,n=!1,r=void 0;try{for(var i,o=this._map.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)t+=i.value.size}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return console.assert(t===this._size),t}}]),t}(),Ya=function(t,e,n){var r=this;this.type="MapView",this.controls=null,this.colors={defaultHover2D:13421772,select:5022204,text:0,path:16745292,pathPulse:16777215,textSelect:16777215},this.venue=e,this.container=t,this.currentMap=null,this.focusZoomFactor=3,this.setMap=function(t){},this.addMap=function(){},this.removeMap=function(){},this.focusOnPolygon=function(t,e,n,r){},this.focusOnPath=function(t,e,n,r,i){},this.focusOn=function(t){},this.showEntireMap=function(t){},this.setPadding=function(t){},this.getZoomLevelForPolygon=function(t){},this.getZoomLevelForCurrentMap=function(){},this.resetCamera=function(){},this.getNorth=function(){return 0},this.lockNorth=function(t,e){},this.unlockNorth=function(t){},this.setPolygonColor=function(t,e,n){},this.clearPolygonColor=function(t){},this.clearAllPolygonColors=function(){},this.addInteractivePolygon=function(t){},this.addInteractivePolygonsForAllLocations=function(t){},this.removeInteractivePolygon=function(t){},this.onPolygonClicked=function(t){},this.onNothingClicked=function(){},this.createMarker=function(t,e,n,r,i){},this.addMarker=function(t){},this.removeMarker=function(t){},this.removeAllMarkers=function(){},this.convertTo3DMapPosition=function(t){},this.getPositionPolygon=function(t){},this.getPositionNode=function(t){},this.updateClosedStateForPolygon=function(t){},this.openAllPolygons=function(){},this.labelPolygon=function(t){},this.labelAllLocations=function(t){},this.removeAllLabels=function(){},this.createTooltip=function(t){},this.removeTooltip=function(t){},this.enableImageFlippingForAllLocations=function(t){},this.enableImageFlippingForPolygon=function(t){},this.createFont=function(t){},this.getPathLength=function(t){for(var e=0,n=t[0].map,r=0,i=t.length-1;r<i;++r){var o=t[r],a=t[r+1];a.map==n?e+=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)):n=a.map}return e},this.drawPath=function(t,e){},this.drawPathSegment=function(t,e,n){},this.removePathSegment=function(t){},this.removeAllPaths=function(){},this.setBackgroundColor=function(t,e){},this.tryRendering=function(){},this.resetState=function(){this.removeAllPaths(),this.removeAllMarkers(),this.removeAllLabels(),this.removeAllMaps()},this.getPrimaryLocationForPolygon=function(t){if("string"==typeof t){if(null==r.venue||!Array.isArray(r.venue.polygons))return null;t=r.venue.polygons.find((function(e){return e.id==t}))}var e=null;if(null!=t&&null!=t.locations&&t.locations.length>0){e=t.locations[0];for(var n=0,i=t.locations.length;n<i;n++){for(var o=t.locations[n];null!=o.parent;)(o=o.parent).polygons.includes(t)&&(e=o);if(null==o.parent&&o.polygons.includes(t))return o}}return e}};Ya.createFont=function(t){};var Xa=function(t){var e,n,r=this,i=document.createElement("div");i.style.display="none!important",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",this.hovering=!1,t.appendChild(i),this.show=function(t){r.hovering||r.setPosition(e,n),r.hovering=!0,i.style.removeProperty("display"),i.textContent=t.toString(),i.className=t.hoverLabelClass},this.hide=function(){r.hovering&&(r.hovering=!1,i.style.setProperty("display","none","important"),i.textContent="")},this.setZIndex=function(t){i.style.zIndex=t},this.setPosition=function(o,a){e=o,n=a,r.hovering&&(a-i.clientHeight>0?(a-=i.clientHeight,o+i.clientWidth>t.clientWidth&&(o-=i.clientWidth)):o=o-i.clientWidth-10,i.style.transform="translate("+o+"px, "+a+"px)")},this.destroy=function(){t.removeChild(i)}};Xa.MODES={NONE:1,NO_TEXT_LABEL_ONLY:2,ALL:3};var Za=function(t){t.stopPropagation()},Ja=function(t,e){Object.assign(this,r.v.prototype);var n,i=this,o=document.createElement("div");i.div=o,i._mMapId=e.map?e.map.id||e.map:t.currentMap,i._mMarkerBuffer=e.markerBuffer||2;var a=null!=e.collisionRank?e.collisionRank:999;if(i._mLockToAnchor=1==e.lockToAnchor,i._mIgnoreCollisions=1==e.ignoreCollisions,i._mRotateWithCamera=1==e.rotateWithCamera,i._mIntitialRotation=e.rotation?e.rotation:0,i.m_translateX=0,i.m_translateY=0,i.m_rotateZ=0,i.userData=e.userData,o.className=e.className||e.class,o.innerHTML=e.html,e.position&&(o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.willChange="transform",e.polygon)){var s=t.getPositionPolygon(e.polygon);s&&(e.position.z=s.z)}o.addEventListener("mousedown",Za),i._oldPointerEvents=o.style.pointerEvents,i._mPosition=e.position,i._mOriginalPosition=e.position,i._mProjectedPosition=[0,0],this.destroy=function(){for(var t in this.publish("destroy"),o.removeEventListener("mousedown",Za),this._subscribers)for(var e=this._subscribers[t],n=e.length-1;n>=0;--n)i.off(t,e[n]);this.__alive=!1},this.isColliding=function(){return!i._mIgnoreCollisions&&i._mShadowElement._mNumCollisions>0},this.show=function(){1==i._mHidden&&(i._mHidden=!1,i._mAnchor&&Go.vec2.copy(i._mShadowElement.position,i._mAnchor.position),o.style.opacity=i._oldOpacity,o.style.pointerEvents=i._oldPointerEvents,null!=n&&n.enable(),this.publish("show"))},this.hide=function(){1!=i._mHidden&&(i._mHidden=!0,i._oldOpacity=o.style.opacity,o.style.opacity=0,i._oldPointerEvents=o.style.pointerEvents,o.style.pointerEvents="none",null!=n&&n.disable(),this.publish("hide"))},this.setCollisionAreas=function(t){null==n?((n=e.collisionEngine.add({rank:a,hitAreas:t,userData:i.userData})).on("collision",i.publishCollisions),n.update(i.m_translateX,i.m_translateY)):n.updateHitAreas(t)},this.setPosition=function(e){e&&e.x&&e.y&&(i._mPosition=e,t.tryRendering())},this.setTransform=function(t){i.m_translateX=t.x,i.m_translateY=t.y,i.m_rotateZ=t.rotateZ;var e="translate("+t.x+"px, "+t.y+"px) rotate("+t.rotateZ+"rad)";null!=n&&n.update(i.m_translateX,i.m_translateY),i.div.style.transform=e,i.publish("update-position",{x:t.x,y:t.y,rotateZ:t.rotateZ})},this.publishCollisions=function(t){i.publish("collision",t)},this.addEventListener=function(t,e){i.div.addEventListener(t,e)},this.isVisible=function(){return!i._mHidden},this.getMap=function(e){return"id"===e?i._mMapId:t.venue.maps.find((function(t){return t.id===i._mMapId}))}},Ka=Math.min,Qa=[].push,$a=!Object(r.cb)((function(){RegExp(4294967295,"y")}));Object(r.w)("split",2,(function(t,e,n,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!m(t))return n.call(i,t,e);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=void 0===e?4294967295:e>>>0,f=new RegExp(t.source,l+"g");(o=r.A.call(f,i))&&!((a=f.lastIndex)>c&&(u.push(i.slice(c,o.index)),o.length>1&&o.index<i.length&&Qa.apply(u,o.slice(1)),s=o[0].length,c=a,u.length>=h));)f.lastIndex===o.index&&f.lastIndex++;return c===i.length?!s&&f.test("")||u.push(""):u.push(i.slice(c)),u.length>h?u.slice(0,h):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,i,r):o.call(String(i),n,r)},function(t,e){var a=i(o,t,this,e,o!==n);if(a.done)return a.value;var s=Object(r.eb)(t),u=String(this),l=Object(r.x)(s,RegExp),c=s.unicode,h=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+($a?"y":"g"),f=new l($a?s:"^(?:"+s.source+")",h),d=void 0===e?4294967295:e>>>0;if(0===d)return[];if(0===u.length)return null===Object(r.y)(f,u)?[u]:[];for(var p=0,m=0,v=[];m<u.length;){f.lastIndex=$a?m:0;var g,y=Object(r.y)(f,$a?u:u.slice(m));if(null===y||(g=Ka(Object(r.pb)(f.lastIndex+($a?0:m)),u.length))===p)m=Object(r.z)(u,m,c);else{if(v.push(u.slice(p,m)),v.length===d)return v;for(var b=1;b<=y.length-1;b++)if(v.push(y[b]),v.length===d)return v;m=p=g}}return v.push(u.slice(p)),v}]}));var ts=2*Math.PI,es=Math.PI/2,ns=1.5*Math.PI,rs=function(t,e,n,r,o,a,s,u){var l=t.polygonId||sa(t.polygon,e.polygons),c=ua(t.polygon,e.polygons),h=n.getMapScale()||1,f=t.canvasBounds||c.canvasBounds,d=Number(t.height)||null,p=t.stateText?" ("+t.stateText+")":"",m=t.shortText||t.text,v=t.text,g=(t.margin||2)*h,y=(t.heightMargin||.5)*h,b=null==t.multiline||t.multiline,_=t.color||u.colors.text||0,w=(t.fontSize||12)/8,x=(t.size||w)*h,M=t.font||r,E=t.scaleMin||.25,S=t.scaleStep>0?t.scaleStep:.25,A=t.hoverLabelMode3D||Xa.MODES.ALL;this.hoverLabelClass=t.hoverLabelClass||"mMapviewHoverLabel",this.showHoverLabel=A==Xa.MODES.ALL||A==Xa.MODES.NO_TEXT_LABEL_ONLY;var T,q,P,L,O=A==Xa.MODES.ALL||A==Xa.MODES.NO_TEXT_LABEL_ONLY,C=this,I=!1,R=!1,k=0,N=!1;null==(P=s[_])&&(P=new i.MeshBasicMaterial({color:_}),s[_]=P),this.invalid=!1,this.message="",n.textObjects.push(C),this.create=function(){if(C.invalid=!0,C.showHoverLabel=A==Xa.MODES.ALL,!N){if(null==f)return C.invalid=!0,C.message="No Canvas Bounds. Can't draw text '"+m+"'",void(C.showHoverLabel=O);M instanceof i.Font==0&&(console.error("Invalid font for '"+m+"'. Make sure you provide a Mappedin.Font or Font object. Using default instead."),M=r);var t,e,a,s=[m+p,m],v=M.data.glyphs[" "].ha/(M.data.resolution/x),_=(M.data.ascender-M.data.descender)/(M.data.resolution/x);if(s.forEach((function(n){if(C.invalid){for(var r=(n=(n=n.replace(M._mInvalidCharacters,"")).trim()).split(" "),i=f.maxWidth-2*g,o=f.maxHeight-2*y,s=(1-E)/S,u=r.map((function(t){var e=t.split("");return{word:t,width:e.reduce((function(t,e){return M.data.glyphs[e].ha+t}),0)/(M.data.resolution/x)}})),l=0,c=0,h=u.length;c<h;c++){var d=u[c].width,p=Math.ceil((d-i)/(d*S));l=Math.max(p,l)}t:for(e=l;e<=s;e++){a=1-e*S;var m=u[0].width*a;t=[{text:u[0].word,scaledWidth:m}];for(var w=1;w<u.length;w++){var A=u[w],T=(A.width+v)*a;if(m+T<i)t[t.length-1].text+=" "+A.word,t[t.length-1].scaledWidth+=T,m+=T;else{if(!b)continue t;t[t.length-1].scaledWidth=m,m=A.width*a,t.push({text:A.word,scaledWidth:m})}}if(t.length*_*a<=o){C.invalid=!1;break}}}})),C.invalid)return C.message="Could not draw '"+m+"' on "+c.id+": Too small",void(C.showHoverLabel=O);M._cache||(M._cache={},M._cacheDefaultSize=x);var w=new i.Geometry,B=0,D=0;t.forEach((function(t){B=-t.scaledWidth/2,t.text.split("").forEach((function(t){M._cache[t]||(M._cache[t]=new i.ExtrudeGeometry(M.generateShapes(t,M._cacheDefaultSize),{curveSegments:1,bevelThickness:0,bevelSize:0,bevelEnabled:!1,amount:1/12*h}));var e=M._cache[t],n=a*(x/M._cacheDefaultSize);1!==n&&e.scale(n,n,1),e.translate(B,D,0),w.merge(e),e.translate(-B,-D,0),1!==n&&e.scale(1/n,1/n,1),B+=M.data.glyphs[t].ha/(M.data.resolution/x)*a})),D-=_*a})),w.center(),(L=new i.Mesh(w,P)).geometry.computeBoundingBox();var j=L.geometry.boundingBox;if((q=new i.Object3D).add(L),"left"==f.align?q.translateX((j.max.x-j.min.x)/2+g):"right"==f.align?q.translateX(-(j.max.x-j.min.x)/2-g):"center"==f.align&&q.translateX(f.maxWidth/2),(T=new i.Object3D).add(q),null==d)if(o[l]){var F=o[l];F.geometry.boundingBox||F.geometry.computeBoundingBox(),d=F.geometry.boundingBox.max.z}else d=0;var z=n.mapClass;T.translateX(f.x-z.width/2),T.translateY(-f.y+z.height/2),T.translateZ(d),k=-f.rotation*Math.PI/180,T.rotation.z=k,T.updateMatrix(),R&&(q.visible=!1),I=!0,C.flipIfNeeded(u.controls.getRotation()),n.add(T),u.tryRendering()}},this.flipIfNeeded=function(t){var e=(k-t)%ts;I&&(e>es&&e<ns||e<-es&&e>-ns)&&(k=(k+Math.PI)%ts,T.rotation.z=k,q.position.x=-q.position.x)},this.removeSelf=function(t){L&&L.destroy&&L.destroy(),q&&q.destroy&&q.destroy(),T&&T.destroy&&T.destroy(),I?t||(n.textObjects=n.textObjects.filter((function(t){return t!=C})),Object.keys(a).forEach((function(t){a[t]==C&&delete a[t]}))):N=!0},this.setColor=function(t){null==(P=s[t])&&(P=new i.MeshBasicMaterial({color:t}),s[t]=P),I&&(L.material=P,u.tryRendering())},this.hide=function(){I&&q?q.visible=!1:R=!0},this.show=function(){I&&q?q.visible=!0:R=!1},this.clearColor=function(){this.setColor(_)},this.toString=function(){return v}};function is(t){var e,n=t.type,r=t.direction,i=t.iconWidth,o=t.iconHeight,a=t.color,s=void 0===a?"white":a,u=t.scale,l=void 0===u?1:u;null!=r&&(e=ga.get("".concat(n,"-").concat(r))),null==e&&(e=ga.get(n)),null==e&&(e=ga.get("question-mark"));var c=i||14,h=o||14;return"number"==typeof i&&(c=i*l),"number"==typeof o&&(h=o*l),'<svg\n\t\t\theight="'.concat(c,'"\n\t\t\tviewBox="0 0 36 36"\n\t\t\twidth="').concat(h,'"\n\t\t>\n\t\t\t<g fill="').concat(s,'">\n\t\t\t\t').concat(e,"\n\t\t\t</g>\n\t\t</svg>")}function os(t){return t.map((function(t){return t.map})).reduce((function(t,e){return t.includes(e)?t:[].concat(Object(r.B)(t),[e])}),[])}function as(t){return 1!==os(t.path).length}function ss(t,e,n,r){var i=n.indexOf(n.find((function(e){return null!=e.id?e.id===t:e.node===t}))),o=n.indexOf(n.find((function(t){return null!=t.id?t.id===e:t.node===e}))),a=n.slice(i,o+1);return a.reduce((function(t,e,n){var r,i;n>0&&(t+=(r=e,i=a[n-1],Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2))));return t}),0)/r}function us(t,e){var n=e.filter((function(e){return e.map===t}));return{entry:n[0],exit:n[n.length-1]}}function ls(t,e){return null!=t.distance?function(t,e){var n=t.path,i=t.instructions.reduce((function(i,o,a){var s=t.instructions[a+1];if("TakeVortex"===o.action.type&&null!=s&&s.node.map!==o.node.map){var u=e.get(s.node.map).mapClass.elevation>e.get(o.node.map).mapClass.elevation?"up":"down";i.push(Object(r.r)({},o.node,{type:o.atLocation.type,vortex:!0,direction:u,exitMap:s.node.map,isEntrance:!1}));var l=n[n.indexOf(n.find((function(t){return t.id===o.node.id})))+1];i.push(Object(r.r)({},l,{type:o.atLocation.type,vortex:!0,direction:"up"===u?"down":"up",exitMap:o.node.map,isEntrance:!0}))}return i}),[]);return i.unshift(Object(r.r)({},t.path[0],{type:"departure"})),i.push(Object(r.r)({},t.path[t.path.length-1],{type:"destination"})),i}(t,e):function(t,e){var n,i,o=t.path.reduce((function(o,a,s){var u=t.path[s+1];if(null!=u&&!0===u.vortex&&u.map!==a.map){var l=e.get(u.map).mapClass.elevation>e.get(a.map).mapClass.elevation?"up":"down",c=t.directions.find((function(t){return t.node.node===a.node})),h=c.node;o.push({map:h.map,node:h.node,x:h.x,y:h.y,type:c.vortex.type,vortex:!0,direction:l,exitMap:u.map,isEntrance:!1}),n=c.vortex,i=h}else a.vortex&&(o.push(Object(r.r)({},a,{type:n.type,exitMap:i.map,isEntrance:!0,direction:"up"})),n=null);return o}),[]);return o.unshift(Object(r.r)({},t.path[0],{type:"departure"})),o.push(Object(r.r)({},t.path[t.path.length-1],{type:"destination"})),o}(t,e)}function cs(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.path,s=os(a),u=s[0],l=s[s.length-1],c=s.map((function(t){return e.get(t)})),h=ls(t,e),f=c.slice().sort((function(t,e){return t.mapClass.elevation-e.mapClass.elevation})),d=f[0],p=f[f.length-1];return c.reduce((function(e,s,f){if(s.id!==u&&s.id!==l){var m=us(s.id,h),v=ss(m.entry.node||m.entry.id,m.exit.node||m.exit.id,t.path,s.getMapScale());if(!function(t,e){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(a.value.map===e){if(1===n[e])return!0;n[e]=0}else 0===n[e]&&(n[e]=1)}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return!1}(a,s.id)&&!0===o&&m.entry.type===m.exit.type&&v<i&&s!=d&&s!=p){if(null==n){var g={connection:!0,maps:[s.id],elevation:s.mapClass.elevation};e.push(g),n=g}else n.maps.push(s.id);return e}}if(null!=r&&null!=n){n.maps.sort((function(t,e){return c.indexOf(e.id)-c.indexOf(t.id)}));var y=us(r.id,h),b=us(s.id,h);n.connectionNodes=[y.exit,b.entry]}return e.push(s.id),r=s,n=null,e}),[])}Object(r.a)(r.a.P,"Array",{fill:r.D}),Object(r.W)("fill");var hs={OPTIONAL_MINIMUM:0,OPTIONAL_MAXIMUM:1,MEDIUM:2,HIGH:3};function fs(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.h+t.y>e.y}var ds=Math.PI/180*55;function ps(t,e){return fs(e.boundingBox,t.boundingBox)}var ms=function(){function t(e){var n=e.width,i=e.height,o=e.steps,a=void 0===o?20:o,s=e.screenBuffer,u=void 0===s?150:s,l=e.offscreenCollider;Object(r.t)(this,t),this.rows=[],this.boundingBox={x:0,y:0,w:1/0,h:1/0},this.screenBuffer=u,this.width=n,this.height=i,this.steps=a,this.offscreenCollider=l,this.build(n,i,a),this.clear=this.clear.bind(this),this.insert=this.insert.bind(this),this._seenColliderCache=new Set}return Object(r.s)(t,[{key:"insert",value:function(t){for(var e in t.hitAreas){var n=t.hitAreas[e];n.cells.clear();for(var r=0;r<this.rows.length;r++)for(var i=this.rows[r],o=0;o<i.cols.length;o++){var a=i.cols[o];fs(a,n)&&(a.collisions.add(n),n.cells.add({row:r,col:o}))}}}},{key:"clear",value:function(){for(var t=0;t<this.rows.length;t++)for(var e=this.rows[t],n=0;n<e.cols.length;n++)e.cols[n].collisions.clear()}},{key:"build",value:function(){for(var t=this.width,e=this.height,n=this.steps,r=Math.abs(Math.max(e,t)/n),i=Math.abs(e/r),o=Math.abs(t/r),a=0;a<i;a++){var s={w:t,h:r,x:0,y:a*r,cols:[]};this.rows.push(s);for(var u=0;u<o;u++)s.cols.push({w:r,h:r,x:u*r,y:s.y,collisions:new Set})}this.boundingBox={x:-this.screenBuffer,y:-this.screenBuffer,w:this.width+2*this.screenBuffer,h:this.height+2*this.screenBuffer},this.screenBoundingBox={x:0,y:0,w:this.width,h:this.height}}},{key:"destroy",value:function(){this.clear(),this.rows=[]}},{key:"getCollisions",value:function(t){var e,n,r={};for(var i in t.hitAreas){var o=t.hitAreas[i];if(r[i]=[],!1!==o.enabled){n=o,(e=this.screenBoundingBox).x<n.x&&e.x+e.w>n.x+n.w&&e.y<n.y&&e.h+e.y>n.y+n.h||r[i].push({collider:this.offscreenCollider,hitArea:this.offscreenCollider.hitAreas.offscreen}),this._seenColliderCache.clear();var a=!0,s=!1,u=void 0;try{for(var l,c=o.cells[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value,f=h.row,d=h.col,p=this.rows[f].cols[d].collisions;if(p.size>0){var m=!0,v=!1,g=void 0;try{for(var y,b=p[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var _=y.value;_.collider!=t&&_.collider.enabled&&!this._seenColliderCache.has(_)&&fs(_,o)&&(this._seenColliderCache.add(_),r[i].push({collider:_.collider,hitArea:_}))}}catch(t){v=!0,g=t}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}}}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}}}return r}}]),t}(),vs=function(t){function e(t){var n,i=t.hitAreas,o=void 0===i?{}:i,a=t.rank,s=void 0===a?999:a,u=t.tiebreakerRank,l=void 0===u?0:u,c=t.id,h=t.debug,f=void 0!==h&&h,d=t.userData,p=void 0===d?{}:d;return Object(r.t)(this,e),(n=Object(r.F)(this,Object(r.G)(e).call(this))).hitAreas={},n.collisions={},n.userData={},n.enabled=!0,n.occupied=!0,n._debug=!1,n.x=0,n.y=0,n.rank=s,n.tiebreakerRank=l,n.userData=p,n.id=c,n._debug=f,n._isCurrentlyBeingStepped=!1,n.distanceFromCamera=-1/0,n.update=n.update.bind(Object(r.H)(n)),n.enable=n.enable.bind(Object(r.H)(n)),n.disable=n.disable.bind(Object(r.H)(n)),n.reset=n.reset.bind(Object(r.H)(n)),n.updateHitAreas=n.updateHitAreas.bind(Object(r.H)(n)),n.updateHitAreas(o),n}return Object(r.E)(e,r.v),Object(r.s)(e,[{key:"reset",value:function(){for(var t in this.hitAreas)this.hitAreas[t].cells.clear()}},{key:"calculateBoundingBox",value:function(){var t={x:1/0,y:1/0,x1:-1/0,y1:-1/0,w:0,h:0};for(var e in this.hitAreas)t.x=Math.min(t.x,this.hitAreas[e].x),t.y=Math.min(t.y,this.hitAreas[e].y),t.x1=Math.max(t.x1,this.hitAreas[e].x+this.hitAreas[e].w),t.y1=Math.max(t.y1,this.hitAreas[e].y+this.hitAreas[e].h);return t.w=t.x1-t.x,t.h=t.y1-t.y,this.boundingBox=t,this.boundingBox}},{key:"updateHitAreas",value:function(t){for(var e in this.hitAreas){var n=this.hitAreas[e];n.el&&document.body.contains(n.el)&&this._debug&&document.body.removeChild(n.el)}for(var r in this.hitAreas=t,this.hitAreas){var i=this.hitAreas[r];i._x=i.x,i._y=i.y,i.cells=new Set,null==i.occupied&&(i.occupied=!0),this._debug&&(i.el=i.el||document.createElement("div"),document.body.appendChild(i.el))}this.update()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.distanceFromCamera;for(var r in this.x=t,this.y=e,this.distanceFromCamera=n,this.hitAreas){var i=this.hitAreas[r];i.collider=this,i.x=i._x+this.x,i.y=i._y+this.y}return this.calculateBoundingBox(),this._debug&&this._updateDebugStyles(),this}},{key:"_updateDebugStyles",value:function(){for(var t in this.hitAreas){var e=this.hitAreas[t],n=this._isCurrentlyBeingStepped&&e.occupied,r=n?.25:.05,i=n?1:.25;e.el&&Object.assign(e.el.style,{left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),width:"".concat(e.w,"px"),height:"".concat(e.h,"px"),background:"rgba(0, 0, 0, ".concat(r,")"),border:"1px solid rgba(255, 255, 255, ".concat(i,")"),position:"absolute","pointer-events":"none"})}}},{key:"_setIsCurrentlyBeingStepped",value:function(t){this._isCurrentlyBeingStepped=t,this._debug&&this._updateDebugStyles()}},{key:"insideGrid",get:function(){for(var t in this.hitAreas)if(this.hitAreas[t].cells.size>0)return!0;return!1}}]),e}(),gs=function(){function t(e){var n=e.width,i=e.height,o=e.gridSteps,a=void 0===o?20:o,s=e.screenBuffer,u=void 0===s?150:s;Object(r.t)(this,t),this.colliders=new Set,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.destroy=this.destroy.bind(this),this.step=ha(this.step,16).bind(this),this.gridSteps=a,this.screenBuffer=u,this.offscreenCollider={userData:{type:"offscreen"},rank:1/0,hitAreas:{offscreen:{occupied:!0,enabled:!0}},occupied:!0,enabled:!0},this.grid=new ms({width:n,height:i,steps:this.gridSteps,screenBuffer:u,offscreenCollider:this.offscreenCollider}),this._cameraTilt=0}return Object(r.s)(t,[{key:"resize",value:function(t){var e=t.width,n=t.height;this.grid.destroy(),this.grid=new ms({width:e,height:n,steps:this.gridSteps,screenBuffer:this.screenBuffer,offscreenCollider:this.offscreenCollider})}},{key:"add",value:function(e){var n=new vs(Object(r.r)({},e,{debug:null!=t.DEBUG}));return this.colliders.add(n),n}},{key:"remove",value:function(t){this.colliders.delete(t)}},{key:"setCameraTilt",value:function(t){this._cameraTilt=t}},{key:"getRankedColliders",value:function(){var t=this,e=function(t,e){return e.rank!==t.rank?e.rank-t.rank:e.tiebreakerRank-t.tiebreakerRank};return this._cameraTilt>=ds?Array.from(this.colliders).filter((function(e){return e.enabled&&ps(e,t.grid)})).sort((function(t,e){return t.distanceFromCamera-e.distanceFromCamera})).slice(0,50).sort(e):Array.from(this.colliders).filter((function(e){return e.enabled&&ps(e,t.grid)})).sort(e).slice(0,50)}},{key:"step",value:function(){this.grid.clear();var t=this.getRankedColliders(),e=!0,n=!1,r=void 0;try{for(var i,o=this.colliders[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.reset(),-1===t.indexOf(a)?(a.publish("hide"),a._setIsCurrentlyBeingStepped(!1)):(a.publish("show"),this.grid.insert(a),a._setIsCurrentlyBeingStepped(!0))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}for(var s=0;s<t.length;s++){var u=t[s],l=this.grid.getCollisions(u);u.publish("collision",l)}var c=!0,h=!1,f=void 0;try{for(var d,p=this.colliders[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)d.value.publish("update")}catch(t){h=!0,f=t}finally{try{c||null==p.return||p.return()}finally{if(h)throw f}}}},{key:"destroy",value:function(){this.grid.destroy(),this.clear()}},{key:"clear",value:function(){this.colliders.clear(),this.grid.clear()}}]),t}();gs.DEBUG=void 0;var ys,bs,_s,ws=Object(r.sb)((function(t){var e,n;e=r.I,n=function(){var t,e,n,r={sel:[],el:[]},i=!1,o=!1;function a(){}function s(t,e){Array.prototype.forEach.call(t,e)}function u(){this.reset()}function l(t){return e.some((function(e){return e.start<t&&t<e.end}))}function c(t,r,i){if(0===i)t.style.whiteSpace=r,n=0,e=[],function t(r,i){if(r.nodeType===r.ELEMENT_NODE)if("nowrap"===window.getComputedStyle(r).whiteSpace){var o=r.outerHTML.length;e.push({start:n,end:n+o}),n+=o}else s(r.childNodes,(function(e){t(e,!0)})),i&&(n+=r.outerHTML.length-r.innerHTML.length);else r.nodeType===r.COMMENT_NODE?n+=r.length+7:r.nodeType===r.PROCESSING_INSTRUCTION_NODE?n+=r.length+2:n+=r.length}(t,!1),t.style.whiteSpace="nowrap";else{var o=[];e.forEach((function(t){t.start>i&&o.push({start:t.start-i,end:t.end-i})})),e=o}}u.prototype.reset=function(){this.index=0,this.width=0};var h;function f(t,e,n){var r,i,o,a,s;return a=(e=e.trim()).split(" ").length,e+=" ",a<2?e:((o=document.createElement("span")).innerHTML=e,t.appendChild(o),i=o.offsetWidth,o.parentNode.removeChild(o),s=Math.floor((n-i)/(a-1)),o.style.wordSpacing=s+"px",o.setAttribute("data-owner","balance-text-justify"),(r=document.createElement("div")).appendChild(o),r.innerHTML)}function d(e,n){var r,i=/([^\S\u00a0]|-|\u2014|\u2013|\u00ad)(?![^<]*>)/g;if(!t)for(t=[],r=i.exec(e);null!==r;)l(r.index)||t.push(r.index),r=i.exec(e);return-1!==t.indexOf(n)}function p(t,e){return 0===e||e===t.length||d(t,e-1)&&!d(t,e)}function m(t,e,n,r,i,o,a){var s;if(e&&"string"==typeof e)for(;;){for(;!p(e,o);)o+=i;if(t.innerHTML=e.substr(0,o),s=t.offsetWidth,i<0){if(s<=r||s<=0||0===o)break}else if(r<=s||n<=s||o===e.length)break;o+=i}a.index=o,a.width=s}function v(t){return t?"string"==typeof t?document.querySelectorAll(t):t.tagName&&t.querySelectorAll?[t]:t:[]}function g(e){s(v(e),(function(e){!function(t){var e=t.querySelectorAll('br[data-owner="balance-text-hyphen"]');s(e,(function(t){t.outerHTML=""})),s(e=t.querySelectorAll('br[data-owner="balance-text"]'),(function(t){t.outerHTML=" "}));var n=t.querySelectorAll('span[data-owner="balance-text-softhyphen"]');if(n.length>0&&s(n,(function(t){var e=document.createTextNode("Â­");t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)})),(n=t.querySelectorAll('span[data-owner="balance-text-justify"]')).length>0){var r="";s(n,(function(t){r+=t.textContent,t.parentNode.removeChild(t)})),t.innerHTML=r}}(e);var n=e.style.whiteSpace,r=e.style.float,i=e.style.display,o=e.style.position,a=e.style.lineHeight;e.style.lineHeight="normal";var l=e.offsetWidth,h=e.offsetHeight;e.style.whiteSpace="nowrap",e.style.float="none",e.style.display="inline",e.style.position="static";var d=e.offsetWidth,p=e.offsetHeight,v="pre-wrap"===n?0:function(t,e){var n,r,i=document.createElement("div");return i.style.display="block",i.style.position="absolute",i.style.bottom=0,i.style.right=0,i.style.width=0,i.style.height=0,i.style.margin=0,i.style.padding=0,i.style.visibility="hidden",i.style.overflow="hidden",(r=document.createElement("span")).style.fontSize="2000px",r.innerHTML="&nbsp;",i.appendChild(r),t.appendChild(i),n=r.getBoundingClientRect(),i.parentNode.removeChild(i),e/(n.height/n.width)}(e,p);if(l>0&&d>l&&d<5e3){for(var g,y,b,_,w,x=e.innerHTML,M="",E="",S=function(t){return"justify"===(t.currentStyle||window.getComputedStyle(t,null)).textAlign}(e),A=Math.round(h/p),T=0;A>1;)t=null,c(e,n,T),m(e,x,l,g=Math.round((d+v)/A-v),-1,Math.round((x.length+1)/A)-1,y=new u),b=new u,m(e,x,l,g,1,y.index,b),y.reset(),m(e,x,l,g,-1,b.index,y),_=0===y.index?b.index:l<b.width||y.index===b.index||Math.abs(g-y.width)<Math.abs(b.width-g)?y.index:b.index,E=x.substr(0,_).replace(/\s$/,""),(w=Boolean(E.match(/\u00ad$/)))&&(E=E.replace(/\u00ad$/,'<span data-owner="balance-text-softhyphen">-</span>')),S?M+=f(e,E,l):(M+=E,M+=w||Boolean(E.match(/(-|\u2014|\u2013)$/))?'<br data-owner="balance-text-hyphen" />':'<br data-owner="balance-text" />'),x=x.substr(_),T=_,A--,e.innerHTML=x,d=e.offsetWidth;e.innerHTML=S?M+f(e,x,l):M+x}e.style.whiteSpace=n,e.style.float=r,e.style.display=i,e.style.position=o,e.style.lineHeight=a}))}function y(){var t=v(r.sel.join(","));g(Array.prototype.concat.apply(r.el,t))}function b(){var t,e,n;i||(t=y,"loading"!==document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",(function(){"loading"!==document.readyState&&t()})),window.addEventListener("load",y),window.addEventListener("resize",(e=y,function(){var t=this,r=arguments;function i(){e.apply(t,r),n=null}n&&clearTimeout(n),n=setTimeout(i,100)})),i=!0)}function _(t,e){t?e&&!0===e.watch?function(t){"string"==typeof t?r.sel.push(t):s(v(t),(function(t){r.el.push(t)})),b(),y()}(t):e&&!1===e.watch?function(t){"string"==typeof t?r.sel=r.sel.filter((function(e){return e!==t})):(t=v(t),r.el=r.el.filter((function(e){return-1===t.indexOf(e)})))}(t):g(t):o||(r.sel.push(".balance-text"),b(),o=!0)}return _.updateWatched=y,(h=document.documentElement.style).textWrap||h.WebkitTextWrap||h.MozTextWrap||h.MsTextWrap?(a.updateWatched=a,a):_},t.exports?t.exports=n():e.balanceText=n()})),xs=Object(r.sb)((function(t,e){(function(){var n="Expected a function",i="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",h="[object Error]",f="[object Function]",d="[object GeneratorFunction]",p="[object Map]",m="[object Number]",v="[object Object]",g="[object RegExp]",y="[object Set]",b="[object String]",_="[object Symbol]",w="[object WeakMap]",x="[object ArrayBuffer]",M="[object DataView]",E="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",T="[object Int16Array]",q="[object Int32Array]",P="[object Uint8Array]",L="[object Uint16Array]",O="[object Uint32Array]",C=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,B=RegExp(k.source),D=RegExp(N.source),j=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,z=/<%=([\s\S]+?)%>/g,U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,G=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/[\\^$.*+?()[\]{}|]/g,W=RegExp(H.source),Y=/^\s+|\s+$/g,X=/^\s+/,Z=/\s+$/,J=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,K=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,$=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tt=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nt=/\w*$/,rt=/^[-+]0x[0-9a-f]+$/i,it=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,at=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,ct=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ft="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="["+ft+"]",pt="["+ht+"]",mt="\\d+",vt="[a-z\\xdf-\\xf6\\xf8-\\xff]",gt="[^\\ud800-\\udfff"+ft+mt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",yt="\\ud83c[\\udffb-\\udfff]",bt="[^\\ud800-\\udfff]",_t="(?:\\ud83c[\\udde6-\\uddff]){2}",wt="[\\ud800-\\udbff][\\udc00-\\udfff]",xt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Mt="(?:"+vt+"|"+gt+")",Et="(?:"+xt+"|"+gt+")",St="(?:"+pt+"|"+yt+")?",At="[\\ufe0e\\ufe0f]?"+St+"(?:\\u200d(?:"+[bt,_t,wt].join("|")+")[\\ufe0e\\ufe0f]?"+St+")*",Tt="(?:"+["[\\u2700-\\u27bf]",_t,wt].join("|")+")"+At,qt="(?:"+[bt+pt+"?",pt,_t,wt,"[\\ud800-\\udfff]"].join("|")+")",Pt=RegExp("['â]","g"),Lt=RegExp(pt,"g"),Ot=RegExp(yt+"(?="+yt+")|"+qt+At,"g"),Ct=RegExp([xt+"?"+vt+"+(?:['â](?:d|ll|m|re|s|t|ve))?(?="+[dt,xt,"$"].join("|")+")",Et+"+(?:['â](?:D|LL|M|RE|S|T|VE))?(?="+[dt,xt+Mt,"$"].join("|")+")",xt+"?"+Mt+"+(?:['â](?:d|ll|m|re|s|t|ve))?",xt+"+(?:['â](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mt,Tt].join("|"),"g"),It=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),Rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nt=-1,Bt={};Bt[E]=Bt[S]=Bt[A]=Bt[T]=Bt[q]=Bt[P]=Bt["[object Uint8ClampedArray]"]=Bt[L]=Bt[O]=!0,Bt[a]=Bt[s]=Bt[x]=Bt[u]=Bt[M]=Bt[l]=Bt[h]=Bt[f]=Bt[p]=Bt[m]=Bt[v]=Bt[g]=Bt[y]=Bt[b]=Bt[w]=!1;var Dt={};Dt[a]=Dt[s]=Dt[x]=Dt[M]=Dt[u]=Dt[l]=Dt[E]=Dt[S]=Dt[A]=Dt[T]=Dt[q]=Dt[p]=Dt[m]=Dt[v]=Dt[g]=Dt[y]=Dt[b]=Dt[_]=Dt[P]=Dt["[object Uint8ClampedArray]"]=Dt[L]=Dt[O]=!0,Dt[h]=Dt[f]=Dt[w]=!1;var jt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ft=parseFloat,zt=parseInt,Ut="object"==c(r.I)&&r.I&&r.I.Object===Object&&r.I,Vt="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,Gt=Ut||Vt||Function("return this")(),Ht=e&&!e.nodeType&&e,Wt=Ht&&t&&!t.nodeType&&t,Yt=Wt&&Wt.exports===Ht,Xt=Yt&&Ut.process,Zt=function(){try{return Wt&&Wt.require&&Wt.require("util").types||Xt&&Xt.binding&&Xt.binding("util")}catch(t){}}(),Jt=Zt&&Zt.isArrayBuffer,Kt=Zt&&Zt.isDate,Qt=Zt&&Zt.isMap,$t=Zt&&Zt.isRegExp,te=Zt&&Zt.isSet,ee=Zt&&Zt.isTypedArray;function ne(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function re(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function oe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function se(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function ue(t,e){return!(null==t||!t.length)&&ye(t,e,0)>-1}function le(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ce(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function he(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function fe(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function de(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function pe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var me=xe("length");function ve(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function ge(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function ye(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):ge(t,_e,n)}function be(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function _e(t){return t!=t}function we(t,e){var n=null==t?0:t.length;return n?Se(t,e)/n:NaN}function xe(t){return function(e){return null==e?void 0:e[t]}}function Me(t){return function(e){return null==t?void 0:t[e]}}function Ee(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Se(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ae(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Te(t){return function(e){return t(e)}}function qe(t,e){return ce(e,(function(e){return t[e]}))}function Pe(t,e){return t.has(e)}function Le(t,e){for(var n=-1,r=t.length;++n<r&&ye(e,t[n],0)>-1;);return n}function Oe(t,e){for(var n=t.length;n--&&ye(e,t[n],0)>-1;);return n}var Ce=Me({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),Ie=Me({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Re(t){return"\\"+jt[t]}function ke(t){return It.test(t)}function Ne(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Be(t,e){return function(n){return t(e(n))}}function De(t,e){for(var n=-1,r=t.length,o=0,a=[];++n<r;){var s=t[n];s!==e&&s!==i||(t[n]=i,a[o++]=n)}return a}function je(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Fe(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ze(t){return ke(t)?function(t){for(var e=Ot.lastIndex=0;Ot.test(t);)++e;return e}(t):me(t)}function Ue(t){return ke(t)?function(t){return t.match(Ot)||[]}(t):function(t){return t.split("")}(t)}var Ve=Me({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ge=function t(e){var r,ht=(e=null==e?Gt:Ge.defaults(Gt.Object(),e,Ge.pick(Gt,kt))).Array,ft=e.Date,dt=e.Error,pt=e.Function,mt=e.Math,vt=e.Object,gt=e.RegExp,yt=e.String,bt=e.TypeError,_t=ht.prototype,wt=pt.prototype,xt=vt.prototype,Mt=e["__core-js_shared__"],Et=wt.toString,St=xt.hasOwnProperty,At=0,Tt=(r=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",qt=xt.toString,Ot=Et.call(vt),It=Gt._,jt=gt("^"+Et.call(St).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=Yt?e.Buffer:void 0,Vt=e.Symbol,Ht=e.Uint8Array,Wt=Ut?Ut.allocUnsafe:void 0,Xt=Be(vt.getPrototypeOf,vt),Zt=vt.create,me=xt.propertyIsEnumerable,Me=_t.splice,He=Vt?Vt.isConcatSpreadable:void 0,We=Vt?Vt.iterator:void 0,Ye=Vt?Vt.toStringTag:void 0,Xe=function(){try{var t=Qi(vt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ze=e.clearTimeout!==Gt.clearTimeout&&e.clearTimeout,Je=ft&&ft.now!==Gt.Date.now&&ft.now,Ke=e.setTimeout!==Gt.setTimeout&&e.setTimeout,Qe=mt.ceil,$e=mt.floor,tn=vt.getOwnPropertySymbols,en=Ut?Ut.isBuffer:void 0,nn=e.isFinite,rn=_t.join,on=Be(vt.keys,vt),an=mt.max,sn=mt.min,un=ft.now,ln=e.parseInt,cn=mt.random,hn=_t.reverse,fn=Qi(e,"DataView"),dn=Qi(e,"Map"),pn=Qi(e,"Promise"),mn=Qi(e,"Set"),vn=Qi(e,"WeakMap"),gn=Qi(vt,"create"),yn=vn&&new vn,bn={},_n=So(fn),wn=So(dn),xn=So(pn),Mn=So(mn),En=So(vn),Sn=Vt?Vt.prototype:void 0,An=Sn?Sn.valueOf:void 0,Tn=Sn?Sn.toString:void 0;function qn(t){if(Ua(t)&&!Oa(t)&&!(t instanceof Cn)){if(t instanceof On)return t;if(St.call(t,"__wrapped__"))return Ao(t)}return new On(t)}var Pn=function(){function t(){}return function(e){if(!za(e))return{};if(Zt)return Zt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Ln(){}function On(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Cn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function In(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new kn;++e<n;)this.add(t[e])}function Bn(t){var e=this.__data__=new Rn(t);this.size=e.size}function Dn(t,e){var n=Oa(t),r=!n&&La(t),i=!n&&!r&&ka(t),o=!n&&!r&&!i&&Ja(t),a=n||r||i||o,s=a?Ae(t.length,yt):[],u=s.length;for(var l in t)!e&&!St.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oo(l,u))||s.push(l);return s}function jn(t){var e=t.length;return e?t[kr(0,e-1)]:void 0}function Fn(t,e){return xo(vi(t),Zn(e,0,t.length))}function zn(t){return xo(vi(t))}function Un(t,e,n){(void 0===n||Ta(t[e],n))&&(void 0!==n||e in t)||Yn(t,e,n)}function Vn(t,e,n){var r=t[e];St.call(t,e)&&Ta(r,n)&&(void 0!==n||e in t)||Yn(t,e,n)}function Gn(t,e){for(var n=t.length;n--;)if(Ta(t[n][0],e))return n;return-1}function Hn(t,e,n,r){return tr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Wn(t,e){return t&&gi(e,ys(e),t)}function Yn(t,e,n){"__proto__"==e&&Xe?Xe(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Xn(t,e){for(var n=-1,r=e.length,i=ht(r),o=null==t;++n<r;)i[n]=o?void 0:ds(t,e[n]);return i}function Zn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Jn(t,e,n,r,i,o){var s,c=1&e,h=2&e,w=4&e;if(n&&(s=i?n(t,r,i,o):n(t)),void 0!==s)return s;if(!za(t))return t;var C=Oa(t);if(C){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&St.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return vi(t,s)}else{var I=eo(t),R=I==f||I==d;if(ka(t))return ci(t,c);if(I==v||I==a||R&&!i){if(s=h||R?{}:ro(t),!c)return h?function(t,e){return gi(t,to(t),e)}(t,function(t,e){return t&&gi(e,bs(e),t)}(s,t)):function(t,e){return gi(t,$i(t),e)}(t,Wn(s,t))}else{if(!Dt[I])return i?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case x:return hi(t);case u:case l:return new i(+t);case M:return function(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case E:case S:case A:case T:case q:case P:case"[object Uint8ClampedArray]":case L:case O:return fi(t,n);case p:return new i;case m:case b:return new i(t);case g:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return new i;case _:return r=t,An?vt(An.call(r)):{}}}(t,I,c)}}o||(o=new Bn);var k=o.get(t);if(k)return k;o.set(t,s),Ya(t)?t.forEach((function(r){s.add(Jn(r,e,n,r,t,o))})):Va(t)&&t.forEach((function(r,i){s.set(i,Jn(r,e,n,i,t,o))}));var N=C?void 0:(w?h?Hi:Gi:h?bs:ys)(t);return ie(N||t,(function(r,i){N&&(r=t[i=r]),Vn(s,i,Jn(r,e,n,i,t,o))})),s}function Kn(t,e,n){var r=n.length;if(null==t)return!r;for(t=vt(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function Qn(t,e,r){if("function"!=typeof t)throw new bt(n);return yo((function(){t.apply(void 0,r)}),e)}function $n(t,e,n,r){var i=-1,o=ue,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=ce(e,Te(n))),r?(o=le,a=!1):e.length>=200&&(o=Pe,a=!1,e=new Nn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}qn.templateSettings={escape:j,evaluate:F,interpolate:z,variable:"",imports:{_:qn}},qn.prototype=Ln.prototype,qn.prototype.constructor=qn,On.prototype=Pn(Ln.prototype),On.prototype.constructor=On,Cn.prototype=Pn(Ln.prototype),Cn.prototype.constructor=Cn,In.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},In.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},In.prototype.get=function(t){var e=this.__data__;if(gn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return St.call(e,t)?e[t]:void 0},In.prototype.has=function(t){var e=this.__data__;return gn?void 0!==e[t]:St.call(e,t)},In.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gn&&void 0===e?"__lodash_hash_undefined__":e,this},Rn.prototype.clear=function(){this.__data__=[],this.size=0},Rn.prototype.delete=function(t){var e=this.__data__,n=Gn(e,t);return!(n<0||(n==e.length-1?e.pop():Me.call(e,n,1),--this.size,0))},Rn.prototype.get=function(t){var e=this.__data__,n=Gn(e,t);return n<0?void 0:e[n][1]},Rn.prototype.has=function(t){return Gn(this.__data__,t)>-1},Rn.prototype.set=function(t,e){var n=this.__data__,r=Gn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},kn.prototype.clear=function(){this.size=0,this.__data__={hash:new In,map:new(dn||Rn),string:new In}},kn.prototype.delete=function(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e},kn.prototype.get=function(t){return Ji(this,t).get(t)},kn.prototype.has=function(t){return Ji(this,t).has(t)},kn.prototype.set=function(t,e){var n=Ji(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Nn.prototype.add=Nn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Nn.prototype.has=function(t){return this.__data__.has(t)},Bn.prototype.clear=function(){this.__data__=new Rn,this.size=0},Bn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Bn.prototype.get=function(t){return this.__data__.get(t)},Bn.prototype.has=function(t){return this.__data__.has(t)},Bn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Rn){var r=n.__data__;if(!dn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new kn(r)}return n.set(t,e),this.size=n.size,this};var tr=_i(ur),er=_i(lr,!0);function nr(t,e){var n=!0;return tr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function rr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Za(a):n(a,s)))var s=a,u=o}return u}function ir(t,e){var n=[];return tr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function or(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=io),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?or(s,e-1,n,r,i):he(i,s):r||(i[i.length]=s)}return i}var ar=wi(),sr=wi(!0);function ur(t,e){return t&&ar(t,e,ys)}function lr(t,e){return t&&sr(t,e,ys)}function cr(t,e){return se(e,(function(e){return Da(t[e])}))}function hr(t,e){for(var n=0,r=(e=ai(e,t)).length;null!=t&&n<r;)t=t[Eo(e[n++])];return n&&n==r?t:void 0}function fr(t,e,n){var r=e(t);return Oa(t)?r:he(r,n(t))}function dr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ye&&Ye in vt(t)?function(t){var e=St.call(t,Ye),n=t[Ye];try{t[Ye]=void 0;var r=!0}catch(t){}var i=qt.call(t);return r&&(e?t[Ye]=n:delete t[Ye]),i}(t):function(t){return qt.call(t)}(t)}function pr(t,e){return t>e}function mr(t,e){return null!=t&&St.call(t,e)}function vr(t,e){return null!=t&&e in vt(t)}function gr(t,e,n){for(var r=n?le:ue,i=t[0].length,o=t.length,a=o,s=ht(o),u=1/0,l=[];a--;){var c=t[a];a&&e&&(c=ce(c,Te(e))),u=sn(c.length,u),s[a]=!n&&(e||i>=120&&c.length>=120)?new Nn(a&&c):void 0}c=t[0];var h=-1,f=s[0];t:for(;++h<i&&l.length<u;){var d=c[h],p=e?e(d):d;if(d=n||0!==d?d:0,!(f?Pe(f,p):r(l,p,n))){for(a=o;--a;){var m=s[a];if(!(m?Pe(m,p):r(t[a],p,n)))continue t}f&&f.push(p),l.push(d)}}return l}function yr(t,e,n){var r=null==(t=mo(t,e=ai(e,t)))?t:t[Eo(Bo(e))];return null==r?void 0:ne(r,t,n)}function br(t){return Ua(t)&&dr(t)==a}function _r(t,e,n,r,i){return t===e||(null==t||null==e||!Ua(t)&&!Ua(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var c=Oa(t),f=Oa(e),d=c?s:eo(t),w=f?s:eo(e),E=(d=d==a?v:d)==v,S=(w=w==a?v:w)==v,A=d==w;if(A&&ka(t)){if(!ka(e))return!1;c=!0,E=!1}if(A&&!E)return o||(o=new Bn),c||Ja(t)?Ui(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case u:case l:case m:return Ta(+t,+e);case h:return t.name==e.name&&t.message==e.message;case g:case b:return t==e+"";case p:var s=Ne;case y:var c=1&r;if(s||(s=je),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;r|=2,a.set(t,e);var d=Ui(s(t),s(e),r,i,o,a);return a.delete(t),d;case _:if(An)return An.call(t)==An.call(e)}return!1}(t,e,d,n,r,i,o);if(!(1&n)){var T=E&&St.call(t,"__wrapped__"),q=S&&St.call(e,"__wrapped__");if(T||q){var P=T?t.value():t,L=q?e.value():e;return o||(o=new Bn),i(P,L,n,r,o)}}return!!A&&(o||(o=new Bn),function(t,e,n,r,i,o){var a=1&n,s=Gi(t),u=s.length;if(u!=Gi(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:St.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++l<u;){var p=t[c=s[l]],m=e[c];if(r)var v=a?r(m,p,c,e,t,o):r(p,m,c,t,e,o);if(!(void 0===v?p===m||i(p,m,n,r,o):v)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var g=t.constructor,y=e.constructor;g!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}(t,e,n,r,_r,i))}function wr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=vt(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new Bn;if(r)var f=r(l,c,u,t,e,h);if(!(void 0===f?_r(c,l,3,r,h):f))return!1}}return!0}function xr(t){return!(!za(t)||(e=t,Tt&&Tt in e))&&(Da(t)?jt:ot).test(So(t));var e}function Mr(t){return"function"==typeof t?t:null==t?Gs:"object"==c(t)?Oa(t)?qr(t[0],t[1]):Tr(t):$s(t)}function Er(t){if(!co(t))return on(t);var e=[];for(var n in vt(t))St.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Sr(t,e){return t<e}function Ar(t,e){var n=-1,r=Ia(t)?ht(t.length):[];return tr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Tr(t){var e=Ki(t);return 1==e.length&&e[0][2]?fo(e[0][0],e[0][1]):function(n){return n===t||wr(n,t,e)}}function qr(t,e){return so(t)&&ho(e)?fo(Eo(t),e):function(n){var r=ds(n,t);return void 0===r&&r===e?ps(n,t):_r(e,r,3)}}function Pr(t,e,n,r,i){t!==e&&ar(e,(function(o,a){if(i||(i=new Bn),za(o))!function(t,e,n,r,i,o,a){var s=vo(t,n),u=vo(e,n),l=a.get(u);if(l)Un(t,n,l);else{var c=o?o(s,u,n+"",t,e,a):void 0,h=void 0===c;if(h){var f=Oa(u),d=!f&&ka(u),p=!f&&!d&&Ja(u);c=u,f||d||p?Oa(s)?c=s:Ra(s)?c=vi(s):d?(h=!1,c=ci(u,!0)):p?(h=!1,c=fi(u,!0)):c=[]:Ha(u)||La(u)?(c=s,La(s)?c=is(s):za(s)&&!Da(s)||(c=ro(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),Un(t,n,c)}}(t,e,a,n,Pr,r,i);else{var s=r?r(vo(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),Un(t,a,s)}}),bs)}function Lr(t,e){var n=t.length;if(n)return oo(e+=e<0?n:0,n)?t[e]:void 0}function Or(t,e,n){var r=-1;return e=ce(e.length?e:[Gs],Te(Zi())),function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=di(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(Ar(t,(function(t,n,i){return{criteria:ce(e,(function(e){return e(t)})),index:++r,value:t}})))}function Cr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=hr(t,a);n(s,a)&&Fr(o,ai(a,t),s)}return o}function Ir(t,e,n,r){var i=r?be:ye,o=-1,a=e.length,s=t;for(t===e&&(e=vi(e)),n&&(s=ce(t,Te(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Me.call(s,u,1),Me.call(t,u,1);return t}function Rr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;oo(i)?Me.call(t,i,1):Qr(t,i)}}return t}function kr(t,e){return t+$e(cn()*(e-t+1))}function Nr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=$e(e/2))&&(t+=t)}while(e);return n}function Br(t,e){return bo(po(t,e,Gs),t+"")}function Dr(t){return jn(Ts(t))}function jr(t,e){var n=Ts(t);return xo(n,Zn(e,0,n.length))}function Fr(t,e,n,r){if(!za(t))return t;for(var i=-1,o=(e=ai(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=Eo(e[i]),l=n;if(i!=a){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=za(c)?c:oo(e[i+1])?[]:{})}Vn(s,u,l),s=s[u]}return t}var zr=yn?function(t,e){return yn.set(t,e),t}:Gs,Ur=Xe?function(t,e){return Xe(t,"toString",{configurable:!0,enumerable:!1,value:zs(e),writable:!0})}:Gs;function Vr(t){return xo(Ts(t))}function Gr(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=ht(i);++r<i;)o[r]=t[r+e];return o}function Hr(t,e){var n;return tr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Wr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Za(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Yr(t,e,Gs,n)}function Yr(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!=e,s=null===e,u=Za(e),l=void 0===e;i<o;){var c=$e((i+o)/2),h=n(t[c]),f=void 0!==h,d=null===h,p=h==h,m=Za(h);if(a)var v=r||p;else v=l?p&&(r||f):s?p&&f&&(r||!d):u?p&&f&&!d&&(r||!m):!d&&!m&&(r?h<=e:h<e);v?i=c+1:o=c}return sn(o,4294967294)}function Xr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ta(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Zr(t){return"number"==typeof t?t:Za(t)?NaN:+t}function Jr(t){if("string"==typeof t)return t;if(Oa(t))return ce(t,Jr)+"";if(Za(t))return Tn?Tn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Kr(t,e,n){var r=-1,i=ue,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=le;else if(o>=200){var l=e?null:Ni(t);if(l)return je(l);a=!1,i=Pe,u=new Nn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function Qr(t,e){return null==(t=mo(t,e=ai(e,t)))||delete t[Eo(Bo(e))]}function $r(t,e,n,r){return Fr(t,e,n(hr(t,e)),r)}function ti(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Gr(t,r?0:o,r?o+1:i):Gr(t,r?o+1:0,r?i:o)}function ei(t,e){var n=t;return n instanceof Cn&&(n=n.value()),fe(e,(function(t,e){return e.func.apply(e.thisArg,he([t],e.args))}),n)}function ni(t,e,n){var r=t.length;if(r<2)return r?Kr(t[0]):[];for(var i=-1,o=ht(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=$n(o[i]||a,t[s],e,n));return Kr(or(o,1),e,n)}function ri(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}function ii(t){return Ra(t)?t:[]}function oi(t){return"function"==typeof t?t:Gs}function ai(t,e){return Oa(t)?t:so(t,e)?[t]:Mo(os(t))}var si=Br;function ui(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Gr(t,e,n)}var li=Ze||function(t){return Gt.clearTimeout(t)};function ci(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function hi(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function fi(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function di(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Za(t),a=void 0!==e,s=null===e,u=e==e,l=Za(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function pi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=an(o-a,0),c=ht(u+l),h=!r;++s<u;)c[s]=e[s];for(;++i<a;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function mi(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=an(o-s,0),h=ht(c+l),f=!r;++i<c;)h[i]=t[i];for(var d=i;++u<l;)h[d+u]=e[u];for(;++a<s;)(f||i<o)&&(h[d+n[a]]=t[i++]);return h}function vi(t,e){var n=-1,r=t.length;for(e||(e=ht(r));++n<r;)e[n]=t[n];return e}function gi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?Yn(n,s,u):Vn(n,s,u)}return n}function yi(t,e){return function(n,r){var i=Oa(n)?re:Hn,o=e?e():{};return i(n,t,Zi(r,2),o)}}function bi(t){return Br((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&ao(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=vt(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}function _i(t,e){return function(n,r){if(null==n)return n;if(!Ia(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=vt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function wi(t){return function(e,n,r){for(var i=-1,o=vt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function xi(t){return function(e){var n=ke(e=os(e))?Ue(e):void 0,r=n?n[0]:e.charAt(0),i=n?ui(n,1).join(""):e.slice(1);return r[t]()+i}}function Mi(t){return function(e){return fe(Ds(Ls(e).replace(Pt,"")),t,"")}}function Ei(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Pn(t.prototype),r=t.apply(n,e);return za(r)?r:n}}function Si(t){return function(e,n,r){var i=vt(e);if(!Ia(e)){var o=Zi(n,3);e=ys(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}function Ai(t){return Vi((function(e){var r=e.length,i=r,o=On.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new bt(n);if(o&&!s&&"wrapper"==Yi(a))var s=new On([],!0)}for(i=s?i:r;++i<r;){var u=Yi(a=e[i]),l="wrapper"==u?Wi(a):void 0;s=l&&uo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Yi(l[0])].apply(s,l[3]):1==a.length&&uo(a)?s[u]():s.thru(a)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&Oa(n))return s.plant(n).value();for(var i=0,o=r?e[i].apply(this,t):n;++i<r;)o=e[i].call(this,o);return o}}))}function Ti(t,e,n,r,i,o,a,s,u,l){var c=128&e,h=1&e,f=2&e,d=24&e,p=512&e,m=f?void 0:Ei(t);return function v(){for(var g=arguments.length,y=ht(g),b=g;b--;)y[b]=arguments[b];if(d)var _=Xi(v),w=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(y,_);if(r&&(y=pi(y,r,i,d)),o&&(y=mi(y,o,a,d)),g-=w,d&&g<l){var x=De(y,_);return Ri(t,e,Ti,v.placeholder,n,y,x,s,u,l-g)}var M=h?n:this,E=f?M[t]:t;return g=y.length,s?y=function(t,e){for(var n=t.length,r=sn(e.length,n),i=vi(t);r--;){var o=e[r];t[r]=oo(o,n)?i[o]:void 0}return t}(y,s):p&&g>1&&y.reverse(),c&&u<g&&(y.length=u),this&&this!==Gt&&this instanceof v&&(E=m||Ei(E)),E.apply(M,y)}}function qi(t,e){return function(n,r){return function(t,e,n,r){return ur(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Pi(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Jr(n),r=Jr(r)):(n=Zr(n),r=Zr(r)),i=t(n,r)}return i}}function Li(t){return Vi((function(e){return e=ce(e,Te(Zi())),Br((function(n){var r=this;return t(e,(function(t){return ne(t,r,n)}))}))}))}function Oi(t,e){var n=(e=void 0===e?" ":Jr(e)).length;if(n<2)return n?Nr(e,t):e;var r=Nr(e,Qe(t/ze(e)));return ke(e)?ui(Ue(r),0,t).join(""):r.slice(0,t)}function Ci(t){return function(e,n,r){return r&&"number"!=typeof r&&ao(e,n,r)&&(n=r=void 0),e=ts(e),void 0===n?(n=e,e=0):n=ts(n),function(t,e,n,r){for(var i=-1,o=an(Qe((e-t)/(n||1)),0),a=ht(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r=void 0===r?e<n?1:-1:ts(r),t)}}function Ii(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=rs(e),n=rs(n)),t(e,n)}}function Ri(t,e,n,r,i,o,a,s,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,u,l],f=n.apply(void 0,h);return uo(t)&&go(f,h),f.placeholder=r,_o(f,t,e)}function ki(t){var e=mt[t];return function(t,n){if(t=rs(t),(n=null==n?0:sn(es(n),292))&&nn(t)){var r=(os(t)+"e").split("e");return+((r=(os(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ni=mn&&1/je(new mn([,-0]))[1]==1/0?function(t){return new mn(t)}:Zs;function Bi(t){return function(e){var n=eo(e);return n==p?Ne(e):n==y?Fe(e):function(t,e){return ce(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Di(t,e,r,o,a,s,u,l){var c=2&e;if(!c&&"function"!=typeof t)throw new bt(n);var h=o?o.length:0;if(h||(e&=-97,o=a=void 0),u=void 0===u?u:an(es(u),0),l=void 0===l?l:es(l),h-=a?a.length:0,64&e){var f=o,d=a;o=a=void 0}var p=c?void 0:Wi(t),m=[t,e,r,o,a,f,d,s,u,l];if(p&&function(t,e){var n=t[1],r=e[1],o=n|r,a=o<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!s)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?pi(l,u,e[4]):u,t[4]=l?De(t[3],i):e[4]}(u=e[5])&&(l=t[5],t[5]=l?mi(l,u,e[6]):u,t[6]=l?De(t[5],i):e[6]),(u=e[7])&&(t[7]=u),128&r&&(t[8]=null==t[8]?e[8]:sn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(m,p),t=m[0],e=m[1],r=m[2],o=m[3],a=m[4],!(l=m[9]=void 0===m[9]?c?0:t.length:an(m[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)v=8==e||16==e?function(t,e,n){var r=Ei(t);return function i(){for(var o=arguments.length,a=ht(o),s=o,u=Xi(i);s--;)a[s]=arguments[s];var l=o<3&&a[0]!==u&&a[o-1]!==u?[]:De(a,u);return(o-=l.length)<n?Ri(t,e,Ti,i.placeholder,void 0,a,l,void 0,void 0,n-o):ne(this&&this!==Gt&&this instanceof i?r:t,this,a)}}(t,e,l):32!=e&&33!=e||a.length?Ti.apply(void 0,m):function(t,e,n,r){var i=1&e,o=Ei(t);return function e(){for(var a=-1,s=arguments.length,u=-1,l=r.length,c=ht(l+s),h=this&&this!==Gt&&this instanceof e?o:t;++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++a];return ne(h,i?n:this,c)}}(t,e,r,o);else var v=function(t,e,n){var r=1&e,i=Ei(t);return function e(){return(this&&this!==Gt&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return _o((p?zr:go)(v,m),t,e)}function ji(t,e,n,r){return void 0===t||Ta(t,xt[n])&&!St.call(r,n)?e:t}function Fi(t,e,n,r,i,o){return za(t)&&za(e)&&(o.set(e,t),Pr(t,e,void 0,Fi,o),o.delete(e)),t}function zi(t){return Ha(t)?void 0:t}function Ui(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,h=!0,f=2&n?new Nn:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var d=t[c],p=e[c];if(r)var m=a?r(p,d,c,e,t,o):r(d,p,c,t,e,o);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!pe(e,(function(t,e){if(!Pe(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)}))){h=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Vi(t){return bo(po(t,void 0,Co),t+"")}function Gi(t){return fr(t,ys,$i)}function Hi(t){return fr(t,bs,to)}var Wi=yn?function(t){return yn.get(t)}:Zs;function Yi(t){for(var e=t.name+"",n=bn[e],r=St.call(bn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Xi(t){return(St.call(qn,"placeholder")?qn:t).placeholder}function Zi(){var t=qn.iteratee||Hs;return t=t===Hs?Mr:t,arguments.length?t(arguments[0],arguments[1]):t}function Ji(t,e){var n,r,i=t.__data__;return("string"==(r=c(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Ki(t){for(var e=ys(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ho(i)]}return e}function Qi(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return xr(n)?n:void 0}var $i=tn?function(t){return null==t?[]:(t=vt(t),se(tn(t),(function(e){return me.call(t,e)})))}:nu,to=tn?function(t){for(var e=[];t;)he(e,$i(t)),t=Xt(t);return e}:nu,eo=dr;function no(t,e,n){for(var r=-1,i=(e=ai(e,t)).length,o=!1;++r<i;){var a=Eo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Fa(i)&&oo(a,i)&&(Oa(t)||La(t))}function ro(t){return"function"!=typeof t.constructor||co(t)?{}:Pn(Xt(t))}function io(t){return Oa(t)||La(t)||!!(He&&t&&t[He])}function oo(t,e){var n=c(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&st.test(t))&&t>-1&&t%1==0&&t<e}function ao(t,e,n){if(!za(n))return!1;var r=c(e);return!!("number"==r?Ia(n)&&oo(e,n.length):"string"==r&&e in n)&&Ta(n[e],t)}function so(t,e){if(Oa(t))return!1;var n=c(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Za(t))||V.test(t)||!U.test(t)||null!=e&&t in vt(e)}function uo(t){var e=Yi(t),n=qn[e];if("function"!=typeof n||!(e in Cn.prototype))return!1;if(t===n)return!0;var r=Wi(n);return!!r&&t===r[0]}(fn&&eo(new fn(new ArrayBuffer(1)))!=M||dn&&eo(new dn)!=p||pn&&"[object Promise]"!=eo(pn.resolve())||mn&&eo(new mn)!=y||vn&&eo(new vn)!=w)&&(eo=function(t){var e=dr(t),n=e==v?t.constructor:void 0,r=n?So(n):"";if(r)switch(r){case _n:return M;case wn:return p;case xn:return"[object Promise]";case Mn:return y;case En:return w}return e});var lo=Mt?Da:ru;function co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||xt)}function ho(t){return t==t&&!za(t)}function fo(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in vt(n))}}function po(t,e,n){return e=an(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=an(r.length-e,0),a=ht(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=ht(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),ne(t,this,s)}}function mo(t,e){return e.length<2?t:hr(t,Gr(e,0,-1))}function vo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var go=wo(zr),yo=Ke||function(t,e){return Gt.setTimeout(t,e)},bo=wo(Ur);function _o(t,e,n){var r=e+"";return bo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(J,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ie(o,(function(n){var r="_."+n[0];e&n[1]&&!ue(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(K);return e?e[1].split(Q):[]}(r),n)))}function wo(t){var e=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xo(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=kr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var Mo=function(t){var e=wa((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(G,(function(t,n,r,i){e.push(r?i.replace(tt,"$1"):n||t)})),e}),(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}();function Eo(t){if("string"==typeof t||Za(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function So(t){if(null!=t){try{return Et.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ao(t){if(t instanceof Cn)return t.clone();var e=new On(t.__wrapped__,t.__chain__);return e.__actions__=vi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var To=Br((function(t,e){return Ra(t)?$n(t,or(e,1,Ra,!0)):[]})),qo=Br((function(t,e){var n=Bo(e);return Ra(n)&&(n=void 0),Ra(t)?$n(t,or(e,1,Ra,!0),Zi(n,2)):[]})),Po=Br((function(t,e){var n=Bo(e);return Ra(n)&&(n=void 0),Ra(t)?$n(t,or(e,1,Ra,!0),void 0,n):[]}));function Lo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:es(n);return i<0&&(i=an(r+i,0)),ge(t,Zi(e,3),i)}function Oo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=es(n),i=n<0?an(r+i,0):sn(i,r-1)),ge(t,Zi(e,3),i,!0)}function Co(t){return null!=t&&t.length?or(t,1):[]}function Io(t){return t&&t.length?t[0]:void 0}var Ro=Br((function(t){var e=ce(t,ii);return e.length&&e[0]===t[0]?gr(e):[]})),ko=Br((function(t){var e=Bo(t),n=ce(t,ii);return e===Bo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?gr(n,Zi(e,2)):[]})),No=Br((function(t){var e=Bo(t),n=ce(t,ii);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?gr(n,void 0,e):[]}));function Bo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Do=Br(jo);function jo(t,e){return t&&t.length&&e&&e.length?Ir(t,e):t}var Fo=Vi((function(t,e){var n=null==t?0:t.length,r=Xn(t,e);return Rr(t,ce(e,(function(t){return oo(t,n)?+t:t})).sort(di)),r}));function zo(t){return null==t?t:hn.call(t)}var Uo=Br((function(t){return Kr(or(t,1,Ra,!0))})),Vo=Br((function(t){var e=Bo(t);return Ra(e)&&(e=void 0),Kr(or(t,1,Ra,!0),Zi(e,2))})),Go=Br((function(t){var e=Bo(t);return e="function"==typeof e?e:void 0,Kr(or(t,1,Ra,!0),void 0,e)}));function Ho(t){if(!t||!t.length)return[];var e=0;return t=se(t,(function(t){if(Ra(t))return e=an(t.length,e),!0})),Ae(e,(function(e){return ce(t,xe(e))}))}function Wo(t,e){if(!t||!t.length)return[];var n=Ho(t);return null==e?n:ce(n,(function(t){return ne(e,void 0,t)}))}var Yo=Br((function(t,e){return Ra(t)?$n(t,e):[]})),Xo=Br((function(t){return ni(se(t,Ra))})),Zo=Br((function(t){var e=Bo(t);return Ra(e)&&(e=void 0),ni(se(t,Ra),Zi(e,2))})),Jo=Br((function(t){var e=Bo(t);return e="function"==typeof e?e:void 0,ni(se(t,Ra),void 0,e)})),Ko=Br(Ho),Qo=Br((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Wo(t,n)}));function $o(t){var e=qn(t);return e.__chain__=!0,e}function ta(t,e){return e(t)}var ea=Vi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Xn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Cn&&oo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ta,args:[i],thisArg:void 0}),new On(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)})),na=yi((function(t,e,n){St.call(t,n)?++t[n]:Yn(t,n,1)})),ra=Si(Lo),ia=Si(Oo);function oa(t,e){return(Oa(t)?ie:tr)(t,Zi(e,3))}function aa(t,e){return(Oa(t)?oe:er)(t,Zi(e,3))}var sa=yi((function(t,e,n){St.call(t,n)?t[n].push(e):Yn(t,n,[e])})),ua=Br((function(t,e,n){var r=-1,i="function"==typeof e,o=Ia(t)?ht(t.length):[];return tr(t,(function(t){o[++r]=i?ne(e,t,n):yr(t,e,n)})),o})),la=yi((function(t,e,n){Yn(t,n,e)}));function ca(t,e){return(Oa(t)?ce:Ar)(t,Zi(e,3))}var ha=yi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),fa=Br((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ao(t,e[0],e[1])?e=[]:n>2&&ao(e[0],e[1],e[2])&&(e=[e[0]]),Or(t,or(e,1),[])})),da=Je||function(){return Gt.Date.now()};function pa(t,e,n){return e=n?void 0:e,Di(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ma(t,e){var r;if("function"!=typeof e)throw new bt(n);return t=es(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}var va=Br((function(t,e,n){var r=1;if(n.length){var i=De(n,Xi(va));r|=32}return Di(t,r,e,n,i)})),ga=Br((function(t,e,n){var r=3;if(n.length){var i=De(n,Xi(ga));r|=32}return Di(e,r,t,n,i)}));function ya(t,e,r){var i,o,a,s,u,l,c=0,h=!1,f=!1,d=!0;if("function"!=typeof t)throw new bt(n);function p(e){var n=i,r=o;return i=o=void 0,c=e,s=t.apply(r,n)}function m(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-c>=a}function v(){var t=da();if(m(t))return g(t);u=yo(v,function(t){var n=e-(t-l);return f?sn(n,a-(t-c)):n}(t))}function g(t){return u=void 0,d&&i?p(t):(i=o=void 0,s)}function y(){var t=da(),n=m(t);if(i=arguments,o=this,l=t,n){if(void 0===u)return function(t){return c=t,u=yo(v,e),h?p(t):s}(l);if(f)return li(u),u=yo(v,e),p(l)}return void 0===u&&(u=yo(v,e)),s}return e=rs(e)||0,za(r)&&(h=!!r.leading,a=(f="maxWait"in r)?an(rs(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==u&&li(u),c=0,i=l=o=u=void 0},y.flush=function(){return void 0===u?s:g(da())},y}var ba=Br((function(t,e){return Qn(t,1,e)})),_a=Br((function(t,e,n){return Qn(t,rs(e)||0,n)}));function wa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new bt(n);var r=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return r.cache=new(wa.Cache||kn),r}function xa(t){if("function"!=typeof t)throw new bt(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}wa.Cache=kn;var Ma=si((function(t,e){var n=(e=1==e.length&&Oa(e[0])?ce(e[0],Te(Zi())):ce(or(e,1),Te(Zi()))).length;return Br((function(r){for(var i=-1,o=sn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ne(t,this,r)}))})),Ea=Br((function(t,e){return Di(t,32,void 0,e,De(e,Xi(Ea)))})),Sa=Br((function(t,e){return Di(t,64,void 0,e,De(e,Xi(Sa)))})),Aa=Vi((function(t,e){return Di(t,256,void 0,void 0,void 0,e)}));function Ta(t,e){return t===e||t!=t&&e!=e}var qa=Ii(pr),Pa=Ii((function(t,e){return t>=e})),La=br(function(){return arguments}())?br:function(t){return Ua(t)&&St.call(t,"callee")&&!me.call(t,"callee")},Oa=ht.isArray,Ca=Jt?Te(Jt):function(t){return Ua(t)&&dr(t)==x};function Ia(t){return null!=t&&Fa(t.length)&&!Da(t)}function Ra(t){return Ua(t)&&Ia(t)}var ka=en||ru,Na=Kt?Te(Kt):function(t){return Ua(t)&&dr(t)==l};function Ba(t){if(!Ua(t))return!1;var e=dr(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ha(t)}function Da(t){if(!za(t))return!1;var e=dr(t);return e==f||e==d||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ja(t){return"number"==typeof t&&t==es(t)}function Fa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function za(t){var e=c(t);return null!=t&&("object"==e||"function"==e)}function Ua(t){return null!=t&&"object"==c(t)}var Va=Qt?Te(Qt):function(t){return Ua(t)&&eo(t)==p};function Ga(t){return"number"==typeof t||Ua(t)&&dr(t)==m}function Ha(t){if(!Ua(t)||dr(t)!=v)return!1;var e=Xt(t);if(null===e)return!0;var n=St.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Et.call(n)==Ot}var Wa=$t?Te($t):function(t){return Ua(t)&&dr(t)==g},Ya=te?Te(te):function(t){return Ua(t)&&eo(t)==y};function Xa(t){return"string"==typeof t||!Oa(t)&&Ua(t)&&dr(t)==b}function Za(t){return"symbol"==c(t)||Ua(t)&&dr(t)==_}var Ja=ee?Te(ee):function(t){return Ua(t)&&Fa(t.length)&&!!Bt[dr(t)]},Ka=Ii(Sr),Qa=Ii((function(t,e){return t<=e}));function $a(t){if(!t)return[];if(Ia(t))return Xa(t)?Ue(t):vi(t);if(We&&t[We])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[We]());var e=eo(t);return(e==p?Ne:e==y?je:Ts)(t)}function ts(t){return t?(t=rs(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function es(t){var e=ts(t),n=e%1;return e==e?n?e-n:e:0}function ns(t){return t?Zn(es(t),0,4294967295):0}function rs(t){if("number"==typeof t)return t;if(Za(t))return NaN;if(za(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=za(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Y,"");var n=it.test(t);return n||at.test(t)?zt(t.slice(2),n?2:8):rt.test(t)?NaN:+t}function is(t){return gi(t,bs(t))}function os(t){return null==t?"":Jr(t)}var as=bi((function(t,e){if(co(e)||Ia(e))gi(e,ys(e),t);else for(var n in e)St.call(e,n)&&Vn(t,n,e[n])})),ss=bi((function(t,e){gi(e,bs(e),t)})),us=bi((function(t,e,n,r){gi(e,bs(e),t,r)})),ls=bi((function(t,e,n,r){gi(e,ys(e),t,r)})),cs=Vi(Xn),hs=Br((function(t,e){t=vt(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ao(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=bs(o),s=-1,u=a.length;++s<u;){var l=a[s],c=t[l];(void 0===c||Ta(c,xt[l])&&!St.call(t,l))&&(t[l]=o[l])}return t})),fs=Br((function(t){return t.push(void 0,Fi),ne(ws,void 0,t)}));function ds(t,e,n){var r=null==t?void 0:hr(t,e);return void 0===r?n:r}function ps(t,e){return null!=t&&no(t,e,vr)}var ms=qi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=qt.call(e)),t[e]=n}),zs(Gs)),vs=qi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=qt.call(e)),St.call(t,e)?t[e].push(n):t[e]=[n]}),Zi),gs=Br(yr);function ys(t){return Ia(t)?Dn(t):Er(t)}function bs(t){return Ia(t)?Dn(t,!0):function(t){if(!za(t))return function(t){var e=[];if(null!=t)for(var n in vt(t))e.push(n);return e}(t);var e=co(t),n=[];for(var r in t)("constructor"!=r||!e&&St.call(t,r))&&n.push(r);return n}(t)}var _s=bi((function(t,e,n){Pr(t,e,n)})),ws=bi((function(t,e,n,r){Pr(t,e,n,r)})),xs=Vi((function(t,e){var n={};if(null==t)return n;var r=!1;e=ce(e,(function(e){return e=ai(e,t),r||(r=e.length>1),e})),gi(t,Hi(t),n),r&&(n=Jn(n,7,zi));for(var i=e.length;i--;)Qr(n,e[i]);return n})),Ms=Vi((function(t,e){return null==t?{}:function(t,e){return Cr(t,e,(function(e,n){return ps(t,n)}))}(t,e)}));function Es(t,e){if(null==t)return{};var n=ce(Hi(t),(function(t){return[t]}));return e=Zi(e),Cr(t,n,(function(t,n){return e(t,n[0])}))}var Ss=Bi(ys),As=Bi(bs);function Ts(t){return null==t?[]:qe(t,ys(t))}var qs=Mi((function(t,e,n){return e=e.toLowerCase(),t+(n?Ps(e):e)}));function Ps(t){return Bs(os(t).toLowerCase())}function Ls(t){return(t=os(t))&&t.replace(ut,Ce).replace(Lt,"")}var Os=Mi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Cs=Mi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Is=xi("toLowerCase"),Rs=Mi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),ks=Mi((function(t,e,n){return t+(n?" ":"")+Bs(e)})),Ns=Mi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Bs=xi("toUpperCase");function Ds(t,e,n){return t=os(t),void 0===(e=n?void 0:e)?function(t){return Rt.test(t)}(t)?function(t){return t.match(Ct)||[]}(t):function(t){return t.match($)||[]}(t):t.match(e)||[]}var js=Br((function(t,e){try{return ne(t,void 0,e)}catch(t){return Ba(t)?t:new dt(t)}})),Fs=Vi((function(t,e){return ie(e,(function(e){e=Eo(e),Yn(t,e,va(t[e],t))})),t}));function zs(t){return function(){return t}}var Us=Ai(),Vs=Ai(!0);function Gs(t){return t}function Hs(t){return Mr("function"==typeof t?t:Jn(t,1))}var Ws=Br((function(t,e){return function(n){return yr(n,t,e)}})),Ys=Br((function(t,e){return function(n){return yr(t,n,e)}}));function Xs(t,e,n){var r=ys(e),i=cr(e,r);null!=n||za(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=cr(e,ys(e)));var o=!(za(n)&&"chain"in n&&!n.chain),a=Da(t);return ie(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,he([this.value()],arguments))})})),t}function Zs(){}var Js=Li(ce),Ks=Li(ae),Qs=Li(pe);function $s(t){return so(t)?xe(Eo(t)):function(t){return function(e){return hr(e,t)}}(t)}var tu=Ci(),eu=Ci(!0);function nu(){return[]}function ru(){return!1}var iu,ou=Pi((function(t,e){return t+e}),0),au=ki("ceil"),su=Pi((function(t,e){return t/e}),1),uu=ki("floor"),lu=Pi((function(t,e){return t*e}),1),cu=ki("round"),hu=Pi((function(t,e){return t-e}),0);return qn.after=function(t,e){if("function"!=typeof e)throw new bt(n);return t=es(t),function(){if(--t<1)return e.apply(this,arguments)}},qn.ary=pa,qn.assign=as,qn.assignIn=ss,qn.assignInWith=us,qn.assignWith=ls,qn.at=cs,qn.before=ma,qn.bind=va,qn.bindAll=Fs,qn.bindKey=ga,qn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Oa(t)?t:[t]},qn.chain=$o,qn.chunk=function(t,e,n){e=(n?ao(t,e,n):void 0===e)?1:an(es(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=ht(Qe(r/e));i<r;)a[o++]=Gr(t,i,i+=e);return a},qn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},qn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ht(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return he(Oa(n)?vi(n):[n],or(e,1))},qn.cond=function(t){var e=null==t?0:t.length,r=Zi();return t=e?ce(t,(function(t){if("function"!=typeof t[1])throw new bt(n);return[r(t[0]),t[1]]})):[],Br((function(n){for(var r=-1;++r<e;){var i=t[r];if(ne(i[0],this,n))return ne(i[1],this,n)}}))},qn.conforms=function(t){return function(t){var e=ys(t);return function(n){return Kn(n,t,e)}}(Jn(t,1))},qn.constant=zs,qn.countBy=na,qn.create=function(t,e){var n=Pn(t);return null==e?n:Wn(n,e)},qn.curry=function t(e,n,r){var i=Di(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},qn.curryRight=function t(e,n,r){var i=Di(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},qn.debounce=ya,qn.defaults=hs,qn.defaultsDeep=fs,qn.defer=ba,qn.delay=_a,qn.difference=To,qn.differenceBy=qo,qn.differenceWith=Po,qn.drop=function(t,e,n){var r=null==t?0:t.length;return r?Gr(t,(e=n||void 0===e?1:es(e))<0?0:e,r):[]},qn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Gr(t,0,(e=r-(e=n||void 0===e?1:es(e)))<0?0:e):[]},qn.dropRightWhile=function(t,e){return t&&t.length?ti(t,Zi(e,3),!0,!0):[]},qn.dropWhile=function(t,e){return t&&t.length?ti(t,Zi(e,3),!0):[]},qn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ao(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=es(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:es(r))<0&&(r+=i),r=n>r?0:ns(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},qn.filter=function(t,e){return(Oa(t)?se:ir)(t,Zi(e,3))},qn.flatMap=function(t,e){return or(ca(t,e),1)},qn.flatMapDeep=function(t,e){return or(ca(t,e),1/0)},qn.flatMapDepth=function(t,e,n){return n=void 0===n?1:es(n),or(ca(t,e),n)},qn.flatten=Co,qn.flattenDeep=function(t){return null!=t&&t.length?or(t,1/0):[]},qn.flattenDepth=function(t,e){return null!=t&&t.length?or(t,e=void 0===e?1:es(e)):[]},qn.flip=function(t){return Di(t,512)},qn.flow=Us,qn.flowRight=Vs,qn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},qn.functions=function(t){return null==t?[]:cr(t,ys(t))},qn.functionsIn=function(t){return null==t?[]:cr(t,bs(t))},qn.groupBy=sa,qn.initial=function(t){return null!=t&&t.length?Gr(t,0,-1):[]},qn.intersection=Ro,qn.intersectionBy=ko,qn.intersectionWith=No,qn.invert=ms,qn.invertBy=vs,qn.invokeMap=ua,qn.iteratee=Hs,qn.keyBy=la,qn.keys=ys,qn.keysIn=bs,qn.map=ca,qn.mapKeys=function(t,e){var n={};return e=Zi(e,3),ur(t,(function(t,r,i){Yn(n,e(t,r,i),t)})),n},qn.mapValues=function(t,e){var n={};return e=Zi(e,3),ur(t,(function(t,r,i){Yn(n,r,e(t,r,i))})),n},qn.matches=function(t){return Tr(Jn(t,1))},qn.matchesProperty=function(t,e){return qr(t,Jn(e,1))},qn.memoize=wa,qn.merge=_s,qn.mergeWith=ws,qn.method=Ws,qn.methodOf=Ys,qn.mixin=Xs,qn.negate=xa,qn.nthArg=function(t){return t=es(t),Br((function(e){return Lr(e,t)}))},qn.omit=xs,qn.omitBy=function(t,e){return Es(t,xa(Zi(e)))},qn.once=function(t){return ma(2,t)},qn.orderBy=function(t,e,n,r){return null==t?[]:(Oa(e)||(e=null==e?[]:[e]),Oa(n=r?void 0:n)||(n=null==n?[]:[n]),Or(t,e,n))},qn.over=Js,qn.overArgs=Ma,qn.overEvery=Ks,qn.overSome=Qs,qn.partial=Ea,qn.partialRight=Sa,qn.partition=ha,qn.pick=Ms,qn.pickBy=Es,qn.property=$s,qn.propertyOf=function(t){return function(e){return null==t?void 0:hr(t,e)}},qn.pull=Do,qn.pullAll=jo,qn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,Zi(n,2)):t},qn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,void 0,n):t},qn.pullAt=Fo,qn.range=tu,qn.rangeRight=eu,qn.rearg=Aa,qn.reject=function(t,e){return(Oa(t)?se:ir)(t,xa(Zi(e,3)))},qn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Zi(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Rr(t,i),n},qn.rest=function(t,e){if("function"!=typeof t)throw new bt(n);return Br(t,e=void 0===e?e:es(e))},qn.reverse=zo,qn.sampleSize=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:es(e),(Oa(t)?Fn:jr)(t,e)},qn.set=function(t,e,n){return null==t?t:Fr(t,e,n)},qn.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Fr(t,e,n,r)},qn.shuffle=function(t){return(Oa(t)?zn:Vr)(t)},qn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ao(t,e,n)?(e=0,n=r):(e=null==e?0:es(e),n=void 0===n?r:es(n)),Gr(t,e,n)):[]},qn.sortBy=fa,qn.sortedUniq=function(t){return t&&t.length?Xr(t):[]},qn.sortedUniqBy=function(t,e){return t&&t.length?Xr(t,Zi(e,2)):[]},qn.split=function(t,e,n){return n&&"number"!=typeof n&&ao(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=os(t))&&("string"==typeof e||null!=e&&!Wa(e))&&!(e=Jr(e))&&ke(t)?ui(Ue(t),0,n):t.split(e,n):[]},qn.spread=function(t,e){if("function"!=typeof t)throw new bt(n);return e=null==e?0:an(es(e),0),Br((function(n){var r=n[e],i=ui(n,0,e);return r&&he(i,r),ne(t,this,i)}))},qn.tail=function(t){var e=null==t?0:t.length;return e?Gr(t,1,e):[]},qn.take=function(t,e,n){return t&&t.length?Gr(t,0,(e=n||void 0===e?1:es(e))<0?0:e):[]},qn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Gr(t,(e=r-(e=n||void 0===e?1:es(e)))<0?0:e,r):[]},qn.takeRightWhile=function(t,e){return t&&t.length?ti(t,Zi(e,3),!1,!0):[]},qn.takeWhile=function(t,e){return t&&t.length?ti(t,Zi(e,3)):[]},qn.tap=function(t,e){return e(t),t},qn.throttle=function(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new bt(n);return za(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),ya(t,e,{leading:i,maxWait:e,trailing:o})},qn.thru=ta,qn.toArray=$a,qn.toPairs=Ss,qn.toPairsIn=As,qn.toPath=function(t){return Oa(t)?ce(t,Eo):Za(t)?[t]:vi(Mo(os(t)))},qn.toPlainObject=is,qn.transform=function(t,e,n){var r=Oa(t),i=r||ka(t)||Ja(t);if(e=Zi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:za(t)&&Da(o)?Pn(Xt(t)):{}}return(i?ie:ur)(t,(function(t,r,i){return e(n,t,r,i)})),n},qn.unary=function(t){return pa(t,1)},qn.union=Uo,qn.unionBy=Vo,qn.unionWith=Go,qn.uniq=function(t){return t&&t.length?Kr(t):[]},qn.uniqBy=function(t,e){return t&&t.length?Kr(t,Zi(e,2)):[]},qn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Kr(t,void 0,e):[]},qn.unset=function(t,e){return null==t||Qr(t,e)},qn.unzip=Ho,qn.unzipWith=Wo,qn.update=function(t,e,n){return null==t?t:$r(t,e,oi(n))},qn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:$r(t,e,oi(n),r)},qn.values=Ts,qn.valuesIn=function(t){return null==t?[]:qe(t,bs(t))},qn.without=Yo,qn.words=Ds,qn.wrap=function(t,e){return Ea(oi(e),t)},qn.xor=Xo,qn.xorBy=Zo,qn.xorWith=Jo,qn.zip=Ko,qn.zipObject=function(t,e){return ri(t||[],e||[],Vn)},qn.zipObjectDeep=function(t,e){return ri(t||[],e||[],Fr)},qn.zipWith=Qo,qn.entries=Ss,qn.entriesIn=As,qn.extend=ss,qn.extendWith=us,Xs(qn,qn),qn.add=ou,qn.attempt=js,qn.camelCase=qs,qn.capitalize=Ps,qn.ceil=au,qn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=rs(n))==n?n:0),void 0!==e&&(e=(e=rs(e))==e?e:0),Zn(rs(t),e,n)},qn.clone=function(t){return Jn(t,4)},qn.cloneDeep=function(t){return Jn(t,5)},qn.cloneDeepWith=function(t,e){return Jn(t,5,e="function"==typeof e?e:void 0)},qn.cloneWith=function(t,e){return Jn(t,4,e="function"==typeof e?e:void 0)},qn.conformsTo=function(t,e){return null==e||Kn(t,e,ys(e))},qn.deburr=Ls,qn.defaultTo=function(t,e){return null==t||t!=t?e:t},qn.divide=su,qn.endsWith=function(t,e,n){t=os(t),e=Jr(e);var r=t.length,i=n=void 0===n?r:Zn(es(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},qn.eq=Ta,qn.escape=function(t){return(t=os(t))&&D.test(t)?t.replace(N,Ie):t},qn.escapeRegExp=function(t){return(t=os(t))&&W.test(t)?t.replace(H,"\\$&"):t},qn.every=function(t,e,n){var r=Oa(t)?ae:nr;return n&&ao(t,e,n)&&(e=void 0),r(t,Zi(e,3))},qn.find=ra,qn.findIndex=Lo,qn.findKey=function(t,e){return ve(t,Zi(e,3),ur)},qn.findLast=ia,qn.findLastIndex=Oo,qn.findLastKey=function(t,e){return ve(t,Zi(e,3),lr)},qn.floor=uu,qn.forEach=oa,qn.forEachRight=aa,qn.forIn=function(t,e){return null==t?t:ar(t,Zi(e,3),bs)},qn.forInRight=function(t,e){return null==t?t:sr(t,Zi(e,3),bs)},qn.forOwn=function(t,e){return t&&ur(t,Zi(e,3))},qn.forOwnRight=function(t,e){return t&&lr(t,Zi(e,3))},qn.get=ds,qn.gt=qa,qn.gte=Pa,qn.has=function(t,e){return null!=t&&no(t,e,mr)},qn.hasIn=ps,qn.head=Io,qn.identity=Gs,qn.includes=function(t,e,n,r){t=Ia(t)?t:Ts(t),n=n&&!r?es(n):0;var i=t.length;return n<0&&(n=an(i+n,0)),Xa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ye(t,e,n)>-1},qn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:es(n);return i<0&&(i=an(r+i,0)),ye(t,e,i)},qn.inRange=function(t,e,n){return e=ts(e),void 0===n?(n=e,e=0):n=ts(n),function(t,e,n){return t>=sn(e,n)&&t<an(e,n)}(t=rs(t),e,n)},qn.invoke=gs,qn.isArguments=La,qn.isArray=Oa,qn.isArrayBuffer=Ca,qn.isArrayLike=Ia,qn.isArrayLikeObject=Ra,qn.isBoolean=function(t){return!0===t||!1===t||Ua(t)&&dr(t)==u},qn.isBuffer=ka,qn.isDate=Na,qn.isElement=function(t){return Ua(t)&&1===t.nodeType&&!Ha(t)},qn.isEmpty=function(t){if(null==t)return!0;if(Ia(t)&&(Oa(t)||"string"==typeof t||"function"==typeof t.splice||ka(t)||Ja(t)||La(t)))return!t.length;var e=eo(t);if(e==p||e==y)return!t.size;if(co(t))return!Er(t).length;for(var n in t)if(St.call(t,n))return!1;return!0},qn.isEqual=function(t,e){return _r(t,e)},qn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?_r(t,e,void 0,n):!!r},qn.isError=Ba,qn.isFinite=function(t){return"number"==typeof t&&nn(t)},qn.isFunction=Da,qn.isInteger=ja,qn.isLength=Fa,qn.isMap=Va,qn.isMatch=function(t,e){return t===e||wr(t,e,Ki(e))},qn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,wr(t,e,Ki(e),n)},qn.isNaN=function(t){return Ga(t)&&t!=+t},qn.isNative=function(t){if(lo(t))throw new dt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(t)},qn.isNil=function(t){return null==t},qn.isNull=function(t){return null===t},qn.isNumber=Ga,qn.isObject=za,qn.isObjectLike=Ua,qn.isPlainObject=Ha,qn.isRegExp=Wa,qn.isSafeInteger=function(t){return ja(t)&&t>=-9007199254740991&&t<=9007199254740991},qn.isSet=Ya,qn.isString=Xa,qn.isSymbol=Za,qn.isTypedArray=Ja,qn.isUndefined=function(t){return void 0===t},qn.isWeakMap=function(t){return Ua(t)&&eo(t)==w},qn.isWeakSet=function(t){return Ua(t)&&"[object WeakSet]"==dr(t)},qn.join=function(t,e){return null==t?"":rn.call(t,e)},qn.kebabCase=Os,qn.last=Bo,qn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=es(n))<0?an(r+i,0):sn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):ge(t,_e,i,!0)},qn.lowerCase=Cs,qn.lowerFirst=Is,qn.lt=Ka,qn.lte=Qa,qn.max=function(t){return t&&t.length?rr(t,Gs,pr):void 0},qn.maxBy=function(t,e){return t&&t.length?rr(t,Zi(e,2),pr):void 0},qn.mean=function(t){return we(t,Gs)},qn.meanBy=function(t,e){return we(t,Zi(e,2))},qn.min=function(t){return t&&t.length?rr(t,Gs,Sr):void 0},qn.minBy=function(t,e){return t&&t.length?rr(t,Zi(e,2),Sr):void 0},qn.stubArray=nu,qn.stubFalse=ru,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=lu,qn.nth=function(t,e){return t&&t.length?Lr(t,es(e)):void 0},qn.noConflict=function(){return Gt._===this&&(Gt._=It),this},qn.noop=Zs,qn.now=da,qn.pad=function(t,e,n){t=os(t);var r=(e=es(e))?ze(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Oi($e(i),n)+t+Oi(Qe(i),n)},qn.padEnd=function(t,e,n){t=os(t);var r=(e=es(e))?ze(t):0;return e&&r<e?t+Oi(e-r,n):t},qn.padStart=function(t,e,n){t=os(t);var r=(e=es(e))?ze(t):0;return e&&r<e?Oi(e-r,n)+t:t},qn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),ln(os(t).replace(X,""),e||0)},qn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ao(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=ts(t),void 0===e?(e=t,t=0):e=ts(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=cn();return sn(t+i*(e-t+Ft("1e-"+((i+"").length-1))),e)}return kr(t,e)},qn.reduce=function(t,e,n){var r=Oa(t)?fe:Ee,i=arguments.length<3;return r(t,Zi(e,4),n,i,tr)},qn.reduceRight=function(t,e,n){var r=Oa(t)?de:Ee,i=arguments.length<3;return r(t,Zi(e,4),n,i,er)},qn.repeat=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:es(e),Nr(os(t),e)},qn.replace=function(){var t=arguments,e=os(t[0]);return t.length<3?e:e.replace(t[1],t[2])},qn.result=function(t,e,n){var r=-1,i=(e=ai(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[Eo(e[r])];void 0===o&&(r=i,o=n),t=Da(o)?o.call(t):o}return t},qn.round=cu,qn.runInContext=t,qn.sample=function(t){return(Oa(t)?jn:Dr)(t)},qn.size=function(t){if(null==t)return 0;if(Ia(t))return Xa(t)?ze(t):t.length;var e=eo(t);return e==p||e==y?t.size:Er(t).length},qn.snakeCase=Rs,qn.some=function(t,e,n){var r=Oa(t)?pe:Hr;return n&&ao(t,e,n)&&(e=void 0),r(t,Zi(e,3))},qn.sortedIndex=function(t,e){return Wr(t,e)},qn.sortedIndexBy=function(t,e,n){return Yr(t,e,Zi(n,2))},qn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Wr(t,e);if(r<n&&Ta(t[r],e))return r}return-1},qn.sortedLastIndex=function(t,e){return Wr(t,e,!0)},qn.sortedLastIndexBy=function(t,e,n){return Yr(t,e,Zi(n,2),!0)},qn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Wr(t,e,!0)-1;if(Ta(t[n],e))return n}return-1},qn.startCase=ks,qn.startsWith=function(t,e,n){return t=os(t),n=null==n?0:Zn(es(n),0,t.length),e=Jr(e),t.slice(n,n+e.length)==e},qn.subtract=hu,qn.sum=function(t){return t&&t.length?Se(t,Gs):0},qn.sumBy=function(t,e){return t&&t.length?Se(t,Zi(e,2)):0},qn.template=function(t,e,n){var r=qn.templateSettings;n&&ao(t,e,n)&&(e=void 0),t=os(t),e=us({},e,r,ji);var i,o,a=us({},e.imports,r.imports,ji),s=ys(a),u=qe(a,s),l=0,c=e.interpolate||lt,h="__p += '",f=gt((e.escape||lt).source+"|"+c.source+"|"+(c===z?et:lt).source+"|"+(e.evaluate||lt).source+"|$","g"),d="//# sourceURL="+(St.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Nt+"]")+"\n";t.replace(f,(function(e,n,r,a,s,u){return r||(r=a),h+=t.slice(l,u).replace(ct,Re),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),h+="';\n";var p=St.call(e,"variable")&&e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(C,""):h).replace(I,"$1").replace(R,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=js((function(){return pt(s,d+"return "+h).apply(void 0,u)}));if(m.source=h,Ba(m))throw m;return m},qn.times=function(t,e){if((t=es(t))<1||t>9007199254740991)return[];var n=4294967295,r=sn(t,4294967295);t-=4294967295;for(var i=Ae(r,e=Zi(e));++n<t;)e(n);return i},qn.toFinite=ts,qn.toInteger=es,qn.toLength=ns,qn.toLower=function(t){return os(t).toLowerCase()},qn.toNumber=rs,qn.toSafeInteger=function(t){return t?Zn(es(t),-9007199254740991,9007199254740991):0===t?t:0},qn.toString=os,qn.toUpper=function(t){return os(t).toUpperCase()},qn.trim=function(t,e,n){if((t=os(t))&&(n||void 0===e))return t.replace(Y,"");if(!t||!(e=Jr(e)))return t;var r=Ue(t),i=Ue(e);return ui(r,Le(r,i),Oe(r,i)+1).join("")},qn.trimEnd=function(t,e,n){if((t=os(t))&&(n||void 0===e))return t.replace(Z,"");if(!t||!(e=Jr(e)))return t;var r=Ue(t);return ui(r,0,Oe(r,Ue(e))+1).join("")},qn.trimStart=function(t,e,n){if((t=os(t))&&(n||void 0===e))return t.replace(X,"");if(!t||!(e=Jr(e)))return t;var r=Ue(t);return ui(r,Le(r,Ue(e))).join("")},qn.truncate=function(t,e){var n=30,r="...";if(za(e)){var i="separator"in e?e.separator:i;n="length"in e?es(e.length):n,r="omission"in e?Jr(e.omission):r}var o=(t=os(t)).length;if(ke(t)){var a=Ue(t);o=a.length}if(n>=o)return t;var s=n-ze(r);if(s<1)return r;var u=a?ui(a,0,s).join(""):t.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Wa(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=gt(i.source,os(nt.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,void 0===h?s:h)}}else if(t.indexOf(Jr(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},qn.unescape=function(t){return(t=os(t))&&B.test(t)?t.replace(k,Ve):t},qn.uniqueId=function(t){var e=++At;return os(t)+e},qn.upperCase=Ns,qn.upperFirst=Bs,qn.each=oa,qn.eachRight=aa,qn.first=Io,Xs(qn,(iu={},ur(qn,(function(t,e){St.call(qn.prototype,e)||(iu[e]=t)})),iu),{chain:!1}),qn.VERSION="4.17.15",ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){qn[t].placeholder=qn})),ie(["drop","take"],(function(t,e){Cn.prototype[t]=function(n){n=void 0===n?1:an(es(n),0);var r=this.__filtered__&&!e?new Cn(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},Cn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ie(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Cn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Zi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ie(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Cn.prototype[t]=function(){return this[n](1).value()[0]}})),ie(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Cn.prototype[t]=function(){return this.__filtered__?new Cn(this):this[n](1)}})),Cn.prototype.compact=function(){return this.filter(Gs)},Cn.prototype.find=function(t){return this.filter(t).head()},Cn.prototype.findLast=function(t){return this.reverse().find(t)},Cn.prototype.invokeMap=Br((function(t,e){return"function"==typeof t?new Cn(this):this.map((function(n){return yr(n,t,e)}))})),Cn.prototype.reject=function(t){return this.filter(xa(Zi(t)))},Cn.prototype.slice=function(t,e){t=es(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Cn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=es(e))<0?n.dropRight(-e):n.take(e-t)),n)},Cn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Cn.prototype.toArray=function(){return this.take(4294967295)},ur(Cn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=qn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(qn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof Cn,u=a[0],l=s||Oa(e),c=function(t){var e=i.apply(qn,he([t],a));return r&&h?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(s=l=!1);var h=this.__chain__,f=!!this.__actions__.length,d=o&&!h,p=s&&!f;if(!o&&l){e=p?e:new Cn(this);var m=t.apply(e,a);return m.__actions__.push({func:ta,args:[c],thisArg:void 0}),new On(m,h)}return d&&p?t.apply(this,a):(m=this.thru(c),d?r?m.value()[0]:m.value():m)})})),ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=_t[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);qn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Oa(i)?i:[],t)}return this[n]((function(n){return e.apply(Oa(n)?n:[],t)}))}})),ur(Cn.prototype,(function(t,e){var n=qn[e];if(n){var r=n.name+"";St.call(bn,r)||(bn[r]=[]),bn[r].push({name:e,func:n})}})),bn[Ti(void 0,2).name]=[{name:"wrapper",func:void 0}],Cn.prototype.clone=function(){var t=new Cn(this.__wrapped__);return t.__actions__=vi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=vi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=vi(this.__views__),t},Cn.prototype.reverse=function(){if(this.__filtered__){var t=new Cn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Cn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Oa(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=sn(e,t+a);break;case"takeRight":t=an(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,d=sn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ei(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var m=-1,v=t[l+=e];++m<h;){var g=c[m],y=g.iteratee,b=g.type,_=y(v);if(2==b)v=_;else if(!_){if(1==b)continue t;break t}}p[f++]=v}return p},qn.prototype.at=ea,qn.prototype.chain=function(){return $o(this)},qn.prototype.commit=function(){return new On(this.value(),this.__chain__)},qn.prototype.next=function(){void 0===this.__values__&&(this.__values__=$a(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},qn.prototype.plant=function(t){for(var e,n=this;n instanceof Ln;){var r=Ao(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},qn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Cn){var e=t;return this.__actions__.length&&(e=new Cn(this)),(e=e.reverse()).__actions__.push({func:ta,args:[zo],thisArg:void 0}),new On(e,this.__chain__)}return this.thru(zo)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,We&&(qn.prototype[We]=function(){return this}),qn}();Wt?((Wt.exports=Ge)._=Ge,Ht._=Ge):Gt._=Ge}).call(r.I)})),Ms=Object(r.sb)((function(t){!function(e){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return setTimeout(t,16)};function r(){this.reads=[],this.writes=[],this.raf=n.bind(e)}function i(t){t.scheduled||(t.scheduled=!0,t.raf(o.bind(null,t)))}function o(t){var e,n=t.writes,r=t.reads;try{r.length,a(r),n.length,a(n)}catch(t){e=t}if(t.scheduled=!1,(r.length||n.length)&&i(t),e){if(e.message,!t.catch)throw e;t.catch(e)}}function a(t){for(var e;e=t.shift();)e()}function s(t,e){var n=t.indexOf(e);return!!~n&&!!t.splice(n,1)}r.prototype={constructor:r,measure:function(t,e){var n=e?t.bind(e):t;return this.reads.push(n),i(this),n},mutate:function(t,e){var n=e?t.bind(e):t;return this.writes.push(n),i(this),n},clear:function(t){return s(this.reads,t)||s(this.writes,t)},extend:function(t){if("object"!=c(t))throw new Error("expected object");var e=Object.create(this);return function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(e,t),e.fastdom=this,e.initialize&&e.initialize(),e},catch:null};var u=e.fastdom=e.fastdom||new r;t.exports=u}("undefined"!=typeof window?window:r.I)})),Es={orientation:null,textSize:12,maxTextDivWidth:150,minTextDivWidth:100,textLines:2,shrinkAmount:0,color:"#000000",markerBuffer:0,textDivHeight:40,textDivWidth:100,textClass:"",activeColor:"white",inactiveColor:"rgb(128,128,128)",markerClass:"",markerSize:16,scale:1},Ss=function(){function t(e){var n=this,i=e.mapView,o=e.debounceDelayMS,a=void 0===o?100:o;Object(r.t)(this,t),this.mapView=i,this.debounce=xs.debounce((function(){n.mapView.container.appendChild(n.fragment),requestAnimationFrame((function(){Object(r.B)(n.polygonToSmartLabel.values()).forEach((function(t){return t.postProcessAfterCreation()})),n.prepareForNewBatch()}))}),a),this.prepareForNewBatch()}return Object(r.s)(t,[{key:"prepareForNewBatch",value:function(){this.fragment=document.createDocumentFragment(),null!=this.polygonToSmartLabel?this.polygonToSmartLabel.clear():this.polygonToSmartLabel=new Map}},{key:"addToBatch",value:function(t){t.created&&(this.debounce(),this.fragment.append(t.markerDiv),this.polygonToSmartLabel.set(t.polygon.id,t))}}]),t}(),As=function(){function t(e,n,i,o,a,s,u){Object(r.t)(this,t),this.styles={east:{textAlign:"left"},north:{textAlign:"center",verticalAlign:"bottom"},west:{textAlign:"right"},marker:{textAlign:"center",verticalAlign:"bottom"}},this._updateAction=null,Object.assign(this,r.v.prototype),this.collisionEngine=u,this.mapObject=n,this.mapView=a,this.textLabelsByPolygonId=o,this.polygonMeshesById=i,this.collisionPoints=s,this.id=e.polygonId,this.polygonId=e.polygonId,this.polygon=e.polygon,this._mPosition=e.position,this._mOriginalPosition=e.position,this.heightAbovePolygon=e.heightAbovePolygon>=0?e.heightAbovePolygon:0,this.label=e.label,this.text=e.shortText||e.text||"",this._mMapId=e.polygon.map||null,this.isActive=e.isActive||!1,this._misHidden=e.hidden||!1,this.currentOrientation=e.orientation,this.color=e.color||"#000000",this.markerBuffer=e.markerBuffer||Es.markerBuffer,this.originalColor=e.color||"#000000",this.height=e.height,this.collisionsAgainst={},this.screenRenderBuffer=e.screenRenderBuffer||250,this.rank=e.rank||0,this._initialRank=this.rank,this.tiebreakerRank=function(t){for(var e=3735928559,n=0;n<t.length;++n)e=4294967295&(e<<9|e>>>23),e^=t.charCodeAt(n);return e}(this.label||this.text),this.scale=e.scale||Es.scale,this.createDespiteImage=e.createDespiteImage,this.shrinkAmount=e.shrinkAmount||Es.shrinkAmount,e.stateText&&(this.text+=" (".concat(e.stateText,")")),this.textSize=e.textSize||Es.textSize,this.maxTextWidth=e.maxTextDivWidth||Es.maxTextDivWidth,this.minTextWidth=e.minTextDivWidth||Es.minTextDivWidth,this.lineHeight=e.lineHeight||1.2*this.textSize,this.textHeight=e.textDivHeight||Es.textDivHeight,this.textWidth=e.textDivWidth||Es.textDivWidth,this.textLines=e.textLines||Es.textLines,this.textClass=e.textClass||Es.textClass,this.pinColor=e.pinColor||Es.pinColor,this.activeColor=e.activeColor||Es.activeColor,this.inactiveColor=e.inactiveColor||Es.inactiveColor,this.markerClass=e.markerClass||Es.markerClass,this.markerSize=(e.markerSize||Es.markerSize)*this.scale,this.options=e,this.m_translateX=0,this.m_translateY=0,this.m_rotateZ=0,this.created=!1,this.isShowing=!1,this._mShowMarker=!1,this._mShowLine=!1,this._mShowLabel=!1,this.type="pin",this.textDiv=null,this.offsets=[],this.previousOrientation=null,this.hasNeverBeenShownYet=!0,this.create=this.create.bind(this),this.destroy=this.destroy.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.setPosition=this.setPosition.bind(this),this.addEventListener=this.addEventListener.bind(this),this.calculateHeightOfPolygon=this.calculateHeightOfPolygon.bind(this),this.setColor=this.setColor.bind(this),this.clearColor=this.clearColor.bind(this),this.setOrientation=ha(this.setOrientation,e.smartLabelOrientationDelay).bind(this),this.createMarkerDiv=this.createMarkerDiv.bind(this),this.setTransform=this.setTransform.bind(this),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this),this.updateMarkerStyles=this.updateMarkerStyles.bind(this),this.updateTextStyles=this.updateTextStyles.bind(this),this.updateStyles=this.updateStyles.bind(this),this.registerSelf=this.registerSelf.bind(this),this.deregisterSelf=this.deregisterSelf.bind(this),this.updateCollisions=this.updateCollisions.bind(this),this.determineOrientation=this.determineOrientation.bind(this),this.update=this.update.bind(this),this.flipIfNeeded=function(){},this.mapObject.textObjects.push(this)}return Object(r.s)(t,[{key:"updateMarkerStyles",value:function(){this.markerDiv&&(this.markerDiv.style.opacity=this._mShowMarker?1:0,this.markerDiv.style.top="0px",this.markerDiv.style.pointerEvents="none",this.markerDiv.style.width="".concat(this.markerSize,"px"),this.markerDiv.style.height="".concat(this.markerSize,"px"))}},{key:"updateTextStyles",value:function(){var t=this;if(this.textDiv&&(this.polygon.map!==this.mapView.currentMap&&this._mShowLabel&&(this.textDiv.style.opacity=this._mShowLabel?1:0),this.textDiv.style.opacity=this._mShowLabel?1:0,this.textHeight&&this.orientations)){this.textDiv.style.height="".concat(this.textHeight,"px");var e=this.orientations[this.currentOrientation||"north"];this.textDiv.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)");var n=this.styles[this.currentOrientation||"north"];Object.keys(n).forEach((function(e){var r=n[e];t.textDiv.style[e]=r}))}}},{key:"enable",value:function(){this.isActive=!0,this.collider&&this.collider.enable(),this._updateAction="show"}},{key:"disable",value:function(){this.isActive=!1,this.collider&&this.collider.disable(),this._updateAction="hide"}},{key:"updateStyles",value:function(){this.updateMarkerStyles(),this.updateTextStyles()}},{key:"setPriority",value:function(t){!function(t){return t>=hs.OPTIONAL_MINIMUM&&t<=hs.OPTIONAL_MAXIMUM||t===hs.MEDIUM||t===hs.HIGH}(t)?console.warn("Ranking should be one of ",Object.keys(hs)):(this.hide(),this.deregisterSelf(),this.rank=t,this.registerSelf(),this.show(),this.mapView.tryRendering())}},{key:"resetPriority",value:function(){this.setPriority(this._initialRank)}},{key:"createMarkerDiv",value:function(){var t=document.createElement("div"),e=is({type:"smart-label-pin-back",iconWidth:this.markerSize,iconHeight:this.markerSize,color:this.color}),n=is({type:"smart-label-pin-front",iconWidth:this.markerSize,iconHeight:this.markerSize,color:this.color}),r='<div class="mappedin-smart-label-icon__container">'.concat(e).concat(n,"</div>");return t.innerHTML=r,t.className="mappedin-pin-marker ".concat(this.polygon.id," ").concat(this.markerClass),t}},{key:"createTextDiv",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return e?n.innerHTML=t:n.textContent=t,n.className="mappedin-pin-marker-text ".concat(this.polygon.id," ").concat(this.textClass),n.style.lineHeight="".concat(this.lineHeight,"px"),n.style.fontSize="".concat(this.textSize,"px"),n.style.maxWidth="".concat(this.maxTextWidth,"px"),n.style.minWidth="".concat(this.minTextWidth,"px"),this.markerDiv.appendChild(n),this.registered=this.registerSelf(),n}},{key:"postProcessAfterCreation",value:function(){var t=this,e=this.textDiv;Ms.mutate((function(){
/**
  shave - Shave is a javascript plugin that truncates multi-line text within a html element based on set max height
  @version v2.5.4
  @link https://github.com/dollarshaveclub/shave#readme
  @author Jeff Wainwright <yowainwright@gmail.com> (jeffry.in)
  @license MIT
**/
!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw Error("maxHeight is required");var r="string"==typeof t?document.querySelectorAll(t):t;if(r){var i=n.character||"â¦",o=n.classname||"js-shave",a="boolean"!=typeof n.spaces||n.spaces,s='<span class="js-shave-char">'.concat(i,"</span>");"length"in r||(r=[r]);for(var u=0;u<r.length;u+=1){var l=r[u],c=l.style,h=l.querySelector(".".concat(o)),f=void 0===l.textContent?"innerText":"textContent";h&&(l.removeChild(l.querySelector(".js-shave-char")),l[f]=l[f]);var d=l[f],p=a?d.split(" "):d;if(!(p.length<2)){var m=c.height;c.height="auto";var v=c.maxHeight;if(c.maxHeight="none",l.offsetHeight<=e)c.height=m,c.maxHeight=v;else{for(var g=p.length-1,y=0,b=void 0;y<g;)b=y+g+1>>1,l[f]=a?p.slice(0,b).join(" "):p.slice(0,b),l.insertAdjacentHTML("beforeend",s),l.offsetHeight>e?g=a?b-1:b-2:y=b;l[f]=a?p.slice(0,g).join(" "):p.slice(0,g),l.insertAdjacentHTML("beforeend",s);var _=a?" ".concat(p.slice(g).join(" ")):p.slice(g),w=document.createTextNode(_),x=document.createElement("span");x.classList.add(o),x.style.display="none",x.appendChild(w),l.insertAdjacentElement("beforeend",x),c.height=m,c.maxHeight=v}}}}}(e,t.lineHeight*t.textLines+5),Ms.measure((function(){var n=e.getBoundingClientRect();t.textHeight=n.height,t.textWidth=n.width,Ms.mutate((function(){t.orientations=t._calculateOrientations(),t.updateCollisionAreas(),t.updateStyles(),t.mapView.tryRendering()}))}))}))}},{key:"_calculateOrientations",value:function(){var t=this.markerSize,e=this.markerBuffer,n=this.textWidth,r=this.textHeight,i={};return i.north={x:t/2-n/2,y:-1*r-e},i.east={x:t+e,y:t/2+-1*r/2},i.west={x:-1*n-e,y:t/2-r/2},i}},{key:"create",value:function(){var t=this.doNotCreate,e=this.label,n=this.text,r=this.inactiveColor,i=this.created;if(!t&&!i&&(!this.polygonMeshesById[this.polygon.id+"_image"]||this.createDespiteImage)){this.color=r,this.polygonHeight=this.calculateHeightOfPolygon();var o=this.height||this.polygonHeight+this.heightAbovePolygon;this._mPosition.z=o,this._mOriginalPosition.z=o,this.height=o,this.markerDiv=this.createMarkerDiv(),this.textDiv=this.createTextDiv(e||n,!!e),this.updateStyles(),this.created=!0,this.hide()}}},{key:"calculateHeightOfPolygon",value:function(){if(this.polygonMeshesById[this.polygon.id]){var t=this.polygonMeshesById[this.polygon.id];return t.geometry.boundingBox||t.geometry.computeBoundingBox(),t.geometry.boundingBox.max.z}return 0}},{key:"show",value:function(){this.polygon.map===this.mapView.currentMap&&this.isInScreen&&(null!=this._lastTransforms&&this.setTransform(this._lastTransforms,!0),this.isShowing||(this._mShowMarker=!0,this._mShowLabel=!0,this.color=this.activeColor,this.hasNeverBeenShownYet&&(this.hasNeverBeenShownYet=!1,ws(this.textDiv)),this.isShowing=!0,this.updateStyles(),this.updateCollisionAreas(),this.mapView.tryRendering()))}},{key:"hide",value:function(){this.isShowing&&(this._mShowLabel=!1,this._mShowMarker=!1,this.polygon.map!==this.mapView.currentMap&&this.deregisterSelf(),this.color=this.inactiveColor,this.isShowing=!1,this.updateStyles(),this.updateCollisionAreas(),this.mapView.tryRendering())}},{key:"updateCollisionAreas",value:function(){if(this.orientations){var t=this.textWidth,e=this.textHeight,n=this.markerSize,i=this.markerBuffer,o={x:this.orientations.north.x-n/2,y:this.orientations.north.y-n/2},a={x:this.orientations.east.x-n/2,y:this.orientations.east.y-n/2},s={x:this.orientations.west.x-n/2,y:this.orientations.west.y-n/2},u=Object(r.r)({w:t,h:e},o),l=Object(r.r)({w:t,h:e},a),c=Object(r.r)({w:t,h:e},s),h={w:n+i,h:n+i,x:-(n+i)/2,y:-(n+i)/2};u.occupied=null==this.currentOrientation||"north"===this.currentOrientation,l.occupied=null==this.currentOrientation||"east"===this.currentOrientation,c.occupied=null==this.currentOrientation||"west"===this.currentOrientation,this.collider.updateHitAreas({north:u,west:c,east:l,marker:h})}}},{key:"registerSelf",value:function(){var t="".concat(this.polygon.id,"-marker");this.collider=this.collisionEngine.add({hitAreas:{},rank:this.rank,tiebreakerRank:this.tiebreakerRank,id:t,userData:{label:this}}),this.collider.update(this.m_translateX,this.m_translateY),this.collider.on("collision",this.updateCollisions),this.collider.on("update",this.update),this.collider.on("hide",this.disable),this.collider.on("show",this.enable)}},{key:"updateCollisions",value:function(t){var e={hasCollided:0,collisionCount:0};if(this.collisionsAgainst.collisionCount>=3)this.determineOrientation(this.collisionsAgainst,this.collisionsAgainst);else{for(var n in t){e[n]=0;for(var r=0;r<t[n].length;r++){var i=t[n][r],o=i.collider,a=i.hitArea;if((null==o.userData.label||o.userData.label.polygon.map==this.polygon.map)&&a.occupied&&o.occupied)if(this.rank<o.rank||this.rank===o.rank&&this.tiebreakerRank<=o.tiebreakerRank)e[n]||(e.collisionCount+=1),e.hasCollided=1,e[n]=1;else if(null!=o.userData.label){var s=o.userData.label.collisionsAgainst;s.hasCollided=1,s.collisionCount||(s.collisionCount=0),s[n]||(s[n]=1,s.collisionCount+=1)}}}this.determineOrientation(e,this.collisionsAgainst)}}},{key:"update",value:function(){switch(this._updateAction){case"show":this.show();break;case"hide":this.hide()}}},{key:"determineOrientation",value:function(t,e){if(e.hasCollided&&Object.keys(this.orientations).forEach((function(n){null==t[n]&&(t[n]=e[n])})),e.marker)this._updateAction="hide";else if(t.collisionCount>=3)this._updateAction="hide";else if(this.orientations){var n=this.currentOrientation,r=null;Object.keys(this.orientations).forEach((function(e){t[e]||null!==r&&e!==n||(r=e)})),null!==r&&this.setOrientation(r)}this.hasCollided=0,this.collisionsAgainst={}}},{key:"deregisterSelf",value:function(){this.collider&&(this.collider.off("collision",this.updateCollisions),this.collisionEngine.remove(this.collider))}},{key:"setOrientation",value:function(t){var e=this.currentOrientation!==t;return this.currentOrientation=t,this._updateAction="show",e&&(this.updateCollisionAreas(),this.updateStyles(),this.mapView.tryRendering()),!0}},{key:"setColor",value:function(t){this.textColor=t}},{key:"clearColor",value:function(){this.setColor(this.originalColor)}},{key:"setPosition",value:function(t){t&&(this._mPosition=t,this.updateStyles(),this.mapView.tryRendering())}},{key:"setTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.polygon.map===this.mapView.currentMap&&!1!==this.isActive){this._lastTransforms=Object(r.r)({},t),this.m_translateX=t.x,this.m_translateY=t.y,this.m_rotateZ=t.rotateZ||"",this.m_distanceFromCamera=t.distanceFromCamera||0,null!=this.collider&&this.collider.update(this.m_translateX,this.m_translateY,this.m_distanceFromCamera);var n="translate("+(t.x-this.markerSize/2)+"px, "+(t.y-this.markerSize/2)+"px)",i="rotate("+t.rotateZ+"rad)",o=n+" "+i;return this.markerDiv&&(this.isShowing||e)&&(this.markerDiv.style.transform=o),this.isInScreen=!0,this.publish("update-position",{x:t.x,y:t.y,rotateZ:t.rotateZ}),!0}}},{key:"removeSelf",value:function(){this.mapView.container.contains(this.markerDiv)&&(this.mapView.container.removeChild(this.markerDiv),this.markerDiv=null,this.textDiv=null),this.deregisterSelf(),this.created?this.mapObject.textObjects=this.mapObject.textObjects.filter((function(t){return t!=this})):this.doNotCreate=!0}},{key:"destroy",value:function(){this.removeSelf()}},{key:"addEventListener",value:function(t,e){this.markerDiv.addEventListener(t,e)}}]),t}(),Ts=2,qs=.5,Ps=56/1.2,Ls=function(){function t(){Object(r.t)(this,t),this.x=0,this.y=0,this.width=0,this.height=0,this.layer=null,this.index=null}return Object(r.s)(t,[{key:"layout",value:function(t,e,n,r,i,o){var a,s=this.canvasBounds.rotation*Math.PI/180,u=this.width*this.pixelsPerMu,l=this.height*this.pixelsPerMu;"left"==this.canvasBounds.align?a=this.margin:"right"==this.canvasBounds.align?a=this.canvasBounds.maxWidth-u-this.margin:"center"==this.canvasBounds.align&&(a=(this.canvasBounds.maxWidth-u-this.margin)/2);var c=a*Math.cos(s),h=-a*Math.sin(s),f=this.index;e.setXYZ(f,this.canvasBounds.x-t.width/2+c,-this.canvasBounds.y+t.height/2+h,this.z+.1),n.setXY(f,u,l),r.setX(f,s);var d=this.layer.canvas;i.setXYZW(f,this.x/d.width,1-this.y/d.height,this.width/d.width,this.height/d.height),o.setXYZ(f,this.color.r,this.color.g,this.color.b),e.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0,i.needsUpdate=!0,o.needsUpdate=!0}}]),t}(),Os=function(){function t(e,n,i,o){Object(r.t)(this,t),this.x=e,this.y=n,this.width=i,this.height=o}return Object(r.s)(t,[{key:"leftOverSpace",value:function(t){return this.width<t.width||this.height<t.height?null:this.height*(this.width-t.width)+this.width*(this.height-t.height)}},{key:"split",value:function(e,n,r){e.x=this.x,e.y=this.y,this.width-e.height<16&&this.height-e.height<16?n.splice(r,1):this.width===e.width?n.splice(r,1,new t(this.x,this.y+e.height,this.width,this.height-e.height)):this.height===e.height?n.splice(r,1,new t(this.x+e.width,this.y,this.width-e.width,this.height)):n.splice(r,1,new t(this.x+e.width,this.y,this.width-e.width,e.height),new t(this.x,this.y+e.height,this.width,this.height-e.height))}}]),t}(),Cs=function(){function t(e,n,o,a){Object(r.t)(this,t);for(var s=5;Math.pow(2,s)<a;)s+=1;for(a=Math.pow(2,s),s=10;Math.pow(2,s)<o;)s+=1;o=Math.pow(2,s),this.atlas=e,this.map=n,this.canvasWidth=o,this.canvasHeight=a,this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.spaces=[new Os(0,0,this.canvas.width,this.canvas.height)],this.free=[],this.labels=[],this.count=64;var u=new Float32Array(3*this.count),l=new Float32Array(2*this.count),c=new Float32Array(this.count),h=new Float32Array(4*this.count),f=new Float32Array(3*this.count);this.uv=new i.InstancedBufferAttribute(h,4,!1,1),this.uv.setArray(h),this.uv.needsUpdate=!0,this.origin=new i.InstancedBufferAttribute(u,3,!1,1),this.origin.setArray(u),this.origin.needsUpdate=!0,this.size=new i.InstancedBufferAttribute(l,2,!1,1),this.size.setArray(l),this.size.needsUpdate=!0,this.rotation=new i.InstancedBufferAttribute(c,1,!1,1),this.rotation.setArray(c),this.rotation.needsUpdate=!0,this.color=new i.InstancedBufferAttribute(f,3,!0,1),this.color.setArray(f),this.color.needsUpdate=!0;for(var d=0;d<this.count;d++)this.zero(d);var p=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]);this.geometry=new i.InstancedBufferGeometry,this.geometry.setIndex([0,3,1,3,2,1]),this.geometry.addAttribute("position",new i.BufferAttribute(p,3)),this.geometry.addAttribute("size",this.size),this.geometry.addAttribute("origin",this.origin),this.geometry.addAttribute("rotation",this.rotation),this.geometry.addAttribute("uv",this.uv),this.geometry.addAttribute("color",this.color),this.texture=new i.CanvasTexture(this.canvas),this.texture.anisotropy=16,this.material=new i.RawShaderMaterial,this.material.vertexShader="attribute vec2 position;attribute vec3 origin;attribute vec2 size;attribute float rotation;attribute vec4 uv;attribute vec3 color;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat4 modelMatrix;varying vec2 vUV;varying vec3 vColor;void main(){vec4 mapDirectionVector=vec4(0,1,0,0)*viewMatrix*modelMatrix;float mapDirection=atan(mapDirectionVector.y,mapDirectionVector.x);float cosRotation=cos(rotation);float sinRotation=sin(rotation);mat4 rotationMatrix=mat4(vec4(cosRotation,-sinRotation,0.0,0.0),vec4(sinRotation,cosRotation,0.0,0.0),vec4(0.0,0.0,1.0,0.0),vec4(0.0,0.0,0.0,1.0));mat4 translate=mat4(vec4(1,0,0,0),vec4(0,1,0,0),vec4(0,0,1,0),vec4(origin,1));gl_Position=projectionMatrix*viewMatrix*modelMatrix*translate*rotationMatrix*(vec4(position*size-vec2(0,size.y/2.0),0,1));vec2 uvStart=uv.xy;vec2 uvSize=uv.zw;if(sin(mapDirection+rotation)>0.0){vUV=position*uvSize+vec2(uvStart.x,uvStart.y-uvSize.y);}else{vUV=(vec2(1,1)-position)*uvSize+vec2(uvStart.x,uvStart.y-uvSize.y);}vColor=color;}",this.material.fragmentShader="precision mediump float;uniform sampler2D textureLabel;varying vec2 vUV;varying vec3 vColor;void main(){gl_FragColor=texture2D(textureLabel,vUV);gl_FragColor.rgb=vColor;}",this.material.uniforms={textureLabel:{value:this.texture}},this.material.transparent=!0,this.mesh=new i.Mesh(this.geometry,this.material),this.obj=new i.Object3D,this.obj.add(this.mesh),this.obj.frustumCulled=!1,this.mesh.frustumCulled=!1,this.map.add(this.obj)}return Object(r.s)(t,[{key:"space",value:function(){return this.spaces.map((function(t){return t.width*t.height})).reduce((function(t,e){return t+e}))}},{key:"zero",value:function(t){this.origin.array[3*t+0]=0,this.origin.array[3*t+1]=0,this.origin.array[3*t+2]=0,this.size.array[2*t+0]=0,this.size.array[2*t+1]=0,this.rotation.array[t]=0,this.uv.array[4*t+0]=0,this.uv.array[4*t+1]=0,this.uv.array[4*t+2]=0,this.uv.array[4*t+3]=0,this.color.array[3*t+0]=0,this.color.array[3*t+1]=0,this.color.array[3*t+2]=0,this.origin.needsUpdate=!0,this.size.needsUpdate=!0,this.rotation.needsUpdate=!0,this.uv.needsUpdate=!0,this.color.needsUpdate=!0}},{key:"findSpace",value:function(t){if(0!=this.free.length&&this.labels.length==this.count)return!1;for(var e=-1,n=0;n<this.spaces.length;n++){var r=this.spaces[n].leftOverSpace(t);null!==r&&(-1===e||this.spaces[n].leftOverSpace(t)<r)&&(e=n)}return-1!==e&&(this.spaces[e].split(t,this.spaces,e),t.layer=this,0===this.free.length?(t.index=this.labels.length,this.labels.push(t)):(t.index=this.free.pop(),this.labels[t.index]=t)),-1!=e}},{key:"remove",value:function(t){if(void 0!==t.index){this.zero(t.index),this.context.clearRect(t.x,t.y,t.width,t.height),this.spaces.push(new Os(t.x,t.y,t.width,t.height)),this.free.push(t.index),this.labels[t.index]=null;var e=!0,n=!0,r=!1,i=void 0;try{for(var o,a=this.labels[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!(e=e&&null!=s))break}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}e&&this.atlas.removeLayer(this)}}},{key:"render",value:function(t){this.context.save(),this.context.rect(t.x+1,t.y+1,t.width-2,t.height-2),this.context.clip(),this.context.font=t.size+"px "+t.font;var e=!0,n=!1,r=void 0;try{for(var i,o=t.lines[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.context.fillText(a.text,a.x+t.x+4,a.y+t.y+a.height+4)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.texture.needsUpdate=!0,this.context.restore()}},{key:"onWebGLContextRestored",value:function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.texture=new i.CanvasTexture(this.canvas),this.texture.anisotropy=16,this.material.uniforms.textureLabel.value=this.texture;var t=!0,e=!1,n=void 0;try{for(var r,o=this.labels[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;null!=a&&this.render(a)}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.texture.dispose()}}]),t}(),Is=function(){function t(){Object(r.t)(this,t),this.layers=[],this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return Object(r.s)(t,[{key:"addLabel",value:function(t,e,n,r,i,o){var a=0,s=0,u=!0,l=!1,c=void 0;try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value;s=Math.max(Math.ceil(d.width+d.x),s),a=Math.max(Math.ceil(d.height+d.y),a)}}catch(t){l=!0,c=t}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}var p,m=new Ls;m.map=t,m.width=s+8,m.height=a+8,m.lines=e,m.font=n,m.size=r,m.canvasBounds=i.canvasBounds,m.margin=i.margin,m.heightMargin=i.heightMargin,m.pixelsPerMu=o,m.z=i.height,m.view=i,m.color=i.color;var v=!0,g=!1,y=void 0;try{for(var b,_=this.layers[Symbol.iterator]();!(v=(b=_.next()).done);v=!0)if((p=b.value).map===t){if(p.findSpace(m))break;p=null}else p=null}catch(t){g=!0,y=t}finally{try{v||null==_.return||_.return()}finally{if(g)throw y}}if(null==p){if(p=new Cs(this,t,m.width,m.height),this.layers.push(p),!p.findSpace(m))return;this.layers.sort((function(t,e){return e.space()-t.space()}))}return p.render(m),m.layout(t.mapClass,p.origin,p.size,p.rotation,p.uv,p.color),m.layer=p,m}},{key:"removeLayer",value:function(t){var e=this.layers.indexOf(t);-1!=e&&this.layers.splice(e,1)}},{key:"measure",value:function(t,e,n){return this.context.font=n+"px "+e,this.context.measureText(t)}},{key:"onWebGLContextRestored",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value.onWebGLContextRestored()}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"dispose",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value.dispose()}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}]),t}(),Rs=function(){function t(e,n,o,a,s,u,l,c,h){Object(r.t)(this,t);var f=ua(e.polygon,n.polygons);this.text=(e.shortText||e.text).trim(),this.stateText=e.stateText?" ("+e.stateText+")":"",this.font=e.font||a,this.atlas=h,this.canvasBounds=e.canvasBounds||f.canvasBounds,this.mapScale=o.getMapScale()||1,this.margin=(e.margin||Ts)*this.mapScale,this.heightMargin=(e.heightMargin||qs)*this.mapScale,this.scaleMin=e.scaleMin||.25,this.scaleStep=e.scaleStep>0?e.scaleStep:.25,this.multiline=null==e.multiline||e.multiline,this.height=Number(e.height)||null,this.polygonMeshesById=s,this.polyId=e.polygonId||sa(e.polygon,n.polygons),this.map=o,this.color=new i.Color(e.color||c.colors.text||0),this.baseColor=this.color,this.hideOnCreate=!1,this.hoverLabelText=e.text.trim(),this.fontSize=e.fontSize*this.mapScale||e.size*Ps||56,this.hoverLabelMode=e.hoverLabelMode3D||Xa.MODES.ALL,this.hoverLabelClass=e.hoverLabelClass||"mMapviewHoverLabel",this.showHoverLabel=this.hoverLabelMode==Xa.MODES.ALL||this.hoverLabelMode==Xa.MODES.NO_TEXT_LABEL_ONLY,this.hoverIfLabelFails=this.hoverLabelMode==Xa.MODES.ALL||this.hoverLabelMode==Xa.MODES.NO_TEXT_LABEL_ONLY,this.textLabelsByPolygonId=u,this.map.textObjects.push(this)}return Object(r.s)(t,[{key:"create",value:function(){var t=this;if(!this.doNotCreate){if(null==t.canvasBounds)return t.invalid=!0,t.message="No Canvas Bounds. Can't draw text '"+t.text+"'",void(t.showHoverLabel=t.hoverIfLabelFails);t.showHoverLabel=this.hoverLabelMode==Xa.MODES.ALL;var e=1/28*this.mapScale,n=28/this.mapScale,r=[this.text];this.stateText.length&&r.unshift(this.text+this.stateText);for(var i=0,o=r;i<o.length;i++){for(var a,s,u,l=o[i].split(" ").map((function(e){return{width:t.atlas.measure(e,t.font,t.fontSize).width,word:e}})),c=(this.canvasBounds.maxWidth-2*this.margin)*n,h=(this.canvasBounds.maxHeight-2*this.heightMargin)*n,f=(1-this.scaleMin)/this.scaleStep,d=0,p=this.atlas.measure(" ",this.font,this.fontSize).width,m=Ns(this.fontSize+"px "+this.font),v=0,g=l.length;v<g;v++){var y=l[v].width,b=Math.ceil((y-c)/(y*this.scaleStep));d=Math.max(b,d)}if(null==this.height)if(this.polygonMeshesById[this.polyId]){var _=this.polygonMeshesById[this.polyId];_.geometry.boundingBox||_.geometry.computeBoundingBox(),this.height=_.geometry.boundingBox.max.z+_.position.z}else this.height=0;var w=this.scaleStep;t:for(s=d;s<=f;s++){u=1-s*w;var x=l[0].width*u;a=[{text:l[0].word,width:x,height:m*u,x:0,y:0}];for(var M=1;M<l.length;M++){var E=l[M],S=(E.width+p)*u;if(x+S<c)a[a.length-1].text+=" "+E.word,a[a.length-1].width+=S,x+=S;else{if(!this.multiline)continue t;a[a.length-1].width=x,x=E.width*u,a.push({text:E.word,width:x,height:m*u,x:0,y:a[a.length-1].height+a[a.length-1].y})}}if(a.length*m*u<=h){this.invalid=!1;break}}if(0==this.invalid)break}if(0==this.invalid){var A=a.map((function(t){return Math.ceil(t.width)})).reduce((function(t,e){return Math.max(t,e)})),T=!0,q=!1,P=void 0;try{for(var L,O=a[Symbol.iterator]();!(T=(L=O.next()).done);T=!0){var C=L.value;C.x=(A-C.width)/2}}catch(t){q=!0,P=t}finally{try{T||null==O.return||O.return()}finally{if(q)throw P}}this.label=this.atlas.addLabel(this.map,a,this.font,this.fontSize*u,this,e)}this.created=!0}}},{key:"flipIfNeeded",value:function(t){}},{key:"removeSelf",value:function(t){var e=this;this.created?(null!=this.label&&(this.label.layer.remove(this.label),this.label=null),t||(this.map.textObjects=this.map.textObjects.filter((function(t){return t!=e})),Object.keys(this.textLabelsByPolygonId).forEach((function(t){e.textLabelsByPolygonId[t]==e&&delete e.textLabelsByPolygonId[t]})))):this.doNotCreate=!0}},{key:"setColor",value:function(t){this.color=new i.Color(t),null!=this.label&&null!=this.label.layer&&(this.label.color=this.color,this.label.layout(this.map.mapClass,this.label.layer.origin,this.label.layer.size,this.label.layer.rotation,this.label.layer.uv,this.label.layer.color))}},{key:"clearColor",value:function(){this.setColor(this.baseColor)}},{key:"hide",value:function(){this.label?this.label.layer.zero(this.label.index):this.hideOnCreate=!0}},{key:"show",value:function(){if(this.label){var t=this.label.layer,e=this.map;this.label.layout(e.mapClass,t.origin,t.size,t.rotation,t.uv,t.color)}else this.hideOnCreate=!1}},{key:"toString",value:function(){return this.hoverLabelText}}]),t}(),ks=new Map,Ns=function(t){var e=ks[t];if(null!=e)return e;var n=document.createElement("span");n.textContent="Hg",n.style.font=t;var r=document.createElement("div");r.style.cssText="display: inline-block; width: 1px; height: 0px;";var i=document.createElement("div");i.appendChild(n),i.appendChild(r),document.body.appendChild(i);try{var o=n.getBoundingClientRect()}finally{i.remove()}return null!=o.height&&(ks[t]=o.height,e=o.height),e},Bs=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},Ds=r.g.process,js=r.g.setImmediate,Fs=r.g.clearImmediate,zs=r.g.MessageChannel,Us=r.g.Dispatch,Vs=0,Gs={},Hs=function(){var t=+this;if(Gs.hasOwnProperty(t)){var e=Gs[t];delete Gs[t],e()}},Ws=function(t){Hs.call(t.data)};js&&Fs||(js=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Gs[++Vs]=function(){Bs("function"==typeof t?t:Function(t),e)},ys(Vs),Vs},Fs=function(t){delete Gs[t]},"process"==Object(r.ab)(Ds)?ys=function(t){Ds.nextTick(Object(r.lb)(Hs,t,1))}:Us&&Us.now?ys=function(t){Us.now(Object(r.lb)(Hs,t,1))}:zs?(_s=(bs=new zs).port2,bs.port1.onmessage=Ws,ys=Object(r.lb)(_s.postMessage,_s,1)):r.g.addEventListener&&"function"==typeof postMessage&&!r.g.importScripts?(ys=function(t){r.g.postMessage(t+"","*")},r.g.addEventListener("message",Ws,!1)):ys="onreadystatechange"in Object(r.J)("script")?function(t){r.K.appendChild(Object(r.J)("script")).onreadystatechange=function(){r.K.removeChild(this),Hs.call(t)}}:function(t){setTimeout(Object(r.lb)(Hs,t,1),0)});var Ys={set:js,clear:Fs},Xs=Ys.set,Zs=r.g.MutationObserver||r.g.WebKitMutationObserver,Js=r.g.process,Ks=r.g.Promise,Qs="process"==Object(r.ab)(Js);function $s(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Object(r.L)(e),this.reject=Object(r.L)(n)}var tu,eu,nu,ru,iu={f:function(t){return new $s(t)}},ou=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},au=r.g.navigator,su=au&&au.userAgent||"",uu=Ys.set,lu=function(){var t,e,n,i=function(){var r,i;for(Qs&&(r=Js.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Qs)n=function(){Js.nextTick(i)};else if(!Zs||r.g.navigator&&r.g.navigator.standalone)if(Ks&&Ks.resolve){var o=Ks.resolve(void 0);n=function(){o.then(i)}}else n=function(){Xs.call(r.g,i)};else{var a=!0,s=document.createTextNode("");new Zs(i).observe(s,{characterData:!0}),n=function(){s.data=a=!a}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),cu=r.g.TypeError,hu=r.g.process,fu=hu&&hu.versions,du=fu&&fu.v8||"",pu=r.g.Promise,mu="process"==Object(r.M)(hu),vu=function(){},gu=eu=iu.f,yu=!!function(){try{var t=pu.resolve(1),e=(t.constructor={})[Object(r.Z)("species")]=function(t){t(vu,vu)};return(mu||"function"==typeof PromiseRejectionEvent)&&t.then(vu)instanceof e&&0!==du.indexOf("6.6")&&-1===su.indexOf("Chrome/66")}catch(t){}}(),bu=function(t){var e;return!(!Object(r.db)(t)||"function"!=typeof(e=t.then))&&e},_u=function(t,e){if(!t._n){t._n=!0;var n=t._c;lu((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&Mu(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===e.promise?l(cu("Promise-chain cycle")):(o=bu(n))?o.call(n,u,l):u(n)):l(r)}catch(t){c&&!a&&c.exit(),l(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&wu(t)}))}},wu=function(t){uu.call(r.g,(function(){var e,n,i,o=t._v,a=xu(t);if(a&&(e=ou((function(){mu?hu.emit("unhandledRejection",o,t):(n=r.g.onunhandledrejection)?n({promise:t,reason:o}):(i=r.g.console)&&i.error&&i.error("Unhandled promise rejection",o)})),t._h=mu||xu(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},xu=function(t){return 1!==t._h&&0===(t._a||t._c).length},Mu=function(t){uu.call(r.g,(function(){var e;mu?hu.emit("rejectionHandled",t):(e=r.g.onrejectionhandled)&&e({promise:t,reason:t._v})}))},Eu=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),_u(e,!0))},Su=function t(e){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw cu("Promise can't be resolved itself");(n=bu(e))?lu((function(){var o={_w:i,_d:!1};try{n.call(e,Object(r.lb)(t,o,1),Object(r.lb)(Eu,o,1))}catch(t){Eu.call(o,t)}})):(i._v=e,i._s=1,_u(i,!1))}catch(t){Eu.call({_w:i,_d:!1},t)}}};yu||(pu=function(t){Object(r.ub)(this,pu,"Promise","_h"),Object(r.L)(t),tu.call(this);try{t(Object(r.lb)(Su,this,1),Object(r.lb)(Eu,this,1))}catch(t){Eu.call(this,t)}},(tu=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Object(r.c)(pu.prototype,{then:function(t,e){var n=gu(Object(r.x)(this,pu));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=mu?hu.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&_u(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),nu=function(){var t=new tu;this.promise=t,this.resolve=Object(r.lb)(Su,t,1),this.reject=Object(r.lb)(Eu,t,1)},iu.f=gu=function(t){return t===pu||t===ru?new nu(t):eu(t)}),Object(r.a)(r.a.G+r.a.W+r.a.F*!yu,{Promise:pu}),Object(r.h)(pu,"Promise"),Object(r.e)("Promise"),ru=r.N.Promise,Object(r.a)(r.a.S+r.a.F*!yu,"Promise",{reject:function(t){var e=gu(this);return(0,e.reject)(t),e.promise}}),Object(r.a)(r.a.S+r.a.F*!yu,"Promise",{resolve:function(t){return function(t,e){if(Object(r.eb)(t),Object(r.db)(e)&&e.constructor===t)return e;var n=iu.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),Object(r.a)(r.a.S+r.a.F*!(yu&&Object(r.hb)((function(t){pu.all(t).catch(vu)}))),"Promise",{all:function(t){var e=this,n=gu(e),r=n.resolve,i=n.reject,o=ou((function(){var n=[],o=0,a=1;M(t,!1,(function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=gu(e),r=n.reject,i=ou((function(){M(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}});var Au=function(t){var e=t.image,n=t.rotation||0,r=e.position.clone(),i=e.rotation.z,o=n;this.flipIfNeeded=function(t){var r,i=(n-t)%ts;(i>es&&i<ns||i<-es&&i>-ns)&&((r=e.geometry).boundingBox||r.computeBoundingBox(),n=(n+Math.PI)%ts,e.rotation.z=e.rotation.z+Math.PI,e.translateX(-2*(r.boundingBox.min.x+(r.boundingBox.max.x-r.boundingBox.min.x)/2)),e.translateY(-2*(r.boundingBox.min.y+(r.boundingBox.max.y-r.boundingBox.min.y)/2)))},this.reset=function(){e.position.x=r.x,e.position.y=r.y,e.rotation.z=i,n=o}},Tu=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this.materials=null};Tu.prototype={constructor:Tu,load:function(t,e,n,r){var o=this,a=new i.FileLoader(o.manager);a.setPath(this.path),a.load(t,(function(t){e(o.parse(t))}),n,r)},setPath:function(t){this.path=t},setMaterials:function(t){this.materials=t},parse:function(t){console.time("OBJLoader");var e,n=[],r=!1,o=[],a=[],s=[];function u(t){e={name:t,geometry:{vertices:[],normals:[],uvs:[]},material:{name:"",smooth:!0}},n.push(e)}function l(t){var e=parseInt(t);return 3*(e>=0?e-1:e+o.length/3)}function c(t){var e=parseInt(t);return 3*(e>=0?e-1:e+a.length/3)}function h(t){var e=parseInt(t);return 2*(e>=0?e-1:e+s.length/2)}function f(t,n,r){e.geometry.vertices.push(o[t],o[t+1],o[t+2],o[n],o[n+1],o[n+2],o[r],o[r+1],o[r+2])}function d(t,n,r){e.geometry.normals.push(a[t],a[t+1],a[t+2],a[n],a[n+1],a[n+2],a[r],a[r+1],a[r+2])}function p(t,n,r){e.geometry.uvs.push(s[t],s[t+1],s[n],s[n+1],s[r],s[r+1])}function m(t,e,n,r,i,o,a,s,u,m,v,g){var y,b=l(t),_=l(e),w=l(n);void 0===r?f(b,_,w):(f(b,_,y=l(r)),f(_,w,y)),void 0!==i&&(b=h(i),_=h(o),w=h(a),void 0===r?p(b,_,w):(p(b,_,y=h(s)),p(_,w,y))),void 0!==u&&(b=c(u),_=c(m),w=c(v),void 0===r?d(b,_,w):(d(b,_,y=c(g)),d(_,w,y)))}u("");for(var v=/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,g=/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,y=/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,b=/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,_=/^f\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)))?/,w=/^f\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)\/(-?\d+)))?/,x=/^f\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))(?:\s+((-?\d+)\/\/(-?\d+)))?/,M=/^[og]\s+(.+)/,E=/^s\s+(\d+|on|off)/,S=t.split("\n"),A=0;A<S.length;A++){var T,q=S[A];if(0!==(q=q.trim()).length&&"#"!==q.charAt(0))if(null!==(T=v.exec(q)))o.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=g.exec(q)))a.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=y.exec(q)))s.push(parseFloat(T[1]),parseFloat(T[2]));else if(null!==(T=b.exec(q)))m(T[1],T[2],T[3],T[4]);else if(null!==(T=_.exec(q)))m(T[2],T[5],T[8],T[11],T[3],T[6],T[9],T[12]);else if(null!==(T=w.exec(q)))m(T[2],T[6],T[10],T[14],T[3],T[7],T[11],T[15],T[4],T[8],T[12],T[16]);else if(null!==(T=x.exec(q)))m(T[2],T[5],T[8],T[11],void 0,void 0,void 0,void 0,T[3],T[6],T[9],T[12]);else if(null!==(T=M.exec(q))){var P=T[1].trim();!1===r?(r=!0,e.name=P):u(P)}else if(/^usemtl /.test(q))e.material.name=q.substring(7).trim();else if(/^mtllib /.test(q));else{if(null===(T=E.exec(q)))throw new Error("Unexpected line: "+q);e.material.smooth="1"===T[1]||"on"===T[1]}}for(var L=new i.Group,O=(A=0,n.length);A<O;A++){var C,I=(e=n[A]).geometry,R=new i.BufferGeometry;R.addAttribute("position",new i.BufferAttribute(new Float32Array(I.vertices),3)),I.normals.length>0?R.addAttribute("normal",new i.BufferAttribute(new Float32Array(I.normals),3)):R.computeVertexNormals(),I.uvs.length>0&&R.addAttribute("uv",new i.BufferAttribute(new Float32Array(I.uvs),2)),null!==this.materials&&(C=this.materials.create(e.material.name)),C||((C=new i.MeshPhongMaterial).name=e.material.name),C.flatShading=!e.material.smooth;var k=new i.Mesh(R,C);k.name=e.name,L.add(k)}return console.timeEnd("OBJLoader"),L}};var qu=function(t){Object.assign(this,i.EventDispatcher.prototype),this.baseUrl="",this.manager=void 0!==t?t:i.DefaultLoadingManager};qu.prototype={constructor:qu,load:function(t,e,n,r){var o=this,a=new i.FileLoader(this.manager);a.setPath(this.path),a.load(t,(function(t){e(o.parse(t))}),n,r)},setPath:function(t){this.path=t},setBaseUrl:function(t){this.baseUrl=t},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var e=t.split("\n"),n={},r=/\s+/,i={},o=0;o<e.length;o++){var a=e[o];if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),u=s>=0?a.substring(0,s):a;u=u.toLowerCase();var l=s>=0?a.substring(s+1):"";if(l=l.trim(),"newmtl"===u)n={name:l},i[l]=n;else if(n)if("ka"===u||"kd"===u||"ks"===u){var c=l.split(r,3);n[u]=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2])]}else n[u]=l}}var h=new qu.MaterialCreator(this.baseUrl,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(i),h}},(qu.MaterialCreator=function(t,e){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.loader=void 0,this.side=this.options&&this.options.side?this.options.side:i.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:i.RepeatWrapping}).prototype={constructor:qu.MaterialCreator,setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setLoader:function(t){this.loader=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var r=t[n],i={};for(var o in e[n]=i,r){var a=!0,s=r[o],u=o.toLowerCase();switch(u){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[1]&&(a=!1)}a&&(i[u]=s)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this.materialsInfo[t],n={name:t,side:this.side};for(var r in e){var o=e[r];if(""!==o)switch(r.toLowerCase()){case"kd":n.color=(new i.Color).fromArray(o);break;case"ks":n.specular=(new i.Color).fromArray(o);break;case"map_kd":n.map=this.loadTexture(this.baseUrl+o),n.map.wrapS=this.wrap,n.map.wrapT=this.wrap;break;case"ns":n.shininess=parseFloat(o);break;case"d":(o<1||t.indexOf("_image")>0)&&(n.opacity=o,n.transparent=!0,n.alphaTest=.1);break;case"Tr":o>0&&(n.opacity=1-o,n.transparent=!0);break;case"map_bump":case"bump":if(n.bumpMap)break;n.bumpMap=this.loadTexture(this.baseUrl+o),n.bumpMap.wrapS=this.wrap,n.bumpMap.wrapT=this.wrap}}return this.materials[t]=new i.MeshPhongMaterial(n),this.materials[t]},loadTexture:function(t,e,n,r,o){var a,s=i.Loader.Handlers.get(t),u=void 0!==this.manager?this.manager:i.DefaultLoadingManager;return null===s&&(s=void 0!==this.loader?this.loader:new i.TextureLoader(u)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),a=s.load(t,n,r,o),void 0!==e&&(a.mapping=e),null!=a&&(a.anisotropy=16),a}};var Pu=/^https?:\/\/.*\//,Lu=function(t,e,n){return new Promise((function(r,o){var a=new qu,s=Pu.exec(e);if(null!=s){var u=s[0];a.setBaseUrl(u),a.setCrossOrigin("*")}a.load(e,(function(e){void 0!==n&&e.setLoader(n),e.preload();var a=new Tu;a.setMaterials(e),a.load(t,(function(t){t.children.forEach((function(t){null!=t.material&&(t.name.includes("_image")&&null!=t.material.map&&(t.material.map.wrapS=i.ClampToEdgeWrapping,t.material.map.wrapT=i.ClampToEdgeWrapping),t.material.side=i.DoubleSide)})),r(t)}),void 0,o)}),void 0,o)}))},Ou=/^(?:0|[1-9]\d*)$/;function Cu(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Iu=Object.prototype,Ru=Iu.hasOwnProperty,ku=Iu.toString,Nu=Iu.propertyIsEnumerable,Bu=Math.max;function Du(t,e,n,r){return void 0===t||Uu(t,Iu[n])&&!Ru.call(r,n)?e:t}function ju(t,e,n){var r=t[e];Ru.call(t,e)&&Uu(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Fu(t,e){return e=Bu(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,i=Bu(n.length-e,0),o=Array(i);++r<i;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=o,Cu(t,this,a)}}function zu(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||Ou.test(t))&&t>-1&&t%1==0&&t<e}function Uu(t,e){return t===e||t!=t&&e!=e}var Vu=Array.isArray;function Gu(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=Hu(t)?ku.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}function Hu(t){var e=c(t);return!!t&&("object"==e||"function"==e)}var Wu,Yu=(Wu=function(t,e,n,r){!function(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=r?r(n[a],t[a],a,n,t):void 0;ju(n,a,void 0===s?t[a]:s)}}(e,function(t){return Gu(t)?function(t,e){var n=Vu(t)||function(t){return function(t){return function(t){return!!t&&"object"==c(t)}(t)&&Gu(t)}(t)&&Ru.call(t,"callee")&&(!Nu.call(t,"callee")||"[object Arguments]"==ku.call(t))}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!Ru.call(t,o)||i&&("length"==o||zu(o,r))||n.push(o);return n}(t,!0):function(t){if(!Hu(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e,n,r=(n=(e=t)&&e.constructor,e===("function"==typeof n&&n.prototype||Iu)),i=[];for(var o in t)("constructor"!=o||!r&&Ru.call(t,o))&&i.push(o);return i}(t)}(e),t,r)},Fu((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=Wu.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!Hu(n))return!1;var r=c(e);return!!("number"==r?Gu(n)&&zu(e,n.length):"string"==r&&e in n)&&Uu(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&Wu(t,a,0,i)}return t}))),Xu=Fu((function(t){return t.push(void 0,Du),Cu(Yu,void 0,t)})),Zu=Object(r.sb)((function(t){var e,n={},r=!1;if(t.exports?(t.exports=n,r=!0):"undefined"!=typeof document?window.ClipperLib=n:self.ClipperLib=n,r)i="chrome",e="Netscape";else{var i=navigator.userAgent.toString().toLowerCase();e=navigator.appName}var o,a={};function s(t,e,r){n.biginteger_used=1,null!=t&&("number"==typeof t&&void 0===e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function u(){return new s(null)}-1!=i.indexOf("chrome")&&-1==i.indexOf("chromium")?a.chrome=1:a.chrome=0,-1!=i.indexOf("chromium")?a.chromium=1:a.chromium=0,-1!=i.indexOf("safari")&&-1==i.indexOf("chrome")&&-1==i.indexOf("chromium")?a.safari=1:a.safari=0,-1!=i.indexOf("firefox")?a.firefox=1:a.firefox=0,-1!=i.indexOf("firefox/17")?a.firefox17=1:a.firefox17=0,-1!=i.indexOf("firefox/15")?a.firefox15=1:a.firefox15=0,-1!=i.indexOf("firefox/3")?a.firefox3=1:a.firefox3=0,-1!=i.indexOf("opera")?a.opera=1:a.opera=0,-1!=i.indexOf("msie 10")?a.msie10=1:a.msie10=0,-1!=i.indexOf("msie 9")?a.msie9=1:a.msie9=0,-1!=i.indexOf("msie 8")?a.msie8=1:a.msie8=0,-1!=i.indexOf("msie 7")?a.msie7=1:a.msie7=0,-1!=i.indexOf("msie ")?a.msie=1:a.msie=0,n.biginteger_used=null,"Microsoft Internet Explorer"==e?(s.prototype.am=function(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this[t],l=this[t++]>>15,c=s*u+l*a;i=((u=a*u+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+s*l+(i>>>30),n[r++]=1073741823&u}return i},o=30):"Netscape"!=e?(s.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i},o=26):(s.prototype.am=function(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this[t],l=this[t++]>>14,c=s*u+l*a;i=((u=a*u+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+s*l,n[r++]=268435455&u}return i},o=28),s.prototype.DB=o,s.prototype.DM=(1<<o)-1,s.prototype.DV=1<<o,s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-o,s.prototype.F2=2*o-52;var l,c,h=new Array;for(l="0".charCodeAt(0),c=0;c<=9;++c)h[l++]=c;for(l="a".charCodeAt(0),c=10;c<36;++c)h[l++]=c;for(l="A".charCodeAt(0),c=10;c<36;++c)h[l++]=c;function f(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function d(t,e){var n=h[t.charCodeAt(e)];return null==n?-1:n}function p(t){var e=u();return e.fromInt(t),e}function m(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function v(t){this.m=t}function g(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function y(t,e){return t&e}function b(t,e){return t|e}function _(t,e){return t^e}function w(t,e){return t&~e}function x(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function M(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function E(){}function S(t){return t}function A(t){this.r2=u(),this.q3=u(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}v.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},v.prototype.revert=function(t){return t},v.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},v.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},v.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},g.prototype.convert=function(t){var e=u();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e},g.prototype.revert=function(t){var e=u();return t.copyTo(e),this.reduce(e),e},g.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},g.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},g.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},s.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},s.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},s.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=8==n?255&t[r]:d(t,r);a<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},s.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},s.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},s.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},s.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},s.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},s.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)},s.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},s.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=u());var o=u(),a=this.s,l=t.s,c=this.DB-m(r[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var h=o.t,f=o[h-1];if(0!=f){var d=f*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),p=this.FV/d,v=(1<<this.F1)/d,g=1<<this.F2,y=n.t,b=y-h,_=null==e?u():e;for(o.dlShiftTo(b,_),n.compareTo(_)>=0&&(n[n.t++]=1,n.subTo(_,n)),s.ONE.dlShiftTo(h,_),_.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--b>=0;){var w=n[--y]==f?this.DM:Math.floor(n[y]*p+(n[y-1]+g)*v);if((n[y]+=o.am(0,w,n,b,0,h))<w)for(o.dlShiftTo(b,_),n.subTo(_,n);n[y]<--w;)n.subTo(_,n)}null!=e&&(n.drShiftTo(h,e),a!=l&&s.ZERO.subTo(e,e)),n.t=h,n.clamp(),c>0&&n.rShiftTo(c,n),a<0&&s.ZERO.subTo(n,n)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},s.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},s.prototype.exp=function(t,e){if(t>4294967295||t<1)return s.ONE;var n=u(),r=u(),i=e.convert(this),o=m(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)},s.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=f(n));a>=0;)s<e?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=f(n));return i?o:"0"},s.prototype.negate=function(){var t=u();return s.ZERO.subTo(this,t),t},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)},s.prototype.mod=function(t){var e=u();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e},s.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new v(e):new g(e),this.exp(t,n)},s.ZERO=p(0),s.ONE=p(1),E.prototype.convert=S,E.prototype.revert=S,E.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},E.prototype.sqrTo=function(t,e){t.squareTo(e)},A.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=u();return t.copyTo(e),this.reduce(e),e},A.prototype.revert=function(t){return t},A.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},A.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},A.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var T=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],q=(1<<26)/T[T.length-1];s.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},s.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=p(n),i=u(),o=u(),a="";for(this.divRemTo(r,i,o);i.signum()>0;)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a},s.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,u=0;u<t.length;++u){var l=d(t,u);l<0?"-"==t.charAt(u)&&0==this.signum()&&(i=!0):(a=e*a+l,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),b,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},s.prototype.bitwiseTo=function(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},s.prototype.changeBit=function(t,e){var n=s.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},s.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},s.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},s.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},s.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},s.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},s.prototype.millerRabin=function(t){var e=this.subtract(s.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>T.length&&(t=T.length);for(var i=u(),o=0;o<t;++o){i.fromInt(T[Math.floor(Math.random()*T.length)]);var a=i.modPow(r,this);if(0!=a.compareTo(s.ONE)&&0!=a.compareTo(e)){for(var l=1;l++<n&&0!=a.compareTo(e);)if(0==(a=a.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0},s.prototype.clone=function(){var t=u();return this.copyTo(t),t},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},s.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},s.prototype.equals=function(t){return 0==this.compareTo(t)},s.prototype.min=function(t){return this.compareTo(t)<0?this:t},s.prototype.max=function(t){return this.compareTo(t)>0?this:t},s.prototype.and=function(t){var e=u();return this.bitwiseTo(t,y,e),e},s.prototype.or=function(t){var e=u();return this.bitwiseTo(t,b,e),e},s.prototype.xor=function(t){var e=u();return this.bitwiseTo(t,_,e),e},s.prototype.andNot=function(t){var e=u();return this.bitwiseTo(t,w,e),e},s.prototype.not=function(){for(var t=u(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},s.prototype.shiftLeft=function(t){var e=u();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},s.prototype.shiftRight=function(t){var e=u();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},s.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+x(this[t]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=M(this[n]^e);return t},s.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},s.prototype.setBit=function(t){return this.changeBit(t,b)},s.prototype.clearBit=function(t){return this.changeBit(t,w)},s.prototype.flipBit=function(t){return this.changeBit(t,_)},s.prototype.add=function(t){var e=u();return this.addTo(t,e),e},s.prototype.subtract=function(t){var e=u();return this.subTo(t,e),e},s.prototype.multiply=function(t){var e=u();return this.multiplyTo(t,e),e},s.prototype.divide=function(t){var e=u();return this.divRemTo(t,e,null),e},s.prototype.remainder=function(t){var e=u();return this.divRemTo(t,null,e),e},s.prototype.divideAndRemainder=function(t){var e=u(),n=u();return this.divRemTo(t,e,n),new Array(e,n)},s.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),o=p(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new v(e):e.isEven()?new A(e):new g(e);var a=new Array,s=3,l=n-1,c=(1<<n)-1;if(a[1]=r.convert(this),n>1){var h=u();for(r.sqrTo(a[1],h);s<=c;)a[s]=u(),r.mulTo(h,a[s-2],a[s]),s+=2}var f,d,y=t.t-1,b=!0,_=u();for(i=m(t[y])-1;y>=0;){for(i>=l?f=t[y]>>i-l&c:(f=(t[y]&(1<<i+1)-1)<<l-i,y>0&&(f|=t[y-1]>>this.DB+i-l)),s=n;0==(1&f);)f>>=1,--s;if((i-=s)<0&&(i+=this.DB,--y),b)a[f].copyTo(o),b=!1;else{for(;s>1;)r.sqrTo(o,_),r.sqrTo(_,o),s-=2;s>0?r.sqrTo(o,_):(d=o,o=_,_=d),r.mulTo(_,a[f],o)}for(;y>=0&&0==(t[y]&1<<i);)r.sqrTo(o,_),d=o,o=_,_=d,--i<0&&(i=this.DB-1,--y)}return r.revert(o)},s.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return s.ZERO;for(var n=t.clone(),r=this.clone(),i=p(1),o=p(0),a=p(0),u=p(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(u,o)):(r.subTo(n,r),e&&a.subTo(i,a),u.subTo(o,u))}return 0!=r.compareTo(s.ONE)?s.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},s.prototype.pow=function(t){return this.exp(t,new E)},s.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},s.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=T[T.length-1]){for(e=0;e<T.length;++e)if(n[0]==T[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<T.length;){for(var r=T[e],i=e+1;i<T.length&&r<q;)r*=T[i++];for(r=n.modInt(r);e<i;)if(r%T[e++]==0)return!1}return n.millerRabin(t)},s.prototype.square=function(){var t=u();return this.squareTo(t),t};var P=s;if(P.prototype.IsNegative=function(){return-1==this.compareTo(P.ZERO)},P.op_Equality=function(t,e){return 0==t.compareTo(e)},P.op_Inequality=function(t,e){return 0!=t.compareTo(e)},P.op_GreaterThan=function(t,e){return t.compareTo(e)>0},P.op_LessThan=function(t,e){return t.compareTo(e)<0},P.op_Addition=function(t,e){return new P(t).add(new P(e))},P.op_Subtraction=function(t,e){return new P(t).subtract(new P(e))},P.Int128Mul=function(t,e){return new P(t).multiply(new P(e))},P.op_Division=function(t,e){return t.divide(e)},P.prototype.ToDouble=function(){return parseFloat(this.toString())},void 0===L)var L=function(t,e){var n;if(void 0===Object.getOwnPropertyNames){for(n in e.prototype)void 0!==t.prototype[n]&&t.prototype[n]!=Object.prototype[n]||(t.prototype[n]=e.prototype[n]);for(n in e)void 0===t[n]&&(t[n]=e[n]);t.$baseCtor=e}else{for(var r=Object.getOwnPropertyNames(e.prototype),i=0;i<r.length;i++)void 0===Object.getOwnPropertyDescriptor(t.prototype,r[i])&&Object.defineProperty(t.prototype,r[i],Object.getOwnPropertyDescriptor(e.prototype,r[i]));for(n in e)void 0===t[n]&&(t[n]=e[n]);t.$baseCtor=e}};n.Path=function(){return[]},n.Paths=function(){return[]},n.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},n.DoublePoint0=function(){this.X=0,this.Y=0},n.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},n.DoublePoint2=function(t,e){this.X=t,this.Y=e},n.PolyNode=function(){this.m_Parent=null,this.m_polygon=new n.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},n.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},n.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},n.PolyNode.prototype.Contour=function(){return this.m_polygon},n.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},n.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},n.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},n.PolyNode.prototype.Childs=function(){return this.m_Childs},n.PolyNode.prototype.Parent=function(){return this.m_Parent},n.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},n.PolyTree=function(){this.m_AllPolys=[],n.PolyNode.call(this)},n.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},n.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},n.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},L(n.PolyTree,n.PolyNode),n.Math_Abs_Int64=n.Math_Abs_Int32=n.Math_Abs_Double=function(t){return Math.abs(t)},n.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},a.msie||a.opera||a.safari?n.Cast_Int32=function(t){return 0|t}:n.Cast_Int32=function(t){return~~t},a.chrome?n.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:a.firefox&&"function"==typeof Number.toInteger?n.Cast_Int64=function(t){return Number.toInteger(t)}:a.msie7||a.msie8?n.Cast_Int64=function(t){return parseInt(t,10)}:a.msie?n.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:n.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},n.Clear=function(t){t.length=0},n.PI=3.141592653589793,n.PI2=6.283185307179586,n.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof n.DoublePoint){var r=t[0];this.X=n.Clipper.Round(r.X),this.Y=n.Clipper.Round(r.Y)}else{var i=t[0];this.X=i.X,this.Y=i.Y}else this.X=0,this.Y=0},n.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},n.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},n.IntPoint0=function(){this.X=0,this.Y=0},n.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},n.IntPoint1dp=function(t){this.X=n.Clipper.Round(t.X),this.Y=n.Clipper.Round(t.Y)},n.IntPoint2=function(t,e){this.X=t,this.Y=e},n.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},n.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},n.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},n.IntRect4=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},n.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},n.PolyType={ptSubject:0,ptClip:1},n.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},n.JoinType={jtSquare:0,jtRound:1,jtMiter:2},n.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},n.EdgeSide={esLeft:0,esRight:1},n.Direction={dRightToLeft:0,dLeftToRight:1},n.TEdge=function(){this.Bot=new n.IntPoint,this.Curr=new n.IntPoint,this.Top=new n.IntPoint,this.Delta=new n.IntPoint,this.Dx=0,this.PolyTyp=n.PolyType.ptSubject,this.Side=n.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},n.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new n.IntPoint},n.MyIntersectNodeSort=function(){},n.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},n.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},n.Scanbeam=function(){this.Y=0,this.Next=null},n.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},n.OutPt=function(){this.Idx=0,this.Pt=new n.IntPoint,this.Next=null,this.Prev=null},n.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new n.IntPoint},n.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},n.ClipperBase.horizontal=-9007199254740992,n.ClipperBase.Skip=-2,n.ClipperBase.Unassigned=-1,n.ClipperBase.tolerance=1e-20,n.ClipperBase.loRange=47453132,n.ClipperBase.hiRange=0xfffffffffffff,n.ClipperBase.near_zero=function(t){return t>-n.ClipperBase.tolerance&&t<n.ClipperBase.tolerance},n.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},n.ClipperBase.prototype.PointIsVertex=function(t,e){var r=e;do{if(n.IntPoint.op_Equality(r.Pt,t))return!0;r=r.Next}while(r!=e);return!1},n.ClipperBase.prototype.PointOnLineSegment=function(t,e,n,r){return r?t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&P.op_Equality(P.Int128Mul(t.X-e.X,n.Y-e.Y),P.Int128Mul(n.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&(t.X-e.X)*(n.Y-e.Y)==(n.X-e.X)*(t.Y-e.Y)},n.ClipperBase.prototype.PointOnPolygon=function(t,e,n){for(var r=e;;){if(this.PointOnLineSegment(t,r.Pt,r.Next.Pt,n))return!0;if((r=r.Next)==e)break}return!1},n.ClipperBase.prototype.SlopesEqual=n.ClipperBase.SlopesEqual=function(){var t,e,r,i,o,a,s=arguments,u=s.length;return 3==u?(t=s[0],e=s[1],s[2]?P.op_Equality(P.Int128Mul(t.Delta.Y,e.Delta.X),P.Int128Mul(t.Delta.X,e.Delta.Y)):n.Cast_Int64(t.Delta.Y*e.Delta.X)==n.Cast_Int64(t.Delta.X*e.Delta.Y)):4==u?(r=s[0],i=s[1],o=s[2],s[3]?P.op_Equality(P.Int128Mul(r.Y-i.Y,i.X-o.X),P.Int128Mul(r.X-i.X,i.Y-o.Y)):n.Cast_Int64((r.Y-i.Y)*(i.X-o.X))-n.Cast_Int64((r.X-i.X)*(i.Y-o.Y))==0):(r=s[0],i=s[1],o=s[2],a=s[3],s[4]?P.op_Equality(P.Int128Mul(r.Y-i.Y,o.X-a.X),P.Int128Mul(r.X-i.X,o.Y-a.Y)):n.Cast_Int64((r.Y-i.Y)*(o.X-a.X))-n.Cast_Int64((r.X-i.X)*(o.Y-a.Y))==0)},n.ClipperBase.SlopesEqual3=function(t,e,r){return r?P.op_Equality(P.Int128Mul(t.Delta.Y,e.Delta.X),P.Int128Mul(t.Delta.X,e.Delta.Y)):n.Cast_Int64(t.Delta.Y*e.Delta.X)==n.Cast_Int64(t.Delta.X*e.Delta.Y)},n.ClipperBase.SlopesEqual4=function(t,e,r,i){return i?P.op_Equality(P.Int128Mul(t.Y-e.Y,e.X-r.X),P.Int128Mul(t.X-e.X,e.Y-r.Y)):n.Cast_Int64((t.Y-e.Y)*(e.X-r.X))-n.Cast_Int64((t.X-e.X)*(e.Y-r.Y))==0},n.ClipperBase.SlopesEqual5=function(t,e,r,i,o){return o?P.op_Equality(P.Int128Mul(t.Y-e.Y,r.X-i.X),P.Int128Mul(t.X-e.X,r.Y-i.Y)):n.Cast_Int64((t.Y-e.Y)*(r.X-i.X))-n.Cast_Int64((t.X-e.X)*(r.Y-i.Y))==0},n.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var r=0,i=this.m_edges[t].length;r<i;++r)this.m_edges[t][r]=null;n.Clear(this.m_edges[t])}n.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},n.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},n.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>n.ClipperBase.hiRange||t.Y>n.ClipperBase.hiRange||-t.X>n.ClipperBase.hiRange||-t.Y>n.ClipperBase.hiRange)&&n.Error("Coordinate outside allowed range in RangeTest()."):(t.X>n.ClipperBase.loRange||t.Y>n.ClipperBase.loRange||-t.X>n.ClipperBase.loRange||-t.Y>n.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},n.ClipperBase.prototype.InitEdge=function(t,e,n,r){t.Next=e,t.Prev=n,t.Curr.X=r.X,t.Curr.Y=r.Y,t.OutIdx=-1},n.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},n.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;n.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||n.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=n.ClipperBase.horizontal&&t.Prev.Dx!=n.ClipperBase.horizontal)break;for(;t.Prev.Dx==n.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==n.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},n.ClipperBase.prototype.ProcessBound=function(t,e){var r,i,o=t,a=t;if(t.Dx==n.ClipperBase.horizontal&&(i=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=i&&this.ReverseHorizontal(t)),a.OutIdx!=n.ClipperBase.Skip)if(e){for(;a.Top.Y==a.Next.Bot.Y&&a.Next.OutIdx!=n.ClipperBase.Skip;)a=a.Next;if(a.Dx==n.ClipperBase.horizontal&&a.Next.OutIdx!=n.ClipperBase.Skip){for(r=a;r.Prev.Dx==n.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X==a.Next.Top.X?e||(a=r.Prev):r.Prev.Top.X>a.Next.Top.X&&(a=r.Prev)}for(;t!=a;)t.NextInLML=t.Next,t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),a=a.Next}else{for(;a.Top.Y==a.Prev.Bot.Y&&a.Prev.OutIdx!=n.ClipperBase.Skip;)a=a.Prev;if(a.Dx==n.ClipperBase.horizontal&&a.Prev.OutIdx!=n.ClipperBase.Skip){for(r=a;r.Next.Dx==n.ClipperBase.horizontal;)r=r.Next;r.Next.Top.X==a.Prev.Top.X?e||(a=r.Next):r.Next.Top.X>a.Prev.Top.X&&(a=r.Next)}for(;t!=a;)t.NextInLML=t.Prev,t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),a=a.Prev}if(a.OutIdx==n.ClipperBase.Skip){if(t=a,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=a&&t.Dx==n.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=a&&t.Dx==n.ClipperBase.horizontal;)t=t.Next}if(t==a)a=e?t.Next:t.Prev;else{t=e?a.Next:a.Prev;var s=new n.LocalMinima;s.Next=null,s.Y=t.Bot.Y,s.LeftBound=null,s.RightBound=t,s.RightBound.WindDelta=0,a=this.ProcessBound(s.RightBound,e),this.InsertLocalMinima(s)}}return a},n.ClipperBase.prototype.AddPath=function(t,e,r){r||e!=n.PolyType.ptClip||n.Error("AddPath: Open paths must be subject.");var i=t.length-1;if(r)for(;i>0&&n.IntPoint.op_Equality(t[i],t[0]);)--i;for(;i>0&&n.IntPoint.op_Equality(t[i],t[i-1]);)--i;if(r&&i<2||!r&&i<1)return!1;for(var o=new Array,a=0;a<=i;a++)o.push(new n.TEdge);var s=!0;o[1].Curr.X=t[1].X,o[1].Curr.Y=t[1].Y;var u={Value:this.m_UseFullRange};for(this.RangeTest(t[0],u),this.m_UseFullRange=u.Value,u.Value=this.m_UseFullRange,this.RangeTest(t[i],u),this.m_UseFullRange=u.Value,this.InitEdge(o[0],o[1],o[i],t[0]),this.InitEdge(o[i],o[0],o[i-1],t[i]),a=i-1;a>=1;--a)u.Value=this.m_UseFullRange,this.RangeTest(t[a],u),this.m_UseFullRange=u.Value,this.InitEdge(o[a],o[a+1],o[a-1],t[a]);for(var l,c=o[0],h=c,f=c;;)if(n.IntPoint.op_Equality(h.Curr,h.Next.Curr)){if(h==h.Next)break;h==c&&(c=h.Next),f=h=this.RemoveEdge(h)}else{if(h.Prev==h.Next)break;if(!r||!n.ClipperBase.SlopesEqual(h.Prev.Curr,h.Curr,h.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr)){if((h=h.Next)==f)break}else h==c&&(c=h.Next),f=h=(h=this.RemoveEdge(h)).Prev}if(!r&&h==h.Next||r&&h.Prev==h.Next)return!1;r||(this.m_HasOpenPaths=!0,c.Prev.OutIdx=n.ClipperBase.Skip),h=c;do{this.InitEdge2(h,e),h=h.Next,s&&h.Curr.Y!=c.Curr.Y&&(s=!1)}while(h!=c);if(s){if(r)return!1;for(h.Prev.OutIdx=n.ClipperBase.Skip,h.Prev.Bot.X<h.Prev.Top.X&&this.ReverseHorizontal(h.Prev),(p=new n.LocalMinima).Next=null,p.Y=h.Bot.Y,p.LeftBound=null,p.RightBound=h,p.RightBound.Side=n.EdgeSide.esRight,p.RightBound.WindDelta=0;h.Next.OutIdx!=n.ClipperBase.Skip;)h.NextInLML=h.Next,h.Bot.X!=h.Prev.Top.X&&this.ReverseHorizontal(h),h=h.Next;return this.InsertLocalMinima(p),this.m_edges.push(o),!0}this.m_edges.push(o);for(var d=null;(h=this.FindNextLocMin(h))!=d;){var p;null==d&&(d=h),(p=new n.LocalMinima).Next=null,p.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(p.LeftBound=h.Prev,p.RightBound=h,l=!1):(p.LeftBound=h,p.RightBound=h.Prev,l=!0),p.LeftBound.Side=n.EdgeSide.esLeft,p.RightBound.Side=n.EdgeSide.esRight,r?p.LeftBound.Next==p.RightBound?p.LeftBound.WindDelta=-1:p.LeftBound.WindDelta=1:p.LeftBound.WindDelta=0,p.RightBound.WindDelta=-p.LeftBound.WindDelta,h=this.ProcessBound(p.LeftBound,l);var m=this.ProcessBound(p.RightBound,!l);p.LeftBound.OutIdx==n.ClipperBase.Skip?p.LeftBound=null:p.RightBound.OutIdx==n.ClipperBase.Skip&&(p.RightBound=null),this.InsertLocalMinima(p),l||(h=m)}return!0},n.ClipperBase.prototype.AddPaths=function(t,e,n){for(var r=!1,i=0,o=t.length;i<o;++i)this.AddPath(t[i],e,n)&&(r=!0);return r},n.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,r){return!(n.IntPoint.op_Equality(t,r)||n.IntPoint.op_Equality(t,e)||n.IntPoint.op_Equality(r,e))&&(t.X!=r.X?e.X>t.X==e.X<r.X:e.Y>t.Y==e.Y<r.Y)},n.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},n.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=n.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},n.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},n.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},n.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e},n.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=n.EdgeSide.esLeft,e.OutIdx=n.ClipperBase.Unassigned),null!=(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=n.EdgeSide.esRight,e.OutIdx=n.ClipperBase.Unassigned),t=t.Next}},n.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=n.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=n.PolyFillType.pftEvenOdd,this.m_SubjFillType=n.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,n.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=n.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t)},n.Clipper.ioReverseSolution=1,n.Clipper.ioStrictlySimple=2,n.Clipper.ioPreserveCollinear=4,n.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),n.ClipperBase.prototype.Clear.call(this))},n.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},n.Clipper.prototype.Reset=function(){n.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},n.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new n.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y)(r=new n.Scanbeam).Y=t,r.Next=this.m_Scanbeam,this.m_Scanbeam=r;else{for(var e=this.m_Scanbeam;null!==e.Next&&t<=e.Next.Y;)e=e.Next;if(t==e.Y)return;var r;(r=new n.Scanbeam).Y=t,r.Next=e.Next,e.Next=r}},n.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,r=t[1]instanceof n.PolyTree;if(4==e&&!r){var i=t[0],o=t[1],a=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&n.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,n.Clear(o),this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=i,this.m_UsingPolyTree=!1;try{(l=this.ExecuteInternal())&&this.BuildResult(o)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(4==e&&r){i=t[0];var u=t[1];if(a=t[2],s=t[3],this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=i,this.m_UsingPolyTree=!0;try{var l;(l=this.ExecuteInternal())&&this.BuildResult2(u)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}return 2!=e||r?2==e&&r?(i=t[0],u=t[1],this.Execute(i,u,n.PolyFillType.pftEvenOdd,n.PolyFillType.pftEvenOdd)):void 0:(i=t[0],o=t[1],this.Execute(i,o,n.PolyFillType.pftEvenOdd,n.PolyFillType.pftEvenOdd))},n.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},n.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),n.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var r=0,i=this.m_PolyOuts.length;r<i;r++)null===(o=this.m_PolyOuts[r]).Pts||o.IsOpen||(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts);for(this.JoinCommonEdges(),r=0,i=this.m_PolyOuts.length;r<i;r++){var o;null===(o=this.m_PolyOuts[r]).Pts||o.IsOpen||this.FixupOutPolygon(o)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{n.Clear(this.m_Joins),n.Clear(this.m_GhostJoins)}},n.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;return this.m_Scanbeam,this.m_Scanbeam=this.m_Scanbeam.Next,t},n.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);n.Clear(this.m_PolyOuts)},n.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},n.Clipper.prototype.DisposeOutPts=function(t){if(null!==t)for(t.Prev.Next=null;null!==t;)t=t.Next},n.Clipper.prototype.AddJoin=function(t,e,r){var i=new n.Join;i.OutPt1=t,i.OutPt2=e,i.OffPt.X=r.X,i.OffPt.Y=r.Y,this.m_Joins.push(i)},n.Clipper.prototype.AddGhostJoin=function(t,e){var r=new n.Join;r.OutPt1=t,r.OffPt.X=e.X,r.OffPt.Y=e.Y,this.m_GhostJoins.push(r)},n.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,r=this.m_CurrentLM.RightBound;this.PopLocalMinima();var i=null;if(null===e?(this.InsertEdgeIntoAEL(r,null),this.SetWindingCount(r),this.IsContributing(r)&&(i=this.AddOutPt(r,r.Bot))):null==r?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(i=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(r,e),this.SetWindingCount(e),r.WindCnt=e.WindCnt,r.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(i=this.AddLocalMinPoly(e,r,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=r&&(n.ClipperBase.IsHorizontal(r)?this.AddEdgeToSEL(r):this.InsertScanbeam(r.Top.Y)),null!=e&&null!=r){if(null!==i&&n.ClipperBase.IsHorizontal(r)&&this.m_GhostJoins.length>0&&0!==r.WindDelta)for(var o=0,a=this.m_GhostJoins.length;o<a;o++){var s=this.m_GhostJoins[o];this.HorzSegmentsOverlap(s.OutPt1.Pt,s.OffPt,r.Bot,r.Top)&&this.AddJoin(s.OutPt1,i,s.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&n.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var u=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(i,u,e.Top)}if(e.NextInAEL!=r){r.OutIdx>=0&&r.PrevInAEL.OutIdx>=0&&n.ClipperBase.SlopesEqual(r.PrevInAEL,r,this.m_UseFullRange)&&0!==r.WindDelta&&0!==r.PrevInAEL.WindDelta&&(u=this.AddOutPt(r.PrevInAEL,r.Bot),this.AddJoin(i,u,r.Top));var l=e.NextInAEL;if(null!==l)for(;l!=r;)this.IntersectEdges(r,l,e.Curr,!1),l=l.NextInAEL}}}},n.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},n.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<n.Clipper.TopX(t,e.Top.Y):t.Top.X>n.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},n.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==n.PolyType.ptSubject?this.m_SubjFillType==n.PolyFillType.pftEvenOdd:this.m_ClipFillType==n.PolyFillType.pftEvenOdd},n.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==n.PolyType.ptSubject?this.m_ClipFillType==n.PolyFillType.pftEvenOdd:this.m_SubjFillType==n.PolyFillType.pftEvenOdd},n.Clipper.prototype.IsContributing=function(t){var e,r;switch(t.PolyTyp==n.PolyType.ptSubject?(e=this.m_SubjFillType,r=this.m_ClipFillType):(e=this.m_ClipFillType,r=this.m_SubjFillType),e){case n.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case n.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case n.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case n.ClipType.ctIntersection:switch(r){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case n.ClipType.ctUnion:switch(r){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case n.ClipType.ctDifference:if(t.PolyTyp==n.PolyType.ptSubject)switch(r){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(r){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case n.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(r){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},n.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=n.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var r=!0,i=e.PrevInAEL;null!==i;)i.PolyTyp==e.PolyTyp&&0!==i.WindDelta&&(r=!r),i=i.PrevInAEL;t.WindCnt=r?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},n.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},n.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},n.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e)null!==(n=e.NextInAEL)&&(n.PrevInAEL=t),null!==(r=t.PrevInAEL)&&(r.NextInAEL=e),e.PrevInAEL=r,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n;else if(e.NextInAEL==t)null!==(n=t.NextInAEL)&&(n.PrevInAEL=e),null!==(r=e.PrevInAEL)&&(r.NextInAEL=t),t.PrevInAEL=r,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=n;else{var n=t.NextInAEL,r=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=n,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=r,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},n.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e)null!==(n=e.NextInSEL)&&(n.PrevInSEL=t),null!==(r=t.PrevInSEL)&&(r.NextInSEL=e),e.PrevInSEL=r,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n;else if(e.NextInSEL==t)null!==(n=t.NextInSEL)&&(n.PrevInSEL=e),null!==(r=e.PrevInSEL)&&(r.NextInSEL=t),t.PrevInSEL=r,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n;else{var n=t.NextInSEL,r=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=n,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=r,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},n.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),0==e.WindDelta&&this.AddOutPt(e,n),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},n.Clipper.prototype.AddLocalMinPoly=function(t,e,r){var i,o,a;if(n.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(i=this.AddOutPt(t,r),e.OutIdx=t.OutIdx,t.Side=n.EdgeSide.esLeft,e.Side=n.EdgeSide.esRight,a=(o=t).PrevInAEL==e?e.PrevInAEL:o.PrevInAEL):(i=this.AddOutPt(e,r),t.OutIdx=e.OutIdx,t.Side=n.EdgeSide.esRight,e.Side=n.EdgeSide.esLeft,a=(o=e).PrevInAEL==t?t.PrevInAEL:o.PrevInAEL),null!==a&&a.OutIdx>=0&&n.Clipper.TopX(a,r.Y)==n.Clipper.TopX(o,r.Y)&&n.ClipperBase.SlopesEqual(o,a,this.m_UseFullRange)&&0!==o.WindDelta&&0!==a.WindDelta){var s=this.AddOutPt(a,r);this.AddJoin(i,s,o.Top)}return i},n.Clipper.prototype.CreateOutRec=function(){var t=new n.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},n.Clipper.prototype.AddOutPt=function(t,e){var r=t.Side==n.EdgeSide.esLeft;if(t.OutIdx<0){(o=this.CreateOutRec()).IsOpen=0===t.WindDelta;var i=new n.OutPt;return o.Pts=i,i.Idx=o.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=i,i.Prev=i,o.IsOpen||this.SetHoleState(t,o),t.OutIdx=o.Idx,i}var o,a=(o=this.m_PolyOuts[t.OutIdx]).Pts;return r&&n.IntPoint.op_Equality(e,a.Pt)?a:!r&&n.IntPoint.op_Equality(e,a.Prev.Pt)?a.Prev:((i=new n.OutPt).Idx=o.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=a,i.Prev=a.Prev,i.Prev.Next=i,a.Prev=i,r&&(o.Pts=i),i)},n.Clipper.prototype.SwapPoints=function(t,e){var r=new n.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=r.X,e.Value.Y=r.Y},n.Clipper.prototype.HorzSegmentsOverlap=function(t,e,n,r){return t.X>n.X==t.X<r.X||e.X>n.X==e.X<r.X||n.X>t.X==n.X<e.X||r.X>t.X==r.X<e.X||t.X==n.X&&e.X==r.X||t.X==r.X&&e.X==n.X},n.Clipper.prototype.InsertPolyPtBetween=function(t,e,r){var i=new n.OutPt;return i.Pt.X=r.X,i.Pt.Y=r.Y,e==t.Next?(t.Next=i,e.Prev=i,i.Next=e,i.Prev=t):(e.Next=i,t.Prev=i,i.Next=t,i.Prev=e),i},n.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,r=t.PrevInAEL;null!==r;)r.OutIdx>=0&&0!=r.WindDelta&&(n=!n,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[r.OutIdx])),r=r.PrevInAEL;n&&(e.IsHole=!0)},n.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?n.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},n.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var r=t.Prev;n.IntPoint.op_Equality(r.Pt,t.Pt)&&r!=t;)r=r.Prev;var i=Math.abs(this.GetDx(t.Pt,r.Pt));for(r=t.Next;n.IntPoint.op_Equality(r.Pt,t.Pt)&&r!=t;)r=r.Next;var o=Math.abs(this.GetDx(t.Pt,r.Pt));for(r=e.Prev;n.IntPoint.op_Equality(r.Pt,e.Pt)&&r!=e;)r=r.Prev;var a=Math.abs(this.GetDx(e.Pt,r.Pt));for(r=e.Next;n.IntPoint.op_Equality(r.Pt,e.Pt)&&r!=e;)r=r.Next;var s=Math.abs(this.GetDx(e.Pt,r.Pt));return i>=a&&i>=s||o>=a&&o>=s},n.Clipper.prototype.GetBottomPt=function(t){for(var e=null,r=t.Next;r!=t;)r.Pt.Y>t.Pt.Y?(t=r,e=null):r.Pt.Y==t.Pt.Y&&r.Pt.X<=t.Pt.X&&(r.Pt.X<t.Pt.X?(e=null,t=r):r.Next!=t&&r.Prev!=t&&(e=r)),r=r.Next;if(null!==e)for(;e!=r;)for(this.FirstIsBottomPt(r,e)||(t=e),e=e.Next;n.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},n.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var n=t.BottomPt,r=e.BottomPt;return n.Pt.Y>r.Pt.Y?t:n.Pt.Y<r.Pt.Y?e:n.Pt.X<r.Pt.X?t:n.Pt.X>r.Pt.X||n.Next==n?e:r.Next==r||this.FirstIsBottomPt(n,r)?t:e},n.Clipper.prototype.Param1RightOfParam2=function(t,e){do{if((t=t.FirstLeft)==e)return!0}while(null!==t);return!1},n.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},n.Clipper.prototype.AppendPolygon=function(t,e){var r,i=this.m_PolyOuts[t.OutIdx],o=this.m_PolyOuts[e.OutIdx];r=this.Param1RightOfParam2(i,o)?o:this.Param1RightOfParam2(o,i)?i:this.GetLowermostRec(i,o);var a,s=i.Pts,u=s.Prev,l=o.Pts,c=l.Prev;t.Side==n.EdgeSide.esLeft?(e.Side==n.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=s,s.Prev=l,u.Next=c,c.Prev=u,i.Pts=c):(c.Next=s,s.Prev=c,l.Prev=u,u.Next=l,i.Pts=l),a=n.EdgeSide.esLeft):(e.Side==n.EdgeSide.esRight?(this.ReversePolyPtLinks(l),u.Next=c,c.Prev=u,l.Next=s,s.Prev=l):(u.Next=l,l.Prev=u,s.Prev=c,c.Next=s),a=n.EdgeSide.esRight),i.BottomPt=null,r==o&&(o.FirstLeft!=i&&(i.FirstLeft=o.FirstLeft),i.IsHole=o.IsHole),o.Pts=null,o.BottomPt=null,o.FirstLeft=i;var h=t.OutIdx,f=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var d=this.m_ActiveEdges;null!==d;){if(d.OutIdx==f){d.OutIdx=h,d.Side=a;break}d=d.NextInAEL}o.Idx=i.Idx},n.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,n;e=t;do{n=e.Next,e.Next=e.Prev,e.Prev=n,e=n}while(e!=t)}},n.Clipper.SwapSides=function(t,e){var n=t.Side;t.Side=e.Side,e.Side=n},n.Clipper.SwapPolyIndexes=function(t,e){var n=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=n},n.Clipper.prototype.IntersectEdges=function(t,e,r,i){var o,a,s,u,l,c,h=!i&&null===t.NextInLML&&t.Top.X==r.X&&t.Top.Y==r.Y,f=!i&&null===e.NextInLML&&e.Top.X==r.X&&e.Top.Y==r.Y,d=t.OutIdx>=0,p=e.OutIdx>=0;if(0===t.WindDelta||0===e.WindDelta)return 0===t.WindDelta&&0===e.WindDelta?(h||f)&&d&&p&&this.AddLocalMaxPoly(t,e,r):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==n.ClipType.ctUnion?0===t.WindDelta?p&&(this.AddOutPt(t,r),d&&(t.OutIdx=-1)):d&&(this.AddOutPt(e,r),p&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==n.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==n.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,r),p&&(e.OutIdx=-1)):(this.AddOutPt(t,r),d&&(t.OutIdx=-1))),h&&(t.OutIdx<0?this.DeleteFromAEL(t):n.Error("Error intersecting polylines")),void(f&&(e.OutIdx<0?this.DeleteFromAEL(e):n.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var m=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=m}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta==0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;switch(t.PolyTyp==n.PolyType.ptSubject?(o=this.m_SubjFillType,s=this.m_ClipFillType):(o=this.m_ClipFillType,s=this.m_SubjFillType),e.PolyTyp==n.PolyType.ptSubject?(a=this.m_SubjFillType,u=this.m_ClipFillType):(a=this.m_ClipFillType,u=this.m_SubjFillType),o){case n.PolyFillType.pftPositive:l=t.WindCnt;break;case n.PolyFillType.pftNegative:l=-t.WindCnt;break;default:l=Math.abs(t.WindCnt)}switch(a){case n.PolyFillType.pftPositive:c=e.WindCnt;break;case n.PolyFillType.pftNegative:c=-e.WindCnt;break;default:c=Math.abs(e.WindCnt)}if(d&&p)h||f||0!==l&&1!=l||0!==c&&1!=c||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=n.ClipType.ctXor?this.AddLocalMaxPoly(t,e,r):(this.AddOutPt(t,r),this.AddOutPt(e,r),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(d)0!==c&&1!=c||(this.AddOutPt(t,r),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(p)0!==l&&1!=l||(this.AddOutPt(e,r),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(!(0!==l&&1!=l||0!==c&&1!=c||h||f)){var v,g;switch(s){case n.PolyFillType.pftPositive:v=t.WindCnt2;break;case n.PolyFillType.pftNegative:v=-t.WindCnt2;break;default:v=Math.abs(t.WindCnt2)}switch(u){case n.PolyFillType.pftPositive:g=e.WindCnt2;break;case n.PolyFillType.pftNegative:g=-e.WindCnt2;break;default:g=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,r);else if(1==l&&1==c)switch(this.m_ClipType){case n.ClipType.ctIntersection:v>0&&g>0&&this.AddLocalMinPoly(t,e,r);break;case n.ClipType.ctUnion:v<=0&&g<=0&&this.AddLocalMinPoly(t,e,r);break;case n.ClipType.ctDifference:(t.PolyTyp==n.PolyType.ptClip&&v>0&&g>0||t.PolyTyp==n.PolyType.ptSubject&&v<=0&&g<=0)&&this.AddLocalMinPoly(t,e,r);break;case n.ClipType.ctXor:this.AddLocalMinPoly(t,e,r)}else n.Clipper.SwapSides(t,e)}h!=f&&(h&&t.OutIdx>=0||f&&e.OutIdx>=0)&&(n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e)),h&&this.DeleteFromAEL(t),f&&this.DeleteFromAEL(e)},n.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,n=t.NextInAEL;null===e&&null===n&&t!=this.m_ActiveEdges||(null!==e?e.NextInAEL=n:this.m_ActiveEdges=n,null!==n&&(n.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},n.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,n=t.NextInSEL;null===e&&null===n&&t!=this.m_SortedEdges||(null!==e?e.NextInSEL=n:this.m_SortedEdges=n,null!==n&&(n.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},n.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&n.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,r=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==r&&(r.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=r,n.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},n.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},n.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=n.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=n.Direction.dRightToLeft)},n.Clipper.prototype.PrepareHorzJoins=function(t,e){var r=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=n.EdgeSide.esLeft&&(r=r.Prev),e&&(n.IntPoint.op_Equality(r.Pt,t.Top)?this.AddGhostJoin(r,t.Bot):this.AddGhostJoin(r,t.Top))},n.Clipper.prototype.ProcessHorizontal=function(t,e){var r={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,r);for(var i=r.Dir,o=r.Left,a=r.Right,s=t,u=null;null!==s.NextInLML&&n.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;for(null===s.NextInLML&&(u=this.GetMaximaPair(s));;){for(var l=t==s,c=this.GetNextInAEL(t,i);null!==c&&!(c.Curr.X==t.Top.X&&null!==t.NextInLML&&c.Dx<t.NextInLML.Dx);){var h=this.GetNextInAEL(c,i);if(i==n.Direction.dLeftToRight&&c.Curr.X<=a||i==n.Direction.dRightToLeft&&c.Curr.X>=o){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),c==u&&l)return i==n.Direction.dLeftToRight?this.IntersectEdges(t,c,c.Top,!1):this.IntersectEdges(c,t,c.Top,!1),void(u.OutIdx>=0&&n.Error("ProcessHorizontal error"));if(i==n.Direction.dLeftToRight){var f=new n.IntPoint(c.Curr.X,t.Curr.Y);this.IntersectEdges(t,c,f,!0)}else f=new n.IntPoint(c.Curr.X,t.Curr.Y),this.IntersectEdges(c,t,f,!0);this.SwapPositionsInAEL(t,c)}else if(i==n.Direction.dLeftToRight&&c.Curr.X>=a||i==n.Direction.dRightToLeft&&c.Curr.X<=o)break;c=h}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!n.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot),r={Dir:i,Left:o,Right:a},this.GetHorzDirection(t,r),i=r.Dir,o=r.Left,a=r.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var d=this.AddOutPt(t,t.Top);if(0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var p=t.PrevInAEL;if(h=t.NextInAEL,null!==p&&p.Curr.X==t.Bot.X&&p.Curr.Y==t.Bot.Y&&0!==p.WindDelta&&p.OutIdx>=0&&p.Curr.Y>p.Top.Y&&n.ClipperBase.SlopesEqual(t,p,this.m_UseFullRange)){var m=this.AddOutPt(p,t.Bot);this.AddJoin(d,m,t.Top)}else null!==h&&h.Curr.X==t.Bot.X&&h.Curr.Y==t.Bot.Y&&0!==h.WindDelta&&h.OutIdx>=0&&h.Curr.Y>h.Top.Y&&n.ClipperBase.SlopesEqual(t,h,this.m_UseFullRange)&&(m=this.AddOutPt(h,t.Bot),this.AddJoin(d,m,t.Top))}else t=this.UpdateEdgeIntoAEL(t);else null!==u?u.OutIdx>=0?(i==n.Direction.dLeftToRight?this.IntersectEdges(t,u,t.Top,!1):this.IntersectEdges(u,t,t.Top,!1),u.OutIdx>=0&&n.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(u)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},n.Clipper.prototype.GetNextInAEL=function(t,e){return e==n.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},n.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},n.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},n.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},n.Clipper.prototype.GetMaximaPair=function(t){var e=null;return n.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:n.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||n.ClipperBase.IsHorizontal(e))?e:null},n.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,n.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},n.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var r=this.m_ActiveEdges;for(this.m_SortedEdges=r;null!==r;)r.PrevInSEL=r.PrevInAEL,r.NextInSEL=r.NextInAEL,r.Curr.X=n.Clipper.TopX(r,e),r=r.NextInAEL;for(var i=!0;i&&null!==this.m_SortedEdges;){for(i=!1,r=this.m_SortedEdges;null!==r.NextInSEL;){var o=r.NextInSEL,a=new n.IntPoint;if(r.Curr.X>o.Curr.X){!this.IntersectPoint(r,o,a)&&r.Curr.X>o.Curr.X+1&&n.Error("Intersection error"),a.Y>t&&(a.Y=t,Math.abs(r.Dx)>Math.abs(o.Dx)?a.X=n.Clipper.TopX(o,t):a.X=n.Clipper.TopX(r,t));var s=new n.IntersectNode;s.Edge1=r,s.Edge2=o,s.Pt.X=a.X,s.Pt.Y=a.Y,this.m_IntersectList.push(s),this.SwapPositionsInSEL(r,o),i=!0}else r=o}if(null===r.PrevInSEL)break;r.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},n.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},n.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},n.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var n=e+1;n<t&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n==t)return!1;var r=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[n],this.m_IntersectList[n]=r}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},n.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var n=this.m_IntersectList[t];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt,!0),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0},a.msie?n.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.round(t)}:a.chromium?n.Clipper.Round=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)}:a.safari?n.Clipper.Round=function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:(t+=.5)>2147483647?Math.floor(t):0|t}:n.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},n.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+n.Clipper.Round(t.Dx*(e-t.Bot.Y))},n.Clipper.prototype.IntersectPoint=function(t,e,r){var i,o;if(r.X=0,r.Y=0,n.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(r.X=e.Bot.X,r.Y=e.Bot.Y):(r.X=t.Bot.X,r.Y=t.Bot.Y),!1;if(0===t.Delta.X)r.X=t.Bot.X,n.ClipperBase.IsHorizontal(e)?r.Y=e.Bot.Y:(o=e.Bot.Y-e.Bot.X/e.Dx,r.Y=n.Clipper.Round(r.X/e.Dx+o));else if(0===e.Delta.X)r.X=e.Bot.X,n.ClipperBase.IsHorizontal(t)?r.Y=t.Bot.Y:(i=t.Bot.Y-t.Bot.X/t.Dx,r.Y=n.Clipper.Round(r.X/t.Dx+i));else{i=t.Bot.X-t.Bot.Y*t.Dx;var a=((o=e.Bot.X-e.Bot.Y*e.Dx)-i)/(t.Dx-e.Dx);r.Y=n.Clipper.Round(a),Math.abs(t.Dx)<Math.abs(e.Dx)?r.X=n.Clipper.Round(t.Dx*a+i):r.X=n.Clipper.Round(e.Dx*a+o)}if(r.Y<t.Top.Y||r.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return r.Y=t.Top.Y,r.X=n.Clipper.TopX(e,t.Top.Y),r.X<t.Top.X;r.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?r.X=n.Clipper.TopX(t,r.Y):r.X=n.Clipper.TopX(e,r.Y)}return!0},n.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var r=this.IsMaxima(e,t);if(r){var i=this.GetMaximaPair(e);r=null===i||!n.ClipperBase.IsHorizontal(i)}if(r){var o=e.PrevInAEL;this.DoMaxima(e),e=null===o?this.m_ActiveEdges:o.NextInAEL}else{if(this.IsIntermediate(e,t)&&n.ClipperBase.IsHorizontal(e.NextInLML)?((e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=n.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple&&(o=e.PrevInAEL,e.OutIdx>=0&&0!==e.WindDelta&&null!==o&&o.OutIdx>=0&&o.Curr.X==e.Curr.X&&0!==o.WindDelta)){var a=this.AddOutPt(o,e.Curr),s=this.AddOutPt(e,e.Curr);this.AddJoin(a,s,e.Curr)}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){a=null,e.OutIdx>=0&&(a=this.AddOutPt(e,e.Top)),o=(e=this.UpdateEdgeIntoAEL(e)).PrevInAEL;var u=e.NextInAEL;null!==o&&o.Curr.X==e.Bot.X&&o.Curr.Y==e.Bot.Y&&null!==a&&o.OutIdx>=0&&o.Curr.Y>o.Top.Y&&n.ClipperBase.SlopesEqual(e,o,this.m_UseFullRange)&&0!==e.WindDelta&&0!==o.WindDelta?(s=this.AddOutPt(o,e.Bot),this.AddJoin(a,s,e.Top)):null!==u&&u.Curr.X==e.Bot.X&&u.Curr.Y==e.Bot.Y&&null!==a&&u.OutIdx>=0&&u.Curr.Y>u.Top.Y&&n.ClipperBase.SlopesEqual(e,u,this.m_UseFullRange)&&0!==e.WindDelta&&0!==u.WindDelta&&(s=this.AddOutPt(u,e.Bot),this.AddJoin(a,s,e.Top))}e=e.NextInAEL}},n.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var r=t.NextInAEL;null!==r&&r!=e;)this.IntersectEdges(t,r,t.Top,!0),this.SwapPositionsInAEL(t,r),r=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):n.Error("DoMaxima error")},n.Clipper.ReversePaths=function(t){for(var e=0,n=t.length;e<n;e++)t[e].reverse()},n.Clipper.Orientation=function(t){return n.Clipper.Area(t)>=0},n.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,n=t;do{e++,n=n.Next}while(n!=t);return e},n.Clipper.prototype.BuildResult=function(t){n.Clear(t);for(var e=0,r=this.m_PolyOuts.length;e<r;e++){var i=this.m_PolyOuts[e];if(null!==i.Pts){var o=i.Pts.Prev,a=this.PointCount(o);if(!(a<2)){for(var s=new Array(a),u=0;u<a;u++)s[u]=o.Pt,o=o.Prev;t.push(s)}}}},n.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,r=this.m_PolyOuts.length;e<r;e++){var i=this.m_PolyOuts[e],o=this.PointCount(i.Pts);if(!(i.IsOpen&&o<2||!i.IsOpen&&o<3)){this.FixHoleLinkage(i);var a=new n.PolyNode;t.m_AllPolys.push(a),i.PolyNode=a,a.m_polygon.length=o;for(var s=i.Pts.Prev,u=0;u<o;u++)a.m_polygon[u]=s.Pt,s=s.Prev}}for(e=0,r=this.m_PolyOuts.length;e<r;e++)null!==(i=this.m_PolyOuts[e]).PolyNode&&(i.IsOpen?(i.PolyNode.IsOpen=!0,t.AddChild(i.PolyNode)):null!==i.FirstLeft&&null!=i.FirstLeft.PolyNode?i.FirstLeft.PolyNode.AddChild(i.PolyNode):t.AddChild(i.PolyNode))},n.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var r=t.Pts;;){if(r.Prev==r||r.Prev==r.Next)return this.DisposeOutPts(r),void(t.Pts=null);if(n.IntPoint.op_Equality(r.Pt,r.Next.Pt)||n.IntPoint.op_Equality(r.Pt,r.Prev.Pt)||n.ClipperBase.SlopesEqual(r.Prev.Pt,r.Pt,r.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(r.Prev.Pt,r.Pt,r.Next.Pt)))e=null,r.Prev.Next=r.Next,r.Next.Prev=r.Prev,r=r.Prev;else{if(r==e)break;null===e&&(e=r),r=r.Next}}t.Pts=r},n.Clipper.prototype.DupOutPt=function(t,e){var r=new n.OutPt;return r.Pt.X=t.Pt.X,r.Pt.Y=t.Pt.Y,r.Idx=t.Idx,e?(r.Next=t.Next,r.Prev=t,t.Next.Prev=r,t.Next=r):(r.Prev=t.Prev,r.Next=t,t.Prev.Next=r,t.Prev=r),r},n.Clipper.prototype.GetOverlap=function(t,e,n,r,i){return t<e?n<r?(i.Left=Math.max(t,n),i.Right=Math.min(e,r)):(i.Left=Math.max(t,r),i.Right=Math.min(e,n)):n<r?(i.Left=Math.max(e,n),i.Right=Math.min(t,r)):(i.Left=Math.max(e,r),i.Right=Math.min(t,n)),i.Left<i.Right},n.Clipper.prototype.JoinHorz=function(t,e,r,i,o,a){var s=t.Pt.X>e.Pt.X?n.Direction.dRightToLeft:n.Direction.dLeftToRight,u=r.Pt.X>i.Pt.X?n.Direction.dRightToLeft:n.Direction.dLeftToRight;if(s==u)return!1;if(s==n.Direction.dLeftToRight){for(;t.Next.Pt.X<=o.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==o.Y;)t=t.Next;a&&t.Pt.X!=o.X&&(t=t.Next),e=this.DupOutPt(t,!a),n.IntPoint.op_Inequality(e.Pt,o)&&((t=e).Pt.X=o.X,t.Pt.Y=o.Y,e=this.DupOutPt(t,!a))}else{for(;t.Next.Pt.X>=o.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==o.Y;)t=t.Next;a||t.Pt.X==o.X||(t=t.Next),e=this.DupOutPt(t,a),n.IntPoint.op_Inequality(e.Pt,o)&&((t=e).Pt.X=o.X,t.Pt.Y=o.Y,e=this.DupOutPt(t,a))}if(u==n.Direction.dLeftToRight){for(;r.Next.Pt.X<=o.X&&r.Next.Pt.X>=r.Pt.X&&r.Next.Pt.Y==o.Y;)r=r.Next;a&&r.Pt.X!=o.X&&(r=r.Next),i=this.DupOutPt(r,!a),n.IntPoint.op_Inequality(i.Pt,o)&&((r=i).Pt.X=o.X,r.Pt.Y=o.Y,i=this.DupOutPt(r,!a))}else{for(;r.Next.Pt.X>=o.X&&r.Next.Pt.X<=r.Pt.X&&r.Next.Pt.Y==o.Y;)r=r.Next;a||r.Pt.X==o.X||(r=r.Next),i=this.DupOutPt(r,a),n.IntPoint.op_Inequality(i.Pt,o)&&((r=i).Pt.X=o.X,r.Pt.Y=o.Y,i=this.DupOutPt(r,a))}return s==n.Direction.dLeftToRight==a?(t.Prev=r,r.Next=t,e.Next=i,i.Prev=e):(t.Next=r,r.Prev=t,e.Prev=i,i.Next=e),!0},n.Clipper.prototype.JoinPoints=function(t,e,r){var i=t.OutPt1,o=new n.OutPt,a=t.OutPt2,s=new n.OutPt,u=t.OutPt1.Pt.Y==t.OffPt.Y;if(u&&n.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&n.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(o=t.OutPt1.Next;o!=i&&n.IntPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;var l=o.Pt.Y>t.OffPt.Y;for(s=t.OutPt2.Next;s!=a&&n.IntPoint.op_Equality(s.Pt,t.OffPt);)s=s.Next;return l!=s.Pt.Y>t.OffPt.Y&&(l?(o=this.DupOutPt(i,!1),s=this.DupOutPt(a,!0),i.Prev=a,a.Next=i,o.Next=s,s.Prev=o,t.OutPt1=i,t.OutPt2=o,!0):(o=this.DupOutPt(i,!0),s=this.DupOutPt(a,!1),i.Next=a,a.Prev=i,o.Prev=s,s.Next=o,t.OutPt1=i,t.OutPt2=o,!0))}if(u){for(o=i;i.Prev.Pt.Y==i.Pt.Y&&i.Prev!=o&&i.Prev!=a;)i=i.Prev;for(;o.Next.Pt.Y==o.Pt.Y&&o.Next!=i&&o.Next!=a;)o=o.Next;if(o.Next==i||o.Next==a)return!1;for(s=a;a.Prev.Pt.Y==a.Pt.Y&&a.Prev!=s&&a.Prev!=o;)a=a.Prev;for(;s.Next.Pt.Y==s.Pt.Y&&s.Next!=a&&s.Next!=i;)s=s.Next;if(s.Next==a||s.Next==i)return!1;var c={Left:null,Right:null};if(!this.GetOverlap(i.Pt.X,o.Pt.X,a.Pt.X,s.Pt.X,c))return!1;var h,f=c.Left,d=c.Right,p=new n.IntPoint;return i.Pt.X>=f&&i.Pt.X<=d?(p.X=i.Pt.X,p.Y=i.Pt.Y,h=i.Pt.X>o.Pt.X):a.Pt.X>=f&&a.Pt.X<=d?(p.X=a.Pt.X,p.Y=a.Pt.Y,h=a.Pt.X>s.Pt.X):o.Pt.X>=f&&o.Pt.X<=d?(p.X=o.Pt.X,p.Y=o.Pt.Y,h=o.Pt.X>i.Pt.X):(p.X=s.Pt.X,p.Y=s.Pt.Y,h=s.Pt.X>a.Pt.X),t.OutPt1=i,t.OutPt2=a,this.JoinHorz(i,o,a,s,p,h)}for(o=i.Next;n.IntPoint.op_Equality(o.Pt,i.Pt)&&o!=i;)o=o.Next;var m=o.Pt.Y>i.Pt.Y||!n.ClipperBase.SlopesEqual(i.Pt,o.Pt,t.OffPt,this.m_UseFullRange);if(m){for(o=i.Prev;n.IntPoint.op_Equality(o.Pt,i.Pt)&&o!=i;)o=o.Prev;if(o.Pt.Y>i.Pt.Y||!n.ClipperBase.SlopesEqual(i.Pt,o.Pt,t.OffPt,this.m_UseFullRange))return!1}for(s=a.Next;n.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Next;var v=s.Pt.Y>a.Pt.Y||!n.ClipperBase.SlopesEqual(a.Pt,s.Pt,t.OffPt,this.m_UseFullRange);if(v){for(s=a.Prev;n.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Prev;if(s.Pt.Y>a.Pt.Y||!n.ClipperBase.SlopesEqual(a.Pt,s.Pt,t.OffPt,this.m_UseFullRange))return!1}return!(o==i||s==a||o==s||e==r&&m==v||(m?(o=this.DupOutPt(i,!1),s=this.DupOutPt(a,!0),i.Prev=a,a.Next=i,o.Next=s,s.Prev=o,t.OutPt1=i,t.OutPt2=o,0):(o=this.DupOutPt(i,!0),s=this.DupOutPt(a,!1),i.Next=a,a.Prev=i,o.Prev=s,s.Next=o,t.OutPt1=i,t.OutPt2=o,0)))},n.Clipper.GetBounds=function(t){for(var e=0,r=t.length;e<r&&0==t[e].length;)e++;if(e==r)return new n.IntRect(0,0,0,0);var i=new n.IntRect;for(i.left=t[e][0].X,i.right=i.left,i.top=t[e][0].Y,i.bottom=i.top;e<r;e++)for(var o=0,a=t[e].length;o<a;o++)t[e][o].X<i.left?i.left=t[e][o].X:t[e][o].X>i.right&&(i.right=t[e][o].X),t[e][o].Y<i.top?i.top=t[e][o].Y:t[e][o].Y>i.bottom&&(i.bottom=t[e][o].Y);return i},n.Clipper.prototype.GetBounds2=function(t){var e=t,r=new n.IntRect;for(r.left=t.Pt.X,r.right=t.Pt.X,r.top=t.Pt.Y,r.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<r.left&&(r.left=t.Pt.X),t.Pt.X>r.right&&(r.right=t.Pt.X),t.Pt.Y<r.top&&(r.top=t.Pt.Y),t.Pt.Y>r.bottom&&(r.bottom=t.Pt.Y),t=t.Next;return r},n.Clipper.PointInPolygon=function(t,e){var n=0,r=e.length;if(r<3)return 0;for(var i=e[0],o=1;o<=r;++o){var a=o==r?e[0]:e[o];if(a.Y==t.Y&&(a.X==t.X||i.Y==t.Y&&a.X>t.X==i.X<t.X))return-1;if(i.Y<t.Y!=a.Y<t.Y)if(i.X>=t.X)if(a.X>t.X)n=1-n;else{if(0==(s=(i.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(i.Y-t.Y)))return-1;s>0==a.Y>i.Y&&(n=1-n)}else if(a.X>t.X){var s;if(0==(s=(i.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(i.Y-t.Y)))return-1;s>0==a.Y>i.Y&&(n=1-n)}i=a}return n},n.Clipper.prototype.PointInPolygon=function(t,e){for(var n=0,r=e;;){var i=e.Pt.X,o=e.Pt.Y,a=e.Next.Pt.X,s=e.Next.Pt.Y;if(s==t.Y&&(a==t.X||o==t.Y&&a>t.X==i<t.X))return-1;if(o<t.Y!=s<t.Y)if(i>=t.X)if(a>t.X)n=1-n;else{if(0==(u=(i-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y)))return-1;u>0==s>o&&(n=1-n)}else if(a>t.X){var u;if(0==(u=(i-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y)))return-1;u>0==s>o&&(n=1-n)}if(r==(e=e.Next))break}return n},n.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var n=t;do{var r=this.PointInPolygon(n.Pt,e);if(r>=0)return 0!=r;n=n.Next}while(n!=t);return!0},n.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var n=0,r=this.m_PolyOuts.length;n<r;n++){var i=this.m_PolyOuts[n];null!==i.Pts&&i.FirstLeft==t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)}},n.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var n=0,r=this.m_PolyOuts,i=r.length,o=r[n];n<i;o=r[++n])o.FirstLeft==t&&(o.FirstLeft=e)},n.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},n.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var r,i=this.m_Joins[t],o=this.GetOutRec(i.OutPt1.Idx),a=this.GetOutRec(i.OutPt2.Idx);if(null!=o.Pts&&null!=a.Pts&&(r=o==a?o:this.Param1RightOfParam2(o,a)?a:this.Param1RightOfParam2(a,o)?o:this.GetLowermostRec(o,a),this.JoinPoints(i,o,a)))if(o==a){if(o.Pts=i.OutPt1,o.BottomPt=null,(a=this.CreateOutRec()).Pts=i.OutPt2,this.UpdateOutPtIdxs(a),this.m_UsingPolyTree)for(var s=0,u=this.m_PolyOuts.length;s<u-1;s++){var l=this.m_PolyOuts[s];null!=l.Pts&&n.Clipper.ParseFirstLeft(l.FirstLeft)==o&&l.IsHole!=o.IsHole&&this.Poly2ContainsPoly1(l.Pts,i.OutPt2)&&(l.FirstLeft=a)}this.Poly2ContainsPoly1(a.Pts,o.Pts)?(a.IsHole=!o.IsHole,a.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,o),(a.IsHole^this.ReverseSolution)==this.Area(a)>0&&this.ReversePolyPtLinks(a.Pts)):this.Poly2ContainsPoly1(o.Pts,a.Pts)?(a.IsHole=o.IsHole,o.IsHole=!a.IsHole,a.FirstLeft=o.FirstLeft,o.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,a),(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts)):(a.IsHole=o.IsHole,a.FirstLeft=o.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(o,a))}else a.Pts=null,a.BottomPt=null,a.Idx=o.Idx,o.IsHole=r.IsHole,r==a&&(o.FirstLeft=a.FirstLeft),a.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,o)}},n.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!=t.Pts)},n.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],r=e.Pts;if(null!==r)do{for(var i=r.Next;i!=e.Pts;){if(n.IntPoint.op_Equality(r.Pt,i.Pt)&&i.Next!=r&&i.Prev!=r){var o=r.Prev,a=i.Prev;r.Prev=a,a.Next=r,i.Prev=o,o.Next=i,e.Pts=r;var s=this.CreateOutRec();s.Pts=i,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,e.Pts)?(s.IsHole=!e.IsHole,s.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,s.Pts)?(s.IsHole=e.IsHole,e.IsHole=!s.IsHole,s.FirstLeft=e.FirstLeft,e.FirstLeft=s):(s.IsHole=e.IsHole,s.FirstLeft=e.FirstLeft),i=r}i=i.Next}r=r.Next}while(r!=e.Pts)}},n.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var n=0,r=0,i=e-1;r<e;++r)n+=(t[i].X+t[r].X)*(t[i].Y-t[r].Y),i=r;return.5*-n},n.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var n=0;do{n+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next}while(e!=t.Pts);return.5*n},n.Clipper.SimplifyPolygon=function(t,e){var r=new Array,i=new n.Clipper(0);return i.StrictlySimple=!0,i.AddPath(t,n.PolyType.ptSubject,!0),i.Execute(n.ClipType.ctUnion,r,e,e),r},n.Clipper.SimplifyPolygons=function(t,e){void 0===e&&(e=n.PolyFillType.pftEvenOdd);var r=new Array,i=new n.Clipper(0);return i.StrictlySimple=!0,i.AddPaths(t,n.PolyType.ptSubject,!0),i.Execute(n.ClipType.ctUnion,r,e,e),r},n.Clipper.DistanceSqrd=function(t,e){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r},n.Clipper.DistanceFromLineSqrd=function(t,e,n){var r=e.Y-n.Y,i=n.X-e.X,o=r*e.X+i*e.Y;return(o=r*t.X+i*t.Y-o)*o/(r*r+i*i)},n.Clipper.SlopesNearCollinear=function(t,e,r,i){return n.Clipper.DistanceFromLineSqrd(e,t,r)<i},n.Clipper.PointsAreClose=function(t,e,n){var r=t.X-e.X,i=t.Y-e.Y;return r*r+i*i<=n},n.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},n.Clipper.CleanPolygon=function(t,e){void 0===e&&(e=1.415);var r=t.length;if(0==r)return new Array;for(var i=new Array(r),o=0;o<r;++o)i[o]=new n.OutPt;for(o=0;o<r;++o)i[o].Pt=t[o],i[o].Next=i[(o+1)%r],i[o].Next.Prev=i[o],i[o].Idx=0;for(var a=e*e,s=i[0];0==s.Idx&&s.Next!=s.Prev;)n.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,a)?(s=n.Clipper.ExcludeOp(s),r--):n.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,a)?(n.Clipper.ExcludeOp(s.Next),s=n.Clipper.ExcludeOp(s),r-=2):n.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,a)?(s=n.Clipper.ExcludeOp(s),r--):(s.Idx=1,s=s.Next);r<3&&(r=0);var u=new Array(r);for(o=0;o<r;++o)u[o]=new n.IntPoint(s.Pt),s=s.Next;return i=null,u},n.Clipper.CleanPolygons=function(t,e){for(var r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]=n.Clipper.CleanPolygon(t[i],e);return r},n.Clipper.Minkowski=function(t,e,r,i){var o=i?1:0,a=t.length,s=e.length,u=new Array;if(r)for(var l=0;l<s;l++){for(var c=new Array(a),h=0,f=t.length,d=t[h];h<f;d=t[++h])c[h]=new n.IntPoint(e[l].X+d.X,e[l].Y+d.Y);u.push(c)}else for(l=0;l<s;l++){for(c=new Array(a),h=0,f=t.length,d=t[h];h<f;d=t[++h])c[h]=new n.IntPoint(e[l].X-d.X,e[l].Y-d.Y);u.push(c)}var p=new Array;for(l=0;l<s-1+o;l++)for(h=0;h<a;h++){var m=new Array;m.push(u[l%s][h%a]),m.push(u[(l+1)%s][h%a]),m.push(u[(l+1)%s][(h+1)%a]),m.push(u[l%s][(h+1)%a]),n.Clipper.Orientation(m)||m.reverse(),p.push(m)}var v=new n.Clipper(0);return v.AddPaths(p,n.PolyType.ptSubject,!0),v.Execute(n.ClipType.ctUnion,u,n.PolyFillType.pftNonZero,n.PolyFillType.pftNonZero),u},n.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var r=t[0],i=t[1],o=t[2];return n.Clipper.Minkowski(r,i,!0,o)}if(4==e){r=t[0];for(var a=t[1],s=t[2],u=(o=t[3],new n.Clipper),l=0,c=a.length;l<c;++l){var h=n.Clipper.Minkowski(r,a[l],!0,o);u.AddPaths(h,n.PolyType.ptSubject,!0)}o&&u.AddPaths(a,n.PolyType.ptClip,!0);var f=new n.Paths;return u.Execute(n.ClipType.ctUnion,f,s,s),f}},n.Clipper.MinkowskiDiff=function(t,e,r){return n.Clipper.Minkowski(t,e,!1,r)},n.Clipper.PolyTreeToPaths=function(t){var e=new Array;return n.Clipper.AddPolyNodeToPaths(t,n.Clipper.NodeType.ntAny,e),e},n.Clipper.AddPolyNodeToPaths=function(t,e,r){var i=!0;switch(e){case n.Clipper.NodeType.ntOpen:return;case n.Clipper.NodeType.ntClosed:i=!t.IsOpen}t.m_polygon.length>0&&i&&r.push(t.m_polygon);for(var o=0,a=t.Childs(),s=a.length,u=a[o];o<s;u=a[++o])n.Clipper.AddPolyNodeToPaths(u,e,r)},n.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new n.Paths,r=0,i=t.ChildCount();r<i;r++)t.Childs()[r].IsOpen&&e.push(t.Childs()[r].m_polygon);return e},n.Clipper.ClosedPathsFromPolyTree=function(t){var e=new n.Paths;return n.Clipper.AddPolyNodeToPaths(t,n.Clipper.NodeType.ntClosed,e),e},L(n.Clipper,n.ClipperBase),n.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},n.ClipperOffset=function(t,e){void 0===t&&(t=2),void 0===e&&(e=n.ClipperOffset.def_arc_tolerance),this.m_destPolys=new n.Paths,this.m_srcPoly=new n.Path,this.m_destPoly=new n.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new n.IntPoint,this.m_polyNodes=new n.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},n.ClipperOffset.two_pi=6.28318530717959,n.ClipperOffset.def_arc_tolerance=.25,n.ClipperOffset.prototype.Clear=function(){n.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},n.ClipperOffset.Round=n.Clipper.Round,n.ClipperOffset.prototype.AddPath=function(t,e,r){var i=t.length-1;if(!(i<0)){var o=new n.PolyNode;if(o.m_jointype=e,o.m_endtype=r,r==n.EndType.etClosedLine||r==n.EndType.etClosedPolygon)for(;i>0&&n.IntPoint.op_Equality(t[0],t[i]);)i--;o.m_polygon.push(t[0]);for(var a=0,s=0,u=1;u<=i;u++)n.IntPoint.op_Inequality(o.m_polygon[a],t[u])&&(a++,o.m_polygon.push(t[u]),(t[u].Y>o.m_polygon[s].Y||t[u].Y==o.m_polygon[s].Y&&t[u].X<o.m_polygon[s].X)&&(s=a));if(!(r==n.EndType.etClosedPolygon&&a<2||r!=n.EndType.etClosedPolygon&&a<0)&&(this.m_polyNodes.AddChild(o),r==n.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new n.IntPoint(0,s);else{var l=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(o.m_polygon[s].Y>l.Y||o.m_polygon[s].Y==l.Y&&o.m_polygon[s].X<l.X)&&(this.m_lowest=new n.IntPoint(this.m_polyNodes.ChildCount()-1,s))}}},n.ClipperOffset.prototype.AddPaths=function(t,e,n){for(var r=0,i=t.length;r<i;r++)this.AddPath(t[r],e,n)},n.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!n.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++)((e=this.m_polyNodes.Childs()[t]).m_endtype==n.EndType.etClosedPolygon||e.m_endtype==n.EndType.etClosedLine&&n.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse();else for(t=0;t<this.m_polyNodes.ChildCount();t++){var e;(e=this.m_polyNodes.Childs()[t]).m_endtype!=n.EndType.etClosedLine||n.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},n.ClipperOffset.GetUnitNormal=function(t,e){var r=e.X-t.X,i=e.Y-t.Y;if(0==r&&0==i)return new n.DoublePoint(0,0);var o=1/Math.sqrt(r*r+i*i);return r*=o,i*=o,new n.DoublePoint(i,-r)},n.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,n.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++)(o=this.m_polyNodes.Childs()[e]).m_endtype==n.EndType.etClosedPolygon&&this.m_destPolys.push(o.m_polygon);else{var r;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,r=this.ArcTolerance<=0?n.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*n.ClipperOffset.def_arc_tolerance?Math.abs(t)*n.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var i=3.14159265358979/Math.acos(1-r/Math.abs(t));for(this.m_sin=Math.sin(n.ClipperOffset.two_pi/i),this.m_cos=Math.cos(n.ClipperOffset.two_pi/i),this.m_StepsPerRad=i/n.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin),e=0;e<this.m_polyNodes.ChildCount();e++){var o=this.m_polyNodes.Childs()[e];this.m_srcPoly=o.m_polygon;var a=this.m_srcPoly.length;if(!(0==a||t<=0&&(a<3||o.m_endtype!=n.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=a){for(this.m_normals.length=0,f=0;f<a-1;f++)this.m_normals.push(n.ClipperOffset.GetUnitNormal(this.m_srcPoly[f],this.m_srcPoly[f+1]));if(o.m_endtype==n.EndType.etClosedLine||o.m_endtype==n.EndType.etClosedPolygon?this.m_normals.push(n.ClipperOffset.GetUnitNormal(this.m_srcPoly[a-1],this.m_srcPoly[0])):this.m_normals.push(new n.DoublePoint(this.m_normals[a-2])),o.m_endtype==n.EndType.etClosedPolygon){var s=a-1;for(f=0;f<a;f++)s=this.OffsetPoint(f,s,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(o.m_endtype==n.EndType.etClosedLine){for(s=a-1,f=0;f<a;f++)s=this.OffsetPoint(f,s,o.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var u=this.m_normals[a-1];for(f=a-1;f>0;f--)this.m_normals[f]=new n.DoublePoint(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);for(this.m_normals[0]=new n.DoublePoint(-u.X,-u.Y),s=0,f=a-1;f>=0;f--)s=this.OffsetPoint(f,s,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var l;for(s=0,f=1;f<a-1;++f)s=this.OffsetPoint(f,s,o.m_jointype);for(o.m_endtype==n.EndType.etOpenButt?(f=a-1,l=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[f].X+this.m_normals[f].X*t),n.ClipperOffset.Round(this.m_srcPoly[f].Y+this.m_normals[f].Y*t)),this.m_destPoly.push(l),l=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[f].X-this.m_normals[f].X*t),n.ClipperOffset.Round(this.m_srcPoly[f].Y-this.m_normals[f].Y*t)),this.m_destPoly.push(l)):(f=a-1,s=a-2,this.m_sinA=0,this.m_normals[f]=new n.DoublePoint(-this.m_normals[f].X,-this.m_normals[f].Y),o.m_endtype==n.EndType.etOpenSquare?this.DoSquare(f,s):this.DoRound(f,s)),f=a-1;f>0;f--)this.m_normals[f]=new n.DoublePoint(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);for(this.m_normals[0]=new n.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),f=(s=a-1)-1;f>0;--f)s=this.OffsetPoint(f,s,o.m_jointype);o.m_endtype==n.EndType.etOpenButt?(l=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(l),l=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(l)):(s=1,this.m_sinA=0,o.m_endtype==n.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(o.m_jointype==n.JoinType.jtRound)for(var c=1,h=0,f=1;f<=i;f++){this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X+c*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t)));var d=c;c=c*this.m_cos-this.m_sin*h,h=d*this.m_sin+h*this.m_cos}else{c=-1,h=-1;for(f=0;f<4;++f)this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X+c*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t))),c<0?c=1:h<0?h=1:c=-1}this.m_destPolys.push(this.m_destPoly)}}}},n.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof n.PolyTree;if(e)if(a=t[0],s=t[1],a.Clear(),this.FixOrientations(),this.DoOffset(s),(o=new n.Clipper(0)).AddPaths(this.m_destPolys,n.PolyType.ptSubject,!0),s>0)o.Execute(n.ClipType.ctUnion,a,n.PolyFillType.pftPositive,n.PolyFillType.pftPositive);else if(l=n.Clipper.GetBounds(this.m_destPolys),(u=new n.Path).push(new n.IntPoint(l.left-10,l.bottom+10)),u.push(new n.IntPoint(l.right+10,l.bottom+10)),u.push(new n.IntPoint(l.right+10,l.top-10)),u.push(new n.IntPoint(l.left-10,l.top-10)),o.AddPath(u,n.PolyType.ptSubject,!0),o.ReverseSolution=!0,o.Execute(n.ClipType.ctUnion,a,n.PolyFillType.pftNegative,n.PolyFillType.pftNegative),1==a.ChildCount()&&a.Childs()[0].ChildCount()>0){var r=a.Childs()[0];a.Childs()[0]=r.Childs()[0];for(var i=1;i<r.ChildCount();i++)a.AddChild(r.Childs()[i])}else a.Clear();else{var o,a=t[0],s=t[1];if(n.Clear(a),this.FixOrientations(),this.DoOffset(s),(o=new n.Clipper(0)).AddPaths(this.m_destPolys,n.PolyType.ptSubject,!0),s>0)o.Execute(n.ClipType.ctUnion,a,n.PolyFillType.pftPositive,n.PolyFillType.pftPositive);else{var u,l=n.Clipper.GetBounds(this.m_destPolys);(u=new n.Path).push(new n.IntPoint(l.left-10,l.bottom+10)),u.push(new n.IntPoint(l.right+10,l.bottom+10)),u.push(new n.IntPoint(l.right+10,l.top-10)),u.push(new n.IntPoint(l.left-10,l.top-10)),o.AddPath(u,n.PolyType.ptSubject,!0),o.ReverseSolution=!0,o.Execute(n.ClipType.ctUnion,a,n.PolyFillType.pftNegative,n.PolyFillType.pftNegative),a.length>0&&a.splice(0,1)}}},n.ClipperOffset.prototype.OffsetPoint=function(t,e,r){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new n.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(r){case n.JoinType.jtMiter:var i=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1;i>=this.m_miterLim?this.DoMiter(t,e,i):this.DoSquare(t,e);break;case n.JoinType.jtSquare:this.DoSquare(t,e);break;case n.JoinType.jtRound:this.DoRound(t,e)}return t},n.ClipperOffset.prototype.DoSquare=function(t,e){var r=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*r)),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*r)))),this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*r)),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*r))))},n.ClipperOffset.prototype.DoMiter=function(t,e,r){var i=this.m_delta/r;this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*i),n.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*i)))},n.ClipperOffset.prototype.DoRound=function(t,e){for(var r,i=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),o=n.Cast_Int32(n.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(i))),a=this.m_normals[e].X,s=this.m_normals[e].Y,u=0;u<o;++u)this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+a*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+s*this.m_delta))),r=a,a=a*this.m_cos-this.m_sin*s,s=r*this.m_sin+s*this.m_cos;this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},n.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},n.JS={},n.JS.AreaOfPolygon=function(t,e){return e||(e=1),n.Clipper.Area(t)/(e*e)},n.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var r=0,i=0;i<t.length;i++)r+=n.Clipper.Area(t[i]);return r/(e*e)},n.JS.BoundsOfPath=function(t,e){return n.JS.BoundsOfPaths([t],e)},n.JS.BoundsOfPaths=function(t,e){e||(e=1);var r=n.Clipper.GetBounds(t);return r.left/=e,r.bottom/=e,r.right/=e,r.top/=e,r},n.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var r=t[0]instanceof Array;if(t=n.JS.Clone(t),"number"!=typeof e||null===e)return n.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||e<0)return t;r||(t=[t]);for(var i,o,a,s,u,l,c,h=t.length,f=[],d=0;d<h;d++)if(0!==(i=(o=t[d]).length))if(i<3)a=o,f.push(a);else{for(a=o,s=e*e,u=o[0],l=1,c=1;c<i;c++)(o[c].X-u.X)*(o[c].X-u.X)+(o[c].Y-u.Y)*(o[c].Y-u.Y)<=s||(a[l]=o[c],u=o[c],l++);u=o[l-1],(o[0].X-u.X)*(o[0].X-u.X)+(o[0].Y-u.Y)*(o[0].Y-u.Y)<=s&&l--,l<i&&a.splice(l,i-l),a.length&&f.push(a)}return!r&&f.length?f=f[0]:r||0!==f.length?r&&0===f.length&&(f=[[]]):f=[],f},n.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,r,i,o,a=t.length,s=new Array(a);for(r=0;r<a;r++){for(n=t[r].length,o=new Array(n),i=0;i<n;i++)o[i]={X:t[r][i].X,Y:t[r][i].Y};s[r]=o}return e||(s=s[0]),s},n.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return n.Error("Tolerance is not a number in Lighten()."),n.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||e<0)return n.JS.Clone(t);var r,i,o,a,s,u,l,c,h,f,d,p,m,v,g,y;t[0]instanceof Array||(t=[t]);var b=t.length,_=e*e,w=[];for(r=0;r<b;r++)if(0!=(u=(o=t[r]).length)){for(a=0;a<1e6;a++){for(s=[],o[(u=o.length)-1].X!=o[0].X||o[u-1].Y!=o[0].Y?(d=1,o.push({X:o[0].X,Y:o[0].Y}),u=o.length):d=0,f=[],i=0;i<u-2;i++)l=o[i],h=o[i+1],c=o[i+2],g=l.X,y=l.Y,p=c.X-g,m=c.Y-y,0===p&&0===m||((v=((h.X-g)*p+(h.Y-y)*m)/(p*p+m*m))>1?(g=c.X,y=c.Y):v>0&&(g+=p*v,y+=m*v)),(p=h.X-g)*p+(m=h.Y-y)*m<=_&&(f[i+1]=1,i++);for(s.push({X:o[0].X,Y:o[0].Y}),i=1;i<u-1;i++)f[i]||s.push({X:o[i].X,Y:o[i].Y});if(s.push({X:o[u-1].X,Y:o[u-1].Y}),d&&o.pop(),!f.length)break;o=s}s[(u=s.length)-1].X==s[0].X&&s[u-1].Y==s[0].Y&&s.pop(),s.length>2&&w.push(s)}return!t[0]instanceof Array&&(w=w[0]),void 0===w&&(w=[[]]),w},n.JS.PerimeterOfPath=function(t,e,n){if(void 0===t)return 0;var r,i,o=Math.sqrt,a=0,s=0,u=0,l=0,c=0,h=t.length;if(h<2)return 0;for(e&&(t[h]=t[0],h++);--h;)s=(r=t[h]).X,u=r.Y,a+=o((s-(l=(i=t[h-1]).X))*(s-l)+(u-(c=i.Y))*(u-c));return e&&t.pop(),a/n},n.JS.PerimeterOfPaths=function(t,e,r){r||(r=1);for(var i=0,o=0;o<t.length;o++)i+=n.JS.PerimeterOfPath(t[o],e,r);return i},n.JS.ScaleDownPath=function(t,e){var n,r;for(e||(e=1),n=t.length;n--;)(r=t[n]).X=r.X/e,r.Y=r.Y/e},n.JS.ScaleDownPaths=function(t,e){var n,r,i;for(e||(e=1),n=t.length;n--;)for(r=t[n].length;r--;)(i=t[n][r]).X=i.X/e,i.Y=i.Y/e},n.JS.ScaleUpPath=function(t,e){var n,r,i=Math.round;for(e||(e=1),n=t.length;n--;)(r=t[n]).X=i(r.X*e),r.Y=i(r.Y*e)},n.JS.ScaleUpPaths=function(t,e){var n,r,i,o=Math.round;for(e||(e=1),n=t.length;n--;)for(r=t[n].length;r--;)(i=t[n][r]).X=o(i.X*e),i.Y=o(i.Y*e)},n.ExPolygons=function(){return[]},n.ExPolygon=function(){this.outer=null,this.holes=null},n.JS.AddOuterPolyNodeToExPolygons=function(t,e){var r=new n.ExPolygon;r.outer=t.Contour();var i,o,a,s,u,l,c=t.Childs(),h=c.length;for(r.holes=new Array(h),a=0;a<h;a++)for(i=c[a],r.holes[a]=i.Contour(),s=0,l=(u=i.Childs()).length;s<l;s++)o=u[s],n.JS.AddOuterPolyNodeToExPolygons(o,e);e.push(r)},n.JS.ExPolygonsToPaths=function(t){var e,r,i,o,a=new n.Paths;for(e=0,i=t.length;e<i;e++)for(a.push(t[e].outer),r=0,o=t[e].holes.length;r<o;r++)a.push(t[e].holes[r]);return a},n.JS.PolyTreeToExPolygons=function(t){var e,r,i,o,a=new n.ExPolygons;for(r=0,o=(i=t.Childs()).length;r<o;r++)e=i[r],n.JS.AddOuterPolyNodeToExPolygons(e,a);return a},t.exports=n}));function Ju(t){this.name="JSClipperError",this.message=t,this.stack=(new Error).stack}Ju.prototype=Error.prototype,Zu.Error=function(t){throw new Ju(t)};var Ku=r.fb.f,Qu=r.k.f,$u=r.g.RegExp,tl=$u,el=$u.prototype,nl=/a/g,rl=/a/g,il=new $u(nl)!==nl;if(r.mb&&(!il||Object(r.cb)((function(){return rl[Object(r.Z)("match")]=!1,$u(nl)!=nl||$u(rl)==rl||"/a/i"!=$u(nl,"i")})))){$u=function(t,e){var n=this instanceof $u,i=m(t),o=void 0===e;return!n&&i&&t.constructor===$u&&o?t:C(il?new tl(i&&!o?t.source:t,e):tl((i=t instanceof $u)?t.source:t,i&&o?r.m.call(t):e),n?this:el,$u)};for(var ol=function(t){t in $u||Ku($u,t,{configurable:!0,get:function(){return tl[t]},set:function(e){tl[t]=e}})},al=Qu(tl),sl=0;al.length>sl;)ol(al[sl++]);el.constructor=$u,$u.prototype=el,Object(r.i)(r.g,"RegExp",$u)}Object(r.e)("RegExp");var ul={glyphs:{0:{ha:765,x_min:66,x_max:700,o:"m 700 497 q 683 282 700 377 q 627 121 665 187 q 528 21 589 56 q 382 -14 468 -14 q 242 21 302 -14 q 144 121 183 56 q 86 282 105 187 q 66 497 66 377 q 84 712 66 617 q 139 872 101 807 q 236 972 176 938 q 382 1007 296 1007 q 522 973 463 1007 q 621 873 582 939 q 680 713 661 808 q 700 497 700 618 m 192 497 q 202 319 192 395 q 235 193 212 243 q 293 117 257 142 q 382 92 330 92 q 471 117 434 92 q 531 192 507 142 q 565 318 554 242 q 575 497 575 395 q 565 675 575 599 q 531 801 554 751 q 471 876 507 851 q 382 901 434 901 q 293 876 330 901 q 235 801 257 851 q 202 675 212 751 q 192 497 192 599 z "},1:{ha:765,x_min:121,x_max:482,o:"m 482 0 l 363 0 l 363 619 q 363 682 363 648 q 365 748 363 715 q 367 811 366 781 q 368 864 368 841 q 348 843 357 852 q 330 826 339 834 q 311 809 321 818 q 286 787 300 800 l 186 705 l 121 789 l 380 991 l 482 991 l 482 0 z "},2:{ha:765,x_min:65,x_max:684,o:"m 684 0 l 65 0 l 65 106 l 302 364 q 393 465 353 419 q 461 553 433 510 q 505 641 490 597 q 519 736 519 684 q 508 806 519 776 q 475 858 496 837 q 425 890 454 880 q 359 901 395 901 q 243 875 295 901 q 144 808 191 849 l 75 889 q 134 935 102 913 q 201 972 165 956 q 277 997 237 987 q 361 1006 317 1006 q 478 987 426 1006 q 568 935 531 969 q 624 851 604 901 q 644 741 644 802 q 626 631 644 683 q 577 528 608 578 q 502 427 545 477 q 407 321 458 376 l 216 118 l 216 113 l 684 113 l 684 0 z "},3:{ha:765,x_min:56,x_max:682,o:"m 652 760 q 636 669 652 710 q 592 599 621 629 q 525 550 564 569 q 437 522 486 530 l 437 518 q 620 442 557 503 q 682 282 682 380 q 660 163 682 217 q 593 69 638 109 q 480 8 549 30 q 318 -14 412 -14 q 179 -2 244 -14 q 56 40 113 9 l 56 155 q 183 107 115 124 q 315 90 252 90 q 423 104 378 90 q 498 142 469 117 q 542 204 528 168 q 555 286 555 241 q 537 365 555 332 q 486 419 519 398 q 405 451 453 441 q 297 461 357 461 l 207 461 l 207 564 l 297 564 q 395 577 352 564 q 466 616 437 591 q 510 675 495 641 q 525 751 525 710 q 513 814 525 787 q 478 862 500 842 q 425 891 456 881 q 355 901 393 901 q 228 879 283 901 q 122 819 172 856 l 60 904 q 117 943 85 925 q 186 976 149 962 q 266 998 223 989 q 355 1006 308 1006 q 484 987 429 1006 q 576 936 539 969 q 633 858 614 903 q 652 760 652 813 z "},4:{ha:765,x_min:16,x_max:737,o:"m 737 222 l 593 222 l 593 0 l 473 0 l 473 222 l 16 222 l 16 330 l 465 997 l 593 997 l 593 335 l 737 335 l 737 222 m 473 335 l 473 576 q 474 656 473 614 q 477 738 475 698 q 480 812 478 777 q 482 869 481 846 l 476 869 q 464 839 471 856 q 449 806 457 823 q 431 774 440 789 q 415 747 422 758 l 136 335 l 473 335 z "},5:{ha:765,x_min:89,x_max:688,o:"m 370 608 q 495 590 437 608 q 596 534 553 571 q 663 444 639 498 q 688 318 688 389 q 665 179 688 241 q 596 75 642 117 q 484 9 551 32 q 330 -14 417 -14 q 262 -10 296 -14 q 198 0 229 -7 q 139 16 167 6 q 89 40 111 26 l 89 157 q 141 129 111 141 q 205 109 172 117 q 272 96 238 100 q 334 92 305 92 q 429 104 387 92 q 500 143 471 117 q 545 210 530 170 q 561 304 561 250 q 501 453 561 401 q 328 504 441 504 q 288 502 309 504 q 245 498 267 500 q 204 492 224 495 q 171 486 185 489 l 110 525 l 147 991 l 615 991 l 615 879 l 254 879 l 228 595 q 285 604 250 599 q 370 608 321 608 z "},6:{ha:765,x_min:77,x_max:701,o:"m 77 424 q 84 566 77 495 q 109 701 91 636 q 158 821 127 766 q 237 918 189 877 q 353 982 286 959 q 510 1006 420 1006 q 538 1005 523 1006 q 570 1003 554 1004 q 601 999 586 1001 q 627 993 615 996 l 627 888 q 573 900 603 896 q 514 904 543 904 q 407 889 453 904 q 326 848 360 875 q 270 785 292 822 q 233 704 247 749 q 212 610 218 660 q 203 505 205 559 l 211 505 q 244 551 224 530 q 289 588 263 572 q 347 612 315 603 q 419 621 379 621 q 536 601 484 621 q 625 542 588 581 q 681 447 661 503 q 701 319 701 391 q 680 180 701 242 q 620 76 659 119 q 525 9 581 33 q 400 -14 469 -14 q 273 13 332 -14 q 170 94 214 39 q 102 230 127 148 q 77 424 77 312 m 399 90 q 473 104 439 90 q 531 146 507 118 q 569 217 555 174 q 582 319 582 260 q 571 405 582 367 q 537 469 559 442 q 481 509 515 495 q 403 524 448 524 q 320 508 357 524 q 256 466 282 492 q 215 408 229 441 q 200 343 200 376 q 213 253 200 298 q 250 172 225 208 q 312 113 275 136 q 399 90 349 90 z "},7:{ha:765,x_min:61,x_max:699,o:"m 191 0 l 572 879 l 61 879 l 61 991 l 699 991 l 699 893 l 322 0 l 191 0 z "},8:{ha:765,x_min:72,x_max:694,o:"m 383 1007 q 491 992 440 1007 q 579 947 541 977 q 640 873 618 918 q 663 768 663 828 q 649 686 663 723 q 612 620 635 650 q 555 567 588 591 q 485 525 523 544 q 562 478 524 504 q 629 420 600 452 q 676 348 659 388 q 694 258 694 308 q 672 145 694 196 q 608 60 649 95 q 510 5 567 24 q 383 -14 452 -14 q 251 5 309 -14 q 153 57 193 23 q 93 141 113 92 q 72 253 72 191 q 87 345 72 304 q 128 418 102 385 q 189 475 154 450 q 264 519 224 500 q 201 565 231 541 q 151 621 172 590 q 117 688 130 651 q 104 770 104 725 q 127 873 104 829 q 189 947 150 918 q 278 992 227 977 q 383 1007 328 1007 m 193 252 q 204 185 193 216 q 238 134 215 155 q 296 101 261 113 q 380 89 332 89 q 464 101 428 89 q 525 135 500 113 q 562 188 549 157 q 574 257 574 219 q 561 321 574 292 q 523 374 547 349 q 463 420 498 398 q 386 463 429 441 l 366 472 q 237 379 280 431 q 193 252 193 326 m 382 904 q 268 868 310 904 q 225 764 225 832 q 237 697 225 725 q 270 648 249 669 q 320 609 291 626 q 385 575 350 591 q 446 608 417 590 q 496 648 475 625 q 530 699 517 670 q 542 764 542 727 q 499 868 542 832 q 382 904 456 904 z "},9:{ha:765,x_min:72,x_max:697,o:"m 697 568 q 690 426 697 497 q 665 291 683 355 q 616 171 647 227 q 536 74 585 115 q 421 10 488 33 q 264 -14 354 -14 q 235 -13 251 -14 q 204 -11 220 -12 q 174 -7 189 -9 q 147 -1 159 -5 l 147 104 q 201 92 171 96 q 260 87 231 87 q 410 119 351 87 q 504 206 469 151 q 553 333 538 260 q 571 486 568 406 l 562 486 q 530 441 549 462 q 485 404 511 420 q 427 380 459 389 q 354 371 394 371 q 237 391 290 371 q 149 450 185 411 q 92 544 112 488 q 72 672 72 600 q 93 811 72 749 q 154 917 115 873 q 249 983 193 960 q 374 1006 304 1006 q 501 979 442 1006 q 604 899 560 953 q 672 762 647 844 q 697 568 697 680 m 375 901 q 301 888 334 901 q 243 846 267 874 q 205 774 218 817 q 192 672 192 731 q 203 587 192 625 q 237 523 214 549 q 293 482 259 496 q 371 468 326 468 q 454 484 417 468 q 518 525 492 500 q 559 583 545 551 q 574 648 574 616 q 561 739 574 694 q 524 820 549 784 q 462 879 499 857 q 375 901 425 901 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"!":{ha:374,x_min:100,x_max:272,o:"m 228 281 l 146 281 l 111 991 l 262 991 l 228 281 m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},'"':{ha:558,x_min:90,x_max:468,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 m 468 991 l 440 633 l 363 633 l 335 991 l 468 991 z "},"#":{ha:897,x_min:35,x_max:863,o:"m 667 606 l 624 383 l 814 383 l 814 290 l 606 290 l 550 0 l 450 0 l 507 290 l 310 290 l 254 0 l 157 0 l 210 290 l 35 290 l 35 383 l 228 383 l 272 606 l 86 606 l 86 699 l 289 699 l 345 991 l 444 991 l 389 699 l 587 699 l 644 991 l 742 991 l 685 699 l 863 699 l 863 606 l 667 606 m 328 383 l 525 383 l 568 606 l 371 606 l 328 383 z "},$:{ha:765,x_min:83,x_max:668,o:"m 668 302 q 651 216 668 255 q 603 149 634 178 q 526 102 571 121 q 424 75 481 83 l 424 -81 l 330 -81 l 330 69 q 262 72 296 69 q 195 81 227 75 q 134 96 162 87 q 83 117 105 105 l 83 233 q 135 211 106 222 q 197 191 165 200 q 264 177 230 182 q 330 171 298 171 l 330 465 q 225 508 270 486 q 152 559 181 530 q 109 625 123 588 q 94 713 94 663 q 111 796 94 758 q 158 862 127 833 q 233 908 189 890 q 330 932 277 926 l 330 1054 l 424 1054 l 424 935 q 549 917 492 931 q 652 882 606 903 l 607 783 q 522 814 569 800 q 424 832 474 828 l 424 546 q 529 503 484 525 q 606 452 575 480 q 652 388 637 424 q 668 302 668 351 m 549 302 q 542 343 549 325 q 520 377 535 362 q 482 406 506 393 q 424 431 458 418 l 424 178 q 518 220 487 187 q 549 302 549 254 m 214 711 q 219 668 214 687 q 239 632 225 648 q 275 604 252 616 q 330 579 297 591 l 330 829 q 242 788 270 819 q 214 711 214 758 z "},"%":{ha:1146,x_min:69,x_max:1076,o:"m 170 696 q 194 528 170 584 q 272 472 218 472 q 378 696 378 472 q 272 918 378 918 q 194 863 218 918 q 170 696 170 808 m 478 696 q 466 564 478 623 q 429 466 454 506 q 365 405 404 426 q 272 383 326 383 q 184 405 222 383 q 121 466 146 426 q 82 564 95 506 q 69 696 69 623 q 81 827 69 769 q 118 924 93 884 q 181 985 142 964 q 272 1006 219 1006 q 361 985 323 1006 q 426 924 399 964 q 465 827 452 884 q 478 696 478 769 m 768 298 q 792 131 768 186 q 871 75 817 75 q 977 298 977 75 q 871 521 977 521 q 792 466 817 521 q 768 298 768 410 m 1076 298 q 1064 167 1076 225 q 1027 69 1053 109 q 963 8 1002 29 q 871 -14 924 -14 q 783 8 821 -14 q 719 69 745 29 q 681 167 694 109 q 668 298 668 225 q 680 429 668 372 q 716 527 692 487 q 780 587 741 566 q 871 608 818 608 q 960 587 922 608 q 1024 527 998 566 q 1063 429 1050 487 q 1076 298 1076 372 m 903 991 l 353 0 l 245 0 l 796 991 l 903 991 z "},"&":{ha:975,x_min:74,x_max:953,o:"m 286 790 q 292 745 286 767 q 308 701 297 723 q 337 656 319 679 q 379 608 355 633 q 448 653 419 632 q 496 696 477 674 q 525 741 515 718 q 534 793 534 765 q 526 838 534 817 q 502 873 517 859 q 463 897 486 888 q 412 905 441 905 q 320 875 354 905 q 286 790 286 845 m 378 96 q 450 103 417 96 q 512 125 484 111 q 565 157 541 138 q 611 196 589 175 l 349 472 q 286 428 313 450 q 240 382 259 407 q 212 329 222 358 q 203 262 203 300 q 215 195 203 226 q 249 142 227 164 q 304 108 271 120 q 378 96 336 96 m 74 258 q 87 353 74 311 q 127 428 101 394 q 191 491 153 462 q 277 549 229 520 q 235 599 256 573 q 200 655 215 625 q 175 718 184 684 q 165 790 165 751 q 182 881 165 841 q 231 950 199 922 q 310 992 263 978 q 416 1007 357 1007 q 517 992 473 1007 q 592 950 562 978 q 640 881 623 922 q 656 790 656 841 q 639 710 656 747 q 593 641 622 673 q 528 583 565 610 q 450 532 491 556 l 689 279 q 722 319 707 299 q 748 363 736 340 q 769 412 760 386 q 785 471 778 439 l 909 471 q 885 388 899 426 q 853 317 871 351 q 813 255 836 284 q 765 199 791 227 l 953 0 l 800 0 l 686 117 q 621 62 653 86 q 551 21 588 38 q 473 -4 515 5 q 378 -14 431 -14 q 250 4 307 -14 q 154 57 193 22 q 95 143 115 92 q 74 258 74 193 z "},"'":{ha:314,x_min:90,x_max:224,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 z "},"(":{ha:418,x_min:56,x_max:376,o:"m 56 380 q 68 548 56 465 q 105 708 80 630 q 169 857 130 785 q 260 991 207 928 l 376 991 q 232 704 281 861 q 183 382 183 547 q 196 221 183 301 q 232 64 208 141 q 292 -84 256 -12 q 375 -220 328 -156 l 260 -220 q 169 -89 207 -159 q 105 57 130 -19 q 68 215 80 134 q 56 380 56 296 z "},")":{ha:418,x_min:41,x_max:363,o:"m 363 380 q 351 215 363 296 q 313 57 338 134 q 249 -89 288 -19 q 158 -220 211 -159 l 43 -220 q 125 -84 90 -156 q 186 64 161 -12 q 222 221 210 141 q 235 382 235 301 q 186 704 235 547 q 41 991 137 861 l 158 991 q 249 857 211 928 q 313 708 288 785 q 351 548 338 630 q 363 380 363 465 z "},"*":{ha:765,x_min:56,x_max:708,o:"m 450 1055 l 421 789 l 690 864 l 708 733 l 452 714 l 618 493 l 497 428 l 378 671 l 271 428 l 146 493 l 310 714 l 56 733 l 75 864 l 340 789 l 311 1055 l 450 1055 z "},"+":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 z "},",":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"-":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},".":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},"/":{ha:518,x_min:14,x_max:504,o:"m 504 991 l 135 0 l 14 0 l 383 991 l 504 991 z "},":":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},";":{ha:372,x_min:43,x_max:272,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},"<":{ha:765,x_min:69,x_max:696,o:"m 696 161 l 69 449 l 69 518 l 696 844 l 696 736 l 197 489 l 696 271 l 696 161 z "},"=":{ha:765,x_min:69,x_max:696,o:"m 69 578 l 69 679 l 696 679 l 696 578 l 69 578 m 69 300 l 69 401 l 696 401 l 696 300 l 69 300 z "},">":{ha:765,x_min:69,x_max:696,o:"m 69 271 l 568 489 l 69 736 l 69 844 l 696 518 l 696 449 l 69 161 l 69 271 z "},"?":{ha:591,x_min:25,x_max:546,o:"m 191 281 l 191 306 q 196 376 191 345 q 214 434 201 407 q 250 487 227 461 q 306 542 272 513 q 361 592 338 570 q 399 638 385 615 q 421 689 414 662 q 428 751 428 715 q 418 811 428 784 q 388 857 408 838 q 340 887 369 876 q 273 897 311 897 q 166 880 217 897 q 68 839 115 862 l 25 937 q 144 986 80 966 q 273 1006 208 1006 q 387 988 336 1006 q 473 939 437 971 q 527 859 508 906 q 546 753 546 812 q 537 672 546 707 q 509 606 528 636 q 464 547 491 575 q 400 486 437 518 q 342 433 365 456 q 307 389 320 410 q 290 345 294 368 q 285 293 285 323 l 285 281 l 191 281 m 158 75 q 165 119 158 101 q 183 148 172 137 q 210 164 195 159 q 244 170 226 170 q 278 164 262 170 q 305 148 294 159 q 323 119 317 137 q 330 75 330 101 q 323 32 330 50 q 305 3 317 14 q 278 -14 294 -9 q 244 -20 262 -20 q 210 -14 226 -20 q 183 3 195 -9 q 165 32 172 14 q 158 75 158 50 z "},"@":{ha:1203,x_min:74,x_max:1129,o:"m 1129 496 q 1123 411 1129 454 q 1104 331 1116 369 q 1072 259 1091 292 q 1027 202 1053 227 q 968 164 1001 178 q 896 150 935 150 q 841 160 865 150 q 798 187 816 170 q 769 226 781 204 q 754 272 758 248 l 751 272 q 721 224 739 247 q 679 185 703 202 q 624 159 654 169 q 558 150 594 150 q 466 169 506 150 q 397 222 425 188 q 355 304 370 256 q 340 411 340 353 q 360 536 340 479 q 418 635 380 593 q 509 699 456 676 q 629 722 563 722 q 690 720 660 722 q 749 712 721 717 q 800 702 777 707 q 839 690 823 696 l 823 408 q 822 384 823 393 q 822 370 822 375 q 822 361 822 364 q 822 357 822 359 q 829 298 822 321 q 848 261 836 275 q 874 242 859 248 q 904 237 888 237 q 959 258 935 237 q 999 314 983 279 q 1023 397 1015 349 q 1031 497 1031 444 q 1002 668 1031 593 q 921 795 972 743 q 799 873 869 846 q 644 900 728 900 q 442 862 530 900 q 295 757 355 825 q 205 597 236 690 q 175 395 175 505 q 202 213 175 292 q 280 79 229 134 q 409 -3 332 25 q 586 -31 486 -31 q 668 -26 627 -31 q 746 -13 708 -21 q 817 6 783 -5 q 880 28 851 16 l 880 -68 q 749 -109 822 -94 q 587 -123 675 -123 q 371 -89 466 -123 q 209 12 275 -54 q 109 173 143 78 q 74 390 74 269 q 114 628 74 517 q 228 819 154 738 q 408 945 302 899 q 644 991 513 991 q 839 957 750 991 q 992 859 928 923 q 1093 703 1057 795 q 1129 496 1129 611 m 449 408 q 483 278 449 318 q 575 237 517 237 q 639 253 612 237 q 682 296 665 268 q 708 363 699 324 q 720 449 717 402 l 729 621 q 684 630 710 626 q 629 635 658 635 q 545 615 579 635 q 489 564 511 595 q 458 491 468 532 q 449 408 449 450 z "},A:{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 z "},B:{ha:863,x_min:135,x_max:786,o:"m 135 991 l 406 991 q 558 978 492 991 q 669 936 625 965 q 736 858 713 906 q 758 741 758 810 q 745 662 758 699 q 707 597 732 625 q 645 551 682 570 q 561 526 608 532 l 561 519 q 649 496 608 511 q 720 454 690 481 q 768 387 751 427 q 786 288 786 346 q 764 166 786 220 q 700 76 742 113 q 599 20 659 39 q 464 0 539 0 l 135 0 l 135 991 m 261 571 l 427 571 q 522 581 484 571 q 585 611 561 591 q 619 662 608 631 q 629 732 629 692 q 577 848 629 813 q 412 884 525 884 l 261 884 l 261 571 m 261 465 l 261 107 l 441 107 q 542 121 501 107 q 607 159 582 134 q 642 217 631 183 q 653 293 653 252 q 642 363 653 331 q 605 417 631 395 q 538 453 580 440 q 433 465 496 465 l 261 465 z "},C:{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 z "},D:{ha:950,x_min:135,x_max:865,o:"m 865 505 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},E:{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 z "},F:{ha:682,x_min:135,x_max:650,o:"m 261 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 530 l 624 530 l 624 419 l 261 419 l 261 0 z "},G:{ha:958,x_min:85,x_max:859,o:"m 530 524 l 859 524 l 859 37 q 783 16 821 25 q 705 0 745 6 q 621 -10 665 -7 q 526 -14 577 -14 q 338 22 420 -14 q 199 124 256 58 q 114 284 143 190 q 85 497 85 379 q 117 708 85 614 q 211 868 149 802 q 363 970 273 935 q 570 1006 454 1006 q 714 991 645 1006 q 843 947 783 976 l 794 838 q 742 859 770 849 q 684 877 713 869 q 622 890 654 885 q 559 895 591 895 q 413 867 477 895 q 306 788 349 840 q 241 663 263 736 q 218 496 218 589 q 237 334 218 408 q 296 208 256 261 q 401 126 337 155 q 557 97 466 97 q 611 99 587 97 q 657 103 636 100 q 697 110 678 106 q 733 117 715 113 l 733 412 l 530 412 l 530 524 z "},H:{ha:974,x_min:135,x_max:839,o:"m 839 0 l 713 0 l 713 463 l 261 463 l 261 0 l 135 0 l 135 991 l 261 991 l 261 574 l 713 574 l 713 991 l 839 991 l 839 0 z "},I:{ha:471,x_min:56,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 z "},J:{ha:376,x_min:-125,x_max:252,o:"m -20 -264 q -80 -259 -54 -264 q -125 -248 -106 -255 l -125 -139 q -75 -149 -102 -145 q -18 -153 -49 -153 q 32 -146 7 -153 q 78 -123 58 -140 q 112 -76 99 -106 q 125 0 125 -46 l 125 991 l 252 991 l 252 14 q 232 -110 252 -58 q 176 -196 212 -162 q 91 -247 140 -231 q -20 -264 41 -264 z "},K:{ha:804,x_min:135,x_max:804,o:"m 804 0 l 661 0 l 355 473 l 261 396 l 261 0 l 135 0 l 135 991 l 261 991 l 261 496 l 343 610 l 650 991 l 791 991 l 439 559 l 804 0 z "},L:{ha:682,x_min:135,x_max:650,o:"m 135 0 l 135 991 l 261 991 l 261 113 l 650 113 l 650 0 l 135 0 z "},M:{ha:1208,x_min:135,x_max:1074,o:"m 545 0 l 244 868 l 239 868 q 245 768 243 818 q 250 679 248 726 q 252 593 252 631 l 252 0 l 135 0 l 135 991 l 322 991 l 602 183 l 606 183 l 886 991 l 1074 991 l 1074 0 l 947 0 l 947 602 q 949 682 947 637 q 952 769 950 728 q 957 867 955 817 l 951 867 l 648 0 l 545 0 z "},N:{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 z "},O:{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},P:{ha:800,x_min:135,x_max:729,o:"m 729 701 q 710 583 729 640 q 649 482 692 526 q 536 412 606 438 q 363 386 466 386 l 261 386 l 261 0 l 135 0 l 135 991 l 380 991 q 537 972 471 991 q 646 916 603 953 q 709 825 688 879 q 729 701 729 770 m 261 493 l 349 493 q 459 504 412 493 q 537 539 506 515 q 583 601 568 563 q 599 694 599 640 q 543 837 599 791 q 370 884 488 884 l 261 884 l 261 493 z "},Q:{ha:1029,x_min:85,x_max:945,o:"m 945 497 q 928 332 945 408 q 879 194 911 255 q 799 87 847 132 q 688 17 751 43 q 763 -95 717 -47 q 871 -184 810 -144 l 789 -281 q 660 -164 719 -231 q 567 -11 602 -97 q 542 -13 555 -12 q 515 -14 528 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},R:{ha:819,x_min:135,x_max:803,o:"m 261 410 l 261 0 l 135 0 l 135 991 l 376 991 q 643 922 557 991 q 729 710 729 852 q 712 607 729 651 q 668 531 696 563 q 606 479 641 500 q 533 444 570 458 l 803 0 l 654 0 l 416 410 l 261 410 m 261 517 l 372 517 q 476 529 433 517 q 546 564 519 541 q 586 622 574 587 q 599 704 599 657 q 585 787 599 753 q 543 842 571 821 q 472 874 515 864 q 370 884 429 884 l 261 884 l 261 517 z "},S:{ha:721,x_min:71,x_max:657,o:"m 657 265 q 634 148 657 199 q 567 60 610 96 q 461 5 524 24 q 321 -14 399 -14 q 180 -2 245 -14 q 71 33 115 10 l 71 154 q 123 133 94 143 q 185 114 153 122 q 252 101 218 106 q 321 96 287 96 q 481 136 429 96 q 533 253 533 177 q 523 317 533 290 q 489 367 513 344 q 422 411 464 389 q 318 457 381 432 q 213 509 258 481 q 140 572 169 537 q 97 652 111 608 q 83 754 83 697 q 105 861 83 814 q 166 940 127 907 q 260 989 205 972 q 380 1006 315 1006 q 526 990 461 1006 q 640 951 590 975 l 595 846 q 495 880 551 865 q 379 895 439 895 q 251 856 296 895 q 205 753 205 818 q 216 686 205 714 q 250 635 226 658 q 312 592 273 612 q 408 550 351 572 q 516 500 470 526 q 594 441 563 474 q 641 366 625 409 q 657 265 657 323 z "},T:{ha:721,x_min:14,x_max:707,o:"m 424 0 l 297 0 l 297 880 l 14 880 l 14 991 l 707 991 l 707 880 l 424 880 l 424 0 z "},U:{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 z "},V:{ha:789,x_min:0,x_max:789,o:"m 654 991 l 789 991 l 457 0 l 330 0 l 0 991 l 134 991 l 334 363 q 368 244 353 301 q 393 136 382 186 q 419 244 404 186 q 456 367 435 301 l 654 991 z "},W:{ha:1227,x_min:14,x_max:1214,o:"m 549 991 l 682 991 l 838 411 q 858 335 848 373 q 876 261 867 297 q 891 194 884 226 q 901 136 897 162 q 908 193 904 162 q 918 257 912 223 q 929 325 923 290 q 943 393 936 360 l 1079 991 l 1214 991 l 965 0 l 838 0 l 665 636 q 647 707 656 671 q 631 776 638 744 q 615 848 623 813 q 600 777 608 814 q 585 707 593 745 q 567 632 576 669 l 403 0 l 275 0 l 14 991 l 147 991 l 298 389 q 313 324 307 357 q 326 257 320 290 q 336 193 332 224 q 345 136 341 162 q 353 195 348 161 q 365 264 358 228 q 379 339 372 301 q 396 410 387 376 l 549 991 z "},X:{ha:760,x_min:0,x_max:760,o:"m 760 0 l 616 0 l 376 431 l 127 0 l 0 0 l 307 518 l 21 991 l 155 991 l 380 612 l 607 991 l 736 991 l 450 522 l 760 0 z "},Y:{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 z "},Z:{ha:749,x_min:56,x_max:693,o:"m 693 0 l 56 0 l 56 98 l 538 879 l 69 879 l 69 991 l 679 991 l 679 893 l 197 113 l 693 113 l 693 0 z "},"[":{ha:421,x_min:111,x_max:386,o:"m 386 -220 l 111 -220 l 111 991 l 386 991 l 386 890 l 235 890 l 235 -118 l 386 -118 l 386 -220 z "},"\\":{ha:518,x_min:16,x_max:505,o:"m 136 991 l 505 0 l 385 0 l 16 991 l 136 991 z "},"]":{ha:421,x_min:35,x_max:310,o:"m 35 -118 l 186 -118 l 186 890 l 35 890 l 35 991 l 310 991 l 310 -220 l 35 -220 l 35 -118 z "},"^":{ha:739,x_min:28,x_max:711,o:"m 28 372 l 339 999 l 408 999 l 711 372 l 602 372 l 374 871 l 137 372 l 28 372 z "},_:{ha:571,x_min:-3,x_max:574,o:"m 574 -220 l -3 -220 l -3 -125 l 574 -125 l 574 -220 z "},"`":{ha:802,x_min:267,x_max:533,o:"m 533 842 l 452 842 q 400 889 428 861 q 346 947 372 917 q 299 1004 320 977 q 267 1050 277 1031 l 267 1064 l 415 1064 q 440 1014 426 1041 q 471 959 455 986 q 503 905 486 931 q 533 860 519 880 l 533 842 z "},a:{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 z "},b:{ha:814,x_min:118,x_max:737,o:"m 454 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 l 208 0 l 118 0 l 118 1055 l 241 1055 l 241 800 q 241 750 241 777 q 239 700 240 723 q 236 647 237 673 l 241 647 q 277 691 257 671 q 322 726 296 711 q 381 750 349 741 q 454 758 414 758 m 431 656 q 340 638 376 656 q 282 586 304 621 q 251 498 260 551 q 241 374 241 445 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},c:{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 z "},d:{ha:814,x_min:77,x_max:696,o:"m 578 100 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 491 726 465 741 q 537 691 517 711 q 572 650 557 671 l 581 650 q 576 694 578 673 q 574 730 575 711 q 572 760 572 749 l 572 1055 l 696 1055 l 696 0 l 596 0 l 578 100 m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 z "},e:{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 z "},f:{ha:457,x_min:20,x_max:510,o:"m 441 652 l 275 652 l 275 0 l 151 0 l 151 652 l 20 652 l 20 703 l 151 749 l 151 814 q 166 934 151 886 q 211 1010 182 982 q 281 1051 239 1039 q 376 1063 323 1063 q 450 1055 416 1063 q 510 1038 484 1047 l 478 942 q 432 955 457 949 q 380 961 408 961 q 334 955 353 961 q 301 932 314 948 q 282 887 288 916 q 275 815 275 859 l 275 745 l 441 745 l 441 652 z "},g:{ha:720,x_min:25,x_max:692,o:"m 692 745 l 692 668 l 558 650 q 590 589 577 626 q 603 505 603 552 q 587 410 603 454 q 539 334 571 366 q 459 284 507 302 q 349 267 412 267 q 319 267 334 267 q 294 269 304 267 q 272 254 283 262 q 251 235 260 245 q 236 210 242 224 q 231 180 231 197 q 239 151 231 162 q 261 134 247 140 q 294 125 275 127 q 334 123 313 123 l 453 123 q 559 107 516 123 q 630 64 603 92 q 670 0 658 37 q 682 -78 682 -37 q 660 -185 682 -138 q 593 -266 638 -233 q 478 -316 547 -298 q 314 -334 408 -334 q 187 -319 241 -334 q 97 -278 133 -305 q 43 -213 61 -251 q 25 -126 25 -174 q 38 -55 25 -85 q 74 -1 52 -24 q 126 35 96 21 q 187 57 155 50 q 140 98 159 70 q 122 161 122 125 q 144 233 122 203 q 212 292 165 263 q 159 325 183 304 q 118 374 135 347 q 93 434 102 401 q 83 501 83 467 q 100 609 83 562 q 151 690 117 656 q 233 741 184 723 q 349 758 283 758 q 400 754 374 758 q 446 745 427 751 l 692 745 m 142 -122 q 151 -169 142 -147 q 179 -206 159 -191 q 232 -231 199 -222 q 314 -240 265 -240 q 503 -201 440 -240 q 566 -89 566 -162 q 557 -38 566 -58 q 531 -7 549 -18 q 481 8 512 4 q 407 12 451 12 l 288 12 q 238 7 264 12 q 191 -14 212 1 q 156 -55 170 -28 q 142 -122 142 -81 m 204 505 q 241 389 204 427 q 345 351 277 351 q 447 389 412 351 q 482 507 482 427 q 447 630 482 591 q 343 669 411 669 q 240 629 276 669 q 204 505 204 588 z "},h:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 1055 l 241 1055 l 241 742 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},i:{ha:359,x_min:109,x_max:253,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},j:{ha:359,x_min:-46,x_max:253,o:"m 45 -334 q -9 -329 12 -334 q -46 -317 -31 -324 l -46 -216 q -10 -227 -28 -223 q 32 -231 8 -231 q 66 -225 50 -231 q 93 -207 81 -220 q 112 -172 105 -194 q 118 -115 118 -150 l 118 745 l 241 745 l 241 -107 q 230 -201 241 -159 q 194 -272 218 -243 q 133 -318 170 -302 q 45 -334 96 -334 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},k:{ha:689,x_min:118,x_max:684,o:"m 232 385 l 323 500 l 522 745 l 665 745 l 393 422 l 684 0 l 542 0 l 314 342 l 240 286 l 240 0 l 118 0 l 118 1055 l 240 1055 l 240 571 l 229 385 l 232 385 z "},l:{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 1055 l 241 1055 l 241 0 z "},m:{ha:1244,x_min:118,x_max:1133,o:"m 1010 0 l 1010 479 q 976 612 1010 568 q 871 656 942 656 q 787 640 821 656 q 730 593 752 624 q 698 516 708 562 q 688 411 688 471 l 688 0 l 564 0 l 564 479 q 530 612 564 568 q 425 656 496 656 q 338 638 373 656 q 281 586 302 621 q 251 501 260 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 281 695 259 673 q 331 730 304 716 q 388 751 357 745 q 449 758 418 758 q 584 728 530 758 q 664 635 638 699 l 669 635 q 712 690 687 667 q 766 728 736 713 q 828 751 795 743 q 895 758 861 758 q 1073 693 1013 758 q 1133 486 1133 629 l 1133 0 l 1010 0 z "},n:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},o:{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 z "},p:{ha:814,x_min:118,x_max:737,o:"m 454 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 745 l 218 745 l 236 644 l 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},q:{ha:814,x_min:77,x_max:696,o:"m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 m 359 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 490 725 465 740 q 536 689 516 709 q 572 644 557 668 l 578 644 l 596 745 l 696 745 l 696 -334 l 572 -334 l 572 -16 q 574 17 572 -3 q 576 55 575 37 q 581 100 578 77 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 z "},r:{ha:554,x_min:118,x_max:526,o:"m 440 758 q 484 756 460 758 q 526 751 509 755 l 510 637 q 471 643 491 641 q 433 646 451 646 q 355 628 391 646 q 295 579 320 611 q 255 502 269 547 q 241 401 241 456 l 241 0 l 118 0 l 118 745 l 218 745 l 233 608 l 239 608 q 275 665 256 637 q 318 712 294 692 q 372 746 342 733 q 440 758 402 758 z "},s:{ha:627,x_min:61,x_max:564,o:"m 564 204 q 544 109 564 150 q 487 41 524 68 q 398 0 450 14 q 281 -14 346 -14 q 154 -2 207 -14 q 61 33 101 10 l 61 146 q 108 124 82 135 q 162 106 134 114 q 221 93 191 98 q 281 87 251 87 q 356 95 325 87 q 406 116 387 102 q 434 150 425 130 q 443 195 443 170 q 436 233 443 216 q 411 266 429 250 q 362 300 393 283 q 282 338 331 317 q 194 379 233 359 q 128 425 155 399 q 86 483 101 450 q 72 561 72 515 q 91 645 72 608 q 143 707 109 682 q 224 745 177 732 q 330 758 272 758 q 451 744 396 758 q 554 707 505 730 l 511 607 q 421 641 467 627 q 326 656 374 656 q 224 633 257 656 q 191 568 191 610 q 198 527 191 545 q 225 494 206 509 q 276 462 244 478 q 355 427 308 446 q 443 386 404 406 q 508 340 481 366 q 549 282 535 315 q 564 204 564 250 z "},t:{ha:471,x_min:22,x_max:444,o:"m 343 87 q 371 89 355 87 q 400 92 386 90 q 426 97 414 94 q 444 102 438 100 l 444 8 q 422 0 435 4 q 392 -7 408 -4 q 358 -12 376 -10 q 323 -14 340 -14 q 245 -3 281 -14 q 183 35 210 8 q 142 106 157 61 q 127 220 127 151 l 127 652 l 22 652 l 22 707 l 127 760 l 180 916 l 252 916 l 252 745 l 439 745 l 439 652 l 252 652 l 252 220 q 273 121 252 154 q 343 87 294 87 z "},u:{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 z "},v:{ha:665,x_min:0,x_max:665,o:"m 254 0 l 0 745 l 127 745 l 262 330 q 280 273 270 308 q 300 201 290 237 q 319 132 311 164 q 330 82 328 99 l 335 82 q 347 132 338 99 q 365 201 355 164 q 385 273 375 237 q 403 330 395 308 l 538 745 l 665 745 l 411 0 l 254 0 z "},w:{ha:1036,x_min:14,x_max:1022,o:"m 684 0 l 570 418 q 563 445 567 430 q 555 477 559 460 q 546 512 551 494 q 538 547 542 530 q 518 628 528 586 l 514 628 q 496 546 505 585 q 480 476 488 512 q 464 415 471 440 l 347 0 l 204 0 l 14 745 l 143 745 l 232 349 q 245 282 239 318 q 258 212 252 247 q 269 146 264 177 q 277 96 274 115 l 281 96 q 290 143 284 113 q 303 205 296 172 q 317 270 310 238 q 332 325 325 302 l 453 745 l 586 745 l 703 325 q 716 271 709 302 q 732 207 724 239 q 745 145 739 175 q 754 96 751 115 l 758 96 q 765 143 760 113 q 775 208 769 172 q 788 280 781 243 q 803 349 795 317 l 896 745 l 1022 745 l 829 0 l 684 0 z "},x:{ha:694,x_min:24,x_max:669,o:"m 277 382 l 37 745 l 178 745 l 347 467 l 517 745 l 657 745 l 416 382 l 669 0 l 529 0 l 347 296 l 164 0 l 24 0 l 277 382 z "},y:{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 z "},z:{ha:612,x_min:56,x_max:557,o:"m 557 0 l 56 0 l 56 85 l 419 652 l 78 652 l 78 745 l 545 745 l 545 646 l 189 93 l 557 93 l 557 0 z "},"{":{ha:492,x_min:41,x_max:457,o:"m 339 -11 q 347 -64 339 -43 q 371 -97 355 -85 q 408 -113 386 -109 q 457 -118 430 -117 l 457 -220 q 360 -208 405 -219 q 284 -173 316 -197 q 233 -111 252 -149 q 215 -21 215 -74 l 215 205 q 171 304 215 275 q 41 334 126 334 l 41 439 q 171 468 126 439 q 215 567 215 497 l 215 793 q 233 883 215 846 q 284 944 252 920 q 360 980 316 968 q 457 991 405 991 l 457 890 q 408 885 430 890 q 371 869 386 881 q 347 837 355 857 q 339 783 339 816 l 339 558 q 299 445 339 487 q 180 390 258 404 l 180 382 q 299 327 258 368 q 339 214 339 286 l 339 -11 z "},"|":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 -334 l 332 -334 l 332 1055 z "},"}":{ha:492,x_min:35,x_max:450,o:"m 153 214 q 193 327 153 286 q 311 382 233 368 l 311 390 q 193 445 233 404 q 153 558 153 487 l 153 783 q 144 837 153 816 q 121 869 136 857 q 84 885 106 881 q 35 890 62 890 l 35 991 q 131 980 87 991 q 208 944 176 968 q 258 883 240 920 q 277 793 277 846 l 277 567 q 288 507 277 532 q 321 468 299 483 q 376 446 343 452 q 450 439 408 439 l 450 334 q 321 304 366 334 q 277 205 277 275 l 277 -21 q 258 -111 277 -74 q 208 -173 240 -149 q 131 -208 176 -197 q 35 -220 87 -219 l 35 -118 q 84 -113 62 -117 q 121 -97 106 -109 q 144 -64 136 -85 q 153 -11 153 -43 l 153 214 z "},"~":{ha:765,x_min:69,x_max:696,o:"m 359 441 q 316 460 334 452 q 282 472 297 467 q 253 478 267 476 q 224 479 239 479 q 184 473 205 479 q 144 455 164 467 q 105 429 124 444 q 69 397 86 414 l 69 507 q 237 581 137 581 q 274 579 257 581 q 310 573 291 577 q 351 560 328 568 q 406 538 374 551 q 449 519 431 527 q 484 508 468 512 q 513 502 500 503 q 542 500 527 500 q 581 506 561 500 q 622 524 602 513 q 661 550 642 535 q 696 582 680 565 l 696 472 q 528 399 629 399 q 491 400 508 399 q 455 407 474 402 q 414 419 437 411 q 359 441 391 428 z "},"Â¡":{ha:374,x_min:100,x_max:272,o:"m 144 458 l 227 458 l 261 -253 l 110 -253 l 144 458 m 272 664 q 266 620 272 638 q 247 591 259 602 q 220 575 235 580 q 186 570 204 570 q 153 575 168 570 q 125 591 137 580 q 106 620 113 602 q 100 664 100 638 q 106 707 100 689 q 125 736 113 724 q 153 753 137 747 q 186 758 168 758 q 220 753 204 758 q 247 736 235 747 q 266 707 259 724 q 272 664 272 689 z "},"Â¢":{ha:765,x_min:127,x_max:647,o:"m 635 163 q 564 134 601 144 q 475 122 526 123 l 475 -14 l 382 -14 l 382 126 q 276 160 323 135 q 196 231 229 186 q 145 343 163 276 q 127 504 127 411 q 145 668 127 600 q 196 783 163 737 q 276 855 229 829 q 382 889 323 880 l 382 1006 l 475 1006 l 475 895 q 570 881 524 892 q 647 854 616 870 l 611 750 q 576 763 595 757 q 537 775 557 770 q 497 783 517 780 q 460 786 477 786 q 304 718 353 786 q 256 505 256 649 q 305 297 256 363 q 454 231 354 231 q 554 243 509 231 q 635 272 598 256 l 635 163 z "},"Â£":{ha:765,x_min:46,x_max:718,o:"m 452 1004 q 583 989 524 1004 q 686 950 642 974 l 642 852 q 556 887 604 872 q 457 901 508 901 q 397 892 425 901 q 349 863 369 883 q 317 811 328 843 q 306 734 306 779 l 306 534 l 561 534 l 561 441 l 306 441 l 306 298 q 298 226 306 256 q 277 174 290 196 q 247 138 264 153 q 211 113 229 123 l 718 113 l 718 0 l 46 0 l 46 104 q 101 126 76 112 q 143 163 125 140 q 172 219 161 186 q 182 297 182 252 l 182 441 l 47 441 l 47 534 l 182 534 l 182 754 q 202 860 182 813 q 257 938 222 906 q 342 987 293 970 q 452 1004 392 1004 z "},"Â¤":{ha:765,x_min:83,x_max:681,o:"m 126 490 q 138 567 126 530 q 171 635 150 603 l 83 722 l 150 789 l 236 701 q 304 735 268 723 q 382 747 341 747 q 459 735 422 747 q 526 701 495 723 l 614 789 l 681 724 l 593 636 q 626 568 614 605 q 639 490 639 531 q 627 412 639 450 q 593 345 615 375 l 679 258 l 614 193 l 526 279 q 459 247 495 258 q 382 235 422 235 q 304 247 341 235 q 236 281 267 259 l 150 195 l 85 260 l 171 346 q 138 413 150 376 q 126 490 126 450 m 220 490 q 232 427 220 456 q 267 375 245 397 q 318 340 289 353 q 382 328 348 328 q 447 340 416 328 q 499 375 477 353 q 534 427 522 397 q 547 490 547 456 q 534 555 547 525 q 499 608 522 585 q 447 643 477 630 q 382 656 416 656 q 318 643 348 656 q 267 608 289 630 q 232 555 245 585 q 220 490 220 525 z "},"Â¥":{ha:765,x_min:20,x_max:746,o:"m 382 490 l 616 991 l 746 991 l 485 471 l 647 471 l 647 378 l 443 378 l 443 271 l 647 271 l 647 178 l 443 178 l 443 0 l 322 0 l 322 178 l 118 178 l 118 271 l 322 271 l 322 378 l 118 378 l 118 471 l 277 471 l 20 991 l 150 991 l 382 490 z "},"Â¦":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 526 l 332 526 l 332 1055 m 332 196 l 433 196 l 433 -334 l 332 -334 l 332 196 z "},"Â§":{ha:675,x_min:82,x_max:585,o:"m 93 549 q 102 611 93 583 q 126 661 111 640 q 161 698 141 683 q 201 724 180 713 q 122 788 151 749 q 93 884 93 827 q 112 958 93 925 q 164 1015 130 991 q 245 1050 198 1038 q 351 1063 293 1063 q 470 1049 417 1063 q 572 1014 524 1036 l 534 920 q 443 952 490 939 q 347 965 395 965 q 245 945 280 965 q 211 886 211 925 q 219 852 211 868 q 247 822 227 837 q 298 791 266 807 q 378 755 330 775 q 465 714 427 736 q 530 666 503 692 q 570 607 556 640 q 585 532 585 574 q 576 468 585 496 q 554 416 568 439 q 523 376 541 393 q 486 349 505 359 q 559 286 533 323 q 585 196 585 249 q 565 110 585 148 q 508 46 545 73 q 419 7 471 20 q 301 -7 366 -7 q 175 4 228 -7 q 82 37 122 16 l 82 144 q 129 124 103 134 q 183 106 155 114 q 242 94 212 98 q 301 89 272 89 q 379 97 348 89 q 430 118 411 105 q 456 149 448 132 q 464 184 464 166 q 458 219 464 204 q 435 250 452 235 q 386 282 418 265 q 302 319 354 298 q 214 361 253 340 q 148 409 175 382 q 107 469 121 435 q 93 549 93 503 m 197 564 q 207 517 197 538 q 238 476 216 496 q 293 438 259 456 q 376 399 328 419 l 400 389 q 428 410 414 397 q 453 437 441 422 q 471 472 464 453 q 478 514 478 491 q 469 562 478 540 q 438 603 460 583 q 380 643 416 623 q 288 682 343 662 q 255 666 271 677 q 226 641 239 656 q 205 606 213 625 q 197 564 197 586 z "},"Â¨":{ha:802,x_min:208,x_max:593,o:"m 208 946 q 227 999 208 983 q 273 1015 246 1015 q 319 999 300 1015 q 339 946 339 982 q 319 893 339 910 q 273 876 300 876 q 227 893 246 876 q 208 946 208 910 m 463 946 q 481 999 463 983 q 528 1015 500 1015 q 552 1011 541 1015 q 573 999 564 1007 q 587 977 582 990 q 593 946 593 964 q 573 893 593 910 q 528 876 553 876 q 481 893 500 876 q 463 946 463 910 z "},"Â©":{ha:1156,x_min:68,x_max:1088,o:"m 604 714 q 531 699 563 714 q 477 656 499 684 q 445 587 456 628 q 433 496 433 547 q 443 402 433 443 q 474 334 453 361 q 527 291 494 306 q 604 277 559 277 q 638 279 620 277 q 676 286 656 281 q 714 295 695 290 q 750 307 733 301 l 750 218 q 717 205 734 211 q 683 194 701 199 q 644 187 665 189 q 600 184 624 184 q 479 207 531 184 q 394 271 428 229 q 342 370 359 312 q 325 497 325 427 q 343 622 325 566 q 397 720 361 679 q 485 783 433 760 q 604 806 536 806 q 692 794 647 806 q 777 764 736 783 l 734 677 q 666 705 699 695 q 604 714 633 714 m 68 496 q 86 631 68 566 q 137 753 104 696 q 217 857 170 810 q 320 936 264 903 q 442 987 377 969 q 578 1006 507 1006 q 713 987 648 1006 q 835 936 779 969 q 939 857 892 903 q 1018 753 985 810 q 1069 631 1051 696 q 1088 496 1088 566 q 1069 360 1088 425 q 1018 238 1051 295 q 939 135 985 182 q 835 56 892 89 q 713 4 779 22 q 578 -14 648 -14 q 442 4 507 -14 q 320 56 377 22 q 217 135 264 89 q 137 238 170 182 q 86 360 104 295 q 68 496 68 425 m 142 496 q 176 326 142 406 q 270 188 210 247 q 408 94 329 128 q 578 60 488 60 q 747 94 668 60 q 886 188 827 128 q 980 326 945 247 q 1014 496 1014 406 q 980 665 1014 586 q 886 804 945 745 q 747 898 827 863 q 578 932 668 932 q 408 898 488 932 q 270 804 329 863 q 176 665 210 745 q 142 496 142 586 z "},"Âª":{ha:460,x_min:46,x_max:392,o:"m 330 541 l 311 596 q 286 569 299 581 q 257 549 273 557 q 222 536 241 541 q 179 532 203 532 q 125 541 150 532 q 83 567 101 549 q 56 610 66 584 q 46 671 46 636 q 94 777 46 740 q 239 817 142 813 l 306 819 l 306 840 q 285 908 306 889 q 227 928 264 928 q 163 918 194 928 q 104 893 133 908 l 72 961 q 146 991 106 979 q 227 1003 186 1003 q 352 967 311 1003 q 392 848 392 931 l 392 541 l 330 541 m 256 753 q 198 745 221 751 q 161 728 175 739 q 141 704 147 718 q 135 669 135 689 q 152 620 135 635 q 197 604 169 604 q 240 611 220 604 q 274 633 260 618 q 297 670 289 648 q 306 722 306 692 l 306 755 l 256 753 z "},"Â«":{ha:676,x_min:56,x_max:621,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 m 332 375 l 542 656 l 621 603 l 460 367 l 621 131 l 542 78 l 332 357 l 332 375 z "},"Â¬":{ha:765,x_min:69,x_max:696,o:"m 696 541 l 696 178 l 595 178 l 595 439 l 69 439 l 69 541 l 696 541 z "},"Â­":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},"Â®":{ha:1092,x_min:61,x_max:1023,o:"m 61 494 q 124 749 61 631 q 300 933 188 866 q 543 1001 412 1001 q 785 933 673 1001 q 960 749 897 866 q 1023 494 1023 631 q 962 244 1023 361 q 789 57 901 127 q 543 -14 677 -14 q 297 56 409 -14 q 123 243 184 126 q 61 494 61 359 m 139 494 q 193 278 139 378 q 341 123 248 179 q 543 66 434 66 q 745 124 652 66 q 892 279 839 181 q 945 494 945 378 q 892 708 945 610 q 745 863 839 806 q 543 920 652 920 q 340 864 434 920 q 193 709 247 808 q 139 494 139 610 m 443 444 l 443 214 l 347 214 l 347 790 l 534 790 q 695 746 638 790 q 753 616 753 701 q 666 489 753 533 q 749 351 749 455 l 749 309 q 761 225 749 251 l 761 214 l 663 214 q 653 301 653 239 q 651 376 653 364 q 562 444 640 441 l 443 444 m 443 530 l 549 530 q 627 554 597 532 q 657 613 657 576 q 631 683 657 663 q 536 704 604 704 l 443 704 l 443 530 z "},"Â¯":{ha:694,x_min:-4,x_max:699,o:"m 699 1055 l -4 1055 l -4 1150 l 699 1150 l 699 1055 z "},"Â°":{ha:595,x_min:83,x_max:511,o:"m 83 791 q 100 874 83 836 q 146 943 117 913 q 214 989 175 972 q 297 1006 253 1006 q 380 989 341 1006 q 448 943 419 972 q 494 874 477 913 q 511 791 511 836 q 494 709 511 747 q 448 641 477 670 q 380 596 419 612 q 297 579 341 579 q 214 596 253 579 q 146 641 175 612 q 100 709 117 670 q 83 791 83 747 m 167 791 q 177 742 167 765 q 205 701 187 718 q 246 673 222 683 q 297 663 270 663 q 348 673 324 663 q 390 701 372 683 q 418 742 408 718 q 428 791 428 765 q 418 843 428 819 q 390 885 408 867 q 348 913 372 903 q 297 924 324 924 q 246 913 270 924 q 205 885 222 903 q 177 843 187 867 q 167 791 167 819 z "},"Â±":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 m 69 0 l 69 102 l 696 102 l 696 0 l 69 0 z "},"Â²":{ha:460,x_min:33,x_max:421,o:"m 421 397 l 33 397 l 33 473 l 175 628 q 238 699 214 670 q 276 750 262 728 q 295 793 290 773 q 300 836 300 813 q 277 902 300 880 q 218 924 255 924 q 152 907 184 924 q 90 864 121 890 l 37 928 q 119 982 74 960 q 220 1004 164 1004 q 293 993 260 1004 q 349 961 326 982 q 385 908 372 939 q 397 839 397 878 q 388 776 397 805 q 359 718 378 747 q 314 658 341 689 q 253 590 288 627 l 153 484 l 421 484 l 421 397 z "},"Â³":{ha:460,x_min:21,x_max:418,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 z "},"Â´":{ha:802,x_min:267,x_max:533,o:"m 267 860 q 297 905 281 880 q 329 959 313 931 q 359 1014 345 986 q 385 1064 374 1041 l 533 1064 l 533 1050 q 501 1004 522 1031 q 453 947 479 977 q 400 889 427 917 q 349 842 372 861 l 267 842 l 267 860 z "},"Âµ":{ha:825,x_min:118,x_max:707,o:"m 241 265 q 277 133 241 177 q 389 89 313 89 q 481 106 444 89 q 542 158 519 124 q 574 243 564 193 q 583 358 583 293 l 583 745 l 707 745 l 707 0 l 607 0 l 589 100 l 582 100 q 500 15 549 43 q 382 -14 452 -14 q 297 2 333 -14 q 237 46 261 18 q 239 -7 238 20 q 241 -59 241 -31 q 241 -117 241 -88 l 241 -334 l 118 -334 l 118 745 l 241 745 l 241 265 z "},"Â¶":{ha:909,x_min:77,x_max:764,o:"m 764 -176 l 682 -176 l 682 947 l 542 947 l 542 -176 l 460 -176 l 460 379 q 361 367 418 367 q 244 384 296 367 q 154 441 191 401 q 97 547 117 481 q 77 707 77 612 q 99 873 77 806 q 161 981 121 940 q 258 1038 201 1021 q 382 1055 314 1055 l 764 1055 l 764 -176 z "},"Â·":{ha:372,x_min:100,x_max:272,o:"m 100 490 q 106 534 100 516 q 125 563 113 552 q 152 579 136 574 q 186 585 168 585 q 219 579 203 585 q 247 563 235 574 q 265 534 258 552 q 272 490 272 516 q 265 448 272 465 q 247 418 258 430 q 219 401 235 407 q 186 396 203 396 q 152 401 168 396 q 125 418 136 407 q 106 448 113 430 q 100 490 100 465 z "},"Â¸":{ha:285,x_min:24,x_max:277,o:"m 277 -195 q 229 -297 277 -260 q 79 -334 181 -334 q 49 -332 64 -334 q 24 -328 34 -330 l 24 -254 q 51 -257 34 -256 q 78 -258 67 -258 q 153 -244 126 -258 q 180 -196 180 -229 q 172 -168 180 -180 q 147 -147 163 -156 q 110 -132 132 -138 q 64 -119 89 -125 l 125 0 l 207 0 l 168 -78 q 211 -92 191 -83 q 245 -115 231 -101 q 268 -149 260 -129 q 277 -195 277 -168 z "},"Â¹":{ha:460,x_min:43,x_max:300,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 z "},"Âº":{ha:486,x_min:45,x_max:441,o:"m 441 768 q 428 668 441 712 q 388 594 414 624 q 325 548 361 564 q 241 532 288 532 q 163 548 199 532 q 100 594 127 564 q 59 668 74 624 q 45 768 45 712 q 59 868 45 825 q 98 942 73 912 q 161 987 124 972 q 244 1003 198 1003 q 322 987 286 1003 q 385 942 359 972 q 427 868 412 912 q 441 768 441 825 m 134 768 q 159 647 134 688 q 243 606 184 606 q 326 647 300 606 q 351 768 351 688 q 326 889 351 850 q 243 928 300 928 q 159 889 184 928 q 134 768 134 850 z "},"Â»":{ha:676,x_min:57,x_max:623,o:"m 623 357 l 412 78 l 334 131 l 494 367 l 334 603 l 412 656 l 623 375 l 623 357 m 346 357 l 136 78 l 57 131 l 218 367 l 57 603 l 136 656 l 346 375 l 346 357 z "},"Â¼":{ha:1023,x_min:43,x_max:962,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 m 815 991 l 265 0 l 159 0 l 709 991 l 815 991 m 962 131 l 878 131 l 878 1 l 781 1 l 781 131 l 526 131 l 526 206 l 782 599 l 878 599 l 878 217 l 962 217 l 962 131 m 781 217 l 781 349 q 782 411 781 378 q 785 478 783 445 q 774 458 781 471 q 760 431 768 446 q 745 404 753 417 q 730 380 736 390 l 625 217 l 781 217 z "},"Â½":{ha:1023,x_min:30,x_max:977,o:"m 195 991 l 287 991 l 287 397 l 189 397 l 189 747 q 189 785 189 764 q 190 825 189 805 q 192 865 191 846 q 194 899 193 884 q 172 873 184 887 q 144 848 159 860 l 80 799 l 30 864 l 195 991 m 801 991 l 251 0 l 144 0 l 694 991 l 801 991 m 977 1 l 589 1 l 589 77 l 730 231 q 793 302 769 273 q 831 354 818 331 q 850 396 845 376 q 855 439 855 416 q 833 505 855 484 q 774 527 810 527 q 708 510 739 527 q 646 467 676 493 l 593 531 q 674 586 629 564 q 775 608 720 608 q 849 596 816 608 q 905 564 882 585 q 940 512 928 543 q 953 442 953 481 q 943 379 953 408 q 915 321 933 350 q 870 261 897 292 q 808 193 843 231 l 708 87 l 977 87 l 977 1 z "},"Â¾":{ha:1023,x_min:21,x_max:1008,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 m 879 991 l 329 0 l 222 0 l 772 991 l 879 991 m 1008 131 l 923 131 l 923 1 l 826 1 l 826 131 l 572 131 l 572 206 l 827 599 l 923 599 l 923 217 l 1008 217 l 1008 131 m 826 217 l 826 349 q 827 411 826 378 q 830 478 828 445 q 820 458 827 471 q 806 431 813 446 q 790 404 798 417 q 776 380 782 390 l 671 217 l 826 217 z "},"Â¿":{ha:591,x_min:46,x_max:567,o:"m 401 458 l 401 433 q 396 363 401 394 q 377 305 391 332 q 342 252 364 277 q 286 197 320 226 q 231 147 254 170 q 193 101 208 124 q 171 51 178 77 q 164 -12 164 24 q 174 -72 164 -45 q 204 -118 184 -98 q 252 -148 223 -137 q 318 -158 281 -158 q 426 -141 375 -158 q 524 -100 477 -123 l 567 -199 q 448 -247 511 -227 q 318 -267 384 -267 q 204 -249 255 -267 q 119 -199 154 -232 q 65 -120 84 -167 q 46 -14 46 -73 q 55 68 46 33 q 82 134 64 103 q 128 193 100 164 q 192 253 155 221 q 250 306 227 283 q 285 350 272 329 q 302 394 298 371 q 307 446 307 416 l 307 458 l 401 458 m 433 664 q 427 620 433 638 q 409 591 420 602 q 381 575 397 580 q 347 570 366 570 q 314 575 330 570 q 287 591 298 580 q 268 620 275 602 q 261 664 261 638 q 268 707 261 689 q 287 736 275 724 q 314 753 298 747 q 347 758 330 758 q 381 753 366 758 q 409 736 397 747 q 427 707 420 724 q 433 664 433 689 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 488 1071 l 406 1071 q 355 1118 382 1090 q 301 1176 327 1146 q 253 1233 275 1206 q 221 1279 232 1261 l 221 1293 l 370 1293 q 395 1243 380 1270 q 425 1188 410 1215 q 457 1135 441 1160 q 488 1089 473 1109 l 488 1071 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 362 1089 q 393 1135 377 1109 q 425 1188 409 1160 q 455 1243 441 1215 q 480 1293 469 1270 l 629 1293 l 629 1279 q 596 1233 618 1261 q 549 1176 575 1206 q 495 1118 523 1146 q 444 1071 468 1090 l 362 1071 l 362 1089 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 646 1071 l 564 1071 q 493 1127 530 1094 q 421 1197 456 1160 q 349 1127 385 1160 q 278 1071 313 1094 l 196 1071 l 196 1089 q 237 1135 214 1109 q 282 1188 260 1160 q 325 1243 305 1215 q 356 1293 345 1270 l 486 1293 q 517 1243 497 1270 q 560 1188 537 1215 q 606 1135 583 1160 q 646 1089 629 1109 l 646 1071 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 524 1072 q 470 1084 496 1072 q 417 1111 443 1096 q 368 1137 391 1125 q 322 1149 344 1149 q 275 1131 292 1149 q 250 1071 259 1113 l 179 1071 q 194 1145 182 1112 q 223 1201 205 1178 q 266 1237 241 1225 q 322 1250 291 1250 q 378 1238 351 1250 q 431 1212 406 1226 q 480 1186 457 1198 q 524 1174 504 1174 q 570 1192 554 1174 q 595 1251 585 1209 l 667 1251 q 652 1178 663 1211 q 623 1121 641 1145 q 580 1085 605 1098 q 524 1072 555 1072 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 231 1175 q 250 1228 231 1212 q 296 1244 269 1244 q 342 1228 322 1244 q 361 1175 361 1211 q 342 1122 361 1139 q 296 1105 322 1105 q 250 1122 269 1105 q 231 1175 231 1139 m 485 1175 q 504 1228 485 1212 q 550 1244 523 1244 q 575 1240 563 1244 q 595 1228 587 1236 q 610 1206 604 1219 q 615 1175 615 1194 q 595 1122 615 1139 q 550 1105 576 1105 q 504 1122 523 1105 q 485 1175 485 1139 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 575 1074 q 563 1011 575 1039 q 531 965 551 984 q 481 936 510 946 q 420 926 453 926 q 358 936 386 926 q 310 965 330 946 q 279 1011 290 984 q 269 1072 269 1038 q 279 1134 269 1107 q 310 1179 290 1160 q 358 1208 330 1198 q 420 1218 386 1218 q 481 1208 452 1218 q 530 1180 509 1198 q 563 1134 551 1161 q 575 1074 575 1107 m 496 1072 q 474 1128 496 1108 q 420 1149 453 1149 q 365 1128 386 1149 q 343 1072 343 1108 q 362 1016 343 1036 q 420 996 382 996 q 474 1016 453 996 q 496 1072 496 1036 z "},"Ã":{ha:1183,x_min:-1,x_max:1100,o:"m 1100 0 l 585 0 l 585 307 l 262 307 l 125 0 l -1 0 l 443 991 l 1100 991 l 1100 880 l 711 880 l 711 574 l 1074 574 l 1074 464 l 711 464 l 711 111 l 1100 111 l 1100 0 m 311 419 l 585 419 l 585 880 l 511 880 l 311 419 z "},"Ã":{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 m 621 -195 q 573 -297 621 -260 q 424 -334 526 -334 q 394 -332 409 -334 q 368 -328 378 -330 l 368 -254 q 395 -257 378 -256 q 422 -258 412 -258 q 498 -244 471 -258 q 525 -196 525 -229 q 516 -168 525 -180 q 492 -147 507 -156 q 455 -132 476 -138 q 408 -119 433 -125 l 469 0 l 551 0 l 513 -78 q 555 -92 536 -83 q 590 -115 575 -101 q 613 -149 604 -129 q 621 -195 621 -168 z "},"Ã":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 484 1071 l 402 1071 q 351 1118 378 1090 q 297 1176 323 1146 q 249 1233 271 1206 q 217 1279 228 1261 l 217 1293 l 366 1293 q 391 1243 376 1270 q 421 1188 406 1215 q 453 1135 437 1160 q 484 1089 469 1109 l 484 1071 z "},"Ã":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 309 1089 q 340 1135 324 1109 q 372 1188 356 1160 q 402 1243 388 1215 q 427 1293 416 1270 l 576 1293 l 576 1279 q 544 1233 565 1261 q 496 1176 522 1206 q 443 1118 470 1146 q 391 1071 415 1090 l 309 1071 l 309 1089 z "},"Ã":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 615 1071 l 533 1071 q 462 1127 498 1094 q 390 1197 425 1160 q 317 1127 353 1160 q 247 1071 281 1094 l 165 1071 l 165 1089 q 205 1135 182 1109 q 251 1188 229 1160 q 294 1243 274 1215 q 325 1293 314 1270 l 455 1293 q 486 1243 466 1270 q 529 1188 506 1215 q 575 1135 551 1160 q 615 1089 598 1109 l 615 1071 z "},"Ã":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 201 1175 q 220 1228 201 1212 q 266 1244 239 1244 q 312 1228 292 1244 q 332 1175 332 1211 q 312 1122 332 1139 q 266 1105 292 1105 q 220 1122 239 1105 q 201 1175 201 1139 m 455 1175 q 474 1228 455 1212 q 520 1244 493 1244 q 545 1240 533 1244 q 566 1228 557 1236 q 580 1206 574 1219 q 585 1175 585 1194 q 566 1122 585 1139 q 520 1105 546 1105 q 474 1122 493 1105 q 455 1175 455 1139 z "},"Ã":{ha:471,x_min:42,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 309 1071 l 227 1071 q 176 1118 203 1090 q 122 1176 148 1146 q 74 1233 96 1206 q 42 1279 53 1261 l 42 1293 l 191 1293 q 216 1243 201 1270 q 246 1188 231 1215 q 278 1135 262 1160 q 309 1089 294 1109 l 309 1071 z "},"Ã":{ha:471,x_min:56,x_max:441,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 174 1089 q 205 1135 189 1109 q 237 1188 221 1160 q 267 1243 253 1215 q 292 1293 281 1270 l 441 1293 l 441 1279 q 409 1233 430 1261 q 361 1176 387 1206 q 308 1118 335 1146 q 256 1071 280 1090 l 174 1071 l 174 1089 z "},"Ã":{ha:471,x_min:12,x_max:462,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 462 1071 l 380 1071 q 309 1127 345 1094 q 237 1197 272 1160 q 164 1127 200 1160 q 94 1071 128 1094 l 12 1071 l 12 1089 q 52 1135 29 1109 q 98 1188 75 1160 q 141 1243 121 1215 q 172 1293 161 1270 l 302 1293 q 333 1243 313 1270 q 375 1188 353 1215 q 421 1135 398 1160 q 462 1089 445 1109 l 462 1071 z "},"Ã":{ha:471,x_min:43,x_max:428,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 43 1175 q 62 1228 43 1212 q 109 1244 81 1244 q 155 1228 135 1244 q 174 1175 174 1211 q 155 1122 174 1139 q 109 1105 135 1105 q 62 1122 81 1105 q 43 1175 43 1139 m 298 1175 q 317 1228 298 1212 q 363 1244 336 1244 q 388 1240 376 1244 q 408 1228 399 1236 q 422 1206 417 1219 q 428 1175 428 1194 q 408 1122 428 1139 q 363 1105 389 1105 q 317 1122 336 1105 q 298 1175 298 1139 z "},"Ã":{ha:950,x_min:32,x_max:865,o:"m 32 546 l 135 546 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 436 l 32 436 l 32 546 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 546 l 489 546 l 489 436 l 261 436 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},"Ã":{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 m 614 1072 q 560 1084 587 1072 q 507 1111 533 1096 q 458 1137 481 1125 q 412 1149 434 1149 q 366 1131 382 1149 q 340 1071 349 1113 l 269 1071 q 284 1145 273 1112 q 313 1201 295 1178 q 356 1237 331 1225 q 412 1250 381 1250 q 468 1238 441 1250 q 522 1212 496 1226 q 571 1186 547 1198 q 614 1174 594 1174 q 660 1192 644 1174 q 686 1251 675 1209 l 757 1251 q 742 1178 753 1211 q 713 1121 731 1145 q 670 1085 695 1098 q 614 1072 645 1072 z "},"Ã":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 590 1071 l 509 1071 q 457 1118 485 1090 q 403 1176 429 1146 q 356 1233 377 1206 q 323 1279 334 1261 l 323 1293 l 472 1293 q 497 1243 483 1270 q 528 1188 512 1215 q 559 1135 543 1160 q 590 1089 576 1109 l 590 1071 z "},"Ã":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 441 1089 q 472 1135 456 1109 q 504 1188 488 1160 q 534 1243 520 1215 q 559 1293 549 1270 l 708 1293 l 708 1279 q 676 1233 697 1261 q 628 1176 654 1206 q 575 1118 602 1146 q 524 1071 547 1090 l 441 1071 l 441 1089 z "},"Ã":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 743 1071 l 661 1071 q 590 1127 627 1094 q 518 1197 553 1160 q 446 1127 481 1160 q 375 1071 410 1094 l 293 1071 l 293 1089 q 334 1135 311 1109 q 379 1188 357 1160 q 422 1243 402 1215 q 453 1293 442 1270 l 583 1293 q 614 1243 594 1270 q 657 1188 634 1215 q 703 1135 680 1160 q 743 1089 726 1109 l 743 1071 z "},"Ã":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 604 1072 q 550 1084 577 1072 q 498 1111 524 1096 q 448 1137 472 1125 q 403 1149 425 1149 q 356 1131 372 1149 q 330 1071 340 1113 l 260 1071 q 274 1145 263 1112 q 303 1201 286 1178 q 347 1237 321 1225 q 403 1250 372 1250 q 459 1238 431 1250 q 512 1212 486 1226 q 561 1186 538 1198 q 604 1174 585 1174 q 650 1192 635 1174 q 676 1251 666 1209 l 747 1251 q 733 1178 744 1211 q 704 1121 722 1145 q 661 1085 686 1098 q 604 1072 635 1072 z "},"Ã":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 323 1175 q 342 1228 323 1212 q 389 1244 361 1244 q 435 1228 415 1244 q 454 1175 454 1211 q 435 1122 454 1139 q 389 1105 415 1105 q 342 1122 361 1105 q 323 1175 323 1139 m 578 1175 q 597 1228 578 1212 q 643 1244 616 1244 q 668 1240 656 1244 q 688 1228 680 1236 q 703 1206 697 1219 q 708 1175 708 1194 q 688 1122 708 1139 q 643 1105 669 1105 q 597 1122 616 1105 q 578 1175 578 1139 z "},"Ã":{ha:765,x_min:96,x_max:671,o:"m 311 490 l 96 707 l 167 778 l 382 562 l 600 778 l 671 708 l 453 490 l 669 273 l 600 204 l 382 419 l 167 205 l 97 275 l 311 490 z "},"Ã":{ha:1031,x_min:85,x_max:945,o:"m 882 986 l 819 885 q 913 720 881 818 q 945 497 945 621 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 297 35 387 -14 l 244 -52 l 151 1 l 212 100 q 116 269 146 168 q 85 498 85 370 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 635 993 581 1007 q 734 953 690 979 l 789 1039 l 882 986 m 218 497 q 234 337 218 408 q 282 214 250 267 l 675 854 q 604 885 642 874 q 517 896 565 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 811 497 q 751 774 811 671 l 359 136 q 430 107 391 117 q 515 97 469 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 z "},"Ã":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 574 1071 l 493 1071 q 441 1118 469 1090 q 388 1176 414 1146 q 340 1233 361 1206 q 308 1279 319 1261 l 308 1293 l 456 1293 q 482 1243 467 1270 q 512 1188 496 1215 q 544 1135 528 1160 q 574 1089 560 1109 l 574 1071 z "},"Ã":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 400 1089 q 431 1135 415 1109 q 463 1188 447 1160 q 493 1243 479 1215 q 518 1293 507 1270 l 667 1293 l 667 1279 q 634 1233 656 1261 q 587 1176 613 1206 q 533 1118 561 1146 q 482 1071 506 1090 l 400 1071 l 400 1089 z "},"Ã":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 707 1071 l 625 1071 q 554 1127 591 1094 q 482 1197 517 1160 q 410 1127 446 1160 q 339 1071 374 1094 l 257 1071 l 257 1089 q 298 1135 275 1109 q 343 1188 321 1160 q 386 1243 366 1215 q 417 1293 406 1270 l 547 1293 q 578 1243 558 1270 q 621 1188 598 1215 q 667 1135 644 1160 q 707 1089 690 1109 l 707 1071 z "},"Ã":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 293 1175 q 312 1228 293 1212 q 358 1244 331 1244 q 404 1228 385 1244 q 424 1175 424 1211 q 404 1122 424 1139 q 358 1105 385 1105 q 312 1122 331 1105 q 293 1175 293 1139 m 547 1175 q 566 1228 547 1212 q 612 1244 585 1244 q 637 1240 625 1244 q 658 1228 649 1236 q 672 1206 667 1219 q 677 1175 677 1194 q 658 1122 677 1139 q 612 1105 638 1105 q 566 1122 585 1105 q 547 1175 547 1139 z "},"Ã":{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 m 300 1089 q 331 1135 315 1109 q 362 1188 347 1160 q 393 1243 378 1215 q 418 1293 407 1270 l 566 1293 l 566 1279 q 534 1233 555 1261 q 487 1176 513 1206 q 433 1118 460 1146 q 382 1071 406 1090 l 300 1071 l 300 1089 z "},"Ã":{ha:800,x_min:135,x_max:729,o:"m 729 530 q 710 412 729 469 q 649 311 692 355 q 536 241 606 267 q 363 215 466 215 l 261 215 l 261 0 l 135 0 l 135 991 l 261 991 l 261 821 l 380 821 q 537 801 471 821 q 646 745 603 782 q 709 654 688 708 q 729 530 729 600 m 261 322 l 349 322 q 459 333 412 322 q 537 368 506 344 q 583 430 568 392 q 599 524 599 469 q 543 667 599 621 q 370 713 488 713 l 261 713 l 261 322 z "},"Ã":{ha:836,x_min:118,x_max:774,o:"m 685 854 q 670 786 685 816 q 634 731 656 755 q 588 686 613 706 q 541 647 562 665 q 505 610 519 628 q 490 571 490 591 q 495 546 490 557 q 513 521 500 534 q 550 491 526 508 q 612 449 574 475 q 680 399 650 424 q 731 347 710 375 q 763 287 751 319 q 774 212 774 254 q 755 111 774 153 q 702 40 736 68 q 620 0 667 13 q 514 -14 572 -14 q 401 -2 448 -14 q 318 33 354 10 l 318 146 q 358 124 336 135 q 404 106 380 114 q 454 93 429 98 q 505 87 480 87 q 571 96 543 87 q 616 120 598 104 q 642 157 633 135 q 650 205 650 178 q 644 250 650 230 q 624 289 638 270 q 585 328 609 308 q 522 371 560 347 q 451 421 479 398 q 404 467 422 444 q 378 513 386 490 q 371 566 371 537 q 385 629 371 602 q 420 677 399 656 q 465 717 441 699 q 511 755 490 735 q 546 797 532 774 q 559 850 559 820 q 548 899 559 878 q 517 934 537 920 q 468 955 496 948 q 406 961 440 961 q 342 955 372 961 q 290 932 313 948 q 255 887 268 916 q 241 815 241 859 l 241 0 l 118 0 l 118 814 q 139 932 118 884 q 199 1009 161 980 q 290 1050 237 1038 q 406 1063 343 1063 q 519 1050 468 1063 q 608 1011 571 1037 q 665 946 644 985 q 685 854 685 907 z "},"Ã ":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"Ã¡":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 302 860 q 333 905 317 880 q 365 959 349 931 q 395 1014 381 986 q 420 1064 410 1041 l 569 1064 l 569 1050 q 537 1004 558 1031 q 489 947 515 977 q 436 889 463 917 q 385 842 408 861 l 302 842 l 302 860 z "},"Ã¢":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 605 842 l 523 842 q 452 898 488 865 q 380 968 415 930 q 307 898 343 930 q 237 842 271 865 l 155 842 l 155 860 q 195 905 172 880 q 241 959 218 931 q 284 1014 264 986 q 315 1064 304 1041 l 445 1064 q 476 1014 456 1041 q 518 959 496 986 q 565 905 541 931 q 605 860 588 880 l 605 842 z "},"Ã£":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 474 843 q 420 855 447 843 q 368 881 393 867 q 318 908 342 896 q 273 920 294 920 q 226 902 242 920 q 200 842 210 884 l 130 842 q 144 916 133 882 q 173 972 155 949 q 216 1008 191 996 q 273 1021 241 1021 q 329 1009 301 1021 q 382 983 356 997 q 431 957 408 968 q 474 945 454 945 q 520 962 505 945 q 546 1022 536 980 l 617 1022 q 603 948 614 981 q 573 892 591 916 q 530 856 555 869 q 474 843 505 843 z "},"Ã¤":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 185 946 q 204 999 185 983 q 250 1015 223 1015 q 296 999 277 1015 q 316 946 316 982 q 296 893 316 910 q 250 876 277 876 q 204 893 223 876 q 185 946 185 910 m 439 946 q 458 999 439 983 q 505 1015 477 1015 q 529 1011 517 1015 q 550 999 541 1007 q 564 977 559 990 q 570 946 570 964 q 550 893 570 910 q 505 876 530 876 q 458 893 477 876 q 439 946 439 910 z "},"Ã¥":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 531 989 q 519 927 531 954 q 487 880 507 899 q 437 851 466 861 q 376 842 409 842 q 314 851 342 842 q 266 880 286 861 q 235 926 246 899 q 224 987 224 953 q 235 1049 224 1022 q 266 1095 246 1076 q 314 1123 286 1114 q 376 1133 342 1133 q 437 1123 408 1133 q 486 1095 465 1114 q 519 1049 507 1076 q 531 989 531 1023 m 452 987 q 430 1044 452 1023 q 376 1064 409 1064 q 320 1044 342 1064 q 299 987 299 1023 q 318 931 299 951 q 376 911 338 911 q 430 931 409 911 q 452 987 452 951 z "},"Ã¦":{ha:1157,x_min:64,x_max:1088,o:"m 64 208 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 503 729 447 758 q 589 637 559 701 q 680 727 623 695 q 806 758 736 758 q 924 734 871 758 q 1013 666 976 710 q 1068 561 1049 623 q 1088 425 1088 500 l 1088 349 l 632 349 q 685 156 635 218 q 835 94 735 94 q 897 98 868 94 q 952 107 926 101 q 1004 124 979 114 q 1054 146 1029 134 l 1054 36 q 1002 14 1027 23 q 950 -2 977 4 q 894 -11 923 -8 q 832 -14 865 -14 q 670 25 739 -14 q 559 142 602 64 q 511 76 536 105 q 453 27 485 47 q 381 -3 420 7 q 292 -14 342 -14 q 202 0 243 -14 q 130 40 160 13 q 81 110 99 68 q 64 208 64 151 m 192 207 q 225 115 192 144 q 311 86 258 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 m 803 656 q 685 603 728 656 q 635 449 642 550 l 954 449 q 945 533 954 495 q 918 599 937 572 q 871 641 899 626 q 803 656 842 656 z "},"Ã§":{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 m 495 -195 q 447 -297 495 -260 q 298 -334 399 -334 q 268 -332 283 -334 q 242 -328 252 -330 l 242 -254 q 269 -257 252 -256 q 296 -258 286 -258 q 372 -244 345 -258 q 399 -196 399 -229 q 390 -168 399 -180 q 366 -147 381 -156 q 329 -132 350 -138 q 282 -119 307 -125 l 343 0 l 425 0 l 387 -78 q 429 -92 410 -83 q 464 -115 449 -101 q 487 -149 478 -129 q 495 -195 495 -168 z "},"Ã¨":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"Ã©":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 322 860 q 353 905 337 880 q 385 959 369 931 q 415 1014 401 986 q 440 1064 429 1041 l 589 1064 l 589 1050 q 556 1004 578 1031 q 509 947 535 977 q 455 889 483 917 q 404 842 428 861 l 322 842 l 322 860 z "},"Ãª":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 602 842 l 520 842 q 449 898 486 865 q 377 968 412 930 q 304 898 340 930 q 234 842 269 865 l 152 842 l 152 860 q 193 905 170 880 q 238 959 216 931 q 281 1014 261 986 q 312 1064 301 1041 l 442 1064 q 473 1014 453 1041 q 516 959 493 986 q 562 905 538 931 q 602 860 585 880 l 602 842 z "},"Ã«":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 182 946 q 201 999 182 983 q 248 1015 220 1015 q 294 999 274 1015 q 313 946 313 982 q 294 893 313 910 q 248 876 274 876 q 201 893 220 876 q 182 946 182 910 m 437 946 q 456 999 437 983 q 502 1015 475 1015 q 527 1011 515 1015 q 547 999 538 1007 q 562 977 556 990 q 567 946 567 964 q 547 893 567 910 q 502 876 528 876 q 456 893 475 876 q 437 946 437 910 z "},"Ã¬":{ha:359,x_min:-23,x_max:243,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 243 842 l 162 842 q 111 889 138 861 q 57 947 83 917 q 9 1004 31 977 q -23 1050 -12 1031 l -23 1064 l 125 1064 q 151 1014 136 1041 q 181 959 165 986 q 213 905 197 931 q 243 860 229 880 l 243 842 z "},"Ã­":{ha:359,x_min:118,x_max:392,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 125 860 q 156 905 140 880 q 188 959 172 931 q 218 1014 204 986 q 243 1064 233 1041 l 392 1064 l 392 1050 q 360 1004 381 1031 q 312 947 338 977 q 259 889 286 917 q 208 842 231 861 l 125 842 l 125 860 z "},"Ã®":{ha:359,x_min:-45,x_max:405,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 405 842 l 323 842 q 252 898 288 865 q 180 968 215 930 q 107 898 143 930 q 37 842 71 865 l -45 842 l -45 860 q -5 905 -28 880 q 41 959 18 931 q 84 1014 64 986 q 115 1064 104 1041 l 245 1064 q 276 1014 256 1041 q 318 959 296 986 q 365 905 341 931 q 405 860 388 880 l 405 842 z "},"Ã¯":{ha:359,x_min:-12,x_max:372,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m -12 946 q 7 999 -12 983 q 53 1015 26 1015 q 99 999 79 1015 q 119 946 119 982 q 99 893 119 910 q 53 876 79 876 q 7 893 26 876 q -12 946 -12 910 m 242 946 q 261 999 242 983 q 307 1015 280 1015 q 332 1011 320 1015 q 353 999 344 1007 q 367 977 361 990 q 372 946 372 964 q 353 893 372 910 q 307 876 333 876 q 261 893 280 876 q 242 946 242 910 z "},"Ã°":{ha:802,x_min:75,x_max:725,o:"m 725 389 q 702 218 725 292 q 637 92 680 143 q 534 13 595 40 q 399 -14 474 -14 q 269 9 328 -14 q 166 74 210 31 q 99 180 123 117 q 75 323 75 243 q 97 467 75 404 q 158 572 118 529 q 255 636 198 614 q 383 659 312 659 q 505 638 452 659 q 586 578 557 618 l 591 581 q 530 726 570 661 q 428 846 489 791 l 254 742 l 204 819 l 351 908 q 295 946 324 927 q 235 982 267 964 l 282 1065 q 368 1019 326 1044 q 449 965 409 995 l 603 1059 l 653 982 l 521 903 q 604 806 566 859 q 668 689 642 753 q 710 551 695 626 q 725 389 725 476 m 597 357 q 586 431 597 395 q 551 495 574 467 q 490 540 527 523 q 401 557 452 557 q 312 541 349 557 q 252 496 275 526 q 217 421 228 466 q 205 319 205 377 q 217 225 205 268 q 252 153 228 183 q 313 105 276 122 q 401 89 350 89 q 552 156 506 89 q 597 357 597 224 z "},"Ã±":{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 m 515 843 q 461 855 488 843 q 408 881 434 867 q 359 908 382 896 q 313 920 335 920 q 267 902 283 920 q 241 842 250 884 l 170 842 q 185 916 174 882 q 214 972 196 949 q 257 1008 232 996 q 313 1021 282 1021 q 369 1009 342 1021 q 422 983 397 997 q 472 957 448 968 q 515 945 495 945 q 561 962 545 945 q 587 1022 576 980 l 658 1022 q 643 948 654 981 q 614 892 632 916 q 571 856 596 869 q 515 843 546 843 z "},"Ã²":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 506 842 l 425 842 q 373 889 401 861 q 319 947 345 917 q 272 1004 293 977 q 239 1050 250 1031 l 239 1064 l 388 1064 q 413 1014 399 1041 q 444 959 428 986 q 475 905 459 931 q 506 860 492 880 l 506 842 z "},"Ã³":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 321 860 q 352 905 336 880 q 384 959 368 931 q 414 1014 399 986 q 439 1064 428 1041 l 587 1064 l 587 1050 q 555 1004 576 1031 q 508 947 534 977 q 454 889 481 917 q 403 842 427 861 l 321 842 l 321 860 z "},"Ã´":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 622 842 l 540 842 q 469 898 505 865 q 397 968 432 930 q 324 898 360 930 q 254 842 288 865 l 172 842 l 172 860 q 212 905 189 880 q 258 959 235 931 q 301 1014 281 986 q 332 1064 321 1041 l 462 1064 q 493 1014 473 1041 q 535 959 513 986 q 582 905 558 931 q 622 860 605 880 l 622 842 z "},"Ãµ":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 499 843 q 445 855 472 843 q 393 881 418 867 q 343 908 367 896 q 298 920 319 920 q 251 902 267 920 q 225 842 235 884 l 155 842 q 169 916 158 882 q 198 972 180 949 q 241 1008 216 996 q 298 1021 267 1021 q 354 1009 326 1021 q 407 983 381 997 q 456 957 433 968 q 499 945 479 945 q 545 962 530 945 q 571 1022 561 980 l 642 1022 q 628 948 639 981 q 598 892 616 916 q 555 856 581 869 q 499 843 530 843 z "},"Ã¶":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 203 946 q 222 999 203 983 q 269 1015 241 1015 q 315 999 295 1015 q 334 946 334 982 q 315 893 334 910 q 269 876 295 876 q 222 893 241 876 q 203 946 203 910 m 458 946 q 477 999 458 983 q 523 1015 496 1015 q 548 1011 536 1015 q 568 999 559 1007 q 583 977 577 990 q 588 946 588 964 q 568 893 588 910 q 523 876 549 876 q 477 893 496 876 q 458 946 458 910 z "},"Ã·":{ha:765,x_min:69,x_max:696,o:"m 69 439 l 69 541 l 696 541 l 696 439 l 69 439 m 304 253 q 311 293 304 277 q 327 319 317 309 q 352 333 338 329 q 382 338 366 338 q 412 333 397 338 q 437 319 426 329 q 454 293 448 309 q 460 253 460 277 q 454 215 460 231 q 437 188 448 199 q 412 173 426 178 q 382 168 397 168 q 352 173 366 168 q 327 188 338 178 q 311 215 317 199 q 304 253 304 231 m 304 726 q 311 766 304 750 q 327 792 317 782 q 352 807 338 802 q 382 811 366 811 q 412 807 397 811 q 437 792 426 802 q 454 766 448 782 q 460 726 460 750 q 454 688 460 704 q 437 662 448 672 q 412 646 426 651 q 382 642 397 642 q 352 646 366 642 q 327 662 338 651 q 311 688 317 672 q 304 726 304 704 z "},"Ã¸":{ha:802,x_min:78,x_max:726,o:"m 726 374 q 704 209 726 281 q 638 87 681 136 q 536 12 596 38 q 400 -14 475 -14 q 249 22 315 -14 l 203 -52 l 114 -1 l 168 87 q 102 209 125 136 q 78 374 78 281 q 101 537 78 466 q 165 658 123 609 q 268 733 208 707 q 404 758 329 758 q 485 748 447 758 q 557 720 524 739 l 603 793 l 692 743 l 637 656 q 703 535 680 606 q 726 374 726 465 m 205 374 q 212 272 205 317 q 233 193 218 228 l 503 632 q 457 650 483 644 q 401 656 432 656 q 251 586 297 656 q 205 374 205 515 m 599 374 q 572 549 599 481 l 302 111 q 348 94 323 100 q 403 89 372 89 q 553 160 507 89 q 599 374 599 232 z "},"Ã¹":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 470 842 l 389 842 q 337 889 365 861 q 283 947 309 917 q 236 1004 257 977 q 203 1050 214 1031 l 203 1064 l 352 1064 q 377 1014 363 1041 q 408 959 392 986 q 439 905 423 931 q 470 860 456 880 l 470 842 z "},"Ãº":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 332 860 q 362 905 347 880 q 394 959 378 931 q 425 1014 410 986 q 450 1064 439 1041 l 598 1064 l 598 1050 q 566 1004 587 1031 q 518 947 545 977 q 465 889 492 917 q 414 842 437 861 l 332 842 l 332 860 z "},"Ã»":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 631 842 l 549 842 q 477 898 514 865 q 406 968 441 930 q 333 898 369 930 q 262 842 297 865 l 180 842 l 180 860 q 221 905 198 880 q 267 959 244 931 q 310 1014 290 986 q 340 1064 330 1041 l 471 1064 q 502 1014 481 1041 q 544 959 522 986 q 590 905 567 931 q 631 860 614 880 l 631 842 z "},"Ã¼":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 210 946 q 229 999 210 983 q 275 1015 248 1015 q 321 999 301 1015 q 340 946 340 982 q 321 893 340 910 q 275 876 301 876 q 229 893 248 876 q 210 946 210 910 m 464 946 q 483 999 464 983 q 529 1015 502 1015 q 554 1011 542 1015 q 574 999 566 1007 q 589 977 583 990 q 594 946 594 964 q 574 893 594 910 q 529 876 555 876 q 483 893 502 876 q 464 946 464 910 z "},"Ã½":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 276 860 q 307 905 291 880 q 339 959 323 931 q 369 1014 355 986 q 394 1064 383 1041 l 543 1064 l 543 1050 q 510 1004 532 1031 q 463 947 489 977 q 409 889 437 917 q 358 842 382 861 l 276 842 l 276 860 z "},"Ã¾":{ha:814,x_min:118,x_max:737,o:"m 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 1055 l 241 1055 l 241 745 l 236 644 l 241 644 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},"Ã¿":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 155 946 q 174 999 155 983 q 220 1015 193 1015 q 266 999 246 1015 q 286 946 286 982 q 266 893 286 910 q 220 876 246 876 q 174 893 193 876 q 155 946 155 910 m 409 946 q 428 999 409 983 q 474 1015 447 1015 q 499 1011 487 1015 q 519 999 511 1007 q 534 977 528 990 q 539 946 539 964 q 519 893 539 910 q 474 876 500 876 q 428 893 447 876 q 409 946 409 910 z "},"Ä±":{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 z "},"Ë":{ha:802,x_min:175,x_max:625,o:"m 625 842 l 543 842 q 472 898 509 865 q 400 968 435 930 q 328 898 363 930 q 257 842 292 865 l 175 842 l 175 860 q 216 905 193 880 q 261 959 239 931 q 304 1014 284 986 q 335 1064 324 1041 l 465 1064 q 496 1014 476 1041 q 539 959 516 986 q 585 905 562 931 q 625 860 608 880 l 625 842 z "},"Ë":{ha:802,x_min:248,x_max:554,o:"m 554 989 q 542 927 554 954 q 510 880 530 899 q 460 851 489 861 q 399 842 432 842 q 337 851 365 842 q 289 880 309 861 q 258 926 269 899 q 248 987 248 953 q 258 1049 248 1022 q 289 1095 269 1076 q 337 1123 309 1114 q 399 1133 365 1133 q 460 1123 431 1133 q 509 1095 488 1114 q 542 1049 530 1076 q 554 989 554 1023 m 475 987 q 453 1044 475 1023 q 399 1064 432 1064 q 343 1044 365 1064 q 322 987 322 1023 q 341 931 322 951 q 399 911 361 911 q 453 931 432 911 q 475 987 475 951 z "},"Ë":{ha:802,x_min:175,x_max:663,o:"m 519 843 q 466 855 492 843 q 413 881 439 867 q 363 908 387 896 q 318 920 340 920 q 271 902 288 920 q 245 842 255 884 l 175 842 q 190 916 178 882 q 219 972 201 949 q 262 1008 237 996 q 318 1021 287 1021 q 374 1009 347 1021 q 427 983 401 997 q 476 957 453 968 q 519 945 500 945 q 566 962 550 945 q 591 1022 581 980 l 663 1022 q 648 948 659 981 q 619 892 637 916 q 576 856 601 869 q 519 843 551 843 z "},"â":{ha:694,x_min:56,x_max:639,o:"m 56 315 l 56 429 l 639 429 l 639 315 l 56 315 z "},"â":{ha:1389,x_min:56,x_max:1333,o:"m 56 315 l 56 429 l 1333 429 l 1333 315 l 56 315 z "},"â":{ha:243,x_min:16,x_max:228,o:"m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"â":{ha:243,x_min:16,x_max:228,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 z "},"â":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"â":{ha:504,x_min:16,x_max:489,o:"m 286 652 l 277 667 q 299 745 286 703 q 328 828 313 786 q 361 912 344 870 q 396 991 379 954 l 489 991 q 469 905 479 950 q 450 816 459 861 q 434 730 441 772 q 421 652 427 688 l 286 652 m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"â":{ha:504,x_min:16,x_max:489,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 m 479 991 l 489 977 q 466 898 479 939 q 437 815 453 857 q 404 731 421 772 q 370 652 387 690 l 277 652 q 296 737 286 692 q 315 827 306 782 q 332 913 324 871 q 345 991 339 956 l 479 991 z "},"â":{ha:608,x_min:43,x_max:517,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 507 161 l 517 146 q 494 68 507 109 q 465 -16 481 26 q 432 -99 449 -58 q 397 -179 414 -141 l 304 -179 q 324 -93 314 -138 q 343 -4 334 -48 q 359 83 352 41 q 372 161 367 125 l 507 161 z "},"â¢":{ha:522,x_min:102,x_max:421,o:"m 102 507 q 114 589 102 555 q 148 645 126 623 q 198 675 169 666 q 261 685 227 685 q 323 675 294 685 q 374 645 353 666 q 409 589 396 623 q 421 507 421 555 q 409 426 421 460 q 374 371 396 392 q 323 339 353 349 q 261 329 294 329 q 198 339 227 329 q 148 371 169 349 q 114 426 126 392 q 102 507 102 460 z "},"â¹":{ha:400,x_min:56,x_max:345,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 z "},"âº":{ha:400,x_min:56,x_max:345,o:"m 345 357 l 135 78 l 56 131 l 216 367 l 56 603 l 135 656 l 345 375 l 345 357 z "},"â":{ha:180,x_min:-239,x_max:418,o:"m 418 991 l -132 0 l -239 0 l 311 991 l 418 991 z "}},familyName:"Droid Sans",ascender:1293,descender:-334,underlinePosition:-154,underlineThickness:102,boundingBox:{yMin:-492,xMin:-352,yMax:1907,xMax:1966},resolution:1e3,original_font_information:{format:0,copyright:"Digitized data copyright Â© 2007, Google Corporation.",fontFamily:"Droid Sans",fontSubfamily:"Regular",uniqueID:"Ascender - Droid Sans",fullName:"Droid Sans",version:"Version 1.00 build 113",postScriptName:"DroidSans",trademark:"Droid is a trademark of Google and may be registered in certain jurisdictions.",manufacturer:"Ascender Corporation",description:"Droid Sans is a humanist sans serif typeface designed for user interfaces and electronic communication.",manufacturerURL:"http://www.ascendercorp.com/",designerURL:"http://www.ascendercorp.com/typedesigners.html",licence:"Licensed under the Apache License, Version 2.0",licenceURL:"http://Â®www.apache.org/licenses/LICENSE-2.0",compatibleFullName:"Droid Sans"},cssFontWeight:"normal",cssFontStyle:"normal"},ll=new(function(){function t(){Object(r.t)(this,t),this.fonts={},this.getFont=this.getFont.bind(this)}return Object(r.s)(t,[{key:"getFont",value:function(t){if(this.fonts[t])return this.fonts[t];if(!t)return Promise.resolve(hl);switch(t){case"arrival":return this.fonts[t]=n.e(1).then(n.bind(null,596)).then((function(t){return cl(t)})),this.fonts[t];case"chalet-parisnineteensixty":return this.fonts[t]=n.e(2).then(n.bind(null,597)).then((function(t){return cl(t)})),this.fonts[t];case"helvetica neue":return this.fonts[t]=n.e(3).then(n.bind(null,598)).then((function(t){return cl(t)})),this.fonts[t];case"helvetiker":return this.fonts[t]=n.e(4).then(n.bind(null,599)).then((function(t){return cl(t)})),this.fonts[t];case"lato":return this.fonts[t]=n.e(5).then(n.bind(null,600)).then((function(t){return cl(t)})),this.fonts[t];case"myriad pro":return this.fonts[t]=n.e(7).then(n.bind(null,601)).then((function(t){return cl(t)})),this.fonts[t];case"proxima nova medium":return this.fonts[t]=n.e(8).then(n.bind(null,602)).then((function(t){return cl(t)})),this.fonts[t];case"simon circular book":return this.fonts[t]=n.e(9).then(n.bind(null,603)).then((function(t){return cl(t)})),this.fonts[t];default:return Promise.resolve(hl)}}}]),t}()),cl=function(t){var e={},n={};Object.keys(ul.glyphs).forEach((function(t){n[t]=ul.glyphs[t]})),Object.keys(t.glyphs).forEach((function(e){n[e]=t.glyphs[e]})),Object.keys(ul).forEach((function(t){e[t]=ul[t]})),e.glyphs=n;var r=new i.Font(e);r._mSupportedCharacters=Object.keys(e.glyphs).join("");var o=r._mSupportedCharacters.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return r._mInvalidCharacters=new RegExp("[^"+o+"]","g"),r},hl=cl(ul),fl="x",dl="y",pl="z",ml=function(t){function e(t,n,i){var o;Object(r.t)(this,e),(o=Object(r.F)(this,Object(r.G)(e).call(this))).polygon=void 0,o.mapClass=void 0,o.container=void 0,o.visible=void 0,o.polygon=t,o.mapClass=n,o.container=i;var a=!1!==t.geometry.visible,s=t.image&&t.image.visible&&(t.image.url||t.image.original),u=t.label&&t.label.visible&&t.label.text;return(a||s||u)&&e._setPolygonDefaults(t),o.visible=a,o.imageVisible=s,o.labelVisible=u,o.load.bind(Object(r.H)(o)),o}return Object(r.E)(e,r.v),Object(r.s)(e,null,[{key:"getDefaultMaterial",value:function(){return e.defaultMaterial||(e.defaultMaterial=new i.MeshLambertMaterial({color:0})),e.defaultMaterial}},{key:"getTextureLoader",value:function(){return e.textureLoader||(e.textureLoader=new i.TextureLoader),e.textureLoader}},{key:"getWeightedCenter",value:function(t){var e=t.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0});return e.x/=t.length,e.y/=t.length,e}},{key:"getBoundingCentre",value:function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach((function(t){t.x>r&&(r=t.x),t.x<e&&(e=t.x),t.y>i&&(i=t.y),t.y<n&&(n=t.y)})),{x:(e+r)/2,y:(n+i)/2}}},{key:"_makeFromCoords",value:function(t,e,n){var r=new t;return r.moveTo(e[0].x-n.width/2,-e[0].y+n.height/2),e.slice(1).forEach((function(t){return r.lineTo(t.x-n.width/2,-t.y+n.height/2)})),r.lineTo(e[0].x-n.width/2,-e[0].y+n.height/2),r}},{key:"_setPolygonDefaults",value:function(t){var e={visible:!0,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:5},bevel:{size:0,thickness:0,segments:1},offset:0};return t.layer||(t.layer="Polygon"),t.geometry=Xu(t.geometry,e),t.geometry.bevel=Xu(t.geometry.bevel,e.bevel),t.image&&(t.image.position=Xu(t.image.position,e.position),t.image.rotation=Xu(t.image.rotation,e.rotation),t.image.scale=Xu(t.image.scale,e.scale)),t.label&&(t.label.position=Xu(t.label.position,e.position),t.label.rotation=Xu(t.label.rotation,e.rotation),t.label.scale=Xu(t.label.scale,e.scale),t.label.color=t.label.color||"#000000",t.label.fontSize=t.label.fontSize||20),t}}]),Object(r.s)(e,[{key:"getBoundingBox",value:function(){if(this.boundingBox)return this.boundingBox;var t=1/0,e=1/0,n=-1/0,r=-1/0,i=-this.mapClass.width/2,o=this.mapClass.height/2;return this.polygon.vertexes.forEach((function(a){a.x+i>n&&(n=a.x+i),a.x+i<t&&(t=a.x+i),-a.y+o>r&&(r=-a.y+o),-a.y+o<e&&(e=-a.y+o)})),this.boundingBox={min:{x:t,y:e},max:{x:n,y:r}},this.boundingBox}},{key:"load",value:function(){var t=this,n=this;return this.visible||this.imageVisible||this.labelVisible?new Promise((function(o,a){var s=n.polygon,u=n.mapClass;if(t.visible){var l=s.vertexes,c=Math.max(u.width,u.height)/1e3;(t.imageVisible||s.geometry.offset)&&(l=e._clip(l,0),l=e._clip(l,s.geometry.offset),s.vertexes=l);var h,f=e._makeFromCoords(i.Shape,l,u);s.holes&&(f.holes=s.holes.map((function(t){return e._makeFromCoords(i.Path,t,u)}))),h=s.geometry.bevel?{bevelEnabled:!0,depth:s.geometry.scale.z*c,bevelThickness:s.geometry.bevel.thickness*s.geometry.scale.z*c,bevelSize:s.geometry.bevel.size*c,bevelSegments:s.geometry.bevel.segments||1}:{bevelEnabled:!1,depth:s.geometry.scale.z*c};var d,p=s.textures&&s.textures.length&&s.textures.filter((function(t){return t.image&&Object.keys(t.image).length})).length,m=e._normalizeColor(s.material.color),v=s.material.opacity||1,g=new i.ExtrudeBufferGeometry(f,h);if(p){var y,b,_=s.textures.find((function(t){return"front"===t.name})),w=s.textures.find((function(t){return"side"===t.name})),x=w.useFrontFaceImage,M=_&&_.image&&(_.image.url||_.image.original),E=w&&w.image&&(w.image.url||w.image.original);!function(t,e,n){t.computeBoundingBox();var r=t.boundingBox,o=Math.max(n.width,n.height)/1e3,a=Math.max(n.width*o,n.height*o),s={min:new i.Vector3(0,0,0),max:new i.Vector3(1,1,1).multiplyScalar(a)},u={};e.forEach((function(t){u[t.name]=t}));var l,c,h=t.getAttribute("position"),f=t.getAttribute("normal"),d=t.getAttribute("uv");console.assert(h.count==f.count),console.assert(h.count==d.count),t.index?(console.assert(t.index.count%3==0),l=t.index.count/3,c=function(e,n){return t.index.getX(3*e+n)}):(console.assert(h.count%3==0),l=h.count/3,c=function(t,e){return 3*t+e});for(var p=u.side||{},m=u.front||{},v=null!=p.repeat?p.repeat.u:1,g=null!=p.repeat?p.repeat.v:1,y=null!=p.offset?p.offset.u:1,b=null!=p.offset?p.offset.v:1,_=null!=p.rotation?p.rotation:0,w=p.useLocalScaling||!1,x=null!=m.repeat?m.repeat.u:1,M=null!=m.repeat?m.repeat.v:1,E=null!=m.offset?m.offset.u:1,S=null!=m.offset?m.offset.v:1,A=null!=m.rotation?m.rotation:0,T=m.useLocalScaling||!1,q=0;q<l;++q){var P,L,O,C,I,R,k,N,B=f.getX(c(q,0))+f.getX(c(q,1))+f.getX(c(q,2)),D=f.getY(c(q,0))+f.getY(c(q,1))+f.getY(c(q,2)),j=f.getZ(c(q,0))+f.getZ(c(q,1))+f.getZ(c(q,2)),F=Math.abs(B),z=Math.abs(D),U=Math.abs(j);F<=z&&F<=U?(P=fl,L=z<=U?dl:pl):z<=F&&z<=U?(P=dl,L=F<=U?fl:pl):(P=pl,L=F<=z?fl:dl),P===pl&&(P=L,L=pl),L===pl||P===pl?(O=v,C=g,I=y,R=b,k=_,N=w?r:s):(O=x,C=M,I=E,R=S,k=A,N=T?r:s);for(var V=N.min,G=N.max,H=Math.abs(G[P]-V[P]),W=Math.abs(G[L]-V[L]),Y=k*Math.PI/180||0,X=Math.cos(Y),Z=Math.sin(Y),J=0;J<3;J++){var K,Q,$=h.getX(c(q,J)),tt=h.getY(c(q,J)),et=h.getZ(c(q,J));K=P===fl?O*($-V[P])/H+I:P===dl?O*(tt-V[P])/H+I:O*(et-V[P])/H+I,Q=L===fl?C*($-V[L])/W+R:L===dl?C*(tt-V[L])/W+R:C*(et-V[L])/W+R;var nt=(K-=.5)*X-(Q-=.5)*Z+.5,rt=K*Z+Q*X+.5;d.setX(c(q,J),nt),d.setY(c(q,J),rt)}}t.uvsNeedUpdate=!0}(g,s.textures,u),M&&(y=e.getTextureLoader().load(M,(function(){y.mapping=i.UVMapping,y.wrapS=i.RepeatWrapping,y.wrapT=i.RepeatWrapping,y.anisotropy=16}))),b=!x&&E?e.getTextureLoader().load(E,(function(){b.mapping=i.UVMapping,b.wrapS=i.RepeatWrapping,b.wrapT=i.RepeatWrapping,b.anisotropy=16})):y;var S={color:m,transparent:!0,opacity:v,side:v<1?i.DoubleSide:i.FrontSide};d=b===y?new i.MeshLambertMaterial(Object(r.r)({},S,{},{map:y})):[new i.MeshLambertMaterial(Object(r.r)({},S,{},{map:y})),new i.MeshLambertMaterial(Object(r.r)({},S,{},{map:b}))]}else d=e._getMaterial(s.material.color,v);var A=new i.Mesh(g,d);A.name=s.id,Array.isArray(A.material)||(A.material.needsUpdate=!0),A.translateZ(s.geometry.position.z*c),n.container.add(A),n.mesh=A}t.imageVisible&&t._addImage(s,u,o),t.labelVisible&&t._addLabel(s,u,o)})):Promise.resolve()}},{key:"_addLabel",value:function(t,n,r){var o=this;if(t.label.text){var a=Math.max(n.width,n.height)/1e3,s=e.getWeightedCenter(t.vertexes),u=t.label.position,l=t.label.rotation.z,c=t.label.text.split("\n");ll.getFont(t.label.fontFamily).then((function(h){var f={font:h,size:t.label.fontSize*a,height:e.overlayHeight,bevelEnabled:!1,curveSegments:4},d=0,p=c.reverse().map((function(t,e){return t.length>c[d].length&&(d=e),new i.TextGeometry(t,f)})),m=p[d],v=new i.Mesh(m),g=(new i.Box3).setFromObject(v).getSize(new i.Vector3).x,y=e._getMaterial(t.label.color),b=0,_=new i.Geometry;c.forEach((function(t,e){var n,r=p[e],o=new i.Mesh(r,y),a=(new i.Box3).setFromObject(o).getSize(new i.Vector3);n="left"===f.align?0:"right"===f.align?g-a.x:(g-a.x)/2,o.position.set(n,b,0),o.updateMatrix(),_.merge(o.geometry,o.matrix),b+=1.25*f.size}));var w=new i.Mesh(_,y);_.computeBoundingBox();var x=_.boundingBox,M=x.max.x-x.min.x,E=x.max.y-x.min.y,S=t.geometry.position.z+t.geometry.scale.z;w.translateX(s.x-n.width/2+u.x-M/2),w.translateY(-s.y+n.height/2+u.y-E/2),w.rotation.set(0,0,l*Math.PI/180),w.translateZ((e.overlayHeight+S)*a),o.container.add(w),r()}))}}},{key:"_addImage",value:function(t,n,r){var o=this;this.hasImage=!0;var a=this.getBoundingBox(),s=e.getTextureLoader().load(t.image.url||t.image.original,(function(){var n,u=s.image.width,c=s.image.height,f={x:t.image.viewBox.width,y:t.image.viewBox.height};n=!1===t.image.useLocalScaling?h:Math.min(a.max.x-a.min.x,a.max.y-a.min.y)/Math.max(f.x,f.y),t.image.fitToBounds?l.scale.set(a.max.x-a.min.x,a.max.y-a.min.y,1):t.image.scale&&l.scale.set(t.image.scale.x*n*t.image.viewBox.width,t.image.scale.y*n*t.image.viewBox.height,1),l.translateZ(e.overlayHeight*h),s.repeat=new i.Vector2(t.image.viewBox.width/u,t.image.viewBox.height/c),s.offset=new i.Vector2(0,(s.image.height-t.image.viewBox.height)/s.image.height),o.publish("texture-loaded",s),r()})),u=new i.MeshLambertMaterial({transparent:!0,depthWrite:!1,side:i.DoubleSide,map:s});s.anisotropy=16;var l=new i.Mesh(new i.PlaneGeometry(1,1),u);l.name=t.id+"_image",this.container.add(l),this.imageMesh=l;var c,h=Math.max(n.width,n.height)/1e3,f=t.vertexes;c=t.image.fitToBounds?e.getBoundingCentre(f):e.getWeightedCenter(f);var d=t.image.fitToBounds?0:t.image.position.x,p=t.image.fitToBounds?0:t.image.position.y,m=t.geometry.position.z+t.geometry.scale.z;t.image.position&&(l.translateX(c.x-n.width/2+d),l.translateY(-c.y+n.height/2+p),l.translateZ((m+t.image.position.z)*h)),t.image.rotation&&l.rotation.set(t.image.rotation.x*Math.PI/180,t.image.rotation.y*Math.PI/180,t.image.rotation.z*Math.PI/180)}}],[{key:"_normalizeColor",value:function(t){var e=t.replace(/#/,"");return 3===e.length&&(e="".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2])),parseInt(e,16)}},{key:"_getMaterial",value:function(t,n){var r,o=e._normalizeColor(t),a=n<1?o+"_"+n:o;if(e.materials[a])r=e.materials[a];else{var s={color:o,side:n<1?i.DoubleSide:i.FrontSide};n<1&&(s.transparent=!0,s.opacity=n),e.materials[a]=new i.MeshLambertMaterial(s),r=e.materials[a]}return r}},{key:"_clip",value:function(t,n){n/=2;for(var r=e.scale,i=t.map((function(t){return{X:t.x*r,Y:t.y*r}})),o=8;0!==o;o--){var a=new Zu.ClipperOffset;a.AddPath(i,Zu.JoinType.jtMiter,Zu.EndType.etClosedPolygon);var s=new Zu.Paths;try{if(a.Execute(s,n*r),s.length)return s[0].map((function(t){return{x:t.X/r,y:t.Y/r}}));n/=2}catch(t){n/=2}}return i}}]),e}();ml.materials={},ml.defaultExtrudeSettings={depth:10,bevelEnabled:!1},ml.scale=100,ml.overlayHeight=.15;var vl,gl=new(function(){function t(){Object(r.t)(this,t),this.defaultExtrudeSettings={amount:10,bevelEnabled:!1},this.materials={},this.scale=100,this.overlayHeight=.15}return Object(r.s)(t,[{key:"load",value:function(t,e){var n=this;if("string"==typeof t)return fetch(t).then((function(t){return t.json()})).then((function(t){return null==t||0===t.length?Promise.reject("No polygons found for venue"):n._build(t,e)})).catch((function(t){return Promise.reject(t)}));try{return this._build(t,e)}catch(t){return Promise.reject(t)}}},{key:"_build",value:function(t,e){var n=this;console.time("JSONSceneLoader"),this.container=new i.Group;var r=new Set,o={};e.layers.forEach((function(t){!1!==t.visible&&r.add(t.id)})),t.forEach((function(t){var i=t.layer||"Polygon";if(r.has(i)){var a=new ml(t,e,n.container);o[t.id]=a}}));var a=this.container;return console.timeEnd("JSONSceneLoader"),Promise.resolve({container:a,elements:o})}},{key:"loadTexture",value:function(t){var e=this;return new Promise((function(n,r){return e.textureLoader.load(t,n,r)}))}}]),t}());!function(t){t[t.initial=0]="initial",t[t.show=1]="show",t[t.hide=2]="hide"}(vl||(vl={}));var yl=function(){function t(e){Object(r.t)(this,t),this.__engine=void 0,this._initialRank=0,this.screenPosition=[0,0],this.currentStrategyName=null,this.enabled=!1,this.options={},this.mapId="",this.id="0",this.action=vl.initial,this.rank=0,this.visible=!1,this.position=new i.Vector3(0,0,0),this.dimensions={width:0,height:0};var n=e.rank;this._initialRank=n,this.rank=n}return Object(r.s)(t,[{key:"flipIfNeeded",value:function(){}}]),Object(r.s)(t,[{key:"setPriority",value:function(t){this.rank=t,null!=this.__engine&&"function"==typeof this.__engine.resort&&this.__engine.resort()}},{key:"setAction",value:function(t){this.action=t}},{key:"resetPriority",value:function(){this.rank!==this._initialRank&&this.setPriority(this._initialRank)}},{key:"promote",value:function(){}},{key:"demote",value:function(){}},{key:"removeSelf",value:function(){this.__engine=null}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"colliderDidUpdatePosition",value:function(t,e){this.screenPosition=[t,e]}},{key:"colliderDidNotFindAHome",value:function(){this.visible=!1}},{key:"colliderDidMount",value:function(){this.dimensions={width:0,height:0}}},{key:"colliderDidUpdateVisiblity",value:function(){}},{key:"strategies",get:function(){return[]}}]),t}(),bl=function(t){function e(){var t,n;Object(r.t)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=Object(r.F)(this,(t=Object(r.G)(e)).call.apply(t,[this].concat(o)))).contentEl=document.createElement("div"),n.containerEl=document.createElement("div"),n}return Object(r.E)(e,yl),Object(r.s)(e,[{key:"removeSelf",value:function(){this.__engine=null,this.containerEl.parentElement.contains(this.containerEl)&&this.containerEl.parentElement.removeChild(this.containerEl),this.containerEl=null,this.contentEl=null}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.containerEl.style.opacity="0"}},{key:"colliderDidGoOffscreen",value:function(){this.visible=!1,this.containerEl.style.opacity="0"}},{key:"colliderDidNotFindAHome",value:function(){this.visible=!1}},{key:"colliderDidUpdatePosition",value:function(t,e){this.containerEl.style.transform="translate(".concat(t,"px, ").concat(e,"px)")}},{key:"colliderDidMount",value:function(){var t={width:0,height:0},e=this.contentEl.getBoundingClientRect();t.width=e.width,t.height=e.height,this.contentEl.style.width=t.width+"px",this.contentEl.style.height=t.height+"px",this.dimensions=t}},{key:"colliderDidUpdateVisiblity",value:function(){this.containerEl.style.opacity=this.visible?"1":"0"}}]),e}(),_l=document.createElement("canvas");_l.width=500*devicePixelRatio,_l.height=500*devicePixelRatio,_l.style.width="500px",_l.style.height="500px";var wl=_l.getContext("2d"),xl=document.createElement("div");function Ml(t,e){xl.innerHTML="",xl.style.cssText="position:fixed;padding:0;left:-9999px;top:-9999px;font:"+e,xl.textContent=t,document.body.appendChild(xl);var n=parseInt(getComputedStyle(xl).getPropertyValue("height"),10);return document.body.removeChild(xl),n}var El,Sl,Al=function(t){return t*devicePixelRatio},Tl=4*devicePixelRatio,ql={activeColor:"#333333",inactiveColor:null,orientation:null,textSize:14,maxTextDivWidth:150,textLines:2,shrinkAmount:0,color:"#000000",markerBuffer:20,textDivHeight:40,textDivWidth:100,textClass:"",markerClass:"",markerSize:6,scale:1};!function(t){t[t.OPAQUE=1]="OPAQUE",t[t.SEMI_TRANSPARENT=.5]="SEMI_TRANSPARENT"}(El||(El={})),function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"}(Sl||(Sl={}));var Pl,Ll=function(t){function e(t){var n;if(Object(r.t)(this,e),(n=Object(r.F)(this,Object(r.G)(e).call(this,t))).originalColor="#000000",n.lines=0,n.setColor=function(t){n.options.textColor=t},n.contextConfigured=!1,n.fillText=void 0,n.newStyle={},n.style={top:0,left:0,textLabelVisible:!0,pinVisibility:El.OPAQUE,textAlign:Sl.LEFT},n.clearColor=function(){n.setColor(n.originalColor)},n.zoomProportion=0,n._cache={},n._dirty=!0,n.id=t.polygon.id,n.options=Object(r.r)({},ql,{},t,{text:t.shortText||t.text||""}),null!=t.color&&(n.originalColor=t.color),null!=t.rank&&t.rank>0)n.rank=t.rank,n._initialRank=t.rank;else{var i=Math.random();n.rank=i,n._initialRank=i}var o=n.options,a=o.position,s=o.polygon,u=o.heightAbovePolygon,l=void 0===u?0:u,c=o.polygonHeight,h=o.scale;n.options.markerSize*=h,t.stateText&&(n.options.text+=" (".concat(t.stateText,")"));var f=c+l;if(a.setZ(f),null==n.options.inactiveColor){var d=Wo(n.options.activeColor);d.setAlpha(.5),n.options.inactiveColor=d.toRgbString()}return n.position=a,n.mapId=s.map,n}return Object(r.E)(e,yl),Object(r.s)(e,[{key:"setSize",value:function(t){this.zoomProportion=t}},{key:"enable",value:function(){Object(r.O)(Object(r.G)(e.prototype),"enable",this).call(this),this._dirty=!0}},{key:"getCachedSymbol",value:function(t,e,n){var r=this.dimensions,i=r.width,o=r.height;if(null==this._cache[t]){var a,s=i+2*Tl,u=o+2*Tl;null!=window.OffscreenCanvas?a=new OffscreenCanvas(s*devicePixelRatio,u*devicePixelRatio):((a=document.createElement("canvas")).width=s*devicePixelRatio,a.height=u*devicePixelRatio,a.style.width=s+"px",a.style.height=u+"px");var l=a.getContext("2d"),c=this.options,h=c.textSize,f=c.color;l.textAlign=e,l.font="bold ".concat(h*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif"),l.textBaseline="middle",l.lineJoin="miter",l.miterLimit=2,l.strokeStyle="white",l.lineWidth=Tl,l.fillStyle=f,this.fillText&&"function"==typeof this.fillText&&this.fillText(l,n,u*devicePixelRatio/2),this._cache[t]=a}return this._cache[t]}},{key:"colliderDidMount",value:function(){var t=this.options,e=t.textSize,n=t.maxTextDivWidth,r=t.textLines,i=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{strokeText:!0};wl.font=e;for(var o=[],a=t.split(" "),s=0,u=0,l=0;u<a.length;){var c=a[u];if(s===r&&s>0){o[s-1]+="...";break}if(null==o[s]&&(o[s]=c,u++),1===a.length){o[s]=c;break}if(null==a[u])break;var h=wl.measureText(o[s]+" "+a[u]),f=h.width;f<=n?(o[s]+=" "+a[u],u++):s++}o.forEach((function(t){var e=wl.measureText(t).width;l=Math.max(e,l)}));var d=Ml(o[0],e),p=o.length*d,m={maxWidth:l,maxHeight:p,lines:o.length,draw:function(t,e,n){t.strokeStyle="white",1===o.length?(i.strokeText&&t.strokeText(o[0],e,n),t.fillText(o[0],e,n)):(i.strokeText&&(t.strokeText(o[0],e,n-d/2),t.strokeText(o[1],e,n+d/2)),t.fillText(o[0],e,n-d/2),t.fillText(o[1],e,n+d/2))}};return m}(this.options.text||"","bold ".concat(e*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif"),n,r),o=i.draw,a=i.lines,s=i.maxWidth,u=i.maxHeight;this.fillText=o,this.lines=a,this.dimensions={width:s/devicePixelRatio,height:u/devicePixelRatio}}},{key:"colliderDidUpdatePosition",value:function(t,e){this.screenPosition=[t,e]}},{key:"setPriority",value:function(t){Object(r.O)(Object(r.G)(e.prototype),"setPriority",this).call(this,t),this._dirty=!0}},{key:"colliderDidUpdateVisiblity",value:function(){this._dirty&&(this.action===vl.show?this.visible=!0:this.action===vl.hide&&(this.visible=!1),this.action=vl.initial,this.style=this.newStyle,this._dirty=!1)}},{key:"colliderDidGoOutsideGrid",value:function(){this._dirty=!0}},{key:"colliderDidNotFindAHome",value:function(){this.action=vl.hide}},{key:"disable",value:function(){Object(r.O)(Object(r.G)(e.prototype),"disable",this).call(this),this._dirty=!0,this.visible=!1}},{key:"draw",value:function(t){if(this.visible){var e=Object(r.P)(this.screenPosition,2),n=e[0],i=e[1],o=this.style,a=o.pinVisibility,s=o.textLabelVisible,u=o.top,l=o.left,c=o.textAlign,h=o.cachedSymbol,f=Al(n),d=Al(i),p=1+Math.pow(1-this.zoomProportion,3),m=this.options.markerSize*devicePixelRatio*p;t.strokeStyle="white",t.lineWidth=4*devicePixelRatio,t.textAlign=c,s&&null!=h&&(t.shadowColor="transparent",t.drawImage(h,f+Al(l),d+Al(u)));var v=a===El.OPAQUE?Al(m/4):Al(m/6);t.shadowColor="rgba(0,0,0,0.3)",t.shadowOffsetY=2*devicePixelRatio,t.shadowBlur=5*devicePixelRatio,t.beginPath(),t.arc(f,d,v+Al(3),0,2*Math.PI),t.fillStyle=a===El.OPAQUE?"white":"rgba(255, 255, 255, 0.4)",t.fill(),t.beginPath(),t.arc(f,d,v+Al(.2),0,2*Math.PI),t.shadowColor="transparent",t.fillStyle=a===El.OPAQUE?this.options.activeColor:this.options.inactiveColor,t.fill()}}},{key:"strategies",get:function(){var t=this,e=this.dimensions,n=e.width,r=e.height,i=this.options.markerSize*devicePixelRatio*(1+Math.pow(1-this.zoomProportion,3)),o=8*devicePixelRatio,a=n+2*Tl-o,s=r+2*Tl-o;return[{name:"RIGHT",getBoundingBox:function(t){var e=t.x,n=t.y;return[n-s/2,n+s/2,e-i/2,e+i/2+a]},onStrategySelected:function(e){t.newStyle=Object.assign({},e.style,{textAlign:Sl.LEFT,pinVisibility:El.OPAQUE,top:-s/2-o/2,left:i/2,textLabelVisible:!0,cachedSymbol:t.getCachedSymbol("RIGHT",Sl.LEFT,Tl)})}},{name:"LEFT",getBoundingBox:function(t){var e=t.x,n=t.y;return[n-s/2,n+s/2,e-i/2-a-o/2,e+i/2]},onStrategySelected:function(e){t.newStyle=Object.assign({},e.style,{textAlign:Sl.RIGHT,pinVisibility:El.OPAQUE,top:-s/2-o/2,left:-i/2-a-o/2,textLabelVisible:!0,cachedSymbol:t.getCachedSymbol("LEFT",Sl.RIGHT,a*devicePixelRatio-2*Tl+o)})}},{name:"TOP",getBoundingBox:function(t){var e=t.x,n=t.y;return[n-s-i/2,n+i/2,e-a/2,e+a/2]},onStrategySelected:function(e){t.newStyle=Object.assign({},e.style,{pinVisibility:El.OPAQUE,textAlign:Sl.CENTER,textLabelVisible:!0,top:-s-i/2-o/2,left:-a/2,cachedSymbol:t.getCachedSymbol("TOP",Sl.CENTER,a*devicePixelRatio/2)})}},{name:Il,getBoundingBox:function(t){var e=t.x,n=t.y;return[n-i/4,n+i/4,e-i/4,e+i/4]},onStrategySelected:function(e){t.newStyle=Object.assign({},e.style,{pinVisibility:El.SEMI_TRANSPARENT,textLabelVisible:!1})}}]}}]),e}();!function(t){t[t.FREE=0]="FREE",t[t.OFFSCREEN=1]="OFFSCREEN",t[t.OTHER=2]="OTHER"}(Pl||(Pl={}));var Ol,Cl=500*devicePixelRatio,Il="LOW_PRIORITY",Rl=function(t,e,n,i){for(var o=Object(r.P)(e,4),a=o[0],s=o[1],u=o[2],l=o[3],c=a;c<=s;++c)for(var h=u;h<=l;++h)if(t[c*n+h]===i)return!0;return!1},kl=function(t,e,n,i){for(var o=Object(r.P)(e,4),a=o[0],s=o[1],u=o[2],l=o[3],c=a;c<=s;++c)for(var h=u;h<=l;++h)t[c*n+h]=i},Nl=function(t){function e(){return Object(r.t)(this,e),Object(r.F)(this,Object(r.G)(e).apply(this,arguments))}return Object(r.E)(e,yl),Object(r.s)(e,[{key:"strategies",get:function(){var t=function(){};return[{name:"left",getBoundingBox:function(t){return[Cl,t.totalHeight,Cl,Cl+5]},onStrategySelected:t},{name:"top",getBoundingBox:function(t){return[Cl,Cl+5,Cl,t.totalWidth]},onStrategySelected:t},{name:"right",getBoundingBox:function(t){return[Cl,t.totalHeight,t.totalWidth-2,t.totalWidth]},onStrategySelected:t},{name:"bottom",getBoundingBox:function(t){return[t.totalHeight-2,t.totalHeight,Cl,t.totalWidth]},onStrategySelected:t}]}}]),e}(),Bl=function(){var t,e,n,r,i,o=[],a=new Map,s=6*devicePixelRatio,u=document.createElement("canvas"),l=document.createElement("div");u.classList.add("mappedin__smart-collision-engine-debug__container"),l.classList.add("mappedin__smart-collision-engine__container");var c=u.getContext("2d"),h=[],f=function(){h.sort((function(t,e){return e.rank-t.rank}))},d=[],p=function(a,c){i=c,a.appendChild(l),a.appendChild(u),n=a.clientWidth,r=a.clientHeight,t=Math.round((n+2*Cl)*devicePixelRatio/s),e=Math.round((r+2*Cl)*devicePixelRatio/s),u.width=n*devicePixelRatio,u.height=r*devicePixelRatio,u.style.width=n+"px",u.style.height=r+"px";var h=new Nl({rank:999});d=h.strategies.map((function(t){return(0,t.getBoundingBox)({x:0,y:0,totalHeight:r+Cl,totalWidth:n+Cl}).map((function(t){return Math.round(t/s)}))})),f(),o=Array(t*e).fill(Pl.FREE),m(),v()},m=function(){var e=!1;if(null==h.find((function(t){return t._dirty&&t.enabled}))&&(e=!0),!e){for(var a=0;a<o.length;++a)o[a]=Pl.FREE;d.forEach((function(e){kl(o,e,t,Pl.OFFSCREEN)}))}var u=!0,l=!1,f=void 0;try{for(var p,m=function(){var a=p.value,u=a.position,l=a.mapId,c=i({position:u,mapId:l});if("function"==typeof a.colliderDidUpdatePosition&&a.colliderDidUpdatePosition(c.x,c.y),!a.enabled)return a.setAction(vl.hide),a._dirty=!0,"continue";if((c.x<-Cl||c.x+Cl>n+2*Cl||c.y<-Cl||c.y+Cl>r+2*Cl)&&"function"==typeof a.colliderDidGoOutsideGrid)return a.colliderDidGoOutsideGrid(),"continue";if(e)return"continue";if(!a._dirty){if(null!=a.currentStrategyName){var h=a.strategies.find((function(t){return t.name===a.currentStrategyName})).getBoundingBox({x:c.x+Cl,y:c.y+Cl}).map((function(t){return Math.round(t/s)}));kl(o,h,t,Pl.OTHER)}return"continue"}var f=!1,d=!1,m=a.strategies,v=void 0,g=a.currentStrategyName;g&&g!==Il&&(v=m.find((function(t){return t.name==g})))&&m.unshift(v);var y=!0,b=!1,_=void 0;try{for(var w,x=m[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var M=w.value,E=M.name,S=M.getBoundingBox,A=M.onStrategySelected,T=S({x:c.x+Cl,y:c.y+Cl}).map((function(t){return Math.round(t/s)}));if(Rl(o,T,t,Pl.OFFSCREEN)&&"function"==typeof a.colliderDidGoOffscreen)d=!0;else if(!Rl(o,T,t,Pl.OTHER)){d=!1,f=!0,kl(o,T,t,Pl.OTHER),a.setAction(vl.show),E!==a.currentStrategyName&&(a._dirty=!0),a.currentStrategyName=E,A(a);break}}}catch(t){b=!0,_=t}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}d&&"function"==typeof a.colliderDidGoOffscreen&&a.colliderDidGoOffscreen(),f||"function"!=typeof a.colliderDidNotFindAHome||(a.colliderDidNotFindAHome(),a._dirty=!0)},v=h[Symbol.iterator]();!(u=(p=v.next()).done);u=!0)m()}catch(t){l=!0,f=t}finally{try{u||null==v.return||v.return()}finally{if(l)throw f}}c.clearRect(0,0,n*devicePixelRatio,r*devicePixelRatio);var g=!0,y=!1,b=void 0;try{for(var _,w=h[Symbol.iterator]();!(g=(_=w.next()).done);g=!0){var x=_.value;x instanceof Ll&&x.draw(c)}}catch(t){y=!0,b=t}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}},v=function(){var t=!0,e=!1,n=void 0;try{for(var r,i=h[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;"function"==typeof o.colliderDidUpdateVisiblity&&o.colliderDidUpdateVisiblity()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}},g=v,y={add:function(t,e){e instanceof bl&&l.appendChild(e.containerEl),e.__engine=y,e.enable(),"function"==typeof e.colliderDidMount&&e.colliderDidMount(),e.disable(),a.set(t,e),h=Array.from(a.values()),f()},remove:function(t){var e=a.get(t);null!=e&&(e.__engine=void 0,e instanceof bl&&l.removeChild(e.containerEl),a.delete(t),f())},resort:f,init:p,resize:function(t){p(t,i)},updatePosition:m,updateVisibility:g,update:function(){m(),g()},destroy:function(){h.forEach((function(t){y.remove(t.id)})),o=Array(t*e).fill(Pl.FREE)}};return y}(),Dl=new i.Object3D,jl={Floor:1,Wall:2,"Outer Wall":2.2,Anchors:4,Anchor:4,"Anchor Store":4,Polygon:5,Kiosks:6,"Inner Wall":7,"Non Public":7.5},Fl=function(t){if(jl[t.layer])return jl[t.layer];var e=t.geometry.scale,n=t.geometry.position;return 100+(e?e.z:1)+(n?n.z:0)},zl=function(){function t(e,n,o,a,s){var u=this,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};Object(r.t)(this,t),this._flippableImagedById={},this._started=!1,this._loaderPromise=null,this._promiseResolve=null,this.objectsDictionary={},this.north=null,this.mapScale=null,this.object=new i.Object3D,this.colliders=new Set,this.textObjects=[],this.smartLabelBatchCreator=null,this.imagesToFlip=[],this.markers=[],this.seenByCamera=!1,this.threeJSMarkers=new Map,Object.assign(this,r.v.prototype),this.mapView=s,this.mapClass=e,this.polygonMeshesById=n,this.markerWorld=o,this._showCount=a,this.loadMethod=l.mode,this.loadAsync=l.async,this._taskScheduler=l.taskScheduler,this.id=this.mapClass.id,this._highPriorityTasks=new Va({name:"_highPriorityTasks",onComplete:this._checkIfLoaded.bind(this),priority:!this.visible&&this.loadAsync?Ba:Ra,postponeOnAdd:!this.visible&&!this.loadAsync}),this._lowPriorityTasks=new Va({name:"_lowPriorityTasks",onComplete:this._checkIfLoaded.bind(this),priority:!this.visible&&this.loadAsync?Da:ka,postponeOnAdd:!this.visible&&!this.loadAsync}),this._markerTasks=new Va({name:"_markerTasks",priority:!this.visible&&this.loadAsync?ja:Na,postponeOnAdd:!this.visible}),this._mapLoadedTasks=new Va({name:"_mapLoadedTasks",priority:Fa,postponeOnAdd:!this.isReady()}),this._visibilityLatch=null,this._objLoadedComplete=!1,this.smartLabelBatchCreator=new Ss({mapView:this.mapView,debounceDelayMS:100}),this._loaderPromise=new Promise((function(t,e){u._promiseResolve=t,Ol=e})),this._objLoaded=this._objLoaded.bind(this),this.enableImageFlipping=this.enableImageFlipping.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.removeMarker=this.removeMarker.bind(this),this.destroy=this.destroy.bind(this)}return Object(r.s)(t,[{key:"_objLoaded",value:function(t){var e=this;if(t.elements){this.elements=t.elements;var n=Object.values(this.elements);n.sort((function(t,e){return null==t.sortScore&&(t.sortScore=Fl(t.polygon)),null==e.sortScore&&(e.sortScore=Fl(e.polygon)),e.sortScore-t.sortScore}));for(var r=new i.Vector3(1/0,1/0,0),o=new i.Vector3(-1/0,-1/0,0),a=function(){var t=u[s],n=t.getBoundingBox();r.min(n.min),o.max(n.max),e.loadAsync?e._addPendingHighPriorityTask("addPolygon",(function(){return e._addElementToScene(t)})):e._addElementToScene(t)},s=0,u=n;s<u.length;s++)a();this.boundingBox={min:r,max:o},t=t.container}for(var l=t.children,c=0,h=l.length;c<h;++c){var f=l[c];this.objectsDictionary[f.name]=f,this.polygonMeshesById[f.name]=f}return this.object=t,this.object.userData.type="mappedin_map",this.object.userData.mapId=this.mapClass.id,this.publish("pinsNeedUpdating",!0),this._objLoadedComplete=!0,this._onRootObjectCreated(),this._checkIfLoaded(),this._promiseResolve(this)}},{key:"loadPolygonNow",value:function(t){if(this.elements){var e=this.elements[t];this._addElementToScene(e)}}},{key:"_addElementToScene",value:function(t){var e=this;if(!this.objectsDictionary[t.polygon.id]){if(t.load.bind(t),t.load(),t.hasImage&&t.on("texture-loaded",(function(t){e.publish("texture-loaded",t)})),t.mesh){var n=t.mesh;this.objectsDictionary[n.name]=n,this.polygonMeshesById[n.name]=n}if(t.imageMesh){var r=t.imageMesh;this.objectsDictionary[r.name]=r,this.polygonMeshesById[r.name]=r}if(t.polygon.image){var i=null!=t.polygon.image.rotation?t.polygon.image.rotation.z:0;this.mapView._imageFlippingEnabled&&this.enableImageFlipping(t.polygon.id,i*(Math.PI/180))}}}},{key:"load",value:function(){var t=this;if(!this._started){if(this._started=!0,null!=this.mapClass.object3D)return this._objLoaded(this.mapClass.object3D),this._loaderPromise;try{var e=this.mapClass.scene.polygons,n="json"===this.loadMethod||void 0===this.loadMethod;if(n&&e){var r=e||!1;this.loadMethodUsed="JSON - "+(e?"published":"live"),gl.load(r,this.mapClass).then(this._objLoaded).catch((function(e){console.error(e),console.warn("falling back to OBJ loader"),t.loadMethodUsed="OBJ";var n=t.mapClass.scene.mtl,r=t.mapClass.scene.obj;Lu(r,n).then(t._objLoaded).catch(Ol)}))}else{n&&console.warn("Could not use scene parser, had to fall back to OBJ loader"),this.loadMethodUsed="OBJ";var i=this.mapClass.scene.mtl,o=this.mapClass.scene.obj;Lu(o,i).then(this._objLoaded).catch(Ol)}}catch(t){Ol("ERROR: No 3D files for map "+(this.mapClass.name||this.mapClass.shortName||this.mapClass.id||this.mapClass))}}return this._loaderPromise}},{key:"_dispose",value:function(t){for(var e=t,n=e.children.length-1;n>=0;n--)this._dispose(e.children[n]);e.destroy(),delete this.objectsDictionary[e.name],delete this.polygonMeshesById[e.name]}},{key:"destroy",value:function(){this.removeLabels(),this.removeMarkers(),this._removeThreeJSMarkers(),this.disableAllImageFlipping(),this._dispose(this.object)}},{key:"add",value:function(t){var e=this;Dl.add(t),this.load().then((function(){1===Dl.children.filter((function(e){return e.uuid===t.uuid})).length&&e.object.add(t)}))}},{key:"getPositionLatLon",value:function(t,e){var n=this.mapClass.georeference[0],r=new l.LatLonSpherical(n.target.x,n.target.y),i=new l.LatLonSpherical(t,e),o=r.distanceTo(i),a=(r.finalBearingTo(i)+0)*Math.PI/180,s=o*this.getMapScale(this.mapClass),u=a+this.getNorth(this.mapClass),c=Math.sin(u)*s,h=Math.cos(u)*s;return this.mapView.convertTo3DMapPosition({x:n.control.x+c,y:n.control.y-h,map:this.mapClass.id})}},{key:"getMapScale",value:function(){return null==this.mapScale&&(this.mapScale=function(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale);var e;try{var n=t.georeference[0],r=t.georeference[2],i=new l.LatLonSpherical(n.target.x,n.target.y),o=new l.LatLonSpherical(r.target.x,r.target.y),a=i.distanceTo(o),s=n.control.x-r.control.x,u=n.control.y-r.control.y;e=Math.sqrt(s*s+u*u)/a}catch(n){e=1,console.warn(n),console.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e}(this.mapClass)),this.mapScale}},{key:"getNorth",value:function(){return null==this.north&&(this.north=function(t){var e;try{var n=t.georeference[0],r=t.georeference[2],i=new l.LatLonSpherical(n.target.x,n.target.y),o=new l.LatLonSpherical(r.target.x,r.target.y);e=-((i.finalBearingTo(o)+0)*Math.PI/180-Math.atan2(r.control.y-n.control.y,r.control.x-n.control.x)-Math.PI/2)}catch(n){e=0,console.warn(n),console.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e}(this.mapClass)),this.north}},{key:"enableImageFlipping",value:function(t,e){if(e=e||0,!this._flippableImagedById[t]&&this.object&&Object.keys(this.object).length>0){var n=this.object.getObjectByName(t+"_image");if(n){var r=new Au({image:n,rotation:e});this.imagesToFlip.push(r),this.publish("flippablesNeedUpdating"),this.publish("render"),this._flippableImagedById[t]=!0}}}},{key:"disableAllImageFlipping",value:function(){for(var t=0,e=this.imagesToFlip.length;t<e;t++)this.imagesToFlip[t].reset();this.imagesToFlip=[],this._flippableImagedById={}}},{key:"isReady",value:function(){return(this.loadAsync?this._highPriorityTasks.isComplete():this.isFullyLoaded())&&this._objLoadedComplete}},{key:"isFullyLoaded",value:function(){return this._highPriorityTasks.isComplete()&&this._lowPriorityTasks.isComplete()}},{key:"onVisible",value:function(){!0!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,Ra),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,ka),this._taskScheduler.resumeTask(this._markerTasks)):(this._taskScheduler.resumeTask(this._highPriorityTasks),this._taskScheduler.resumeTask(this._lowPriorityTasks),this._taskScheduler.resumeTask(this._markerTasks)),this._visibilityLatch=!0)}},{key:"onInvisible",value:function(){!1!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,Ba),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,Da),this._taskScheduler.postponeTask(this._markerTasks)):(this._taskScheduler.postponeTask(this._highPriorityTasks),this._taskScheduler.postponeTask(this._lowPriorityTasks),this._taskScheduler.postponeTask(this._markerTasks)),this._visibilityLatch=!1)}},{key:"addPendingMarkerTask",value:function(t,e){this._taskScheduler.scheduleTask(new Ua({name:"addMarker",group:this._markerTasks,callback:e,userdata:{marker:t}}))}},{key:"addPendingLowPriorityTask",value:function(t,e){this._taskScheduler.scheduleTask(new Ua({name:t,group:this._lowPriorityTasks,callback:e}))}},{key:"addPendingMapLoadedTask",value:function(t,e){this._taskScheduler.scheduleTask(new Ua({name:t,group:this._mapLoadedTasks,callback:e})),this._checkIfLoaded()}},{key:"_addPendingHighPriorityTask",value:function(t,e){this._taskScheduler.scheduleTask(new Ua({name:t,group:this._highPriorityTasks,callback:e}))}},{key:"addThreeJSMarker",value:function(t){var e=this;if(!(t.object instanceof i.Object3D))throw new Error("threeJSMarker `object` must be an instance of `Object3D`");var n=new Ul({mapId:this.id,object:t.object}),r={object:t.object};return t.object.layers.set(1),null!=t.position&&t.object.position.copy(t.position),null!=t.rotation&&t.object.rotation.copy(t.rotation),null!=t.scale&&t.object.scale.copy(t.scale),this.threeJSMarkers.set(n,r),this._objLoadedComplete?this.object.add(r.object):this.load().then((function(){n._deleted||e.object.add(r.object)})),n}},{key:"removeThreeJSMarker",value:function(t){var e=this.threeJSMarkers.get(t);return null!=e&&(t._deleted=!0,this.threeJSMarkers.delete(t),this._objLoadedComplete&&this.object.remove(e.object),t._destroy(),!0)}},{key:"_removeThreeJSMarkers",value:function(){if(this._objLoadedComplete){var t=!0,e=!1,n=void 0;try{for(var i,o=this.threeJSMarkers.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=Object(r.P)(i.value,2),s=a[0],u=a[1];this.object.remove(u.object),s._destroy()}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}this.threeJSMarkers.clear()}},{key:"addMarkers",value:function(){for(var t=0;t<this.markers.length;t++){var e=this.markers[t];e._mAnchor&&(this.markerWorld.addBody(e._mAnchor),this.markerWorld.addBody(e._mShadowElement),this.markerWorld.addConstraint(e._mConstraint)),this.mapView.container.appendChild(e.div),this.publish("updateMarkerPosition",e),e.show(),this.publish("render")}}},{key:"removeMarker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.hide(),t._mAnchor&&(this.markerWorld.removeConstraint(t._mConstraint),this.markerWorld.removeBody(t._mAnchor),this.markerWorld.removeBody(t._mShadowElement)),e){this.mapView.container.contains(t.div)&&this.mapView.container.removeChild(t.div),t.destroy();for(var n=0;n<this.markers.length;++n)this.markers[n]===t&&(this.markers[n]=this.markers[this.markers.length-1],this.markers.pop(),--n);var r=!0,i=!1,o=void 0;try{for(var a,s=this._markerTasks.getTasks()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u.userdata.marker===t&&this._taskScheduler.cancelTask(u)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}},{key:"removeMarkers",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.markers.slice(),r=0;r<n.length;++r)this.removeMarker(n[r],e);if(e){var i=this._markerTasks.getTasks();i.forEach((function(n){return t.removeMarker(n.userdata.marker,e)}))}this.publish("render")}},{key:"removeLabels",value:function(){if(this.colliders.forEach((function(t){t.disable(),Bl.remove(t.id)})),this.colliders=new Set,Array.isArray(this.textObjects)){for(var t=0,e=this.textObjects.length;t<e;++t){var n=this.textObjects[t];n.removeSelf(!0),n=void 0}this.textObjects=[]}}},{key:"_checkIfLoaded",value:function(){var t=this;this.isReady()&&this._taskScheduler.scheduleTask(new Ua({name:"onMapLoaded",callback:function(){t._taskScheduler.resumeTask(t._mapLoadedTasks),t.mapLoaded&&Object(r.p)(t.mapLoaded)===("undefined"==typeof Function?"undefined":Object(r.p)(Function))&&(t.mapLoaded(),t.mapLoaded=null)}}))}},{key:"_onRootObjectCreated",value:function(){for(var t in this.threeJSMarkers.values())this.object.add(t.object)}},{key:"_popinChildObjects",value:function(){var t=this;this.loadAsync||this.object.traverse((function(e){0==e.children.length&&"Mesh"==e.type&&e.material.map&&(e.visible=!1,t._addPendingHighPriorityTask("addPolygon",(function(){e.visible=!0,t._showCount>=1&&(t._showCount=0,t.publish("render:now")),t._showCount++})))}))}},{key:"visible",get:function(){return null!=this.object.parent}}]),t}(),Ul=function(){function t(e){var n=e.mapId,i=e.object;Object(r.t)(this,t),this._mapId=n,this._object=i}return Object(r.s)(t,[{key:"_destroy",value:function(){this._mapId=null,this._object=null}},{key:"object",get:function(){return this._object}}]),t}(),Vl=Math.PI/2,Gl=a.a.Easing.Quadratic.InOut,Hl="top",Wl="bottom",Yl="down",Xl="up",Zl=function(){function t(e,n,o,a){var s,u;Object(r.t)(this,t),this._focusMapsStart=Hl,this._focusMapsDir=Yl,this._focusMapsLen=3,this._focusAnimCurve=Gl,this._focusAnimDuration=900,this.rotationAxis=new i.Vector3(1,0,0),this.mapBoundingBoxes=[],this._helperBoundingBoxes=[],this.mapAxesHelpers=[],this.mapView=e,this.object=n,this.options=a,this.padding=null==a.padding?e.cachedPadding:a.padding,this.rotation=null==a.rotation?0:a.rotation,this.maps=o,this.debug=a.debug,this.mapSpacing=null==a.mapSpacing?1e3:parseInt(a.mapSpacing,10),this.mapView.setViewState(wh.MULTI_FLOOR),this.object.children.forEach((function(t){return t.parent.remove(t)})),this.mapTilt=(null==a.mapTilt?30:a.mapTilt)*Math.PI/180,this.mapView.controls.setTilt(Vl),this.positionMaps(o),this.addMaps(this.maps),this.resize=(s=this.resize.bind(this),300,function(){var t=this,e=arguments,n=function(){u=null,s.apply(t,e)},r=void 0;clearTimeout(u),u=setTimeout(n,300),r&&s.apply(t,e)}),this.focusOnMaps=this.focusOnMaps.bind(this),this.debug&&(this.addMapBoundingBoxes(),this.addAxesHelpers())}return Object(r.s)(t,[{key:"positionMaps",value:function(){var t=this,e=this.maps.map((function(e,n){var r=e.object;r.rotation.z=t.rotation*Math.PI/180;var o=new i.Box3;return o.setFromObject(r),r.rotation.z=0,o})),n=0;this.maps.forEach((function(r,i){var o=r.object;o.setRotationFromAxisAngle(t.rotationAxis,t.mapTilt);var a=e[i].min.y*Math.sin(t.mapTilt),s=e[i].max.y*Math.sin(t.mapTilt);n-=Math.abs(s),o.position.z=n,n-=Math.abs(a),n-=t.mapSpacing}));var o=ra(this.maps),a=(o.max.z-o.min.z)/2;this.maps.forEach((function(e,n){var r=e.object;r.position.z+=a,r.rotation.z=t.rotation*Math.PI/180})),this.maps.forEach((function(e,n){if(!0===e.connection){var o=Object(r.P)(e.connectionNodes,2),a=o[0],s=o[1],u=t.mapView.convertTo3DMapPosition(a),l=t.mapView.convertTo3DMapPosition(s),c=e.object,h=t.maps.find((function(t){return t.id===a.map})).object,f=t.maps.find((function(t){return t.id===s.map})).object;h.updateMatrixWorld(),f.updateMatrixWorld(),u.applyMatrix4((new i.Matrix4).extractRotation(h.matrix)),l.applyMatrix4((new i.Matrix4).extractRotation(f.matrix)),u.z+=h.position.z,l.z+=f.position.z;var d=l.clone().sub(u),p=d.length();d=d.normalize().multiplyScalar(.5*p);var m=u.clone().add(d);c.rotation.z=0,c.position.set(m.x,m.y,m.z),c.renderOrder=1}}))}},{key:"addMaps",value:function(t){var e=this;t.forEach((function(t){e.object.add(t.object),t.addMarkers&&t.addMarkers()}))}},{key:"removeMaps",value:function(){this.maps.forEach((function(t){t.object.position.set(0,0,0),t.object.rotation.set(0,0,0),t.removeMarkers&&t.removeMarkers(),t.object.parent&&t.object.parent.remove(t.object)}))}},{key:"addMapBoundingBoxes",value:function(){var t=this,e=[16711680,65280,255,16711935,16776960,65535];this.maps.forEach((function(n,r){var o=n.object,a=(new i.Box3).setFromObject(o),s=new i.Box3Helper(a,e[r]);t.object.add(s),t.mapBoundingBoxes.push(s)}))}},{key:"removeMapBoundingBoxes",value:function(){this.mapBoundingBoxes.forEach((function(t,e){t.parent&&t.parent.remove(t)}))}},{key:"removeHelperBoundingBoxes",value:function(){this._helperBoundingBoxes.forEach((function(t,e){t.parent&&t.parent.remove(t)}))}},{key:"addAxesHelpers",value:function(){var t=this,e=new i.AxesHelper(5e3);this.object.add(e),this.maps.forEach((function(e,n){var r=e.object,o=new i.AxesHelper(1e3);r.add(o),t.mapAxesHelpers.push(o)}))}},{key:"removeAxesHelpers",value:function(){this.mapAxesHelpers.forEach((function(t,e){t.parent&&t.parent.remove(t)}))}},{key:"tiltMaps",value:function(t){var e=this;this.maps.forEach((function(n,r){n.object.setRotationFromAxisAngle(e.rotationAxis,t)}))}},{key:"focusOnMaps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.start,r=void 0===n?this._focusMapsStart:n,o=e.len,a=void 0===o?this._focusMapsLen:o,s=e.dir,u=void 0===s?this._focusMapsDir:s,l=e.mapIndices,c=e.duration,h=void 0===c?this._focusAnimDuration:c,f=e.curve,d=void 0===f?this._focusAnimCurve:f;return r===Hl?u=Yl:r===Wl&&(u=Xl),this._focusMapsStart=r,this._focusMapsLen=a,this._focusMapsDir=u,this._focusAnimDuration=h,this._focusAnimCurve=d,new Promise((function(e){var n=l?t.getMapsByIndices(l):t.getFocusMaps(r,u,a),o=ra(t.maps,t.mapSpacing),s=o.max.z-o.min.z,c=ra(n,t.mapSpacing);c.min.setX(o.min.x),c.max.setX(o.max.x),t._focusBox=c,t._scrollWindow=c.max.z-c.min.z;var f=c.max.x-c.min.x,p=c.max.z-c.min.z,m=-s/2+p/2,v=+s/2-p/2,g=c.clone(),y=t.mapView.canvasWidth,b=t.mapView.canvasHeight;if(t.padding.top+t.padding.bottom<b){var _=b/(b-t.padding.top);g.max.z=c.min.z+p*_;var w=p/2*_-p/2;v+=w,m+=w;var x=b/(b-t.padding.bottom);g.min.z=c.max.z-p*x;var M=p/2*x-p/2;v-=M,m-=M}else console.warn("top + bottom padding cannot exceed canvas height, ignoring");if(t.padding.left+t.padding.right<y){var E=y/(y-t.padding.left);g.min.x=c.max.x-f*E;var S=y/(y-t.padding.right);g.max.x=c.min.x+f*S}else console.warn("left + right padding cannot exceed canvas width, ignoring");var A=g.max.x-g.min.x,T=g.max.z-g.min.z,q=g.min.x+A/2,P=g.min.z+T/2,L=t.mapView.controls.camera.fov;if(t.debug){t.removeHelperBoundingBoxes();var O=new i.Box3Helper(c,16711680);t.object.add(O),t._helperBoundingBoxes.push(O);var C=new i.Box3Helper(g,16776960);t.object.add(C),t._helperBoundingBoxes.push(C)}t.mapView.controls.minPedestal=m,t.mapView.controls.maxPedestal=v;var I=pa(g,T,L),R=pa(g,A,L*t.mapView.controls.camera.aspect),k=Math.max(R,I);t.mapView.controls.expandZoomLimits(k);var N={zoom:k,rotation:0,position:{x:q,y:0,z:P}},B=t.mapView.controls.animateCamera(N,h,d,(function(){t.tween=B,e(t.tween)}))}))}},{key:"getFocusMaps",value:function(t,e,n){var r=this.maps.slice(0);return n<this.maps.length&&(t===Hl?r=r.slice(0,n):t===Wl?r=r.slice(-n):"number"==typeof t&&(e===Yl?r=r.slice(t,t+n):e===Xl&&(r=r.slice(Math.max(t+1-n,0),t+1)))),r}},{key:"getFocusBox",value:function(){var t=ra(this.maps,this.mapSpacing),e=t.max.z-t.min.z,n=this._focusBox.clone(),r=this._focusBox.max.z-this._focusBox.min.z,i=t.min.z+r/2,o=t.max.z-r/2,a=(this.mapView.controls.getPedestal()-i)/(o-i);return n.min.z=t.min.z+a*(e-r),n.max.z=t.min.z+r+a*(e-r),n}},{key:"getVisibleMaps",value:function(){var t=this.getFocusBox();return this.maps.filter((function(e){return t.containsBox(la(e.object))}))}},{key:"getVisibleMapIds",value:function(){return this.getVisibleMaps().map((function(t){return t.id}))}},{key:"getVisibleMapIndices",value:function(){for(var t=this.getFocusBox(),e=[],n=0;n<this.maps.length;n++){var r=this.maps[n];t.containsBox(la(r.object))&&e.push(n)}return e}},{key:"getMapsByIndices",value:function(t){return this.maps.filter((function(e,n){return t.includes(n)}))}},{key:"scrollMapsUp",value:function(){var t,e=this.getVisibleMapIndices()[0];if(e>0){var n=e-1;return t=Object(r.B)(new Array(this._focusMapsLen)).map((function(t,e){return n+e})),this.focusOnMaps({mapIndices:t})}return Promise.resolve()}},{key:"scrollMapsDown",value:function(){var t,e=this.getVisibleMapIndices(),n=e[e.length-1];if(n<this.maps.length-1){var i=n+1;return t=Object(r.B)(new Array(this._focusMapsLen)).map((function(t,e){return i-e})).reverse(),this.focusOnMaps({mapIndices:t})}return Promise.resolve()}},{key:"resize",value:function(){this.focusOnMaps()}},{key:"destroy",value:function(){this.removeMaps(),this.debug&&(this.removeMapBoundingBoxes(),this.removeHelperBoundingBoxes()),this.mapView.setViewState(wh.SINGLE_FLOOR),this.mapView.controls.setPosition(0,0),this.mapView.controls.setPedestal(0)}},{key:"viewPortHeight",get:function(){return this.mapView.canvasHeight-this.padding.top-this.padding.bottom}},{key:"viewPortWidth",get:function(){return this.mapView.canvasWidth-this.padding.left-this.padding.right}},{key:"mapTiltDegrees",get:function(){return 180*this.mapTilt/Math.PI},set:function(t){this.mapTilt=t*Math.PI/180,this.positionMaps(),this.debug&&(this.removeMapBoundingBoxes(),this.addMapBoundingBoxes())}},{key:"projections",get:function(){return t={maps:this.maps,width:this.mapView.canvasWidth,height:this.mapView.canvasHeight,camera:this.mapView.controls.camera},e=t.width,n=t.height,r=t.camera,t.maps.map((function(t){for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=ca(la(t.object)),l=0;l<u.length;l++){var c=u[l],h={x:((c=c.project(r)).x+1)/2*e,y:(1-c.y)/2*n};i=Math.min(h.x,i),o=Math.min(h.y,o),a=Math.max(h.x,a),s=Math.max(h.y,s)}return{min:{x:i,y:o},max:{x:a,y:s}}}));var t,e,n,r}},{key:"bottomMapVisible",get:function(){var t=this.maps[this.maps.length-1];return this.getVisibleMaps().includes(t)}},{key:"topMapVisible",get:function(){var t=this.maps[0];return this.getVisibleMaps().includes(t)}}]),t}();function Jl(t){return t.sort((function(t,e){return e.mapClass.elevation-t.mapClass.elevation}))}var Kl=function(t,e){var n=t.min,r=t.max,o=t.margin;o||(o=1);var a=e.boundingBox;a||(a=(new i.Box3).setFromObject(e.object),e.boundingBox=a);var s={min:{},max:{},margin:o};s.min.x=Math.min(n.x,a.min.x*o),s.max.x=Math.max(r.x,a.max.x*o),s.min.y=Math.min(n.y,a.min.y*o),s.max.y=Math.max(r.y,a.max.y*o);var u=(s.max.x+s.min.x)/2,l=(s.max.y+s.min.y)/2,c=Math.sqrt(Math.pow(s.max.x-u,2)+Math.pow(s.max.y-l,2));if(s.radius=c,"function"==typeof t.getCenter){var h=new i.Vector3;s.center=t.getCenter(h)}else s.center=t.center;return s.margin=o,s},Ql=function(){function t(e,n,o,a,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};Object(r.t)(this,t),this.mapObjects=new Map,this.currentMap=void 0,this.object=new i.Object3D,this._showCount=0,this._mapObjectsSortedByElevationDirty=!1,this.expanded=!1,Object.assign(this,r.v.prototype),this.polygonMeshesById=e,this.markerWorld=n,this.mapView=a,this.renderer=o,this.loadOptions=u,this._loadMethod=u.mode,this.addMap=this.addMap.bind(this),this.setMap=this.setMap.bind(this),this.removeMap=this.removeMap.bind(this),this.removeAllMaps=this.removeAllMaps.bind(this),this.loadMaps=this.loadMaps.bind(this),this.expandMaps=this.expandMaps.bind(this),this.contractMaps=this.contractMaps.bind(this),this.expandPanBounds=this.expandPanBounds.bind(this),this.loadOptions.taskScheduler=s}return Object(r.s)(t,[{key:"expandPanBounds",value:function(t){this.mapView.controls.panBounds=Kl(t,this.currentMap)}},{key:"addMap",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._mapObjectsSortedByElevationDirty=!0;var r=new zl(t,this.polygonMeshesById,this.markerWorld,this._showCount,this.mapView,this.loadOptions);return r.on("flippablesNeedUpdating",(function(t){return e.publish("flippablesNeedUpdating",t)})),r.on("render",(function(t){return e.publish("render",t)})),r.on("updateMarkerPosition",(function(t){return e.publish("updateMarkerPosition",t)})),this.mapObjects.set(t.id,r),null==this.currentMap?(this.setMap(t),r.load().then(n)):Promise.resolve().then(n)}},{key:"addPersistentSetMapCallback",value:function(t){this.persistentSetMapCallbacks=Array.isArray(this.persistentSetMapCallbacks)&&this.persistentSetMapCallbacks||[],this.persistentSetMapCallbacks.push(t)}},{key:"setMap",value:function(t,e){var n,i=this;this.setMapCallbacks||(this.setMapCallbacks=[]);var o=sa(t);return(n=this.setMapCallbacks).push.apply(n,Object(r.B)(this.persistentSetMapCallbacks||[])),e&&this.setMapCallbacks.push(e),new Promise((function(t,e){if(i.mapObjects.has(o)){null!=i.currentMap&&(i.currentMap.textObjects.forEach((function(t){t instanceof As&&t.hide()})),i.currentMap.removeMarkers(),i.currentMap.colliders.forEach((function(t){t.disable()})),i.object.remove(i.currentMap.object)),i.currentMap=i.mapObjects.get(o),i.currentMap.addPendingMapLoadedTask("resolveSetMap",(function(){t(),i.setMapCallbacks.forEach((function(t){return t()})),i.setMapCallbacks=[]}));var n=i.currentMap.mapClass.id,r=i.loadOptions&&i.loadOptions.zoomOverrides&&i.loadOptions.zoomOverrides.zoomMultiplier||7.9;i.mapView.controls.zoomFactor=i.mapView.getMapScale()/r,i.currentMap.load().then((function(t){if(!i.currentMap||i.currentMap.mapClass.id===t.mapClass.id){t.seenByCamera||(t.seenByCamera=!0,t._popinChildObjects());var e=Kl(i.mapView.controls.panBounds,i.currentMap);i.mapView.controls.panBounds=e;var n=i.mapView.getZoomLevelForCurrentMap();i.mapView.controls.expandZoomLimits(n),i.object.add(i.currentMap.object),i.currentMap.addMarkers(),i.currentMap.textObjects.forEach((function(t){"function"==typeof t.show&&t.show()})),i.currentMap.colliders.forEach((function(t){t.enable()})),i.publish("flippablesNeedUpdating",!0),i.publish("render"),"function"==typeof i.mapView.onMapChanged&&i.mapView.onMapChanged(t.mapClass.id)}})).catch((function(t){console.error("Error loading map ",n,t)}))}else{var a={error:"Map does not exist"};console.error(a.error),i.setMapCallbacks.forEach((function(t){return t(a)})),i.setMapCallbacks=[],e(a)}}))}},{key:"loadMaps",value:function(t,e){for(var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=sa(e),s=0;s<t.length;s++){var u=t[s],l=new zl(u,this.polygonMeshesById,this.markerWorld,this._showCount,this.mapView,this.loadOptions);l.on("flippablesNeedUpdating",(function(t){return n.publish("flippablesNeedUpdating",t)})),l.on("render",(function(t){return n.publish("render",t)})),l.on("updateMarkerPosition",(function(t){return n.publish("updateMarkerPosition",t)})),l.on("texture-loaded",(function(t){return n.publish("texture-loaded",t)})),this.mapObjects.set(u.id,l),u.id===a&&(l.load().then((function(){n.mapView.resetCamera(),i()})).catch(o),this.setMap(u,r))}}},{key:"removeMap",value:function(t){this._mapObjectsSortedByElevationDirty=!0;var e=sa(t);if(this.mapObjects.has(e)){var n=this.mapObjects.get(e);this.currentMap===n&&(this.currentMap=null),n.off("flippablesNeedUpdating"),n.off("render"),n.destroy(),this.mapObjects.delete(e)}this.renderer.renderLists.dispose()}},{key:"removeAllMaps",value:function(){this._mapObjectsSortedByElevationDirty=!0;var t=!0,e=!1,n=void 0;try{for(var r,i=this.mapObjects.values()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.destroy(),o=null}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.mapObjects.clear()}},{key:"getCompoundBoundingBoxPoints",value:function(t){this.mapView.controls.orbit.updateMatrixWorld();var e=this.mapView.controls.camera.matrixWorld,n=this.mapView.controls.camera.matrixWorldInverse,r=new i.Vector3(1/0,1/0,1/0),o=new i.Vector3(-1/0,-1/0,-1/0);t.forEach((function(t){t.applyMatrix(n),ca(la(t)).forEach((function(t){r.min(t),o.max(t)})),t.applyMatrix(e)}));var a=ca({min:r,max:o});return a.forEach((function(t){return t.applyMatrix4(e)})),a}},{key:"expandMaps",value:function(t,e){var n,o=this,a=Object(r.r)({focus:!1,debug:!1,rotation:0,duration:600},e);if(this.expanded)return Promise.resolve({maps:this.renderedMaps,projections:this.projections});if(!Array.isArray(t))return Promise.reject("Maps to expand are not an array");var s=t.map((function(t){var r="string"!=typeof t&&null!=t.id?t.id:t;if("string"!=typeof t&&!0===t.connection&&Array.isArray(t.maps)){var a=t.maps.map((function(t){var e="string"!=typeof t?t.id:t;return o.mapObjects.has(e)||(console.error("Expand maps: > Map ".concat(e," does not exist")),n="Expand maps: > Map ".concat(e," does not exist")),o.mapObjects.get(e)}));a=Jl(a);var s=new i.PlaneGeometry(1,1,1);!0===e.debug&&(s=new i.PlaneGeometry(500,500,10));var u=new i.MeshBasicMaterial({color:11184810});return{connection:!0,object:new i.Mesh(s,u),connectionNodes:t.connectionNodes,mapClass:{elevation:a[0].mapClass.elevation},maps:a}}if(o.mapObjects.has(r))return o.mapObjects.get(r);console.error("Expand maps: > Map ".concat(r," does not exist")),n="Expand maps: Map ".concat(r," does not exist")}));if(null!=n)return Promise.reject(n);var u=(s=Jl(s)).map((function(t){return t.connection&&Array.isArray(t.maps)?Promise.all(t.maps.map((function(t){return t.load()}))):t.load()}));return Promise.all(u).then((function(){return o.expanded=!0,o.multiFloorView=new Zl(o.mapView,o.object,s,a),o.multiFloorView.focusOnMaps(a)})).then((function(){return o.renderedMaps=s,o.projections=o.multiFloorView.projections,Promise.resolve({maps:s,projections:o.projections})}))}},{key:"contractMaps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{focus:!1,debug:!1,duration:300};if(!this.expanded)return Promise.resolve();this.expanded=!1,this.multiFloorView.destroy(),this.object.add(this.currentMap.object),this.publish("render");var n=Kl(this.mapView.controls.panBounds,this);this.mapView.controls.panBounds=n;var r=this.mapView.getZoomLevelForObject(this.object);return this.mapView.controls.expandZoomLimits(r),new Promise((function(n){e.focus?t.mapView.focusOn({boundingBox:la(t.object),padding:t.mapView.cachedPadding,debug:e.debug,duration:e.duration,focusZoomFactor:1,callback:n,tilt:.3}):n()}))}},{key:"mapsFullyLoaded",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=Object(r.B)(this.mapObjects.values()).map((function(t){return t.connection&&Array.isArray(t.maps)?Promise.all(t.maps.map((function(t){return t._loaderPromise}))):t._loaderPromise}));return Promise.all(e).then(t)}},{key:"scrollMapsUp",value:function(){return this.multiFloorView?this.multiFloorView.scrollMapsUp():(console.warn("scrollMapsUp() not supported unless multifloor is active"),Promise.reject())}},{key:"scrollMapsDown",value:function(){return this.multiFloorView?this.multiFloorView.scrollMapsDown():(console.warn("scrollMapsDown() not supported unless multifloor is active"),Promise.reject())}},{key:"tiltMaps",value:function(t){this.multiFloorView&&(this.multiFloorView.mapTiltDegrees=t)}},{key:"resize",value:function(){null!=this.multiFloorView&&this.multiFloorView.resize()}},{key:"destroy",value:function(){this.removeAllMaps(),this.object.destroy()}},{key:"mapObjectsSortedByElevation",get:function(){return!this._mapObjectsSortedByElevationDirty&&Array.isArray(this._mapObjectsSortedByElevation)||(this._mapObjectsSortedByElevation=Array.from(this.mapObjects.values()).sort((function(t,e){return e.mapClass.elevation-t.mapClass.elevation})),this._mapObjectsSortedByElevationDirty=!1),this._mapObjectsSortedByElevation}},{key:"visibleMaps",get:function(){return this.mapObjectsSortedByElevation.filter((function(t){return t.visible}))}}]),t}(),$l=function(){function t(e){var n=e.vector,i=e.mapObject,o=e.canvasWidth,a=e.canvasHeight,s=e.cameraObject,u=e.collider;Object(r.t)(this,t),this.width=25,this.height=25,this.x=0,this.y=0,this.cameraObject=s,this.vector=n,this.mapObject=i,this.canvasHeight=a,this.canvasWidth=o,this.collider=u,this.update=this.update.bind(this)}return Object(r.s)(t,[{key:"update",value:function(t){var e=t.canvasWidth,n=t.canvasHeight;this.canvasWidth=e,this.canvasHeight=n;var r=this.vector.clone().applyMatrix4(this.mapObject.object.matrix).project(this.cameraObject),i=(r.x+1)/2*this.canvasWidth-this.width/2,o=(1-r.y)/2*this.canvasHeight-this.height/2,a=r.z;this.x=i,this.y=o,this.distanceFromCamera=a}}]),t}(),tc=function(){function t(e){var n=e.collisionEngine,i=e.cameraObject,o=e.canvasWidth,a=e.canvasHeight;Object(r.t)(this,t),this.pathSegments=new Map,this.collisionEngine=n,this.cameraObject=i,this.canvasWidth=o,this.canvasHeight=a,this.add=this.add.bind(this),this.update=this.update.bind(this),this.remove=this.remove.bind(this),this.clear=this.clear.bind(this)}return Object(r.s)(t,[{key:"add",value:function(t,e,n){var r=this,i=this.collisionEngine.add({rank:hs.MEDIUM,userData:{type:"path"}}),o=n.mapObject,a=e.map((function(t,e){return new $l({vector:t,cameraObject:r.cameraObject,mapObject:o,canvasWidth:r.canvasWidth,canvasHeight:r.canvasHeight,collider:i})}));this.pathSegments.set(t.id,{collider:i,points:a,mapObject:o})}},{key:"remove",value:function(t){var e=this.pathSegments.get(t.id);null!=e&&(this.collisionEngine.remove(e.collider),this.pathSegments.delete(t.id))}},{key:"clear",value:function(){var t=this;Array.from(this.pathSegments.values()).forEach((function(e){return t.collisionEngine.remove(e.collider)})),this.pathSegments.clear()}},{key:"update",value:function(t){var e=t.canvasWidth,n=t.canvasHeight;this.canvasWidth=e,this.canvasHeight=n,Array.from(this.pathSegments.values()).forEach((function(t){var r=t.collider,i=t.points,o=t.mapObject,a={};i.forEach((function(t,r){t.update({canvasWidth:e,canvasHeight:n}),a[r]={collider:t.collider,x:t.x,y:t.y,h:t.height,w:t.width}})),r.updateHitAreas(a),r.enabled=o.visible}))}}]),t}(),ec="regular",nc="small",rc="compact",ic="default",oc="blank",ac=function(t){function e(t,n,i){var o,a,s,u,l;switch(Object(r.t)(this,e),i.size){case ec:a=30,s=30,u=14,l=14;break;case rc:a=10,s=10;break;case nc:a=24,s=24;break;default:a=30,s=30,u=14,l=14}var c=Object(r.r)({size:ec,scale:1,width:a,height:s,iconWidth:u,iconHeight:l},i),h=is({type:t.type,direction:t.direction,iconWidth:c.iconWidth,iconHeight:c.iconHeight,color:c.color,scale:c.scale}),f=n.convertTo3DMapPosition(t);(o=Object(r.F)(this,Object(r.G)(e).call(this,n,{html:c.size===rc||c.style===oc?"<div></div>":h,position:f,className:"mappedin-connection-marker",map:t.map,options:{ignoreCollisions:!0}})))._handleOnTap=o._handleOnTap.bind(Object(r.H)(o)),o.connection=t;var d={width:"".concat(a*c.scale,"px"),height:"".concat(s*c.scale,"px"),"border-width":"".concat(2*c.scale,"px")};return c.style===oc&&(d.background="white",d["border-color"]="#a5a5a5",d["border-width"]="".concat(3*c.scale,"px")),window.PointerEvent?o.div.addEventListener("pointerup",o._handleOnTap,!1):o.div.addEventListener("click",o._handleOnTap,!1),Object.assign(o.div.style,d),o}return Object(r.E)(e,Ja),Object(r.s)(e,[{key:"destroy",value:function(){window.PointerEvent?this.div.removeEventListener("pointerup",this._handleOnTap,!1):this.div.removeEventListener("click",this._handleOnTap,!1),Object(r.O)(Object(r.G)(e.prototype),"destroy",this).call(this)}},{key:"_handleOnTap",value:function(t){t.stopPropagation(),this.publish("tap",this.connection)}}]),e}();function sc(t){if(null==t||null==t.path)throw new Error("Navigator requires directions to be set");return!0}var uc={SINGLEFLOOR:0,MULTIFLOOR_OVERVIEW:1,MULTIFLOOR_FOCUSED:2};function lc(t,e){var n=Object.assign({},t);return va(t)&&va(e)&&Object.keys(e).forEach((function(o){e[o]instanceof i.Color?Object.assign(n,Object(r.u)({},o,e[o])):va(e[o])&&o in t?n[o]=lc(t[o],e[o]):Object.assign(n,Object(r.u)({},o,e[o]))})),n}var cc=function(){function t(e,n,i,o,a,s){Object(r.t)(this,t),this._virtualLayers=new Set,this._directions=void 0,this._options={},this._navigationOptions=void 0,this.overviewVisible=!1,this.connectionMarkers=[],this.destinationMarker=null,this.mode=null,this.MODES=uc,this.mapView=e,this.mapManager=n,this.venue=i,this.canvasWidth=o,this.canvasHeight=a,this.camera=s,this.showOverview=this.showOverview.bind(this),this.hideOverview=this.hideOverview.bind(this),this.zoomIn=this.zoomIn.bind(this),this.zoomOut=this.zoomOut.bind(this),this.setDirections=this.setDirections.bind(this),this.setOptions=this.setOptions.bind(this),this._drawVirtualLayer=this._drawVirtualLayer.bind(this),this._handleConnectionTap=this._handleConnectionTap.bind(this),this._drawConnectionMarkers=this._drawConnectionMarkers.bind(this),this._drawConnectionMarker=this._drawConnectionMarker.bind(this),this._drawDestinationMarker=this._drawDestinationMarker.bind(this),this._drawDepartureMarker=this._drawDepartureMarker.bind(this),this._removeConnectionMarkers=this._removeConnectionMarkers.bind(this),this.setScale()}return Object(r.s)(t,[{key:"_drawVirtualLayer",value:function(t){var e=this;if(!0!==t.connection)return null;var n="";t.maps.map((function(t,r){var i=fa({"margin-top":5*r+"px",width:"".concat(100*e.scale,"px"),height:"".concat(100*e.scale,"px")});n+='<div class="mappedin-map-connection-layer" style="'.concat(i,'"></div>')}));var r=t.maps.map((function(t){return e.venue.maps.find((function(e){return e.id===t.id}))})),i=r.length>1?"".concat(r[0].shortName," - ").concat(r[r.length-1].shortName):r[0].shortName,o=fa({width:"".concat(100*this.scale,"px"),height:"".concat(100*this.scale,"px"),"font-size":"".concat(30*this.scale,"px")}),a=is({type:t.connectionNodes[0].type,direction:t.connectionNodes[0].direction,iconWidth:14,iconHeight:14,scale:this.scale}),s=fa({width:30*this.scale+"px",height:30*this.scale+"px"}),u='<div class="mappedin-connection-marker" style="'.concat(s,'">').concat(a,"</div>"),l=fa({height:46*this.scale+"px","padding-left":5*this.scale+"px","padding-right":5*this.scale+"px","border-radius":12*this.scale+"px"}),c=fa({margin:5*this.scale+"px"}),h=fa({margin:5*this.scale+"px","font-size":24*this.scale+"px"}),f='<div class="mappedin-map-connection-labels" style="'.concat(o,'">\n\t\t\t\t<div class="mappedin-map-connection-bubble" style="').concat(l,'">\n\t\t\t\t<div style="').concat(c,'">').concat(u,'</div>\n\t\t\t\t<div class="mappedin-map-connection-label" style="').concat(h,'">').concat(i,"</div>\n\t\t\t\t</div>\n\t\t\t</div>");t.maps[0].object.updateMatrixWorld();var d=new Ja(this.mapView,{html:n+f,position:t.object.position,className:"mappedin-map-connection-layer-container",map:t.maps[0],options:{ignoreCollisions:!0}});return d.setPosition(d._mOriginalPosition.clone().add(t.object.position)),this.mapView.addMarker(d),d.show(),d}},{key:"setDirections",value:function(t){this._directions=t}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.scale=t}},{key:"_drawDepartureMarker",value:function(){var t=this.connections.find((function(t){return"departure"===t.type}));if(null!=t){var e=is({type:"start",iconWidth:14,iconHight:14,scale:this.scale,color:"black"}),n=this.mapManager.mapObjects.get(t.map);n.object.updateMatrixWorld();var r=fa({width:"".concat(14*this.scale,"px"),height:"".concat(14*this.scale,"px")}),i=this.mapView.createMarker('<div style="'.concat(r,'" class="mappedin-departure-icon">').concat(e,"</div>"),this.mapView.convertTo3DMapPosition(t),"mappedin-departure__container",n,{ignoreCollisions:!0,rotateWithCamera:!0});i.div.style.zIndex=1,this.connectionMarkers.push(i)}}},{key:"_drawDestinationMarker",value:function(){var t=this.connections.find((function(t){return"destination"===t.type}));if(null!=t){var e,n,r,i,o,a,s,u,l,c,h,f,d=(o=void 0===(i=(e={width:30,height:30,scale:this.scale,color:"red"}).height)?14:i,s=void 0===(a=e.color)?"white":a,c='<svg\n\t\t\theight="'.concat((r=void 0===(n=e.width)?14:n)*(l=void 0===(u=e.scale)?1:u),'"\n\t\t\tviewBox="0 0 36 36"\n\t\t\twidth="').concat(o*l,'"\n\t\t>\n\t\t\t<g fill="white">\n\t\t\t\t').concat(ga.get("destination-marker-back"),"\n\t\t\t</g>\n\t\t</svg>"),h='<svg\n\t\t\theight="'.concat(r*l,'"\n\t\t\tviewBox="0 0 36 36"\n\t\t\twidth="').concat(o*l,'"\n\t\t>\n\t\t\t<g fill="').concat(s,'">\n\t\t\t\t').concat(ga.get("destination-marker-front"),"\n\t\t\t</g>\n\t\t</svg>"),f=fa({width:r*l+"px",height:o*l+"px"}),'<div class="mappedin-destination-icon" style="'.concat(f,'">\n\t\t\t\t<div class="mappedin-destination-icon-back">').concat(c,'</div>\n\t\t\t\t<div class="mappedin-destination-icon-front">').concat(h,"</div>\n\t\t\t</div>")),p=this.mapManager.mapObjects.get(t.map);p.object.updateMatrixWorld();var m=this.mapView.createMarker(d,this.mapView.convertTo3DMapPosition(t),"mappedin-destination__container",p,{ignoreCollisions:!0});m.div.style.zIndex=1,this.connectionMarkers.push(m)}}},{key:"_drawConnectionMarker",value:function(t,e,n){var r=this,i=new ac(t,this.mapView,{scale:this.scale,size:e,style:n}),o=this.mapManager.mapObjects.get(t.map);return o.object.updateMatrixWorld(),i.setPosition(i._mOriginalPosition.clone().add(o.object.position)),o.addPendingMarkerTask(i,(function(){i._mDeleted||(o.markers.push(i),r.mapView.addMarker(i),i.show())})),i}},{key:"_drawConnectionMarkers",value:function(t){var e=this,n=t.mapIds,r=void 0===n?[]:n,i=t.compactEntranceMarkers,o=void 0!==i&&i,a=t.size,s=void 0===a?ec:a,u=t.style,l=void 0===u?ic:u;this.connectionMarkers=this.connections.filter((function(t){return(0===r.length||r.includes(t.map))&&"departure"!==t.type&&"destination"!==t.type})).map((function(t){var n=o&&t.isEntrance?rc:s,r=l;return e._options.showConnectionType||(r=oc,n=nc),e._drawConnectionMarker(t,n,r)}))}},{key:"setOptions",value:function(t){this._options=lc({hideLabels:!1,debug:!1,connectionsThreshold:100,combineSimilarConnections:!0,drawConnectionMarkers:!0,drawDestinationMarker:!0,drawDepartureMarker:!0,showConnectionType:!0,expandOptions:{enabled:!0},pathOptions:{connectionPathOptions:{}},focusOptions:{}},lc(this._options,t))}},{key:"showOverview",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=t&&this.setDirections(t),this.setOptions(n);var i=Object(r.r)({},this._directions);sc(i);var o=i.path,a=i.path[0].map,s=function(){return Promise.resolve()};return this.mapView.removeAllPaths(),this._removeVirtualLayers(),this._removeConnectionMarkers(),(this.overviewVisible||this.mapManager.expanded)&&(s=this.hideOverview),s().then((function(){return e.mapView.setMap(a)})).then((function(){if(as(i)&&e._options.expandOptions.enabled){e._options.hideLabels&&e.mapView.hideAllLabels();var t=os(o),n=os(o);if(t.length>2){var a=(n=cs(i,e.mapManager.mapObjects,e._options.connectionsThreshold,e._options.combineSimilarConnections)).reduce((function(t,e){return e.connection&&t.push.apply(t,Object(r.B)(e.maps)),t}),[]).map((function(t){return"string"==typeof t?t:t.id}));o=o.filter((function(t){return-1===a.indexOf(t.map)}))}var s=n.map((function(t){return!0===t.connection?t:e.mapManager.mapObjects.get(t)})),u=s[0].mapClass.elevation>s[s.length-1].mapClass.elevation?"top":"bottom";return e.mapManager.expandMaps(n,Object(r.r)({focus:!0,debug:e._options.debug,duration:e._options.animationDuration,start:u},e._options.expandOptions)).then((function(t){var n=t.maps;e.mode=uc.MULTIFLOOR_OVERVIEW,e.overviewVisible=!0,e.renderedMaps=n,e.connections=ls(i,e.mapManager.mapObjects),e._options.drawConnectionMarkers&&e._drawConnectionMarkers({compactEntranceMarkers:!0,mapIds:e.renderedMaps.map((function(t){return t.id})).filter((function(t){return t}))});var a,s=e.renderedMaps.map(e._drawVirtualLayer).filter((function(t){return t}));s.length>0&&(a=e._virtualLayers).add.apply(a,Object(r.B)(s)),e.mapView.drawPath(o,e._options.pathOptions),e._options.drawDestinationMarker&&e._drawDestinationMarker(),e._options.drawDepartureMarker&&e._drawDepartureMarker()}))}e.mode=uc.SINGLEFLOOR,e.mapView.drawPath(o,e._options.pathOptions);var l=Object.assign({},e._options.focusOptions);return l.nodes=o,e.mapView.focusOn(l),e.connections=ls(i,e.mapManager.mapObjects),e._options.drawDestinationMarker&&e._drawDestinationMarker(),e._options.drawDepartureMarker&&e._drawDepartureMarker(),Promise.resolve()}))}},{key:"hideOverview",value:function(){var t=this;return this.mapView.removeAllPaths(),this._removeVirtualLayers(),this._removeConnectionMarkers(),this.mapManager.contractMaps({focus:!0}).then((function(){return t.overviewVisible=!1,t.mode=null,Promise.resolve()}))}},{key:"_handleConnectionTap",value:function(t){var e=this,n=t.exitMap;"function"==typeof this.onConnectionClicked&&this.onConnectionClicked({mapId:n})||this.zoomOut().then((function(){return e.zoomIn(n)}))}},{key:"zoomIn",value:function(t){var e=this,n=sa(t);sc(this._directions);var i=Object(r.r)({},this._directions);return this.mapView.removeAllPaths(),this._removeConnectionMarkers(),this._removeVirtualLayers(),this.mapView.setMap(n).then((function(){return e.mapManager.contractMaps({focus:!0})})).then((function(){e.mapView.drawPath(i.path,Object(r.r)({},e._options.pathOptions,{drawConnectionSegments:!1}));var t=Object.assign({},e._options.focusOptions);return t.nodes=i.path.filter((function(t){return t.map===n})),e.mapView.focusOn(t),e._options.drawConnectionMarkers&&e._drawConnectionMarkers({mapIds:[n],compactEntranceMarkers:!0}),e._options.drawDestinationMarker&&e._drawDestinationMarker(),e._options.drawDepartureMarker&&e._drawDepartureMarker(),e.connectionMarkers.forEach((function(t){t.on("tap",e._handleConnectionTap)})),e.overviewVisible=!1,e.mode=uc.MULTIFLOOR_FOCUSED,Promise.resolve()}))}},{key:"reset",value:function(){this._options={},this._removeConnectionMarkers(),this.mapView.removeAllPaths()}},{key:"_removeConnectionMarkers",value:function(){var t=this;this.connectionMarkers.forEach((function(e){t.mapView.removeMarker(e)})),this.connectionMarkers=[]}},{key:"zoomOut",value:function(){return sc(this._directions),this.mapView.removeAllPaths(),this._removeConnectionMarkers(),this.showOverview()}},{key:"_removeVirtualLayers",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._virtualLayers[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.mapView.removeMarker(o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this._virtualLayers.clear()}},{key:"projections",get:function(){return this.mapManager.projections}}]),t}(),hc=2/(Math.sqrt(5)+1)*360/6,fc=function(){function t(){Object(r.t)(this,t),this._element=document.createElement("div"),this._titleElement=document.createElement("select"),this._minimizeElement=document.createElement("button"),this._performancePanelElement=document.createElement("div"),this._performanceEntries=new Map,this._sortedPerformanceEntryNames=[];var e=document.createElement("option");e.value="Performance",e.innerHTML="Performance",e.selected="selected",this._titleElement.appendChild(e),this._titleElement.addEventListener("change",this._onCategoryChanged.bind(this)),this._overviewGraph=new pc({width:320,height:128,seriesList:[]}),this._controlPanels=new Map,this._sortedControlPanelNames=[],this._minimized=!1,this._element.appendChild(this._titleElement),this._element.appendChild(this._minimizeElement),this._element.appendChild(this._performancePanelElement),this._performancePanelElement.appendChild(this._overviewGraph.element),this._layout(),this._minimizeElement.addEventListener("click",this._onMinimizeClicked.bind(this)),null==window.MappedinDebug&&(window.MappedinDebug={}),window.MappedinDebug.DebugUI=this}return Object(r.s)(t,[{key:"destroy",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._performanceEntries.values()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value.destroy()}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var o=!0,a=!1,s=void 0;try{for(var u,l=this._controlPanels.values()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)u.value.destroy()}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}this._controlPanels=null,this._performanceEntries=null,this._element=null,this._titleElement=null,this._minimizeElement=null,this._performancePanelElement=null,this._overviewGraph=null,Object.setPrototypeOf(this,null)}},{key:"reportFramePerformance",value:function(t){var e=!1;for(var n in t){if(!this._performanceEntries.has(n)){var r=new dc({name:n});this._performanceEntries.set(n,r),this._performancePanelElement.appendChild(r.element),this._sortedPerformanceEntryNames.push(n),this._sortedPerformanceEntryNames.sort(),e=!0}this._performanceEntries.get(n).report(t[n])}var i=!0,o=!1,a=void 0;try{for(var s,u=this._performanceEntries.keys()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;null==t[l]&&this._performanceEntries.get(l).report(0)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}e&&this._updateLayout();var c=!0,h=!1,f=void 0;try{for(var d,p=this._performanceEntries.values()[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)if(d.value.series.changed()){this._overviewGraph.redraw();break}}catch(t){h=!0,f=t}finally{try{c||null==p.return||p.return()}finally{if(h)throw f}}}},{key:"addDebugControls",value:function(t){for(var e in t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[e][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.name,l=s.description,c=s.control;this._addDebugControl(e,u,l,c)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this._controlPanels.get(e)._updateLayout()}this._updateLayout()}},{key:"addDebugControl",value:function(t,e,n,r){this._addDebugControl(t,e,n,r),this._updateLayout(),this._controlPanels.get(t)._updateLayout()}},{key:"removeDebugControls",value:function(t){for(var e in t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[e][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._removeDebugControl(e,s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this._controlPanels.get(e)._updateLayout()}this._updateLayout()}},{key:"removeDebugControl",value:function(t,e){this._removeDebugControl(t,e),this._updateLayout(),this._controlPanels.get(t)._updateLayout()}},{key:"_addDebugControl",value:function(t,e,n,i){if(!this._controlPanels.has(t)){var o=new r.Q({name:t});this._controlPanels.set(t,o),this._element.appendChild(o.element);var a=document.createElement("option");a.value=t,a.innerHTML=t;for(var s=this._titleElement.children,u=1;u<s.length&&!(s[u].value>t);++u);u===s.length?this._titleElement.appendChild(a):this._titleElement.insertBefore(a,s[u]),Object.assign(o.element.style,{display:"hidden",position:"absolute",left:"8px",right:"8px",top:"36px"})}this._controlPanels.get(t).addControl(e,n,i)}},{key:"_removeDebugControl",value:function(t,e){this._controlPanels.get(t).removeControl(e)}},{key:"_layout",value:function(){Object.assign(this._element.style,{display:"block",position:"absolute",right:"8px",top:"8px",width:"336px","font-family":"sans-serif",background:"rgba(255, 255, 255, 0.9)",outline:"1px solid white"}),Object.assign(this._titleElement.style,{display:"block",position:"absolute",left:"8px",top:"8px","font-size":"14px"}),Object.assign(this._minimizeElement.style,{display:"block",position:"absolute",right:"8px",top:"8px",width:"30px",height:"20px"}),Object.assign(this._performancePanelElement.style,{display:"block",position:"absolute",left:"8px",right:"8px",top:"36px"}),Object.assign(this._overviewGraph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:"128px",border:"1px solid white",outline:"1px solid #bbb"}),this._updateLayout()}},{key:"_updateLayout",value:function(){var t=this,e=null,n=!0,r=!1,i=void 0;try{for(var o,a=this._titleElement.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.selected&&(e=s);var u=s.selected&&!this._minimized;"Performance"===s.value?this._performancePanelElement.style.display=u?"block":"none":this._controlPanels.get(s.value).element.style.display=u?"block":"none"}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this._minimized?this._element.style.height="36px":"Performance"===e.value?this._element.style.height=28+80*this._performanceEntries.size+128+8+16+"px":this._element.style.height=28+this._controlPanels.get(e.value).height+8+"px";for(var l=0;l<this._sortedPerformanceEntryNames.length;++l){var c=this._sortedPerformanceEntryNames[l],h=this._performanceEntries.get(c);h.setHue(l*hc),h.element.style.top=80*l+"px"}this._overviewGraph.setSeriesList(this._sortedPerformanceEntryNames.map((function(e){return t._performanceEntries.get(e).series}))),this._overviewGraph.element.style.top=80*this._performanceEntries.size+8+"px",this._minimizeElement.innerHTML=this._minimized?"â":"â"}},{key:"_onMinimizeClicked",value:function(){this._minimized=!this._minimized,this._updateLayout()}},{key:"_onCategoryChanged",value:function(){this._updateLayout()}},{key:"element",get:function(){return this._element}}]),t}(),dc=function(){function t(e){var n=e.name,i=e.hue;Object(r.t)(this,t),this._name=n,this.series=new mc({hue:i}),this._graph=new pc({width:320,height:52,seriesList:[this.series]}),this._element=document.createElement("div"),this._nameElement=document.createElement("div"),this._hueElement=document.createElement("div"),this._lastFrameTimeElement=document.createElement("div"),this._element.appendChild(this._graph.element),this._element.appendChild(this._nameElement),this._element.appendChild(this._hueElement),this._element.appendChild(this._lastFrameTimeElement),this._layout()}return Object(r.s)(t,[{key:"destroy",value:function(){this._element.removeChild(this._graph.element),this._element.removeChild(this._nameElement),this._element.removeChild(this._hueElement),this._element.removeChild(this._lastFrameTimeElement),this._graph.destroy(),this._element=null,this._nameElement=null,this._hueElement=null,this._lastFrameTimeElement=null}},{key:"_layout",value:function(){Object.assign(this._element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:"72px"}),Object.assign(this._hueElement.style,{display:"block",position:"absolute",left:"-1px",top:"1px",width:"12px",height:"12px","background-color":vc(this.series.hue,.3,.9),border:"1px solid "+vc(this.series.hue,.9,.9),"border-radius":"2px"}),Object.assign(this._nameElement.style,{display:"block",position:"absolute",left:"18px",right:"0px",top:"0px",height:"16px","font-size":"12px","text-align":"left","vertical-align":"middle"}),Object.assign(this._lastFrameTimeElement.style,{display:"block",position:"absolute",left:"0px",right:"0px",top:"0px",height:"16px","font-size":"12px","text-align":"right","vertical-align":"middle"}),Object.assign(this._graph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",bottom:"0px","text-align":"right",border:"1px solid white",outline:"1px solid "+vc(this.series.hue,.2,1)}),this._nameElement.innerHTML=this._name}},{key:"report",value:function(t){if(this.series.report(t),this.series.changed()){if(this.series.length>=1){for(var e=0,n=0;n<this.series.length;++n)e+=this.series.at(n);var r=this.series.maximumValue();this._lastFrameTimeElement.innerHTML="â« "+(e/this.series.length).toFixed(2)+"ms, â¤ "+r.toFixed(2)+" ms"}this._graph.redraw()}}},{key:"setHue",value:function(t){this.series.hue=t,this._graph.setSeriesList([this.series]),this._layout()}},{key:"element",get:function(){return this._element}}]),t}(),pc=function(){function t(e){var n=e.seriesList,i=e.width,o=e.height;Object(r.t)(this,t),this._gradients=new Map,this._canvas=document.createElement("canvas"),this._layout(i,o),this._context=this._canvas.getContext("2d"),this.setSeriesList(n)}return Object(r.s)(t,[{key:"destroy",value:function(){this._gradients=null,this._canvas=null,this._context=null,Object.setPrototypeOf(this,null)}},{key:"_layout",value:function(t,e){Object.assign(this._canvas.style,{display:"block",position:"absolute",left:"0px",right:"0px",width:t+"px",height:e+"px"}),this._canvas.width=t*window.devicePixelRatio,this._canvas.height=e*window.devicePixelRatio}},{key:"redraw",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);var t=0,e=!0,n=!1,r=void 0;try{for(var i,o=this._seriesList[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t=Math.max(t,a.maximumValue())}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}var s=!0,u=!1,l=void 0;try{for(var c,h=this._seriesList[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value;if(f.length>=1){this._context.beginPath();var d=1-(f.length-1)/(f.windowSize-1),p=1-f.at(0)/t;this._context.moveTo(d*this._canvas.width,p*this._canvas.height);for(var m=1;m<f.length;++m){var v=1-(f.length-1-m)/(f.windowSize-1),g=1-f.at(m)/t;this._context.lineTo(v*this._canvas.width,g*this._canvas.height)}this._context.strokeStyle=this._gradients.get(f),this._context.lineWidth=window.devicePixelRatio,this._context.stroke()}}}catch(t){u=!0,l=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}}},{key:"setSeriesList",value:function(t){this._seriesList=t;var e=!0,n=!1,r=void 0;try{for(var i,o=this._seriesList[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=this._context.createLinearGradient(0,0,0,this._canvas.height);s.addColorStop(0,vc(a.hue,1,1)),s.addColorStop(1,vc(a.hue,.5,.5)),this._gradients.set(a,s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"element",get:function(){return this._canvas}}]),t}(),mc=function(){function t(e){var n=e.windowSize,i=void 0===n?60:n,o=e.totalAccumulationCount,a=void 0===o?5:o,s=e.hue,u=void 0===s?0:s;Object(r.t)(this,t),this.windowSize=i,this.hue=u,this._totalAccumulationCount=a,this._ringBuffer=new Array(this.windowSize).fill(0),this._ringBufferLength=0,this._ringBufferPointer=0,this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0}return Object(r.s)(t,[{key:"destroy",value:function(){}},{key:"report",value:function(t){this._accumulatorValue+=t,++this._accumulatorCount,this._changed=!1,this._accumulatorCount===this._totalAccumulationCount&&(this._push(this._accumulatorValue/this._totalAccumulationCount),this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0)}},{key:"at",value:function(t){if(!Number.isFinite(t)||t>=this._ringBufferLength||t<0)throw new Error("invalid index: "+t+" (length: "+this.length+")");var e=(this._ringBufferPointer+t-this._ringBufferLength+this.windowSize)%this.windowSize;return this._ringBuffer[e]}},{key:"_push",value:function(t){this._ringBuffer[this._ringBufferPointer]=t,++this._ringBufferLength,this._ringBufferLength>this.windowSize&&(this._ringBufferLength=this.windowSize),++this._ringBufferPointer,this._ringBufferPointer>=this.windowSize&&(this._ringBufferPointer=0)}},{key:"maximumValue",value:function(){for(var t=0,e=0;e<this._ringBufferLength;++e)t=Math.max(t,this.at(e));return t}},{key:"changed",value:function(){return this._changed}},{key:"length",get:function(){return this._ringBufferLength}}]),t}();function vc(t,e,n,r){var i=t%360/60,o=0|i,a=i-o,s=n*(1-e),u=n*(1-e*a),l=n*(1-e*(1-a)),c=0,h=0,f=0;switch(o){case 0:c=n,h=l,f=s;break;case 1:c=u,h=n,f=s;break;case 2:c=s,h=n,f=l;break;case 3:c=s,h=u,f=n;break;case 4:c=l,h=s,f=n;break;case 5:c=n,h=s,f=u}return"#"+gc(c)+gc(h)+gc(f)}function gc(t){var e=(255*t|0).toString(16);return 1===e.length&&(e="0"+e),e}Object(r.a)(r.a.S,"Number",{EPSILON:Math.pow(2,-52)});var yc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAkklEQVRoge3awQ3AIAxD0VAMYf+F0yUixbL8JshXuLSwIqJCwDc9QBeZEOy9p2doAQDTM7TQ2cg5Z3qGFjpHS2YjDiGDe+/0DC0cwkYpJKdnaIFMkY1kymzEIVQcwsYhbPDem56hhc5GHELGIWwcwsYhbJS+2R1CxSFsdH5iO4SMr97Y6FxPqxytVVV+HcTEIWx+9mcIqHSOm9QAAAAASUVORK5CYII=",bc=function(t,e){return new i.MeshBasicMaterial({color:t,transparent:!0,depthTest:!1,opacity:e})},_c=function(t){var e=new i.Shape,n=0;for(e.moveTo(t,0);n<=2*Math.PI;)e.lineTo(Math.cos(n)*t,Math.sin(n)*t),n+=Math.PI/16;return e},wc={outer:{blue:bc(16777215,1),ghost:bc(16777215,.5)},inner:{blue:bc(2254591,1),grey:bc(14540253,1),ghost:bc(2254591,.5)},aura:{inner:bc(2254591,.2),outer:bc(2254591,.3)},bearing:{blue:bc(2254591,.7),ghost:bc(2254591,.4)}};wc.outer.grey=wc.outer.blue;var xc=function(t,e){var n=_c(t);if(e&&e<t){var r=_c(e);n.holes=[r]}return new i.ExtrudeGeometry(n,{amount:0,bevelEnabled:!1,steps:2})},Mc=function(t,e,n){var r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))/n;return r>1?r=1:r<0&&(r=0),new i.Vector2(0,r)},Ec=function(t){return{generateTopUV:function(e,n,r,i,o){var a=n[3*r],s=n[3*r+1],u=n[3*i],l=n[3*i+1],c=n[3*o],h=n[3*o+1];return[Mc(a,s,t),Mc(u,l,t),Mc(c,h,t)]},generateSideWallUV:function(){return[new i.Vector2(0,1),new i.Vector2(0,1),new i.Vector2(0,1),new i.Vector2(0,1)]}}},Sc=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Math.abs(t)>=Math.PI)throw new Error("Sector angle too wide!");var r=n/Math.tan(t/2),o=n/Math.sin(t/2),a=o+e,s=10,u=new i.Shape;u.moveTo(o*Math.cos(t/2)-r,o*Math.sin(t/2));for(var l=0;l<s;l++)u.lineTo(a*Math.cos(t/2-t/s*l)-r,a*Math.sin(t/2-t/s*l));for(var c=0;c<s;c++)u.lineTo(n*Math.cos(Math.PI/-2+Math.PI/s*c),n*Math.sin(Math.PI/-2+Math.PI/s*c));return new i.ExtrudeGeometry(u,{amount:1,bevelEnabled:!1,UVGenerator:Ec(e)})},Ac=function(t,e){return null!=t?Tc(-t)-e+Math.PI/2:null},Tc=function(t){return t*Math.PI/180},qc={duration:2e3,easing:a.a.Easing.Cubic.Out};function Pc(t){return"number"==typeof t&&!isNaN(t)&&t>=0}var Lc=function(t){function e(t){var n,i=t.mapManager,o=t.mapView,a=t.minRadius,s=void 0===a?8:a,u=t.maxRadius,l=void 0===u?65:u,c=t.radiusUpdateInterval,h=void 0===c?3:c,f=t.radiusTweenOptions,d=void 0===f?qc:f;if(Object(r.t)(this,e),(n=Object(r.F)(this,Object(r.G)(e).call(this))).mapManager=i,n.mapView=o,!Pc(s))throw new Error("Expecting minRadius parameter to be a valid number >= 0. Provided: ".concat(s));if(n.minRadius=s,!Pc(l))throw new Error("Expecting maxRadius parameter to be a valid number >= 0. Provided: ".concat(l));if(l<n.minRadius)throw new Error("Expecting maxRadius parameter to be >= minRadius parameter. Provided: ".concat(l,"; minRadius = ").concat(n.minRadius));if(n.maxRadius=l,!Pc(h))throw new Error("Expecting radiusUpdateInterval parameter to be a valid number >= 0. Provided: ".concat(h));return n.radiusUpdateInterval=h,n.radiusTweenOptions=d,n.state=null,n.prevRadius=null,n.radiusTween=null,n.prevBearing=null,n.bearingTween=null,n.currentX=null,n}return Object(r.E)(e,r.v),Object(r.s)(e,[{key:"computeNewRadius",value:function(t){if(!Pc(t)||t<this.minRadius)return 0;if(t>=this.maxRadius)return this.maxRadius;if(0===this.radiusUpdateInterval)return t;var e=t-this.minRadius;return e-e%this.radiusUpdateInterval+this.minRadius}},{key:"updateBlueDotSize",value:function(){var t=this;this.blueDots&&this.blueDots.forEach((function(e){var n,r,i,o=t.mapView.controls.getZoomScaledMin(),a=3*o,s=(i=5*o,((n=t.currentX)<(r=a)?n:n<i?r:n*r/i)/2e3);e.dotObject.scale.set(s,s,s),e.bearing&&e.bearing.scale.set(s,s,s)}))}},{key:"setBlueDotSizeFromZoom",value:function(t){this.currentX=t,this.updateBlueDotSize()}},{key:"update",value:function(t){var e=this,n=t.mode||this.state.mode,r=t.mapId||t.map&&t.map.id||this.mapManager.currentMap.id;null==t.bearing&&(this.prevBearing=null),this.positionTween&&this.positionTween.stop(),!this.state||n===this.state.mode&&r===this.state.targetMap||this.cleanup();var o=this.computeNewRadius(t.radius);if(!this.blueDots){var s=[];this.mapManager.mapObjects.forEach((function(o){var a=o.getPositionLatLon(t.coordinates.latitude,t.coordinates.longitude),u=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new i.Object3D,s=new i.Object3D;if(r>=0){var u=new i.CylinderGeometry(1,1,10,32),l=wc.aura.inner;(e=new i.Mesh(u,l)).position.set(0,0,0),e.rotation.set(Math.PI/2,0,0),e.scale.set(r,1,r),s.add(e)}var c=Sc(Math.PI/6,120,30),h=wc.bearing[t];(new i.TextureLoader).load(yc,(function(t){h.alphaMap=t,h.needsUpdate=!0})),(n=new i.Mesh(c,h)).rotation.set(0,0,o),s.add(n);var f=xc(30,22.5),d=xc(22.5),p=new i.Mesh(f,wc.outer[t]),m=new i.Mesh(d,wc.inner[t]);return a.add(p),a.add(m),s.add(a),[s,a,p,m,n,e].forEach((function(t){t.renderOrder=999,t.layers.set(2)})),{outerObject:s,radiusObject:e,dotObject:a,bearingObject:n}}(o.id!==r&&"blue"===n?"ghost":n,0,Ac(t.bearing,e.mapManager.currentMap.getNorth()));e.prevRadius=0;var l=e.mapView.createThreeJSMarker({object:u.outerObject,map:o,position:a});s.push({handle:l,radius:u.radiusObject,dotObject:u.dotObject,bearing:u.bearingObject})})),this.blueDots=s,this.currentX&&this.updateBlueDotSize()}this.currentPositionLatLon?(this.positionTween=new a.a.Tween(this.currentPositionLatLon).to({lat:t.coordinates.latitude,lon:t.coordinates.longitude},2e3).easing(a.a.Easing.Cubic.Out).onUpdate((function(t){e.currentPositionLatLon=t,e.blueDots.forEach((function(n){var r=n.handle._mapId,i=e.mapManager.mapObjects.get(r).getPositionLatLon(t.lat,t.lon);n.handle.object.position.set(i.x,i.y,0)})),e.mapView.tryRendering(Sa)})),this.positionTween.start()):(this.currentPositionLatLon={lat:t.coordinates.latitude,lon:t.coordinates.longitude},this.blueDots.forEach((function(n){var r=n.handle._mapId,i=e.mapManager.mapObjects.get(r).getPositionLatLon(t.coordinates.latitude,t.coordinates.longitude);n.handle.object.position.set(i.x,i.y,0)}))),Math.abs(o-this.prevRadius)>=Number.EPSILON&&(null!=this.radiusTween&&this.radiusTween.stop(),this.radiusTween=new a.a.Tween({value:this.prevRadius}).to({value:o},this.radiusTweenOptions.duration).easing(this.radiusTweenOptions.easing).onUpdate((function(t){var n=t.value;e.prevRadius=n,null!=e.blueDots&&e.blueDots.forEach((function(t){if(t.radius){var r=t.handle._mapId,i=e.mapManager.mapObjects.get(r),o=n*i.getMapScale();t.radius.scale.set(o,1,o)}})),e.mapView.tryRendering(Sa)})).start());var u=t.bearing;null!=t.bearing?(Math.abs(u-this.prevBearing)>=Number.EPSILON||null==this.prevBearing)&&(this.bearingTween=new a.a.Tween({value:this.prevBearing||0}).to({value:u},1e3).easing(a.a.Easing.Cubic.Out).onUpdate((function(t){var n=t.value;e.prevBearing=n,null!=e.blueDots&&e.blueDots.forEach((function(t){t.bearing&&(t.bearing.visible=!0,t.bearing.rotation.set(0,0,Ac(n,e.mapManager.currentMap.getNorth())))})),e.mapView.tryRendering(Sa)})).start()):null!=this.blueDots&&this.blueDots.forEach((function(t){t.bearing&&(t.bearing.visible=!1)})),this.state={mode:n,targetMap:r},this.mapView.tryRendering(Sa)}},{key:"cleanup",value:function(){var t=this;this.blueDots&&(this.blueDots.forEach((function(e){e.handle._object.children.forEach((function(t){t.geometry?t.geometry.dispose():t.children.forEach((function(t){t.geometry.dispose()}))})),t.mapView.removeThreeJSMarker(e.handle)})),delete this.blueDots),this.state=null,null!=this.positionTween&&this.positionTween.stop(),null!=this.radiusTween&&this.radiusTween.stop()}}]),e}();function Oc(t){null!=t&&ia(t.material)}function Cc(t){return t.stencilWrite=!0,t.stencilFunc=i.AlwaysStencilFunc,t.stencilRef=1,t.stencilMask=255,t.stencilFail=i.KeepStencilOp,t.stencilZFail=i.KeepStencilOp,t.stencilZPass=i.ReplaceStencilOp,t}var Ic=function(){function t(e){var n=e.scene,i=e.getPolygonMeshFromId,o=e.tryRendering;Object(r.t)(this,t),this.scene=n,this.getPolygonMeshFromId=i,this.tryRendering=o,this.stencilSheet=null,this.polygonsMarkedAsClosed={}}return Object(r.s)(t,[{key:"onMapChanged",value:function(t){var e=this;t.load().then((function(){e.currentMap=t,Oc(e.stencilSheet);var n,r,o,a=function(t){var e=new i.PlaneBufferGeometry(1,1,1,1),n=500,r=500,o=new i.Vector3(0,0,0),a=0;if(null!=t&&null!=t.boundingBox&&null!=t.boundingBox.min&&null!=t.boundingBox.max){var s=new i.Box3(t.boundingBox.min,t.boundingBox.max),u=s.getSize(new i.Vector3);n=u.x,r=u.y,s.getCenter(o),a=(isNaN(s.max.z)?0:s.max.z)+10}var l=new i.ShaderMaterial({vertexShader:"varying vec2 vUV;void main(){vUV=uv;gl_Position=projectionMatrix*viewMatrix*modelMatrix*vec4(position,1.0);}",fragmentShader:"precision mediump float;uniform vec3 stripe1_color;uniform vec3 stripe2_color;uniform vec2 surface_dimensions;uniform float stripe1_width;uniform float stripe1_proportion;uniform float stripes_direction;varying vec2 vUV;vec4 stripes(vec2 coord){vec4 color1=vec4(stripe1_color,1.0);vec4 color2=vec4(stripe2_color,1.0);vec2 coord_absolute=coord*surface_dimensions;float tile_width=stripe1_width/stripe1_proportion;float stripe_coord=mix(coord_absolute.x,coord_absolute.y,stripes_direction);float stripe_coord_normalized=mod(stripe_coord,tile_width)/tile_width;return mix(color1,color2,step(1.-stripe1_proportion,stripe_coord_normalized));}void main(){gl_FragColor=vec4(stripes(vUV).rgb,1);}",uniforms:{stripe1_color:{type:"c",value:new i.Color(.91372549019,.91372549019,.91372549019)},stripe2_color:{type:"c",value:new i.Color(.80784313725,.80784313725,.80784313725)},stripe1_width:{type:"f",value:7},stripe1_proportion:{type:"f",value:.3},stripes_direction:{type:"f",value:2/3},surface_dimensions:{type:"v2",value:new i.Vector2(n,r)}}});l.transparent=!0,l.blending=i.MultiplyBlending,l.depthTest=!1,l.stencilWrite=!0,l.stencilFunc=i.EqualStencilFunc,l.stencilMask=255,l.stencilRef=1,l.stencilFail=i.KeepStencilOp,l.stencilZFail=i.KeepStencilOp,l.stencilZPass=i.KeepStencilOp;var c=new i.Mesh(e,l);return c.position.set(o.x,o.y,a),c.rotation.set(0,0,0),c.scale.set(n,r,1),c}(t);n=e.stencilSheet,r=a,o=e.scene,null!=r&&null!=o&&(null!=n&&o.remove(n),o.add(r)),e.stencilSheet=a,e.tryRendering()}))}},{key:"dispose",value:function(){this.markAllPolygonsAsOpen(),Oc(this.stencilSheet)}},{key:"markPolygonAsClosed",value:function(t){if("string"==typeof t&&null==this.polygonsMarkedAsClosed[t]){var e=this.getPolygonMeshFromId(t);if(null!=e&&null!=e.material){var n=e.geometry;if(console.assert(n instanceof i.BufferGeometry),console.assert(null==n.index),!e.material.length){var o={};o.geometryGroups=Object(r.B)(n.groups),n.clearGroups();var a=e.material,s=Cc(e.material.clone());e.material=[a,s],e._MIOriginalMaterial&&(e._MIOriginalMaterial.length||(e._MIOriginalMaterial=[e._MIOriginalMaterial,Cc(e._MIOriginalMaterial.clone())]));var u=n.getAttribute("normal");console.assert(3===u.itemSize),console.assert(u.array.length/3===u.count),console.assert(u.count%3==0);for(var l,c=new i.Vector3(0,0,1),h=0;h<u.count;h+=3){var f=(u.getX(h)+u.getX(h+1)+u.getX(h+2))/3,d=(u.getY(h)+u.getY(h+1)+u.getY(h+2))/3,p=(u.getZ(h)+u.getZ(h+1)+u.getZ(h+2))/3;l=new i.Vector3(f,d,p).normalize().dot(c),1,Math.abs(l-1)<Number.EPSILON?n.addGroup(h,3,1):n.addGroup(h,3,0)}this.tryRendering(),this.polygonsMarkedAsClosed[t]=o}}}}},{key:"markPolygonAsOpen",value:function(t){if("string"==typeof t&&null!=this.polygonsMarkedAsClosed[t]){var e=this.polygonsMarkedAsClosed[t],n=this.getPolygonMeshFromId(t),r=n.geometry;r.clearGroups(),e.geometryGroups.forEach((function(t){var e=t.start,n=t.count,i=t.materialIndex;return r.addGroup(e,n,i)})),ia(n.material[1]),n.material=n.material[0],n._MIOriginalMaterial&&n._MIOriginalMaterial.length&&(n._MIOriginalMaterial=n._MIOriginalMaterial[0]),delete this.polygonsMarkedAsClosed[t],this.tryRendering()}}},{key:"markAllPolygonsAsOpen",value:function(){for(var t in this.polygonsMarkedAsClosed)this.markPolygonAsOpen(t)}}]),t}(),Rc=Jo(),kc=[1|Rc[0],Rc[1],Rc[2],Rc[3],Rc[4],Rc[5]],Nc=16383&(Rc[6]<<8|Rc[7]),Bc=0,Dc=0,jc=na;jc.v1=function(t,e,n){var r=e&&n||0,i=e||[],o=void 0!==(t=t||{}).clockseq?t.clockseq:Nc,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),s=void 0!==t.nsecs?t.nsecs:Dc+1,u=a-Bc+(s-Dc)/1e4;if(u<0&&void 0===t.clockseq&&(o=o+1&16383),(u<0||a>Bc)&&void 0===t.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Bc=a,Dc=s,Nc=o;var l=(1e4*(268435455&(a+=122192928e5))+s)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=255&l;var c=a/4294967296*1e4&268435455;i[r++]=c>>>8&255,i[r++]=255&c,i[r++]=c>>>24&15|16,i[r++]=c>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var h=t.node||kc,f=0;f<6;++f)i[r+f]=h[f];return e||ea(i)},jc.v4=na;var Fc,zc,Uc,Vc,Gc,Hc,Wc,Yc,Xc=jc,Zc={top:!0,left:!0,topLeft:!0,right:!0,topRight:!0,bottom:!0,bottomLeft:!0,bottomRight:!0},Jc=function(t){function e(t){var n;Object(r.t)(this,e),(n=Object(r.F)(this,Object(r.G)(e).call(this,t))).className="top",n._el=null,n.style={},n.updateClassName=function(t){n.containerEl.classList.item(1)&&n.containerEl.classList.remove(n.containerEl.classList.item(1)),n.containerEl.classList.add("tooltip--anchor-".concat(t))};var i=t.html,o=t.contentHtml,a=t.text,s=t.position,u=t.selector,l=t.map,c=t.padding,h=void 0===c?35:c,f=t.collisionRank,d=void 0===f?hs.HIGH:f,p=t.defaultAnchorType,m=void 0===p?"top":p,v=t.enabledAnchorTypes;n.containerEl.innerHTML=i||'<div class="mappedin-tooltip"><div class="mappedin-tooltip__content">'.concat(a||o,"</div></div>"),n.position=s,n.rank=d,n.mapId=l,n.id=Xc();var g=i?u:".mappedin-tooltip";return n.containerEl=n.containerEl.querySelector(g),n.contentEl=n.containerEl.firstElementChild,n._el=n.contentEl,n.options={padding:h/Math.SQRT2,defaultAnchorType:m,enabledAnchorTypes:Object(r.r)({},Zc,{},v)},n}return Object(r.E)(e,bl),Object(r.s)(e,[{key:"colliderDidMount",value:function(){this.updateDimensions()}},{key:"setAction",value:function(t){Object(r.O)(Object(r.G)(e.prototype),"setAction",this).call(this,t),this.visible=t===vl.show}},{key:"updateDimensions",value:function(){var t=this.containerEl.getBoundingClientRect(),e=t.width,n=t.height;this.dimensions={width:e,height:n},Object.assign(this.containerEl,{width:e+"px",height:n+"px"})}},{key:"colliderDidNotFindAHome",value:function(){this.visible=!0}},{key:"colliderDidGoOffscreen",value:function(){}},{key:"colliderDidUpdateVisiblity",value:function(){this.containerEl.style.opacity=this.action===vl.show?"1":"0",this.updateClassName(this.className),!0===this.visible&&Object.assign(this.containerEl.style,this.style)}},{key:"strategies",get:function(){for(var t=this,e=this.dimensions,n=e.width,r=e.height,i=this.options.padding,o=i/2,a=[],s=0,u=[{name:"top",getBoundingBox:function(t){var e=t.x,o=t.y;return[o-r-i,o-i,e-n/2,e+n/2+i/2]},onStrategySelected:function(){t.style.top=-r-i+"px",t.style.left=-n/2+"px",t.className="top"}},{name:"right",getBoundingBox:function(t){var e=t.x,o=t.y;return[o-r/2-i/2,o+r/2+i/2,e+i,e+i+n]},onStrategySelected:function(){t.style.top=-r/2+"px",t.style.left=i+"px",t.className="right"}},{name:"left",getBoundingBox:function(t){var e=t.x,o=t.y;return[o-r/2,o+r/2,e-n-i,e]},onStrategySelected:function(){t.style.top=-r/2+"px",t.style.left=-n-i+"px",t.className="left"}},{name:"bottom",getBoundingBox:function(t){var e=t.x,o=t.y;return[o+i,o+i+r,e-n/2,e+n/2]},onStrategySelected:function(){t.style.top=i+"px",t.style.left=-n/2+"px",t.className="bottom"}},{name:"bottomLeft",getBoundingBox:function(t){var e=t.x,a=t.y;return[a+o+i,a+o+r+i,e-n-o,e-o]},onStrategySelected:function(){t.style.top=i+"px",t.style.left=-n-i+"px",t.className="bottom-left"}},{name:"bottomRight",getBoundingBox:function(t){var e=t.x,a=t.y;return[a+o,a+o+r+i,e+o,e+o+n+i]},onStrategySelected:function(){t.style.top=i+"px",t.style.left=i+"px",t.className="bottom-right"}},{name:"topLeft",getBoundingBox:function(t){var e=t.x,i=t.y;return[i-r-o,i-o,e-n-o,e-o]},onStrategySelected:function(){t.style.top=-r-i+"px",t.style.left=-n-i+"px",t.className="top-left"}},{name:"topRight",getBoundingBox:function(t){var e=t.x,a=t.y;return[a-r-o,a-o,e+o+i,e+o+n+i]},onStrategySelected:function(){t.style.top=-r-i+"px",t.style.left=i+"px",t.className="top-right"}}];s<u.length;s++){var l=u[s];!0===this.options.enabledAnchorTypes[l.name]&&a.push(l)}return a}}]),e}();!function(t){t[t.NOT_LISTENING=0]="NOT_LISTENING",t[t.LISTENING=1]="LISTENING",t[t.HAS_POSITION=2]="HAS_POSITION",t[t.HAS_INDOOR_POSITION=3]="HAS_INDOOR_POSITION",t[t.LOCATION_UNCERTAIN=4]="LOCATION_UNCERTAIN"}(Hc||(Hc={})),function(t){t[t.gotPosition=0]="gotPosition",t[t.gotPositionWithFloor=1]="gotPositionWithFloor",t[t.gotError=2]="gotError",t[t.timedOut=3]="timedOut",t[t.disabledBlueDot=4]="disabledBlueDot",t[t.enabledBlueDot=5]="enabledBlueDot"}(Wc||(Wc={})),function(t){t[t.hidden=0]="hidden",t[t.ghost=1]="ghost",t[t.normal=2]="normal",t[t.uncertain=3]="uncertain"}(Yc||(Yc={}));var Kc,Qc=(Object(r.u)(Gc={},Hc.NOT_LISTENING,{actions:Object(r.u)({},Wc.enabledBlueDot,Hc.LISTENING)}),Object(r.u)(Gc,Hc.LISTENING,{actions:(Fc={},Object(r.u)(Fc,Wc.gotPosition,Hc.HAS_POSITION),Object(r.u)(Fc,Wc.gotPositionWithFloor,Hc.HAS_INDOOR_POSITION),Object(r.u)(Fc,Wc.timedOut,Hc.LOCATION_UNCERTAIN),Object(r.u)(Fc,Wc.disabledBlueDot,Hc.NOT_LISTENING),Fc),markerState:Yc.hidden}),Object(r.u)(Gc,Hc.HAS_POSITION,{actions:(zc={},Object(r.u)(zc,Wc.gotPositionWithFloor,Hc.HAS_INDOOR_POSITION),Object(r.u)(zc,Wc.timedOut,Hc.LOCATION_UNCERTAIN),Object(r.u)(zc,Wc.gotError,Hc.LISTENING),Object(r.u)(zc,Wc.disabledBlueDot,Hc.NOT_LISTENING),zc),markerState:Yc.ghost}),Object(r.u)(Gc,Hc.HAS_INDOOR_POSITION,{actions:(Uc={},Object(r.u)(Uc,Wc.gotPosition,Hc.HAS_POSITION),Object(r.u)(Uc,Wc.timedOut,Hc.LOCATION_UNCERTAIN),Object(r.u)(Uc,Wc.gotError,Hc.LISTENING),Object(r.u)(Uc,Wc.disabledBlueDot,Hc.NOT_LISTENING),Uc),markerState:Yc.normal}),Object(r.u)(Gc,Hc.LOCATION_UNCERTAIN,{actions:(Vc={},Object(r.u)(Vc,Wc.gotPosition,Hc.HAS_POSITION),Object(r.u)(Vc,Wc.gotPositionWithFloor,Hc.HAS_INDOOR_POSITION),Object(r.u)(Vc,Wc.timedOut,Hc.LOCATION_UNCERTAIN),Object(r.u)(Vc,Wc.gotError,Hc.LISTENING),Object(r.u)(Vc,Wc.disabledBlueDot,Hc.NOT_LISTENING),Vc),markerState:Yc.uncertain}),Gc);!function(t){t[t.stateChanged=0]="stateChanged",t[t.markerStateChanged=1]="markerStateChanged"}(Kc||(Kc={}));var $c=Object.getOwnPropertySymbols,th=Object.prototype.hasOwnProperty,eh=Object.prototype.propertyIsEnumerable;function nh(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var rh=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=nh(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))th.call(n,a)&&(i[a]=n[a]);if($c){r=$c(n);for(var s=0;s<r.length;s++)eh.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i};function ih(t,e){return e.encode?e.strict?encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):encodeURIComponent(t):t}new RegExp("%[a-f0-9]{2}","gi"),new RegExp("(%[a-f0-9]{2})+","gi");var oh=function(t,e){!1===(e=rh({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[ih(e,t),"[",r,"]"].join(""):[ih(e,t),"[",ih(r,t),"]=",ih(n,t)].join("")};case"bracket":return function(e,n){return null===n?ih(e,t):[ih(e,t),"[]=",ih(n,t)].join("")};default:return function(e,n){return null===n?ih(e,t):[ih(e,t),"=",ih(n,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map((function(r){var i=t[r];if(void 0===i)return"";if(null===i)return ih(r,e);if(Array.isArray(i)){var o=[];return i.slice().forEach((function(t){void 0!==t&&o.push(n(r,t,o.length))})),o.join("&")}return ih(r,e)+"="+ih(i,e)})).filter((function(t){return t.length>0})).join("&"):""},ah=["websdk","web","webv2"],sh=function t(e){var n=function(t){return/^[\da-f]{24}$/i.test(t)}((e=e||{}).key)?"https://api-gateway.mappedin.com/track-analytics/a/":"https://web-proxy.mappedin.com/a/",i=e.url||e.baseUrl||n;i+=e.venue+"/";var o=e.key,a=e.secret,s=!1,u=e.testMode,l=ah.find((function(t){return t===e.context}))||ah[0],c=oa(),h=aa(),f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==u&&"True"!==u&&"true"!==u){var n=Object(r.r)({},e,{g:s}),f=i+t+"?"+oh(n),d={method:"GET",mode:"cors",headers:{"mi-context":l,"mi-session":h,"mi-device":c,Authorization:"Basic "+btoa(o+":"+a)}};fetch(f,d)}};this.locationSelected=function(t){var e=t.id||t;f("select-location",{id:e})},this.categorySelected=function(t){var e=t.id||t;f("select-category",{id:e})},this.mapViewLoaded=function(t,e,n,r){f("load-mapview",{type:t,force:e,benchmark:n||-1,reason:r||"success"}),delete this.mapViewLoaded},this.getDirections=function(t,e){f("query-directions",{start:t,end:e,type:"location_to_location"})},this.getSessionID=function(){return h},this.getDeviceID=function(){return c},this.setGeolocationMode=function(t){s=t},this.trackBlueDotEvent=function(e){e&&Object.values(t.BLUEDOT_EVENT).includes(e)?f(e):console.warn('Ignored unsupported blue dot event: "'.concat(e,'".'))}};sh.BLUEDOT_EVENT={ATTEMPT_BLUEDOT:"attempt-bluedot",FOUND_POSITION:"found-position",FOUND_FLOOR:"found-floor"};var uh=function(t){var e=t.mapView,n=t.controller,r=t.data,i=t.analytics,o=n.stateMachine,a={isFollowing:!1,blueDotTooltips:[],setBlueDotPosition:function(){if(e.blueDotManager&&n.userPosition&&n.userMap){var t=o.state===Hc.HAS_POSITION||o.state===Hc.HAS_INDOOR_POSITION;e.blueDotManager.update({coordinates:n.userPosition.coords,bearing:n.bearing,radius:t&&n.userPosition.coords.accuracy||0,mapId:n.userMap.id})}},showBlueDotBearing:function(){if(e.blueDotManager&&n.userPosition&&n.userMap){var t=o.state===Hc.HAS_POSITION||o.state===Hc.HAS_INDOOR_POSITION;e.blueDotManager.update({coordinates:n.userPosition.coords,bearing:n.bearing,radius:t&&n.userPosition.coords.accuracy||0,mapId:n.userMap.id})}},addGhostMarkers:function(){e.blueDotManager&&n.userPosition&&n.userMap&&e.blueDotManager.update({mode:"ghost",coordinates:n.userPosition.coords,bearing:n.bearing,radius:n.userPosition.coords.accuracy,mapId:n.userMap.id})},addLocationUncertainMarkersAndTooltips:function(){if(e.blueDotManager&&n.userPosition&&n.userMap&&e.blueDotManager.update({mode:"grey",coordinates:n.userPosition.coords,radius:0,mapId:n.userMap.id}),e.blueDotManager&&n.userPosition){var t=n.userPosition.coords.latitude,i=n.userPosition.coords.longitude;r.maps.forEach((function(n){var r=e.mapManager.mapObjects.get(n.id).getPositionLatLon(t,i),o=e.createTooltip({position:r,contentHtml:'<span class="bluedot-tooltip-text">'.concat("finding-location","</span>"),defaultAnchorType:"BOTTOM",enabledAnchorTypes:{LEFT:!1,TOP:!1,BOTTOM:!0,RIGHT:!1},map:n.id,padding:25});a.blueDotTooltips.push(o)}))}},addBlueDotMarker:function(){e.blueDotManager&&n.userPosition&&n.userMap&&e.blueDotManager.update({mode:"blue",coordinates:n.userPosition.coords,bearing:n.bearing,radius:n.userPosition.coords.accuracy,mapId:n.userMap.id})},removeTooltips:function(){a.blueDotTooltips.forEach(e.removeTooltip),a.blueDotTooltips=[]},centerBlueDot:function(){var t=n.userPosition.coords,r=t.latitude,i=t.longitude;n.userMap!==e.mapManager.currentMap&&e.setMap(n.userMap);var o=e.getPositionLatLon(r,i);e.focusOn({points:[o],changeZoom:!1,duration:1e3})}};return n.on("userDataChanged",(function(t){var e=t.newValue,n=e.position;switch(e.state){case Hc.HAS_POSITION:a.removeTooltips(),a.addGhostMarkers(),i.trackBlueDotEvent(sh.BLUEDOT_EVENT.FOUND_POSITION);break;case Hc.HAS_INDOOR_POSITION:a.removeTooltips(),a.addBlueDotMarker(),i.trackBlueDotEvent(sh.BLUEDOT_EVENT.FOUND_FLOOR);break;case Hc.LOCATION_UNCERTAIN:a.removeTooltips(),a.addLocationUncertainMarkersAndTooltips();break;default:a.removeTooltips()}a.setBlueDotPosition(),a.showBlueDotBearing();var r=!0,o=!1;t.oldValue&&(r=n.coords.latitude!==t.oldValue.position.coords.latitude||n.coords.longitude!==t.oldValue.position.coords.longitude,o=t.oldValue.map!==t.newValue.map),a.isFollowing&&(r||o)&&a.centerBlueDot()})),a};Object(r.a)(r.a.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});var lh=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=n?[n]:e,o=!1;return i.forEach((function(e){Math.abs(t.x)<e.width*r&&Math.abs(t.y)<e.height*r&&(o=!0)})),!o};function ch(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}
/**
* KalmanFilter
* @class
* @author Wouter Bulten
* @see {@link http://github.com/wouterbulten/kalmanjs}
* @version Version: 1.0.0-beta
* @copyright Copyright 2015-2018 Wouter Bulten
* @license MIT License
* @preserve
*/var hh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.R,r=void 0===n?1:n,i=e.Q,o=void 0===i?1:i,a=e.A,s=void 0===a?1:a,u=e.B,l=void 0===u?0:u,c=e.C,h=void 0===c?1:c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.R=r,this.Q=o,this.A=s,this.C=h,this.B=l,this.cov=NaN,this.x=NaN}var e,n;return e=t,(n=[{key:"filter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(this.x))this.x=1/this.C*t,this.cov=1/this.C*this.Q*(1/this.C);else{var n=this.predict(e),r=this.uncertainty(),i=r*this.C*(1/(this.C*r*this.C+this.Q));this.x=n+i*(t-this.C*n),this.cov=r-i*this.C*r}return this.x}},{key:"predict",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.A*this.x+this.B*t}},{key:"uncertainty",value:function(){return this.A*this.cov*this.A+this.R}},{key:"lastMeasurement",value:function(){return this.x}},{key:"setMeasurementNoise",value:function(t){this.Q=t}},{key:"setProcessNoise",value:function(t){this.R=t}}])&&ch(e.prototype,n),t}();function fh(t){return null===t||"number"==typeof t}var dh,ph=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;Object(r.t)(this,t),this.nextLevel=void 0,this.inertia=e,this.levelConfirmations=0}return Object(r.s)(t,[{key:"_resetConfirmations",value:function(){this.levelConfirmations=0,this.nextLevel=void 0}},{key:"_resetFilter",value:function(){this._resetConfirmations(),this.previousLevel=void 0}},{key:"filter",value:function(t){var e=null,n=void 0===t?null:t;if(!fh(n))throw new TypeError("The argument given to filter() must be null, undefined, or a number");return null===n?this._resetFilter():(fh(this.previousLevel)&&n!==this.previousLevel?fh(this.nextLevel)&&n===this.nextLevel?this.levelConfirmations>=this.inertia?(this._resetConfirmations(),e=n):(this.levelConfirmations++,e=this.previousLevel):(this.levelConfirmations++,this.nextLevel=n,e=this.previousLevel):e=n,this.previousLevel=e),e}}]),t}(),mh="none",vh="kalman",gh=function(){function t(e){Object(r.t)(this,t),this.smooth=this.smooth.bind(this),this.smoothingType=window.mappedin&&window.mappedin.smoothingType||vh,this.lastLocation=null,this.levelFilter=e}return Object(r.s)(t,[{key:"formatLocation",value:function(t){return{type:"SUCCESS",timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,floorLevel:this.levelFilter.filter(t.floorLevel)}}}},{key:"kalman",value:function(t,e){if(e){var n=1.4*(t.timestamp-e.timestamp)/1e3;this.latitudeKF.setProcessNoise(n),this.longitudeKF.setProcessNoise(n),this.latitudeKF.setMeasurementNoise(t.accuracy),this.longitudeKF.setMeasurementNoise(t.accuracy)}else this.latitudeKF=new hh({R:1,Q:t.accuracy}),this.longitudeKF=new hh({R:1,Q:t.accuracy});return Object(r.r)({},t,{latitude:this.latitudeKF.filter(t.latitude),longitude:this.longitudeKF.filter(t.longitude)})}},{key:"setSmoothingType",value:function(t){this.smoothingType=t}},{key:"smooth",value:function(t){var e;switch(this.smoothingType){case vh:return e=this.kalman(function(t){return{floorLevel:t.coords.floorLevel,timestamp:t.timestamp,latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,speed:-1,type:t.type}}(t),this.lastLocation),this.lastLocation=e,this.formatLocation(e);case mh:default:return t}}},{key:"reset",value:function(){this.lastLocation=null,this.levelFilter=new ph(this.levelFilter.inertia)}}]),t}(),yh=function(t){return t*Math.PI/180};!function(t){t[t.SUCCESS=0]="SUCCESS"}(dh||(dh={}));var bh=function(t){var e,n,i,o,a=t.data,s=t.mapView,u=a.maps,l=a.venue,c=navigator.geolocation,h={enableHighAccuracy:!0},f=function(){var t=Object(r.R)({state:Hc.NOT_LISTENING,markerState:Yc.hidden,transition:function(e){if(null!=Qc[t.state]){var n=Qc[t.state].actions[e];null!=n&&t.state!==n&&(t.state=n,t.markerState=Qc[t.state].markerState)}},reset:function(){t.state=Hc.NOT_LISTENING}});return t}(),d=u.length>1,p=!1,m=function(){var t,e=Object(r.R)({bearingExpired:!1,previousLat:null,previousLong:null,calculateHeading:function(t,n,r){e.previousLat||(e.previousLat=t),e.previousLong||(e.previousLong=n);var i=e.previousLat-t,o=e.previousLong-n,a=Math.pow(Math.pow(i,2)+Math.pow(o,2),.5),s=r&&r.coords.accuracy<20,u=parseInt(a.toFixed(5))>0;if(s&&u){e.resetBearingExpirationTimer();var l=e.getBearing([e.previousLat,e.previousLong],[t,n]);return e.previousLat=t,e.previousLong=n,l}return!1},getBearing:function(t,e){var n=Object(r.P)(t,2),i=n[0],o=n[1],a=Object(r.P)(e,2),s=a[0],u=a[1],l=yh(i),c=yh(o),h=yh(s),f=yh(u),d=Math.sin(f-c)*Math.cos(h),p=Math.cos(l)*Math.sin(h)-Math.sin(l)*Math.cos(h)*Math.cos(f-c),m=Math.atan2(d,p);return(360+(m=180*m/Math.PI))%360},resetBearingExpirationTimer:function(){null!==t&&e.clearBearingExpirationTimer(),t=setTimeout((function(){e.bearingExpired=!0,e.clearBearingExpirationTimer()}),5e3)},clearBearingExpirationTimer:function(){null!==t&&(clearTimeout(t),t=null)}});return e}();m.on("bearingExpiredChanged",(function(t){t.newValue&&(b.bearing=null,g(b.userPosition,null))}));var v=function(t){b.error=t,"string"==typeof t&&(b.stateMachine.transition(Wc.gotError),g(null,null))},g=function(t,e){if(b.userPosition=t,null!=e){b.userMap=e;var n=a.nodes.filter((function(t){return t.map===e.id&&t.paths.length})),r=s.getPositionLatLon(t.coords.latitude,t.coords.longitude),i=function(t,e){var n,r,i,o=e.x,a=e.y,s=Number.MAX_SAFE_INTEGER;return t.forEach((function(t){r=t.x,i=t.y;var e=Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2));e<s&&(s=e,n=t)})),n}(n,{x:r.x+e.width/2,y:-r.y+e.height/2});b.nearestNode=i}b.userData={state:f.state,position:b.userPosition,map:b.userMap,bearing:b.bearing,nearestNode:b.nearestNode,error:b.error}},y=function(t){var o=t.coords.floorLevel;void 0!==window.floorLevel&&(o=window.floorLevel);var a={timestamp:t.timestamp,type:t.type,coords:{accuracy:t.coords.accuracy,latitude:t.coords.latitude,longitude:t.coords.longitude,floorLevel:o}};null!=o&&(p=!0),window.mappedin&&(Array.isArray(window.mappedin.bluedotCaptureData)?window.mappedin.bluedotCaptureData.push(a):window.mappedin.bluedotCaptureData=[a]),i&&clearTimeout(i),i=setTimeout((function(){f.transition(Wc.timedOut),v(null),b.positionSmoothing.reset(),g(b.userPosition,null)}),b.locationUncertainTimeoutPeriod);var c=s.getPositionLatLon(a.coords.latitude,a.coords.longitude),h=lh(c,u);if(null!=a.coords.latitude&&null!=a.coords.longitude)if(h)b.positionSmoothing.reset();else{var y=b.positionSmoothing.smooth(a);o=y.coords.floorLevel;var _=y.coords.latitude,w=y.coords.longitude,x=m.calculateHeading(_,w,y);!1!==x&&(b.bearing=x);var M=null;if("hudson-yards"===l.slug){var E=b.userMap;if(null==o&&lh(c,u,E,.55)&&(M=u.filter((function(t){return"5b5f5becadd5444692000001"===t.id}))[0]),null!=o){var S=u.filter((function(t){return t.elevation===o}));S.length>1&&(S=S.filter((function(t){return"5b5f20e3f3ea231068000000"===t.group}))),M=S[0]}}if(!M&&null!=o){var A=u.filter((function(t){return t.elevation===o}));1===A.length&&(M=A[0])}if(v(null),b.forceBlueDot&&b.userMap&&!p&&(M=b.userMap),M||b.forceBlueDot&&f.state!==Hc.HAS_INDOOR_POSITION||!b.forceBlueDot&&!d)f.transition(Wc.gotPositionWithFloor),v(null),null!=e&&(clearTimeout(e),e=null);else{if(f.state===Hc.HAS_INDOOR_POSITION)return n=Object(r.r)({},y),void(null==e&&(e=setTimeout((function(){f.transition(Wc.gotPosition),g(n,M),e=null}),b.fallbackToGPSTimeoutPeriod)));f.transition(Wc.gotPosition)}g(y,M)}else b.positionSmoothing.reset()},b=Object(r.R)({positionSmoothing:new gh(new ph),locationUncertainTimeoutPeriod:3e4,fallbackToGPSTimeoutPeriod:1e4,userMap:u.find((function(t){return t.id===l.defaultMap})),userPosition:null,nearestNode:null,error:null,userData:null,stateMachine:f,enableBlueDot:function(t){t&&(b.forceBlueDot=t.allowImplicitFloorLevel),null==o&&(f.transition(Wc.enabledBlueDot),o=c.watchPosition(y,(function(t){v("position-error"),console.warn("ERROR(".concat(t.code,"): ").concat(t.message))}),h))},disableBlueDot:function(){c.clearWatch(o),o=null,f.transition(Wc.disabledBlueDot)}});return b},_h=n(1),wh={SINGLE_FLOOR:"single_floor",MULTI_FLOOR:"multi_floor"},xh={},Mh={};Mh.MapView=Ya,Mh.HoverLabel=Xa,Mh.CameraControls=function(e,n,o,a){var s;Object.assign(this,i.EventDispatcher.prototype),this.camera=e,this.canvas=n,this.elevation=e.parent,this.orbit=this.elevation.parent;var u=2*Math.PI;this.zoomSpeed=5,this.rotateSpeed=100,this.enabled=!0,this.enableZoom=!0,this.enablePan=!0,this.enablePedestal=!1,this.maxPedestal=1/0,this.minPedestal=-1/0,this.enableRotate=!0,this.minZoom=375,this.maxZoom=1e4,this.initialMinZoom=375,this.initialMaxZoom=1e4,this.ignoreZoomLimits=!1,this.minExpandedZoom=375,this.maxExpandedZoom=1e5,this.zoomFactor=1,this.panBounds={margin:1.25,min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0},center:{x:0,y:0},radius:200},this.minTilt=0,this.maxTilt=1.2,this.mouseButtons={ORBIT:i.MOUSE.RIGHT,ZOOM:i.MOUSE.MIDDLE,PAN:i.MOUSE.LEFT};var l=this,c=new i.PlaneGeometry(1e6,1e6),h=new i.MeshBasicMaterial({color:0,visible:!1}),f=new i.Mesh(c,h),d=new i.Raycaster;o.add(f);var p,m=-1,v=0,g=1,y=2,b=3,_=4,w=5,x=6,M=7,E=8,S=9,A=m,T=new i.Vector2,q=[],P={offsetLeft:0,offsetTop:0},L=new i.Vector2,O=new i.Vector2,C=new i.Vector2,I=new i.Vector2,R=new i.Vector2,k=new i.Vector2,N=new i.Vector3,B=new i.Vector3,D=new i.Vector2,j=new i.Vector2,F=new i.Vector2,z=!1,U=new i.Clock(!0),V=0,G=!0;this.CAMERA_EVENTS={},this.CAMERA_EVENTS.CHANGE_EVENT={type:"change"},this.CAMERA_EVENTS.PAN_START_EVENT={type:"panStart"},this.CAMERA_EVENTS.PAN_END_EVENT={type:"panEnd"},this.CAMERA_EVENTS.PEDESTAL_START_EVENT={type:"pedestalStart"},this.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT={type:"pedestalChange"},this.CAMERA_EVENTS.PEDESTAL_END_EVENT={type:"pedestalEnd"},this.CAMERA_EVENTS.ROTATE_START_EVENT={type:"rotateStart"},this.CAMERA_EVENTS.ROTATE_END_EVENT={type:"rotateEnd"},this.CAMERA_EVENTS.ZOOM_START_EVENT={type:"zoomStart"},this.CAMERA_EVENTS.ZOOM_END_EVENT={type:"zoomEnd"},this.CAMERA_EVENTS.MULTI_START_EVENT={type:"multiStart"},this.CAMERA_EVENTS.MULTI_END_EVENT={type:"multiEnd"},this.INTERACTION_EVENTS={},this.INTERACTION_EVENTS.USER_PAN_EVENT={type:"userPan"},this.INTERACTION_EVENTS.USER_PEDESTAL_EVENT={type:"userPedestal"},this.INTERACTION_EVENTS.USER_ROTATE_EVENT={type:"userRotate"},this.INTERACTION_EVENTS.USER_DOLLY_EVENT={type:"userDolly"},this.INTERACTION_EVENTS.USER_ZOOM_EVENT={type:"userZoom"},this.INTERACTION_EVENTS.USER_TILT_EVENT={type:"userTilt"};var H=this.CAMERA_EVENTS.CHANGE_EVENT,W=this.CAMERA_EVENTS.PAN_START_EVENT,Y=this.CAMERA_EVENTS.PEDESTAL_START_EVENT,X=this.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT,Z=this.CAMERA_EVENTS.PAN_END_EVENT,J=this.CAMERA_EVENTS.ROTATE_START_EVENT,K=this.CAMERA_EVENTS.ROTATE_END_EVENT,Q=this.CAMERA_EVENTS.ZOOM_START_EVENT,$=this.CAMERA_EVENTS.ZOOM_END_EVENT,tt=this.CAMERA_EVENTS.MULTI_START_EVENT,et=this.CAMERA_EVENTS.MULTI_END_EVENT,nt=this.INTERACTION_EVENTS.USER_PAN_EVENT,rt=this.INTERACTION_EVENTS.USER_PEDESTAL_EVENT,it=this.INTERACTION_EVENTS.USER_ROTATE_EVENT,ot=this.INTERACTION_EVENTS.USER_DOLLY_EVENT,at=this.INTERACTION_EVENTS.USER_ZOOM_EVENT,st=this.INTERACTION_EVENTS.USER_TILT_EVENT,ut=ha((function(t){l.dispatchEvent(Object(r.r)({},X,{pedestal:t,scrolledToTop:l.scrolledToTop,scrolledToBottom:l.scrolledToBottom,scrollPercent:l.scrollPercent}))}),100);this.addDebugControls=function(t){t.addDebugControls({CameraControls:[{name:"Stay Inside Bounds",description:"Ensure the camera stays inside its bounds.\n\nCaution: going too far outside-of-bounds may slow renderingsignificantly.",control:new r.q({current:!0,onValueChanged:function(t){G=t}})}]})},this.removeDebugControls=function(t){t.removeDebugControls({CameraControls:["Stay Inside Bounds"]})},this.pan=function(t,e){isNaN(t)||isNaN(e)||l.setPosition(l.orbit.position.x+t,l.orbit.position.y+e)},this.setPosition=function(t,e){if(!isNaN(t)&&!isNaN(e)){A==m&&l.dispatchEvent(W);var n=t-l.panBounds.center.x,r=e-l.panBounds.center.y,i=Math.sqrt(n*n+r*r);if(G&&i>l.panBounds.radius){var o=Math.atan2(r,n),a={x:Math.cos(o)*l.panBounds.radius+l.panBounds.center.x,y:Math.sin(o)*l.panBounds.radius+l.panBounds.center.y};l.orbit.position.x=a.x,l.orbit.position.y=a.y}else l.orbit.position.x=t,l.orbit.position.y=e;l.dispatchEvent(H),A==m&&l.dispatchEvent(Z)}},this.setRotation=function(t){isNaN(t)||(A==m&&l.dispatchEvent(J),l.orbit.rotation.z=t%u,l.dispatchEvent(H),A==m&&l.dispatchEvent(K))},this.rotate=function(t){isNaN(t)||(A==m&&l.dispatchEvent(J),l.orbit.rotation.z=(l.orbit.rotation.z+t)%u,l.dispatchEvent(H),A==m&&l.dispatchEvent(K))},this.setTilt=function(t){isNaN(t)||(A==m&&l.dispatchEvent(J),l.elevation.rotation.x=G?Math.max(Math.min(t,l.maxTilt),l.minTilt):t,l.dispatchEvent(H),A==m&&l.dispatchEvent(K))},this.tilt=function(t){isNaN(t)||(A==m&&l.dispatchEvent(J),l.elevation.rotation.x=G?Math.max(Math.min(t+l.getTilt(),l.maxTilt),l.minTilt):t+l.getTilt(),l.dispatchEvent(H),A==m&&l.dispatchEvent(K))},this.setZoom=function(t){if(!isNaN(t)){A==m&&l.dispatchEvent(Q);var e=G?Math.min(Math.max(t,l.getZoomScaledMin()),l.getZoomScaledMax()):t;l.camera.position.z=e,l.camera.near=e/100,l.camera.far=100*e,l.camera.updateProjectionMatrix(),l.dispatchEvent(H),A==m&&l.dispatchEvent($)}},this.zoom=function(t){if(!isNaN(t)){A==m&&l.dispatchEvent(Q);var e=l.getZoom()-t;l.camera.position.z=G?Math.min(Math.max(e,l.minZoom*l.zoomFactor),l.maxZoom*l.zoomFactor):e,l.dispatchEvent(H),A==m&&l.dispatchEvent($)}},this.zoomIn=function(t,e,n){var r=this.getZoom();this.animateCamera({zoom:r/1.5},t,e,n)},this.zoomOut=function(t,e,n){var r=this.getZoom();this.animateCamera({zoom:1.5*r},t,e,n)},this.expandZoomLimits=function(t,e){e||(e=1.2),t*e>l.maxZoom&&(l.maxZoom=Math.min(t*e,l.maxExpandedZoom)),t/e<l.minZoom&&(l.minZoom=Math.max(t/e,l.minExpandedZoom))},this.restrictZoomLimits=function(t,e){e||(e=1.2),t*e>l.initialMaxZoom&&t*e<l.maxZoom&&(l.maxZoom=Math.max(l.getZoom(),t*e)),t/e<l.initialMinZoom&&t/e>l.minZoom&&(l.minZoom=Math.min(l.getZoom(),t/e))},this.getPosition=function(){return{x:l.orbit.position.x,y:l.orbit.position.y,z:l.orbit.position.z}},this.getPedestal=function(){return l.orbit.position.z},Object.defineProperty(this,"setPedestal",{enumerable:!1,value:function(t){"number"!=typeof t||isNaN(t)||(l.orbit.position.z=t,a.tryRendering())}}),Object.defineProperty(this,"scrollPercent",{get:function(){var t=this.minPedestal,e=this.maxPedestal,n=this.getPedestal();return n=Math.min(n,e),((n=Math.max(n,t))-t)/(e-t)*100}}),Object.defineProperty(this,"scrolledToTop",{get:function(){return 0===this.maxPedestal||Math.ceil(this.getPedestal())>=this.maxPedestal}}),Object.defineProperty(this,"scrolledToBottom",{get:function(){return 0===this.minPedestal||Math.floor(this.getPedestal())<=this.minPedestal}}),this.getRotation=function(){return l.orbit.rotation.z},this.getTilt=function(){return l.elevation.rotation.x},this.getZoom=function(){return l.camera.position.z},this.isCameraMoving=function(){return A!=m},this.getZoomScaledMin=function(){return l.minZoom*l.zoomFactor},this.getZoomScaledMax=function(){var t=l.minZoom*l.zoomFactor;return Math.max(l.maxZoom,1.5*t)};var lt=new Set;function ct(t){t.isPlaying?t.stop():t.end(),lt.delete(t)}function ht(t){var e={x:t.clientX,y:t.clientY};l.initialShiftPos=e,l.initialPedestal=l.getPedestal(),l.pedestalScaleFactor=da(l.camera.fov,l.canvas.clientHeight,l.getZoom()),l.dispatchEvent(Y),l.dispatchEvent(rt)}function ft(t){t.clientX;var e=t.clientY,n=l.initialPedestal+l.pedestalScaleFactor*(e-l.initialShiftPos.y);G&&(n<l.minPedestal?n=Math.max(n,l.minPedestal):n>l.maxPedestal&&(n=Math.min(n,l.maxPedestal))),n!==l.getPedestal()&&(l.setPedestal(n),ut(n))}function dt(t){var e=0;return void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e}function pt(t){var e=dt(t),n=l.getZoom();return!(e<0&&n==l.getZoomScaledMax()||e>0&&n==l.getZoomScaledMin())}function mt(t){if(!1!==l.enabled){if(At(t),t.preventDefault(),A==b&&l.dispatchEvent($),t.button===l.mouseButtons.ORBIT){if(!1===l.enableRotate)return;!function(t){L.set(t.clientX,t.clientY),l.dispatchEvent(J),l.dispatchEvent(it)}(t),A=v}else if(t.button===l.mouseButtons.ZOOM){if(!1===l.enableZoom)return;!function(t){D.set(t.clientX,t.clientY),l.dispatchEvent(Q),l.dispatchEvent(ot)}(t),A=g}else t.button===l.mouseButtons.PAN&&(l.enablePan?(e=St(T),I.set(e.x,e.y),R.set(l.orbit.position.x,l.orbit.position.y),l.dispatchEvent(W),l.dispatchEvent(nt),A=y):l.enablePedestal&&(ht(t),A=E));var e;A!==m&&(l.canvas.addEventListener("mousemove",vt,!1),window.addEventListener("mouseup",gt,!1),window.addEventListener("mouseout",gt,!1))}}function vt(t){var e;if(!1!==l.enabled)if(t.preventDefault(),At(t),A===v){if(!1===l.enableRotate)return;!function(t){O.set(t.clientX,t.clientY),C.subVectors(O,L),l.rotate(-C.x/l.rotateSpeed),l.setTilt(l.getTilt()-C.y/l.rotateSpeed),L.copy(O),l.dispatchEvent(H)}(t)}else if(A===g){if(!1===l.enableZoom)return;!function(t){j.set(t.clientX,t.clientY),F.subVectors(j,D),l.setZoom(F.y*l.zoomSpeed),D.copy(j),l.dispatchEvent(H)}(t)}else if(A===y){if(!1===l.enablePan)return;e=St(T),k.set(e.x,e.y),N.subVectors(k,I),l.setPosition(R.x-N.x,R.y-N.y),l.dispatchEvent(H)}else A===b?(z=!0,A=m):A===E&&ft(t)}function gt(){if(!1!==l.enabled){switch(document.removeEventListener("mousemove",vt,!1),window.removeEventListener("mouseup",gt,!1),window.removeEventListener("mouseout",gt,!1),A){case y:l.dispatchEvent(l.CAMERA_EVENTS.PAN_END_EVENT);break;case g:l.dispatchEvent(l.CAMERA_EVENTS.ZOOM_END_EVENT);break;case v:l.dispatchEvent(l.CAMERA_EVENTS.ROTATE_END_EVENT);break;case E:l.dispatchEvent(l.CAMERA_EVENTS.PEDESTAL_END_EVENT)}A=m}}this.animateCamera=function(e,n,i,o,s){var u=Object(r.r)({mode:"cancel"},s),c={},h={},f=l.getPosition();if(null!=e.position&&(void 0!==e.position.x&&(c.x=f.x,h.x=e.position.x),void 0!==e.position.y&&(c.y=f.y,h.y=e.position.y),void 0!==e.position.z&&(c.z=f.z,h.z=e.position.z)),void 0!==e.zoom&&(c.zoom=G?Math.min(Math.max(l.getZoom(),l.getZoomScaledMin()),l.getZoomScaledMax()):l.getZoom(),l.viewState!==wh.MULTI_FLOOR&&G?h.zoom=Math.min(Math.max(e.zoom,l.getZoomScaledMin()),l.getZoomScaledMax()):h.zoom=e.zoom),void 0!==e.rotation){c.rotation=l.getRotation();var d=e.rotation%(2*Math.PI);Math.abs(d-c.rotation)>Math.PI?h.rotation=-(2*Math.PI-d):h.rotation=d}void 0!==e.tilt&&(c.tilt=l.getTilt(),l.viewState!==wh.MULTI_FLOOR&&G?h.tilt=Math.max(Math.min(e.tilt,l.maxTilt),l.minTilt):h.tilt=e.tilt);var p=new Ma.Tween(c).to(h,t.env.TESTING?0:n).onUpdate((function(t){l.setMulti({x:t.x,y:t.y,z:t.z},t.zoom,t.rotation,t.tilt)})).onComplete((function(){o&&o(),ct(p)})).onStart((function(){A!=M&&(A=M,l.dispatchEvent(tt)),l.dispatchEvent(H)})),m=Array.from(lt),v=m[m.length-1],g=!1;return null!=v&&("chain"===u.mode?(g=!0,v.chain(p)):(ct(v),v=null)),lt.add(p),i?p.easing(i):p.easing(Ma.Easing.Quadratic.In),e.doNotAutoStart||g||(p.start(),a.tryRendering()),p._mMapAnimation=!0,p},this.setMulti=function(t,e,n,r){A==m&&l.dispatchEvent(tt),null!=t&&(void 0===t.x||isNaN(t.x)||(l.orbit.position.x=t.x),void 0===t.y||isNaN(t.y)||(l.orbit.position.y=t.y),void 0===t.z||isNaN(t.z)||this.setPedestal(t.z)),void 0===e||isNaN(e)||(l.camera.position.z=G?Math.min(Math.max(e,l.getZoomScaledMin()),l.getZoomScaledMax()):e,l.viewState===wh.MULTI_FLOOR?e>1e4&&(l.camera.near=e-1e4,l.camera.far=e+1e4):(l.camera.near=e/100,l.camera.far=100*e),l.camera.updateProjectionMatrix()),void 0===n||isNaN(n)||(l.orbit.rotation.z=n),void 0===r||isNaN(r)||(l.elevation.rotation.x=G?Math.max(Math.min(r,l.maxTilt),l.minTilt):r),l.dispatchEvent(H),A==m&&l.dispatchEvent(et)},this.getProjectionScaleFactor=da,this.postRender=function(){A!=y&&A!=x||(d.setFromCamera(T,e),(s=d.intersectObject(f,!1)[0])&&(I.set(s.point.x,s.point.y),R.set(l.orbit.position.x,l.orbit.position.y))),A==b&&z&&(z=!1,p=l.getZoom(),B=St(T),R.set(l.orbit.position.x,l.orbit.position.y)),A==M&&0==Ma.getAll().some((function(t){return t._mMapAnimation}))&&(A=m,l.dispatchEvent(et))};var yt=null;function bt(t){!1===l.enabled||!1===l.enableZoom||A!==m&&A!==b||(t.preventDefault(),t.stopPropagation(),At(t),pt(t)&&(V=U.getElapsedTime()),A!=b&&pt(t)&&(l.canvas.addEventListener("mousemove",vt,!1),A=b,p=l.getZoom(),B=St(T),R.set(l.orbit.position.x,l.orbit.position.y),l.dispatchEvent(Q)),null!=yt&&clearTimeout(yt),yt=setTimeout((function(){l.dispatchEvent($)}),50),function(t){if(!pt(t))return V>0&&(l.dispatchEvent($),l.dispatchEvent(at)),V=0,void(A=m);var e=l.getZoom(),n=e-dt(t)*e/1e4*l.zoomSpeed;l.setZoom(n);var r=n/p;N.subVectors(B,R).multiplyScalar(1-r),l.setPosition(R.x+N.x,R.y+N.y),l.dispatchEvent(H)}(t))}function _t(t){var e;if(!1!==l.enabled)switch(e=l.canvas,P.offsetLeft=e.getBoundingClientRect().left,P.offsetTop=e.getBoundingClientRect().top,Tt(t),t.touches.length){case 1:l.enablePedestal?(function(t){ht(t.touches[0])}(t),A=S):l.enableRotate&&(function(t){var e=St(t.x?t:q[0]);I.set(e.x,e.y),R.set(l.orbit.position.x,l.orbit.position.y),l.dispatchEvent(nt),l.dispatchEvent(W)}(t),A=x);break;case 2:if(!1===l.enableZoom)return;!function(){l.touchInputs=new xa(q[0],q[1]);var t=q[0].x-q[1].x,e=q[0].y-q[1].y;p=l.getZoom();var n={x:q[0].x-t/2,y:q[0].y-e/2};B=St(n),l.orbit.updateMatrixWorld(),l.touchAnchor1=new ya(q[0],l.camera,f),l.touchAnchor2=new ya(q[1],l.camera,f),R.set(l.orbit.position.x,l.orbit.position.y),l.dispatchEvent(ot),l.dispatchEvent(tt)}(),A=w;break;case 3:if(!1===l.enablePan)return;!function(t){L.set(t.touches[1].clientX,t.touches[1].clientY),l.dispatchEvent(st),l.dispatchEvent(J)}(t),A=_;break;default:A=m}}function wt(t){if(!1!==l.enabled)switch(t.preventDefault(),t.stopPropagation(),Tt(t),t.touches.length){case 3:if(!1===l.enableRotate)return;if(A!==_)return;!function(t){O.set(t.touches[1].clientX,t.touches[1].clientY),C.subVectors(O,L),l.setTilt(l.getTilt()-C.y/l.rotateSpeed),L.copy(O)}(t);break;case 2:if(!1===l.enableZoom)return;if(A!==w)return;!function(){l.touchInputs.update(q[0],q[1]);var t=l.touchInputs.first,e=l.touchInputs.second;l.touchAnchor1.viewCoordinate={x:t.x,y:t.y},l.touchAnchor2.viewCoordinate={x:e.x,y:e.y};var n=function(t,e){l.orbit.updateMatrixWorld(),l.camera.updateProjectionMatrix();var n=l.camera.projectionMatrix.clone(),r=t.worldCoordinate,o=e.worldCoordinate,a=t.reUnproject(),s=e.reUnproject();if(!a||!s)return null;var u=t.viewCoordinate,c=e.viewCoordinate,h=o.x-r.x,f=o.y-r.y,d=Math.atan2(f,h),p=s.x-a.x,m=s.y-a.y,v=(Math.atan2(m,p)-d+Math.PI)%(2*Math.PI)+2*Math.PI%(2*Math.PI)-Math.PI,g=new i.Matrix4;g.makeRotationZ(-v);var y=g.clone();y.multiply(t.snapHolderMatrix);var b=function(t,e,n){return t.elements[4*(e-1)+n-1]},_=b(n,1,1)*b(y,1,1)-u.x*b(n,3,4)*b(y,3,1),w=b(n,1,1)*b(y,1,2)-u.x*b(n,3,4)*b(y,3,2),x=b(n,1,1)*b(y,1,3)-u.x*b(n,3,4)*b(y,3,3),M=r.x*_+r.y*w+r.z*x,E=b(n,2,2)*b(y,2,1)-u.y*b(n,3,4)*b(y,3,1),S=b(n,2,2)*b(y,2,2)-u.y*b(n,3,4)*b(y,3,2),A=b(n,2,2)*b(y,2,3)-u.y*b(n,3,4)*b(y,3,3),T=r.x*E+r.y*S+r.z*A,q=b(n,1,1)*b(y,1,1)-c.x*b(n,3,4)*b(y,3,1),P=b(n,1,1)*b(y,1,2)-c.x*b(n,3,4)*b(y,3,2),L=b(n,1,1)*b(y,1,3)-c.x*b(n,3,4)*b(y,3,3),O=o.x*q+o.y*P+o.z*L,C=b(n,2,2)*b(y,2,1)-c.y*b(n,3,4)*b(y,3,1),I=b(n,2,2)*b(y,2,2)-c.y*b(n,3,4)*b(y,3,2),R=b(n,2,2)*b(y,2,3)-c.y*b(n,3,4)*b(y,3,3),k=o.x*C+o.y*I+o.z*R,N=Math.abs(q-_),B=Math.abs(P-w),D=Math.abs(L-x),j=Math.abs(q-E),F=Math.abs(P-S),z=Math.abs(L-A),U=Math.abs(C-_),V=Math.abs(I-w),G=Math.abs(R-x),H=Math.abs(C-E),W=Math.abs(I-S),Y=Math.abs(R-A);Math.min(N+B+D,j+F+z)<Math.min(U+V+G,H+W+Y)&&(q=C,P=I,L=R,O=k);var X=E*x-_*A,Z=S*x-w*A,J=T*x-M*A,K=q*A-E*L,Q=P*A-S*L,$=O*A-T*L,tt=($*Z-J*Q)/(K*Z-X*Q),et=($*X-J*K)/(Q*X-Z*K),nt=S*_-w*E,rt=P*E-S*q,it=((O*E-T*q)*nt-(T*_-M*E)*rt)/((L*E-A*q)*nt-(A*_-x*E)*rt),ot=y.clone();return ot.elements[12]=tt,ot.elements[13]=et,ot.elements[14]=it,it>0?ot:null}(l.touchAnchor1,l.touchAnchor2);n&&function(t){l.orbit.updateMatrixWorld();var e=new i.Euler;e.setFromRotationMatrix(t,"ZYX");var n=t.elements[14]/Math.cos(e.x),r=e.z,o=new i.Vector3(0,0,1);o.applyEuler(e),o.setLength(n);var a=new i.Vector3;a.setFromMatrixPosition(t),a.sub(o),l.setPosition(a.x,a.y),l.setZoom(n),l.setRotation(r)}(n),l.orbit.updateMatrixWorld(),l.touchAnchor1.updateAnchorState(l.camera,t),l.touchAnchor2.updateAnchorState(l.camera,e)}();break;case 1:l.enablePedestal&&A===S?function(t){ft(t.touches[0])}(t):l.enablePan&&A===x&&function(t){var e=St(t.x?t:q[0]);k.set(e.x,e.y),N.subVectors(k,I),l.setPosition(R.x-N.x,R.y-N.y),l.dispatchEvent(H)}(t);break;default:A=m}}function xt(t){if(!1!==l.enabled){switch(A){case y:case x:case _:l.dispatchEvent(l.CAMERA_EVENTS.PAN_END_EVENT);break;case g:case w:l.dispatchEvent(l.CAMERA_EVENTS.ZOOM_END_EVENT);break;case v:l.dispatchEvent(l.CAMERA_EVENTS.ROTATE_END_EVENT);break;case E:case S:l.dispatchEvent(l.CAMERA_EVENTS.PEDESTAL_END_EVENT)}A=m}}function Mt(t){t.preventDefault()}function Et(t,e){return{x:e.clientX-P.offsetLeft,y:e.clientY-P.offsetTop}}function St(t){d.setFromCamera(t,e);var n=d.intersectObject(f,!1)[0];return n?n.point:new i.Vector3}function At(t){var e,n=(l.canvas,{x:(e=t).offsetX,y:e.offsetY});return T.x=n.x/l.canvas.width*a.resolutionScale*2-1,T.y=-n.y/l.canvas.height*a.resolutionScale*2+1,T}function Tt(t){q=[];for(var e=0,n=t.touches.length;e<n;e++){var r=t.touches[e],o=Et(l.canvas,r);q.push(new i.Vector2(o.x/l.canvas.width*a.resolutionScale*2-1,-o.y/l.canvas.height*a.resolutionScale*2+1))}T=q[0]}this.update=function(){Ma.update(),V>0&&A==b&&U.getElapsedTime()-V>.2&&(V=0,A=m,l.dispatchEvent($),l.dispatchEvent(at),l.canvas.removeEventListener("mousemove",vt,!1))},this.dispose=function(){l.canvas.removeEventListener("contextmenu",Mt,!1),l.canvas.removeEventListener("mousedown",mt,!1),l.canvas.removeEventListener("mousewheel",bt,!1),l.canvas.removeEventListener("MozMousePixelScroll",bt,!1),l.canvas.removeEventListener("touchstart",_t,!1),l.canvas.removeEventListener("touchend",xt,!1),l.canvas.removeEventListener("touchmove",wt,!1),l.canvas.removeEventListener("mousemove",vt,!1),window.removeEventListener("mouseup",gt,!1),window.removeEventListener("mouseout",gt,!1),o.remove(f)},this.canvas.addEventListener("contextmenu",Mt,!1),this.canvas.addEventListener("mousedown",mt,!1),this.canvas.addEventListener("mousewheel",bt,!1),this.canvas.addEventListener("MozMousePixelScroll",bt,!1),this.canvas.addEventListener("touchstart",_t,!1),this.canvas.addEventListener("touchend",xt,!1),this.canvas.addEventListener("touchmove",wt,!1)},xh.PathVertexShader="attribute float pathDistance;attribute vec3 pathNormal;attribute vec3 pathTangent;uniform vec2 uvScale;uniform float vertexes;uniform float complete;uniform float nearRadius;uniform float farRadius;uniform float nearZoom;uniform float farZoom;uniform float pulse;uniform float pulseLength;uniform bool pulseBulge;uniform bool pathIsVertical;uniform bool displayArrowsOnPath;uniform vec2 cameraParameters;varying float zoomLevel;varying float radius;varying vec2 fragTexcoord;varying float fragTopTextureU;varying float fragPathDistance;const float flattenFactor=0.05;float remap(float x,float xMin,float xMax,float yMin,float yMax){return(x-xMin)/(xMax-xMin)*(yMax-yMin)+yMin;}float clampRemap(float x,float xMin,float xMax,float yMin,float yMax){return clamp(remap(x,xMin,xMax,yMin,yMax),yMin,yMax);}void main(){fragPathDistance=pathDistance;vec3 origin=position-nearRadius*normal;vec3 adjustedPosition=position;zoomLevel=clampRemap(cameraParameters.x,nearZoom,farZoom,0.0,1.0);adjustedPosition+=normal*(farRadius-nearRadius)*zoomLevel;float height=dot(adjustedPosition-origin,pathNormal);float desiredHeight=max(height,0.0);if(displayArrowsOnPath){desiredHeight=desiredHeight*flattenFactor;}float flattenMagnitude=height-desiredHeight;adjustedPosition=adjustedPosition-pathNormal*flattenMagnitude;vec4 mvPosition=modelViewMatrix*vec4(adjustedPosition,1.0);gl_Position=projectionMatrix*mvPosition;fragTexcoord=uv;vec3 bitangent=cross(normal,pathTangent);fragTopTextureU=-dot(bitangent,pathNormal)*0.5+0.5;radius=mix(nearRadius,farRadius,zoomLevel);}",xh.PathFragmentShader="uniform float complete;uniform float nearRadius;uniform float farRadius;uniform vec2 resolution;uniform vec2 cameraParameters;uniform vec3 color;uniform float pathLength;uniform vec3 pulseColor;uniform float pulse;uniform float pulseLength;uniform bool pathIsVertical;uniform bool displayArrowsOnPath;uniform float arrowAnimationTimer;uniform sampler2D arrowTexture;varying float zoomLevel;varying float radius;varying vec2 fragTexcoord;varying float fragTopTextureU;varying float fragPathDistance;const float arrowLength=2.0;const float arrowMargin=0.1;const float arrowSpacingOnShortPath=6.0;const float arrowSpacingOnLongPath=7.5;const float longPathLength=200.;const float shortPathLength=75.;const float completeLength=0.1;float remap(float x,float xMin,float xMax,float yMin,float yMax){return(x-xMin)/(xMax-xMin)*(yMax-yMin)+yMin;}float clampRemap(float x,float xMin,float xMax,float yMin,float yMax){return clamp(remap(x,xMin,xMax,yMin,yMax),yMin,yMax);}void main(void){float completeLocation=complete*(1.0+completeLength);float completeAmount=clampRemap(fragPathDistance,completeLocation-completeLength,completeLocation,0.0,1.0);float opacity=1.0-smoothstep(0.0,1.0,completeAmount);if(opacity<=0.0){discard;}float u=fragTopTextureU;u=clamp(u*(1./(1.-arrowMargin*2.))-(1./(1.-arrowMargin*2.)-1.)/2.,0.0,1.0);float arrowSpacing=clampRemap(pathLength,shortPathLength*radius,longPathLength*radius,arrowSpacingOnShortPath,arrowSpacingOnLongPath);float expandAmount=mix(1.0,farRadius/nearRadius,zoomLevel);float effectiveArrowSpacing=arrowSpacing*1.0/expandAmount+arrowMargin*2.0;float effectiveArrowLength=arrowLength*radius*(1.-arrowMargin*2.0);float v=(fragTexcoord.x*(pathLength/effectiveArrowLength)-arrowAnimationTimer*(1.+effectiveArrowSpacing));if(mod(v,(1.+effectiveArrowSpacing))<1.){v=v-effectiveArrowSpacing*floor(v/(1.+effectiveArrowSpacing));}else{v=ceil(v/(1.+effectiveArrowSpacing));}vec2 sampleTexcoord=vec2(u,v);float arrowAmount=0.0;if(displayArrowsOnPath){arrowAmount=texture2D(arrowTexture,sampleTexcoord).r;}float pulseLocation=remap(pulse,0.0,1.0,-pulseLength,1.0+pulseLength);float pulseDistance=smoothstep(0.0,pulseLength,abs(fragPathDistance-pulseLocation));float pulseLevel=abs(1.0-pulseDistance-arrowAmount);gl_FragColor=vec4(mix(color,pulseColor,pulseLevel),opacity);}",xh.CompositeVertexShader=qa,xh.CompositeFragmentShader=Pa;var Eh=Math.PI,Sh=function(t){var e=Wo(t.toString(16));return e.getBrightness()<38?Number.parseInt(e.brighten(20).toString().substring(1),16):Number.parseInt(e.darken(15).toString().substring(1),16)},Ah=function e(o,s){var u=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=this;Object.assign(this,r.v.prototype),Mh.MapView.call(this,o,s,l),this.type="MapView3D",window.MappedinDebug||(window.MappedinDebug={}),window.MappedinDebug.MapView3D=this,window.MappedinDebug.THREE=_h;var h,f=!1,d=!1,p=!1,m=!1,v=16777215,g=1;function y(t){c.controls.camera.fov=t,c.controls.camera.updateProjectionMatrix()}d="ON"==l.antialias||"OFF"!=l.antialias&&window.devicePixelRatio<=1,h=void 0!==l.markerWorldIslandSplit&&l.markerWorldIslandSplit,l.disableHover&&(p=!0),l.disableZoomOnMapSizeChange&&(m=!0),null!=l.loadOptions&&(this.loadOptions=l.loadOptions),this.viewState=wh.SINGLE_FLOOR;var b=Bl;this.setViewState=function(t){switch(this.viewState=t,t){case wh.MULTI_FLOOR:this.controls.maxTilt=Eh,y(20),this.controls.enablePedestal=!0,this.controls.enablePan=!1,this.controls.enableRotate=!1,this.controls.enableZoom=!1,this.controls.enablePan=!1,this.controls.setPedestal(0),null!=this.mapboxOutdoorContext&&this.mapboxOutdoorContext.setShouldDrawTiles(!1);break;case wh.SINGLE_FLOOR:this.controls.maxTilt=1.2,this.controls.setTilt(.3),this.controls.enablePedestal=!1,this.controls.enablePan=!0,this.controls.enableRotate=!0,this.controls.enableZoom=!0,this.controls.enablePan=!0,y(40),this.controls.enabled=!0,null!=this.mapboxOutdoorContext&&this.mapboxOutdoorContext.setShouldDrawTiles(!0);break;default:this.controls.maxTilt=1.2,this.controls.setTilt(.3),y(40),this.controls.enabled=!0,this.controls.enablePan=!0,this.controls.enableRotate=!0,this.controls.enableZoom=!0,this.controls.enablePan=!0,null!=this.mapboxOutdoorContext&&this.mapboxOutdoorContext.setShouldDrawTiles(!0)}};var _=new Ha({performance:!0}),w=new Is,x=new La({multiBufferRendering:l.multiBufferRendering,alpha:l.alpha,antialias:d,onWebGLContextCreationError:l.onWebGLContextCreationError,onWebGLContextLost:l.onWebGLContextLost,onWebGLContextRestored:function(){l.onWebGLContextRestored&&l.onWebGLContextRestored(),w.onWebGLContextRestored(),c.tryRendering()},onWebGLRendererError:l.onWebGLRendererError,backgroundColor:l.backgroundColor,backgroundAlpha:l.backgroundAlpha}),M=null,E={};this.scene=new i.Scene,this.resolutionScale=window.devicePixelRatio;var S=new gs({width:this.container.clientWidth,height:this.container.clientHeight}),A=new i.PerspectiveCamera(40,this.container.clientWidth/this.container.clientHeight,50,1e5),T=new i.Object3D;T.add(A);var q=new i.Object3D;q.add(T),this.scene.add(q),A.updateProjectionMatrix(),A.updateMatrixWorld(!0);var P=function(){x.render(Aa,null,c.scene,A)};this.focusZoomFactor=1.1;var L=!1;function O(){L=!0,U=!0}function C(){L=!1,U=!0}var I=300,R=30,k={time:0,clientc:0,clienty:0},N=new Go.World({applyGravity:!1,emitImpactEvent:!1,islandSplit:h,solver:new Go.GSSolver}),B=function(t){t.bodyA._mNumCollisions++,t.bodyB._mNumCollisions++},D=function(t){t.bodyA._mNumCollisions--,t.bodyB._mNumCollisions--};N.on("beginContact",B),N.on("endContact",D);var j=.1,F=1,z=[],U=!0,V=new Map,G={},H={},W=!1;this.smartLabelOrientationDelay=650;var Y={},X={},Z=new Ql(G,N,x.implementation.renderer,c,_,this.loadOptions);this.blueDotManager=new Lc({mapManager:Z,mapView:this}),this.scene.add(Z.object),this.closedPolygonManager=new Ic({scene:c.scene,tryRendering:function(){return c.tryRendering()},getPolygonMeshFromId:function(t){return G[t]}}),Z.addPersistentSetMapCallback((function(){u.closedPolygonManager.onMapChanged(Z.currentMap)}));var J=Z.mapObjects,K=new tc({collisionEngine:S,cameraObject:A,canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight});Object.defineProperty(this,"currentMap",{get:function(){return Z.currentMap?Z.currentMap.id:Z.mapObjects.size>0?Array.from(Z.mapObjects)[0].id:(console.error("No maps loaded."),null)}});var Q,$=new i.Vector2,tt=new i.Raycaster,et=new Mh.HoverLabel(o),nt=function(t){return ua(t,s.polygons)};this.setMap=Z.setMap,this.expandMaps=Z.expandMaps.bind(Z),this.tiltMaps=Z.tiltMaps.bind(Z),this.contractMaps=Z.contractMaps.bind(Z),Object.defineProperty(this,"mapsExpanded",{get:function(){return Z.expanded}}),this.showOutdoorContext=function(){null==c.mapboxOutdoorContext&&n.e(6).then(n.bind(null,604)).then((function(t){var e=t.default;c.mapboxOutdoorContext=new e({context:x.getContext(),lngLat:[0,0],lngLatInMapSpace:new i.Vector2(0,0),mapScale:1,mapRotation:0,viewportSize:new i.Vector2(c.canvasWidth,c.canvasHeight)}),x.setMapboxOutdoorContext(c.mapboxOutdoorContext),c.mapboxOutdoorContext.on("render",(function(){return c.tryRendering()})),null!=c._debugUI&&c.mapboxOutdoorContext.addDebugControls(c._debugUI)}))},this.hideOutdoorContext=function(){null!=c.mapboxOutdoorContext&&(null!=c._debugUI&&c.mapboxOutdoorContext.removeDebugControls(c._debugUI),x.setMapboxOutdoorContext(null),c.mapboxOutdoorContext.off("render"),c.mapboxOutdoorContext.destroy(),c.mapboxOutdoorContext=null)};var rt=null!=l.outdoorContext&&l.outdoorContext;function it(){$.x=1/0,$.y=1/0}function ot(t){var e=o.getBoundingClientRect();return{x:(t.clientX-e.left)/(e.right-e.left)*ue,y:(t.clientY-e.top)/(e.bottom-e.top)*le}}!0===rt&&this.showOutdoorContext(),this.showEntireMap=function(t){t||(t={});var e,n=J.get(c.currentMap);return t.interactiveOnly?e=Object.keys(Y):!(e=n.object.children.map((function(t){return t.name}))).length&&n.elements&&(e=Object.keys(n.elements)),t.polygons=e,this.focusOn(t)},this.resetPanBounds=function(){var t=J.get(c.currentMap);c.controls.panBounds.min=c.controls.getPosition(),c.controls.panBounds.max=c.controls.getPosition();var e=t.boundingBox;e||(e=(new i.Box3).setFromObject(t.object),J.get(c.currentMap).boundingBox=e),Z.expandPanBounds(e)},this.addMap=Z.addMap,this.removeMap=Z.removeMap,this.removeAllMaps=Z.removeAllMaps;var at,st=function(t){Q=ot(t),$.x=Q.x/ue*2-1,$.y=-Q.y/le*2+1},ut=function(t){t.preventDefault(),st(t),("touch"!=t.pointerType||null==t.pointerType&&f)&&(kt(),et.setPosition(Q.x,Q.y))},lt=x.domElement(),ct=function(t){"pointer"!==lt.style.cursor&&(lt.style.cursor="grabbing"),k={time:Date.now(),clientX:t.clientX,clientY:t.clientY},dt(t)},ht=function(t){f=!0,1==t.touches.length?ct(t.touches[0]):k=0},ft=function(t){if("grabbing"===lt.style.cursor&&(lt.style.cursor="grab"),c.touchCount&&pt(t),t.target.parentNode==o){var e=Math.sqrt(Math.pow(t.clientX-k.clientX,2)+Math.pow(t.clientY-k.clientY,2));if(Date.now()<k.time+I&&e<=R){st(t);var n=xt();if(c.viewState===wh.MULTI_FLOOR&&"function"==typeof c.onMapClicked){var r=wt();if(null!=r&&!c.onMapClicked(r))return}for(var i=0,a=n.length;i<a;++i){var s=n[i];if(Y[s]&&!c.onPolygonClicked(s))return}c.onNothingClicked()}else c.touchCount||(c.publish(c.currentInteractionEvent),c.currentInteractionEvent="")}},dt=function(t){window.PointerEvent&&"touch"==t.pointerType&&(c.touchCount=(c.touchCount||0)+1,1===c.touchCount&&c.publish("user-hands-on"))},pt=function(t){window.PointerEvent&&"touch"==t.pointerType&&(c.touchCount=c.touchCount-1,c.touchCount||c.publish("user-hands-off"))},mt=function(t){t.preventDefault(),ft(t.changedTouches[0])},vt=function(){b.resize(c.container),Z.resize(),c.tryRendering()};this.focusOnPolygon=function(t,e,n,r){return c.focusOn({polygons:[t],changeZoom:e,duration:n,curve:r})},this.focusOnPath=function(t,e,n,r,i){return c.focusOn({nodes:t,polygons:e,changeZoom:n,duration:r,curve:i})},this.focusOn=function(e){if(this.viewState!==wh.MULTI_FLOOR&&null!=e){var n,r=void 0===e.changeZoom||e.changeZoom;n=void 0!==e.duration?e.duration:!0===t.env.TESTING?0:200;var o=void 0!==e.focusZoomFactor?e.focusZoomFactor:c.focusZoomFactor,a=e.curve,u=void 0!==e.horizontalFovFactor?e.horizontalFovFactor:1,l=void 0!==e.verticalFovFactor?e.verticalFovFactor:1,h=e.callback,f=void 0!==e.minZoom?e.minZoom:c.controls.minZoom,d=e.updateZoomLimits||!0,p=!1,m=[];if(e.nodes)for(var v=e.nodes,g=0,y=v.length;g<y;g++){var b=v[g];"string"==typeof b&&(b=ua(b,s.nodes)),null!=b.map&&b.map!=c.currentMap||(m.push(c.convertTo3DMapPosition(b)),p=!0)}if(e.debug){at&&at.destroy(),at=new i.Object3D,c.scene.add(at);var _=new i.BoxGeometry(100,100,100),w=new i.MeshBasicMaterial({color:65280})}if(e.points&&(e.points.forEach((function(t){return m.push(t)})),p=!0),e.boundingBox){var x=e.boundingBox,M=x.min,E=x.max;[new i.Vector3(M.x,M.y,M.z),new i.Vector3(M.x,E.y,M.z),new i.Vector3(E.x,M.y,M.z),new i.Vector3(E.x,E.y,M.z),new i.Vector3(M.x,M.y,E.z),new i.Vector3(M.x,E.y,E.z),new i.Vector3(E.x,M.y,E.z),new i.Vector3(E.x,E.y,E.z)].forEach((function(t){if(e.debug){var n=new i.Mesh(_,w);n.position.set(t.x,t.y,t.z),at.add(n)}m.push(t)})),p=!0}if(e.polygons){var S=e.polygons,A=J.get(c.currentMap),T=0;for(g=0,y=S.length;g<y;g++){var q=sa(S[g]),P=A.objectsDictionary[q];if(P)if(T++,P.geometry.attributes){for(var L=P.geometry.attributes.position,O=0,C=L.count;O<C;O++){var I=new i.Vector3;I.set(L.getX(O),L.getY(O),L.getZ(O)),m.push(I)}p=!0}else{for(var R=0,k=P.geometry.vertices.length;R<k;R++)m.push(P.geometry.vertices[R].clone());p=!0}else{var N=A.elements;if(N){var B=N[q];if(B){T++;var D=B.getBoundingBox();m.push(new i.Vector3(D.min.x,D.min.y,0)),m.push(new i.Vector3(D.min.x,D.max.y,0)),m.push(new i.Vector3(D.max.x,D.min.y,0)),m.push(new i.Vector3(D.max.x,D.max.y,0)),p=!0}}}}1===T&&(o=c.loadOptions&&c.loadOptions.zoomOverrides&&c.loadOptions.zoomOverrides.focusZoomFactorPolygon||o)}if(p){c.tryRendering();var j=e.padding||this.cachedPadding||{top:0,bottom:0,left:0,right:0},F=gt(m,u,l,j,!0),z=c.getZoomLevelForCurrentMap(),U=F.zoom;d&&(c.controls.restrictZoomLimits(z),c.controls.expandZoomLimits(U*o));var V={position:F.position,tilt:e.tilt,rotation:e.rotation};return r&&(V.zoom=Math.max(F.zoom*o,f)),c.controls.animateCamera(V,n,a,h)}return c.controls.animateCamera({},n,a,h)}},this.CAMERA_FRAME_PADDING_SIDES=["top","bottom","left","right"],this.CAMERA_FRAME_PADDING_UNITS={PIXELS:"pixels",PORTIONS:"portions"};var gt=function(t,e,n,r,o){n&&!isNaN(n)||(n=1),e&&!isNaN(e)||(e=1);var a={position:c.controls.getPosition(),zoom:c.controls.minZoom};if(null==t||0==t.length)return a;r||(r={top:0,bottom:0,left:0,right:0,type:c.CAMERA_FRAME_PADDING_UNITS.PIXELS});var s=!0,u=!1,l=void 0;try{for(var h,f=c.CAMERA_FRAME_PADDING_SIDES[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var d=h.value;"number"!=typeof r[d]&&(r[d]=0)}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}if(r.type||(r.type=c.CAMERA_FRAME_PADDING_UNITS.PIXELS),r.type===c.CAMERA_FRAME_PADDING_UNITS.PORTIONS&&(r={top:r.top*le,bottom:r.bottom*le,left:r.left*ue,right:r.right*ue,type:c.CAMERA_FRAME_PADDING_UNITS.PIXELS}),r.left+r.right>=ue||r.top+r.bottom>=le)return a;q.updateMatrixWorld();var p=A.matrixWorldInverse,m=A.fov*(Math.PI/180)/2,v=m*n,g=Math.atan(Math.tan(m)*(ue/le))*e;if(1==t.length){var y=t[0].clone();y.applyMatrix4(p);var b=c.controls.minZoom*Math.tan(g)*2,_=c.controls.minZoom*Math.tan(v)*2,w=(r.left-r.right)/2/ue,x=(r.top-r.bottom)/2/le,M=new i.Vector3(-w*b,x*_,0);return y.add(M),y.applyMatrix4(A.matrixWorld),a.position.x=y.x,a.position.y=y.y,a}for(var E,S=new i.Vector3(1/0,1/0,1/0),T=new i.Vector3(-1/0,-1/0,-1/0),P=0,L=t.length;P<L;P++)(E=t[P]).applyMatrix4(p),S.min(E),T.max(E);var O=T.x-S.x,C=T.y-S.y,I=ue-r.left-r.right,R=le-r.top-r.bottom,k=(T.x+S.x)/2,N=(T.y+S.y)/2,B=O/I,D=C/R,j=c.controls.getZoomScaledMin(),F=c.controls.getZoomScaledMax(),z=j*Math.tan(g)*2,U=F*Math.tan(g)*2,V=z/ue,G=U/ue,H=Math.max(B,D);o||(H=Math.min(Math.max(H,V),G));var W=I*H,Y=R*H,X=k-W/2-r.left*H,Z=N-Y/2-r.bottom*H,J=(X+(k+W/2+r.right*H))/2,K=(Z+(N+Y/2+r.top*H))/2,Q=Math.abs(J-X),$=Math.abs(K-Z),tt=Q/Math.tan(g),et=$/Math.tan(v),nt=new i.Vector3;nt.set(J,K,T.z+Math.max(tt,et)),nt.applyMatrix4(A.matrixWorld);var rt=new i.Vector3;rt.set(J,K,T.z),rt.applyMatrix4(A.matrixWorld),rt.sub(nt);var it=nt.z/rt.z;return a.position.x=nt.x-rt.x*it,a.position.y=nt.y-rt.y*it,rt.set(a.position.x,a.position.y,0),nt.sub(rt),a.zoom=nt.length(),a};this.setPadding=function(t){this.cachedPadding=t||{top:0,bottom:0,left:0,right:0}},this.getZoomLevelForPolygon=function(t){var e=sa(t),n=[],r=J.get(c.currentMap).objectsDictionary[e];if(r){for(var o=r.geometry.attributes?r.geometry.attributes.position:[],a=0,s=o.count;a<s;a++){var u=new i.Vector3;u.set(o.getX(a),o.getY(a),o.getZ(a)),n.push(u)}return gt(n,1,1,this.cachedPadding,!0).zoom}return c.controls.getZoom()},this.getZoomLevelForCurrentMap=function(){var t=J.get(c.currentMap).object;if(t){var e=J.get(c.currentMap).boundingBox;e||(e=(new i.Box3).setFromObject(t),J.get(c.currentMap).boundingBox=e);var n=[e.min.clone(),e.max.clone()];return gt(n,1,1,this.cachedPadding,!0).zoom}return c.controls.getZoom()},this.getZoomLevelForObject=function(t){var e;e||(e=(new i.Box3).setFromObject(t));var n=[e.min.clone(),e.max.clone()];return gt(n,1,1,0,!0).zoom},this.resetCamera=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={x:0,y:0};if(!t){var n=J.get(c.currentMap).boundingBox;n&&(e={x:(n.max.x-n.min.x)/2+n.min.x,y:(n.max.y-n.min.y)/2+n.min.y})}var r=c.getZoomLevelForCurrentMap();c.controls.expandZoomLimits(r);var i=.6,o=0;c.controls.setMulti(e,r,o,i)},this.getMapScale=function(){return J.get(c.currentMap).getMapScale()},this.getNorth=function(){return J.get(c.currentMap).getNorth()},this.getPositionLatLon=function(t,e,n){n=null==n?c.currentMap:sa(n);var r=J.get(n);if(null==r)throw new Error("Invalid map: "+n);return r.getPositionLatLon(t,e)};var yt=function(t,e){t.style.transform="rotate("+(e+t._mRotationOffset)+"rad)"};this.lockNorth=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;z.push(t),t._mRotationOffset=e,yt(t,c.getNorth()+c.controls.getRotation())},this.unlockNorth=function(t){delete t._mRotationOffset,z=z.filter((function(e){return e!=t}))};var bt=function(t,e,n,r){J.get(t.map).load().then((function(){J.get(t.map).elements&&J.get(t.map).loadPolygonNow(t.id),_t(t,e,n,r)}))},_t=function(t,e,n,i){var o=sa(t),a=G[o];if(null!=a){E[o]=o,a._MIOriginalMaterial||(a._MIOriginalMaterial=a.material.length?Object(r.B)(a.material):a.material);var s=(a.material.length?a.material:[a.material]).map((function(t){var n=t.clone();return n.color.set(e||c.colors.select||5022204),null!=i?(n.transparent=!0,n.opacity=i):n.transparent=!1,n}));1===s.length?a.material=s[0]:a.material=s,!H[o]||n<=0||H[o].setColor(n||c.colors.textSelect||16777215),c.tryRendering()}else console.error("Cannot set color of polygon "+o+", could be bad polygon or data mismatch.")};this.setPolygonColor=function(t,e,n,r){var i=sa(t);if(void 0===G[i]){var o=nt(t);return null!=o&&null!=o.map&&null!=J.get(o.map).object?void bt(o,e,n,r):void console.error("Cannot set color of polygon "+i+", could be bad polygon or data mismatch.")}_t(t,e,n,r)},this.clearPolygonColor=function(t){var e=sa(t),n=G[e];n&&(n._MIOriginalMaterial&&((n.material.length?n.material:[n.material]).forEach((function(t){return ia(t)})),n.material=n._MIOriginalMaterial,delete n._MIOriginalMaterial),delete E[e],H[e]&&H[e].clearColor(),c.tryRendering())},this.clearAllPolygonColors=function(){for(var t=Object.keys(E),e=0,n=t.length;e<n;++e){var r=t[e];c.clearPolygonColor(E[r])}E={},c.tryRendering(),x.disposeOfRenderLists()};var wt=function(){tt.setFromCamera($,A);var t,e=tt.intersectObjects(Z.object.children,!0),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(null!=(t=s.object.parent.userData&&"mappedin_map"===s.object.parent.userData.type?s.object.parent.userData.mapId:null))break}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},xt=function(){tt.setFromCamera($,A);var t=tt.intersectObjects(c.scene.children,!0).map((function(t){return t.object.name}));Ho(t);for(var e=[],n=0,r=t.length;n<r;++n){var i=t[n];i&&Y[i]&&e.push(i)}return e};this.addInteractivePolygon=function(t){var e=sa(t);Y[e]=!0},this.addInteractivePolygonsForAllLocations=function(t){t||(t={});for(var e=t.excludeTypes||[],n=(t.locations||c.venue.locations.slice()).filter((function(t){return!e.includes(t.type)})),r={},i=0,o=n.length;i<o;++i)for(var a=n[i].polygons,s=0,u=a.length;s<u;++s){var l=a[s];r[l.id]||(r[l.id]=!0,c.addInteractivePolygon(l))}},this.removeInteractivePolygon=function(t){var e=sa(t);delete Y[e]},this.removeAllInteractivePolygons=function(){for(var t in Y)c.removeInteractivePolygon(t)};var Mt=function(t){var e=sa(t),n=G[e];if(n){var r=c.colors.hover||Sh((n.material.length&&n.material[0]||n.material).color.getHex());return c.setPolygonColor(e,r,-1),!1}},Et=function(t){var e=G[t],n=!1;if(e._MIOriginalMaterial){var r=(e._MIOriginalMaterial.length&&e._MIOriginalMaterial[0]||e._MIOriginalMaterial).color.getHex(),i=(e.material.length&&e.material[0]||e.material).color.getHex();(c.colors.hover||Sh(r))===i&&(n=!0)}if(e&&n)return c.clearPolygonColor(t),!1};this.createMarker=function(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};a.collisionEngine=S;var s=new e.Marker(c,Object(r.r)({html:t,position:n,className:i,map:o},a)),u=J.get(s._mMapId);return s.setPosition(s._mOriginalPosition.clone().add(u.object.position)),u.addPendingMarkerTask(s,(function(){s._mDeleted||(u.markers.push(s),c.addMarker(s),s.show())})),c.tryRendering(),s},this.createThreeJSMarker=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=t.map&&null!=t.mapId)throw new Error("cannot specify both `map` and `mapId` in `create3DMarker`");var e=Z.currentMap;null!=t.map?e=t.map:null!=t.mapId&&(e=J.get(t.mapId));var n=e.addThreeJSMarker(t);return c.tryRendering(Ea),n},this.removeThreeJSMarker=function(t){if(null==t._mapId)return!1;var e=!1,n=J.get(t._mapId);return n&&(e=n.removeThreeJSMarker(t)),c.tryRendering(Ea),e},this.createTooltip=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=J.get(t.map||c.currentMap),n=new Jc(Object(r.r)({},t,{map:e.id,position:t.position.clone()}));return b.add(n.id,n),e.addPendingLowPriorityTask("createTextObject",(function(){e.smartLabelBatchCreator.addToBatch(n),e.colliders.add(n),n.enable()})),c.tryRendering(),n},this._publishBlueDot=function(){var t=this;if(this.blueDotManager.blueDots){var e=this.blueDotManager.blueDots.filter((function(e){return e.handle._mapId===t.currentMap}))[0].handle.object.position.clone(),n=J.get(ve||c.defaultMap),r=e.applyMatrix4(n.object.matrix).project(A),i=(r.x+1)/2*ue,o=(1-r.y)/2*le;this.blueDotManager.publish("update-position",{x:i,y:o})}},this.addMarker=function(t){if(c.container.appendChild(t.div),t._mPosition&&null==t._mAnchor){var e=t._mPosition.clone().project(A),n=(e.x+1)/2*ue,r=(1-e.y)/2*le;(isNaN(n)||isNaN(r))&&(n=0,r=0);var i=new Go.Body({mass:0,position:[n,r],angle:0,velocity:[0,0],angularVelocity:0,collisionResponse:!1,collisionGroup:0});t._mAnchor=i;var o=new Go.Body({mass:20,position:[n,r],angle:0,damping:.9,velocity:[0,0],angularVelocity:0,collisionResponse:!t._mIgnoreCollisions,fixedRotation:!0});t._mOffsetWidth=t.div.offsetWidth,t._mOffsetHeight=t.div.offsetHeight;var a=new Go.Box({width:t._mOffsetWidth+2*t._mMarkerBuffer,height:t._mOffsetHeight+2*t._mMarkerBuffer});o.addShape(a),t._mShadowElement=o,o._mNumCollisions=0;var s=new Go.DistanceConstraint(i,o,{collideConnected:!1,distance:0});s.setStiffness(1e3),t._mConstraint=s}St(t),t.hide()};var St=function(t){t._mAnchor&&(N.addBody(t._mAnchor),N.addBody(t._mShadowElement),N.addConstraint(t._mConstraint)),Ot(t),c.tryRendering()};this.removeMarker=function(t){J.get(t._mMapId).removeMarker(t,!0),c.tryRendering()},this.removeTooltip=function(t){b.remove(t.id),c.tryRendering()},this.removeAllMarkers=function(){Array.from(J.values()).forEach((function(t){return t.removeMarkers(!0)}))};var At=function(){},Tt=function(){setTimeout((function(){c.tryRendering()}),c.smartLabelOrientationDelay)};function qt(t){var e;if(t._mMapId){var n=J.get(t._mMapId);e=t._mOriginalPosition.clone().applyMatrix4(n.object.matrix).project(A)}else e=t._mPosition.clone().project(A);var r=(e.x+1)/2*ue-t._mOffsetWidth/2,i=(1-e.y)/2*le-t._mOffsetHeight/2;(isNaN(r)||isNaN(i))&&(r=0,i=0),Go.vec2.set(t._mAnchor.position,r,i),Go.vec2.set(t._mAnchor.previousPosition,r,i)}function Pt(t){return Math.trunc(100*t)/100}function Lt(t){var e=t._mLockToAnchor||!t._mIgnoreCollisions&&!t.isColliding()?t._mAnchor.position:t._mShadowElement.interpolatedPosition,n=Pt(e[0]),r=Pt(e[1]),i=t._mIntitialRotation;t._mRotateWithCamera&&(i+=c.controls.getRotation()),(t.m_translateX!==n||t.m_translateY!==r||t.m_rotateZ!==i)&&t.setTransform({x:n,y:r,rotateZ:i})}this.convertTo3DMapPosition=function(t){var e=J.get(t.map||c.currentMap).mapClass;return new i.Vector3(t.x-e.width/2,-t.y+e.height/2,1)},this.getPositionPolygon=function(t){var e=sa(t),n=t;null==t.map&&(n=nt(e));var r=J.get(n.map).objectsDictionary[e];if(r){r.geometry.computeBoundingBox();var o=r.geometry.boundingBox;return new i.Vector3(o.min.x+(o.max.x-o.min.x)/2,o.min.y+(o.max.y-o.min.y)/2,o.max.z)}return null},this.getPositionNode=function(t){var e=t;return"string"==typeof e&&(e=ua(t,s.nodes)),c.convertTo3DMapPosition(e)};var Ot=function(t){qt(t),Lt(t)};this.createFont=e.createFont.bind(this),this.updateClosedStateForPolygon=function(t){if(null!=t&&null!=t.polygon){var e=sa(t.polygon);if("string"==typeof e){var n;if(null!=t.closed)n=!!t.closed;else{if(null==t.open)return;n=!t.open}var i=nt(e).map||c.currentMap;Z.mapObjects.get(i).addPendingMapLoadedTask("Set closed status of polygon ".concat(e," to ").concat(n),(function(){n?c.closedPolygonManager.markPolygonAsClosed(e):c.closedPolygonManager.markPolygonAsOpen(e)}))}else console.error("Invalid or no polygon provided. Expecting a MappedinPolygon or a string id. Received: ".concat(t.polygon," of type ").concat(Object(r.p)(t.polygon)))}},this.openAllPolygons=function(){Object(r.B)(Z.mapObjects.values()).reduce((function(t,e){return t.set(e,s.polygons.filter((function(t){return t.map===e.id}))),t}),new Map).forEach((function(t,e){e.addPendingMapLoadedTask("Open all polygons belonging to map ".concat(e.id),(function(){return t.forEach((function(t){return c.closedPolygonManager.markPolygonAsOpen(t.id)}))}))}))},this.labelPolygon=function(t){if(t.smartLabels)return t.smartLabelOrientationDelay=c.smartLabelOrientationDelay,c.smarterLabelPolygon(t);var e,n=t.font,r=J.get(t.polygon.map||t.map||c.currentMap);return navigator.userAgent.indexOf("Trident")>-1&&(t.font=hl,n=t.font),e=n instanceof i.Font||t.legacyLabels?new rs(t,s,r,hl,G,H,X,c):new Rs(t,s,r,ce,G,H,X,c,w),r.addPendingLowPriorityTask("createLabel",(function(){e.create()})),c.tryRendering(),H[t.polygon.id]=e,e},this.pinCollisionSpace=[],this.smartLabelPolygon=function(t){var e=J.get(t.polygon.map||t.map||c.currentMap);W=!0;var n=this.controls.getZoom(),r=this.controls.getZoomScaledMin(),i=(n-r)/(this.controls.getZoomScaledMax()-r);t.initialProportion=i;var o=new As(t,e,G,H,c,c.pinCollisionSpace,S);return e.addPendingLowPriorityTask("createTextObject",(function(){o.create(),e.smartLabelBatchCreator.addToBatch(o)})),H[t.polygon.id]=o,c.tryRendering(),o},this.smarterLabelPolygon=function(t){var e=J.get(t.polygon.map);if(W=!0,G[t.polygon.id]){var n=G[t.polygon.id];n.geometry.boundingBox||n.geometry.computeBoundingBox(),t.polygonHeight=n.geometry.boundingBox.max.z}var r=new Ll(t);return b.add(t.polygon.id,r),e.colliders.add(r),e.addPendingLowPriorityTask("createTextObject",(function(){var n=t.createDespiteImage,i=r.options.polygon.id;!G[i+"_image"]||n?(e.smartLabelBatchCreator.addToBatch(r),r._dirty=!0):(r.disable(),b.remove(i),e.colliders.delete(r))})),H[t.polygon.id]=r,r},this.hideAllLabels=function(){Z.mapObjectsSortedByElevation.forEach((function(t){t.textObjects.forEach((function(t){return t.hide()})),t.colliders.forEach((function(t){t.disable()}))}))};var Ct=function(t){var e=t.position,n=t.mapId;A.updateProjectionMatrix(),A.updateMatrixWorld(!0);var r=J.get(n);if(null==r)return[0,0];var i=e.clone().applyMatrix4(r.object.matrix).project(A),o=(i.x+1)/2*ue-0,a=(1-i.y)/2*le-0;return{x:Pt(o),y:Pt(a)}};b.init(o,Ct),this.labelAllLocations=function(t){t||(t={});var e=t.excludeTypes||[],n=t.sortFunction,i=(t.locations||c.venue.locations).filter((function(t){return-1===e.indexOf(t.type)})),o=t.translationMap||{},a=i;null!=n&&(a=i.sort(n));for(var s={},u=[],l=0,h=a.length;l<h;++l)for(var f=a[l],d=f.polygons,p=0,m=d.length;p<m;++p){var v=d[p];if(!s[v.id]){var g=v.canvasBounds;s[v.id]=!0;var y=J.get(c.currentMap).mapClass,b=0;if(g){var _=g.x-y.width/2,w=-g.y+y.height/2;b=Math.sqrt(Math.pow(_,2)+Math.pow(w,2))}var x=f;if(null==n&&(x=c.getPrimaryLocationForPolygon(v)),null!=x){var M=x.name,E=x.shortName,S=t.usePolygonRankings?v.rank:x.rank,A="";x.states&&x.states.length&&(A=o[x.state&&x.state.id]||x.state&&x.state.name);var T=x.showSmartLabelWhenImagePresent;u.push({polygon:v,text:M,shortText:E,stateText:A,distance:b,rank:S,showSmartLabelWhenImagePresent:T})}}}var q=[];u.sort((function(t,e){return e.distance-t.distance}));for(var P=0,L=u.length;P<L;++P){var O=u[P];if(t.polygon=O.polygon,t.text=O.text,t.shortText=O.shortText,t.stateText=O.stateText,t.rank=O.rank,t.createDespiteImage=O.showSmartLabelWhenImagePresent,t.usePolygonRankings&&(t.rank=O.rank?O.rank.score:0),t.smartLabels){var C=void 0,I=!0,R=!1,k=void 0;try{for(var N,B=O.polygon.entrances[Symbol.iterator]();!(I=(N=B.next()).done);I=!0){var D=N.value;if((!t.usePolygonRankings||!O.rank||O.rank.node==D.id)&&(C=c.getPositionNode(D.id))){t.position=C,G[t.polygon.id+"_image"]&&!t.createDespiteImage||q.push(c.smarterLabelPolygon(Object(r.r)({},t)));break}}}catch(t){R=!0,k=t}finally{try{I||null==B.return||B.return()}finally{if(R)throw k}}}else q.push(c.labelPolygon(t))}return Z.mapObjectsSortedByElevation.forEach((function(t){return t.textObjects.forEach((function(t){return t.show()}))})),q},this.removeLabel=function(t){var e=H[t];b.remove(t),e.removeSelf(),H[t]=null},this.removeAllLabels=function(){Z.mapObjectsSortedByElevation.forEach((function(t){return t.removeLabels()})),H={},W=!1,c.pinCollisionSpace=[],x.disposeOfRenderLists()},this.enableImageFlippingForAllLocations=function(t){this._imageFlippingEnabled=!0,t||(t={});for(var e=t.excludeTypes||[],n=(t.locations||c.venue.locations.slice()).filter((function(t){return-1===e.indexOf(t.type)})),r={},i=0,o=n.length;i<o;++i)for(var a=n[i].polygons,s=0,u=a.length;s<u;++s){var l=a[s];r[l.id]||(r[l.id]=!0,c.enableImageFlippingForPolygon({polygon:l}))}},this.enableImageFlippingForPolygon=function(t){if(!(null==t||null==t.polygon&null==t.polygonId)){var e=t.polygon.id||t.polygonId,n=t.polygon,r=J.get(t.map||n?n.map:c.currentMap),i=0,o=J.get(c.currentMap).mapClass.perspectiveId;t.rotation&&!isNaN(t.rotation)?i=t.rotation*(Math.PI/180):o&&n&&n.perspectives&&n.perspectives[o]&&n.perspectives[o].image&&n.perspectives[o].image.rotation&&!isNaN(n.perspectives[o].image.rotation.z)?i=n.perspectives[o].image.rotation.z*(Math.PI/180):t.polygon&&t.polygon.image&&t.polygon.image.rotation&&!isNaN(t.polygon.image.rotation.z)&&(i=t.polygon.image.rotation.z*(Math.PI/180)),e&&r.load().then((function(){r.enableImageFlipping(e,i)}))}},this.disableImageFlippingForAllPolygons=function(){for(var t=Object.keys(J),e=0,n=t.length;e<n;e++){var r=t[e];J.get(r).disableAllImageFlipping()}},this.getPathLength=function(t){for(var e=0,n=0,r=t.length-1;n<r;++n){var i=t[n],o=t[n+1];i.path.includes(o)&&(e+=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)))}return e},this.drawPath=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={color:4952290,pulseColor:16777215,pulseIterations:1/0,nearRadius:20,nearZoom:375,farZoom:1e4,drawDuration:1500,curve:a.a.Easing.Cubic.InOut,drawConnectionSegments:!0,displayArrowsOnPath:!1},o=Object(r.r)({color:8311585,pulseColor:16777215,nearRadius:20,nearZoom:375,farZoom:1e4,drawDuration:800,curve:a.a.Easing.Cubic.InOut,displayArrowsOnPath:!1},n.connectionPathOptions),s=n.pulsePauseDuration||750;null!=o.radius&&(console.warn("Deprecation warning: `connectionPathOptions.radius` has been deprecated. Use `connectionPathOptions.nearRadius` and `connectionPathOptions.farRadius` instead."),o.nearRadius=o.radius),null==o.farRadius&&(o.farRadius=2.3*o.nearRadius);var u=Object(r.r)({},i,{},n,{connectionPathOptions:o});null!=n.radius&&(console.warn("Deprecation warning: `options.radius` has been deprecated. Use `options.nearRadius` and `options.farRadius` instead."),u.nearRadius=n.radius),null==u.farRadius&&(u.farRadius=2.3*u.nearRadius);var l,h,f,d=0,p=t.reduce((function(e,n,r){var i=t[r+1],o=t[r-1];return 0===r?l=n.map:n.map==l&&null!=i||(f=c.drawPathSegment(t.slice(d,null==i?r+1:r),l,u),d=r,e.push(f),null!=h&&(h.tween.chain(f.tween),h.pulseTween.chain(f.pulseTween),h.pulseTween.onComplete(h.resetPulse)),h=f,null!=o&&o.map!=n.map&&!0===u.drawConnectionSegments&&Z.expanded&&(f=c.drawConnectionPathSegment([o,n],u.connectionPathOptions),e.push(f),null!=h&&(h.tween.chain(f.tween),h.pulseTween.chain(f.pulseTween),h.pulseTween.onComplete(h.resetPulse)),h=f),l=n.map),e}),[]),m=1,v=u.pulseIterations||1/0;if(p.length>0){var g=p[0],y=p[p.length-1];y.endPauseTween=new a.a.Tween({}).to({value:1},s).chain(g.pulseTween).onUpdate((function(){return e.tryRendering(Ta)})),y.pulseTween.chain(y.endPauseTween),y.pulseTween.onComplete((function(){m>=v?p.forEach((function(t){t.pulseTween.onComplete((function(){})),t.pulseTween.stop(),t.endPauseTween&&t.endPauseTween.stop(),t.resetPulse(),c.tryRendering(Ea)})):y.resetPulse(),m++})),g.tween.start(),g.pulseTween.start(),g.pulseTween.onComplete(g.resetPulse)}return c.tryRendering(Ea),p};var It=new i.TextureLoader;function Rt(t,e,n){var r=void 0!==(n=n||{}).color?n.color:c.colors.path||16745292,o=void 0!==n.pulseColor?c.colors.pathPulse:0,s=void 0!==n.nearRadius?n.nearRadius:20,u=void 0!==n.farRadius?n.farRadius:s,l=void 0!==n.nearZoom?n.nearZoom:375,h=void 0!==n.farZoom?n.farZoom:1e4,f=void 0!==n.drawDuration?n.drawDuration:1500,d=n.curve||a.a.Easing.Cubic.InOut,p=n.displayArrowsOnPath||!1,m=n.isConnectionPathSegment||!1,v=0;if(m)for(var g=1;g<t.length;++g){var y=t[g].x-t[g-1].x,b=t[g].z-t[g-1].z;v+=Math.sqrt(y*y+b*b)}else for(var _=1;_<t.length;++_){var w=t[_].x-t[_-1].x,M=t[_].y-t[_-1].y,E=t[_].z-t[_-1].z;v+=Math.sqrt(w*w+M*M+E*E)}var S={vertexes:{type:"f",value:1},resolution:{type:"v2",value:Nt},cameraParameters:{type:"v2",value:zt},complete:{type:"f",value:0},color:{type:"c",value:new i.Color(r)},pathLength:{type:"f",value:v},nearRadius:{type:"f",value:s},farRadius:{type:"f",value:u},nearZoom:{type:"f",value:l},farZoom:{type:"f",value:h},pulseColor:{type:"c",value:new i.Color(o)},pulse:{type:"f",value:0},pulseLength:{type:"f",value:.075},pulseBulge:{type:"b",value:!1},pathIsVertical:{type:"b",value:m},arrowAnimationTimer:{type:"f",value:0},arrowTexture:{type:"t",value:It.load(ga.get("arrow"))},displayArrowsOnPath:{type:"b",value:p}},A=new i.CatmullRomCurve3(t);A.curveType="catmullrom",A.tension=0;for(var T=30*e.length,q=new i.TubeBufferGeometry(A,T,s,8,!1),P=new Float32Array(q.attributes.position.count),L=e.length;L<P.length;L++)P[L]=L;q.addAttribute("vertexIndex",new i.BufferAttribute(P,1));for(var O=new Float32Array(q.attributes.position.count),C=new i.BufferAttribute(O,1),I=0;I<T;I++)for(var R=0;R<=8;++R)C.setX(9*I+R,I/T);q.addAttribute("pathDistance",C);for(var k=new Float32Array(3*q.attributes.normal.count),N=new i.BufferAttribute(k,3),B=0;B<T;B++)for(var D=q.tangents[B],j=0;j<=8;++j)N.setXYZ(9*B+j,D.x,D.y,D.z);q.addAttribute("pathTangent",N);for(var F=new Float32Array(3*q.attributes.normal.count),z=new i.BufferAttribute(F,3),U=0;U<T;U++){var V,G,H,W=q.tangents[U];m?(V=W.x*W.y,G=W.y*W.y-1,H=W.z*W.y):(V=-W.x*W.z,G=-W.y*W.z,H=1-W.z*W.z);for(var Y=Math.sqrt(V*V+G*G+H*H),X=V/Y,Z=G/Y,Q=H/Y,$=0;$<=8;++$)z.setXYZ(9*U+$,X,Z,Q)}q.addAttribute("pathNormal",z);var tt=new i.ShaderMaterial({uniforms:S,vertexShader:xh.PathVertexShader,fragmentShader:xh.PathFragmentShader});tt.transparent=!0,tt.alphaTest=.5,S.resolution.value.x=x.getBufferSize().width,S.resolution.value.y=x.getBufferSize().height,S.vertexes.value=P.length,S.arrowTexture.value.wrapS=i.RepeatWrapping,S.arrowTexture.value.wrapT=i.RepeatWrapping,S.arrowTexture.value.anisotropy=x.getMaxAnisotropy();var et=new i.Mesh(q,tt),nt=function(){c.tryRendering(Ea)},rt=new a.a.Tween(S.pulse).to({value:1},f).easing(d).onUpdate(nt),it=new a.a.Tween(S.complete).to({value:1},f).easing(d).onUpdate(nt),ot=new a.a.Tween(S.arrowAnimationTimer).to({value:1},3e3).easing(a.a.Easing.Linear.None).repeat(1/0).onUpdate(nt);p&&ot.start();var at={id:et.id,object:et,tween:it,pulseTween:rt,arrowAnimationTween:ot,reset:function(){S.complete.value=0},resetPulse:function(){S.pulse.value=0}};return K.add(at,t,{mapObject:J.get(n.mapId)}),at}this.drawPathSegment=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{color:16745292,pulseColor:16777215,pulseIterations:1/0,nearRadius:20,nearZoom:375,farZoom:1e4,drawDuration:1500,curve:a.a.Easing.Cubic.InOut,displayArrowsOnPath:!1},o=e?sa(e):c.currentMap,s=n.nearRadius,u=[],l=J.get(o).mapClass,h=0;h<t.length;h++){var f=t[h],d=new i.Vector3(f.x-l.width/2,-f.y+l.height/2,s/2);u.push(d)}u.push(u[u.length-1].clone().setZ(-s)),u.unshift(u[0].clone().setZ(-s));var p=Rt(u,t,Object(r.r)({},n,{mapId:o}));return V.set(p.id,p),p.object.layers.set(1),J.get(o).add(p.object),p},this.drawConnectionPathSegment=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:8246050,pulseColor:16777215,pulseIterations:1/0,nearRadius:20,nearZoom:375,farZoom:1e4,drawDuration:1500,curve:a.a.Easing.Cubic.InOut,displayArrowsOnPath:!1},n=J.get(t[0].map),o=J.get(t[1].map),s=n.mapClass,u=o.mapClass,l=new i.Vector3(t[0].x-s.width/2,-t[0].y+s.height/2,0),h=new i.Vector3(t[1].x-u.width/2,-t[1].y+u.height/2,0),f=l.clone().applyMatrix4(n.object.matrix),d=h.clone().applyMatrix4(o.object.matrix),p=ma(f,d,10),m=Rt(p,t,Object(r.r)({},e,{mapId:n.id,isConnectionPathSegment:!0}));return V.set(m.id,m),m.object.layers.set(1),c.scene.add(m.object),m},this.removePathSegment=function(t){t&&(c.scene.remove(t.object),K.remove(t),t.object.destroy(),t.pulseTween.stop(),t.endPauseTween&&t.endPauseTween.stop(),t.tween.stop(),t.arrowAnimationTween.stop(),t.pulseTween=void 0,t.tween=void 0,t.arrowAnimationTween=void 0,V.delete(t.id))},this.removeAllPaths=function(){var t=!0,e=!1,n=void 0;try{for(var r,i=V.values()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;c.removePathSegment(o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}V.clear(),K.clear(),x.disposeOfRenderLists()},this.setBackgroundColor=function(t,e){x.setBackgroundColor(t,e)};var kt=function(){if(!p){for(var t=xt(),e=!1,n=0,r=t.length;n<r;++n){var i=t[n];if(Y[i]){if(i!=M){M&&(Et(M),M=null),E[i]||(M=i,Mt(i));var o=H[sa(i)];o&&o.showHoverLabel?et.show(o):et.hide()}"grab"===lt.style.cursor&&(lt.style.cursor="pointer"),e=!0;break}}0==e&&(M&&(Et(M),M=null),"pointer"===lt.style.cursor&&(lt.style.cursor="grab"),et.hide())}},Nt=new i.Vector2,Bt=function(t,e){x.setBufferSize(t,e),A.aspect=t/e,A.updateProjectionMatrix(),A.updateMatrixWorld(!0),Nt.x=t,Nt.y=e};this.setSize=function(t,e){ue=lt.clientWidth,le=lt.clientHeight;var n=Math.floor(t*c.resolutionScale),r=Math.floor(e*c.resolutionScale);if(!m){var i=lt.width!==n?lt.width/n:lt.height/r;c.controls.setZoom(i*c.controls.getZoom())}Bt(n,r)};var Dt=function(){var t=ue=lt.clientWidth,e=le=lt.clientHeight,n=Math.floor(t*c.resolutionScale),r=Math.floor(e*c.resolutionScale);if(lt.width!==n||lt.height!==r){var i=lt.width!==n?lt.width/n:lt.height/r;c.controls.setZoom(i*c.controls.getZoom()),Bt(n,r)}},jt=new za({name:"updateMapVisibility",ordering:5,callback:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=Z.mapObjectsSortedByElevation[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.visible?o.onVisible():o.onInvisible()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}),Ft=new za({name:"updateTweens",ordering:5,callback:function(){return a.a.update()}}),zt=new i.Vector2,Ut=new za({name:"camera",ordering:4,callback:function(){c.controls.update(),zt.x=c.controls.getZoom(),zt.y=c.controls.getTilt(),c.controls.isCameraMoving()&&(M&&(Et(M),M=null),et.hovering&&et.hide()),c.blueDotManager.setBlueDotSizeFromZoom(zt.x)}}),Vt=new za({name:"mapboxOutdoorContextFrameUpdate",ordering:3,callback:function(){if(null!=c.mapboxOutdoorContext){var t=c.mapManager.currentMap,e=t.mapClass.georeference[0],n=[e.target.y,e.target.x],r=c.convertTo3DMapPosition({x:e.control.x,y:e.control.y});c.mapboxOutdoorContext.setLngLat(n,r),c.mapboxOutdoorContext.setMapScale(t.mapScale),c.mapboxOutdoorContext.setMapRotation(t.getNorth()),c.mapboxOutdoorContext.setViewportSize(Nt),c.mapboxOutdoorContext.update(A)}}}),Gt=new za({name:"rotateObjects",ordering:3,callback:function(){for(var t=c.getNorth()+c.controls.getRotation(),e=0,n=z.length;e<n;++e)yt(z[e],t);re(),ie(),U=!1}}),Ht=new za({name:"renderAll",ordering:2,callback:function(){null!=c.currentMap&&x.isAvailable()&&(c.shouldMeasureCanvas&&Dt(),x.render(Aa,null,c.scene,A),c.controls.postRender&&c.controls.postRender(),null!=c.mapboxOutdoorContext&&c.mapboxOutdoorContext.needsReRender&&_.scheduleUpdate(Ht))}}),Wt=new za({name:"renderAnimated",ordering:2,supersededBy:[Ht],callback:function(){null!=c.currentMap&&x.isAvailable()&&(c.shouldMeasureCanvas&&Dt(),x.render(Ea,null,c.scene,A),c.controls.postRender&&c.controls.postRender())}}),Yt=new za({name:"renderAlwaysOnTop",ordering:2,supersededBy:[Ht],callback:function(){null!=c.currentMap&&x.isAvailable()&&(c.shouldMeasureCanvas&&Dt(),x.render(Sa,null,c.scene,A),c.controls.postRender&&c.controls.postRender())}}),Xt=1/30,Zt=10,Jt=null,Kt=new za({name:"updateMarkerWorld",ordering:1,callback:function(t){var e=t/1e3;Jt||(Jt=e);var n=e-Jt;N.step(Xt,n,Zt);var r=!0,i=!1,o=void 0;try{for(var a,s=c.navigator._virtualLayers[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;qt(u),Lt(u)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}Z.visibleMaps.forEach((function(t){t.markers.forEach(qt),t.markers.forEach(Lt),c._publishBlueDot()}))}}),Qt=new za({name:"updateColliders",ordering:1,frameCount:32,callback:function(){b.updatePosition()}});function $t(){N.step(j,F,F*j)}var te=new za({name:"updatePhysics",ordering:1,frameCount:15,callback:function(){$t()}}),ee=new za({name:"updateSmartCollisionEngine",ordering:1,frameCount:15,callback:function(){b.updateVisibility()}}),ne=new za({name:"updateDebugUI",ordering:0,frameCount:1,callback:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=_.getUpdatesRunLastFrame().values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t[a.name]=a.getLastFrameTime()}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}u._debugUI.reportFramePerformance(t)}});this.tryRendering=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa;if(null!=x)if(null!=this._debugUI&&_.scheduleUpdate(ne),t===Aa)_.scheduleUpdate(Ft),_.scheduleUpdate(jt),_.scheduleUpdate(Ut),null!=c.mapboxOutdoorContext&&_.scheduleUpdate(Vt),_.scheduleUpdate(Gt),_.scheduleUpdate(Ht),_.scheduleUpdate(Kt),_.scheduleUpdate(Qt),_.scheduleUpdate(te),_.scheduleUpdate(ee);else if(t===Ea)_.scheduleUpdate(Ft),_.scheduleUpdate(Wt);else if(t===Sa)_.scheduleUpdate(Ft),_.scheduleUpdate(Yt);else{if(t!==Ta)throw new Error("invalid render task passed to tryRendering");_.scheduleUpdate(Ft)}};var re=function(){var t=q.rotation.z;(L||U)&&Z.visibleMaps.forEach((function(e){for(var n=e.textObjects,r=0,i=n.length;r<i;++r)n[r].flipIfNeeded(t)}))},ie=function(){var t=q.rotation.z;(L||U)&&Z.visibleMaps.forEach((function(e){for(var n=e.imagesToFlip,r=0,i=n.length;r<i;++r)n[r].flipIfNeeded(t)}))},oe=function(t){t.addDebugControls({MapView3D:[{name:"Background Color",description:"The color of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new r.S({current:new i.Color(16777215),onValueChanged:function(t){x.setBackgroundColor(t,x.backgroundAlpha),c.tryRendering()}})},{name:"Background Opacity",description:"The opacity of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new r.T({minimum:0,maximum:1,step:.01,current:x.backgroundAlpha,onValueChanged:function(t){x.setBackgroundColor(x.backgroundColor,t),c.tryRendering()}})}],"Mapbox Outdoor Context":[{name:"Show",description:"Show the mapbox outdoor context.",control:new r.q({current:null!=c.mapboxOutdoorContext,onValueChanged:function(t){t?c.showOutdoorContext():c.hideOutdoorContext(),c.tryRendering()}})}]})},ae=function(t){t.removeDebugControls({MapView3D:["Background Color","Background Opacity"]})};this.showDebugUI=function(){null==this._debugUI&&(this._debugUI=new fc,o.appendChild(this._debugUI.element),oe(this._debugUI),this.controls.addDebugControls(this._debugUI),null!=this.mapboxOutdoorContext&&this.mapboxOutdoorContext.addDebugControls(this._debugUI),this.tryRendering())},this.hideDebugUI=function(){null!=this._debugUI&&(o.removeChild(this._debugUI.element),ae(this._debugUI),this.controls.removeDebugControls(this._debugUI),null!=this.mapboxOutdoorContext&&this.mapboxOutdoorContext.removeDebugControls(this._debugUI),this._debugUI.destroy(),this._debugUI=null)},this.updateSmartLabelSize=function(){Object.values(H).forEach((function(t){t.setSize(u.currentScale)}))};var se=function(){W&&Object.values(H).forEach((function(t){t._dirty=!0}))};this.determineNewSmartLabelSize=function(){if(W){var t=u.controls.getZoom(),e=u.controls.getZoomScaledMin(),n=(t-e)/(u.controls.getZoomScaledMax()-e);u.currentScale=n,u.updateSmartLabelSize()}},o.appendChild(lt),o.style.touchAction="auto",window.PointerEvent?(lt.addEventListener("pointerdown",ct,!1),lt.addEventListener("pointermove",ut,!1),lt.addEventListener("pointerup",ft,!1),lt.addEventListener("pointercancel",ft,!1)):(lt.addEventListener("mousemove",ut,!1),lt.addEventListener("mousedown",ct,!1),lt.addEventListener("mouseup",ft,!1),lt.addEventListener("mouseleave",ut,!1),lt.addEventListener("touchstart",ht,!1),lt.addEventListener("touchend",mt,!1),lt.addEventListener("touchcancel",mt,!1)),window.addEventListener("resize",vt,!1),o.style.overflow="hidden",lt.style.width="100%",lt.style.height="100%",lt.style.cursor="grab",this.canvasWidth=lt.clientWidth,this.canvasHeight=lt.clientHeight;var ue=this.canvasWidth,le=this.canvasHeight;this.navigator=new cc(this,Z,s,ue,le,A),this.shouldMeasureCanvas=!0,this.setBackgroundColor(v,g),Bt(Math.floor(ue*c.resolutionScale),Math.floor(le*c.resolutionScale)),P();var ce="Sans-Serif",he=new i.DirectionalLight(16777215,.3);he.position.set(-150,-150,350),this.scene.add(he);var fe=new i.HemisphereLight(16777215,16777215,.77);this.scene.add(fe),this.controls=new Mh.CameraControls(A,lt,this.scene,this),this.controls.enableZoom=!0,this.INTERACTION_EVENTS=this.controls.INTERACTION_EVENTS;var de,pe=function(){return u.tryRendering()};this.controls.addEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.determineNewSmartLabelSize),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,se),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,se),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,se),this.controls.addEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,pe),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,(function(){c.publish("user-zoom-begin")})),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,(function(){c.publish("user-rotate-begin"),O()})),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,(function(){c.publish("user-multi-begin"),it(),O()})),this.controls.addEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,(function(){c.publish("user-pan-begin"),it()})),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,(function(){c.publish("user-zoom"),c.publish("user-zoom-begin"),Tt()})),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,(function(){c.publish("user-rotate"),Tt(),C()})),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,(function(){c.publish("user-multi-end"),Tt(),C()})),this.controls.addEventListener(this.controls.CAMERA_EVENTS.PAN_END_EVENT.type,Tt),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_PAN_EVENT.type,(function(){c.currentInteractionEvent="user-pan"})),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_ROTATE_EVENT.type,(function(){c.currentInteractionEvent="user-rotate"})),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_DOLLY_EVENT.type,(function(){c.currentInteractionEvent="user-zoom"})),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_TILT_EVENT.type,(function(){c.currentInteractionEvent="user-tilt"})),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_ZOOM_EVENT.type,(function(){c.publish("user-zoom"),c.currentInteractionEvent="user-zoom"}));var me=s.maps,ve=s.venue.defaultMap;if(l&&l.firstMap&&(ve=sa(l.firstMap)),ve)for(var ge=0,ye=me.length;ge<ye;++ge)if(me[ge].id===ve){de=me[ge].id;break}if(!de){var be=s.maps[0],_e=!0,we=!1,xe=void 0;try{for(var Me,Ee=s.maps.slice(1)[Symbol.iterator]();!(_e=(Me=Ee.next()).done);_e=!0){var Se=Me.value;be=Math.abs(Se.elevation)===Math.abs(be.elevation)?Se.elevation>be.elevation?Se:be:Math.abs(Se.elevation)<Math.abs(be.elevation)?Se:be}}catch(t){we=!0,xe=t}finally{try{_e||null==Ee.return||Ee.return()}finally{if(we)throw xe}}de=be}var Ae=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];U=t};Z.on("render",pe),Z.on("render:now",P),Z.on("flippablesNeedUpdating",Ae),Z.on("updateMarkerPosition",Ot),Z.on("texture-loaded",(function(t){u.tryRendering(),x.preloadTexture(t)})),Z.loadMaps(me,de,l.onFirstMapLoaded,l.onDataLoaded,(function(){})),Z.mapsFullyLoaded(l.onMapsFullyLoaded),this.blueDotCore=bh({data:s,mapView:this}),this.blueDotUI=uh({mapView:this,controller:this.blueDotCore,data:s,analytics:{trackBlueDotEvent:function(){}}}),this.setPadding(),this.destroy=function(){this.controls.dispose(),Z.off("render"),Z.off("render:now"),Z.off("flippablesNeedUpdating"),Z.off("updateMarkerPosition"),window.PointerEvent?(lt.removeEventListener("pointerdown",ct,!1),lt.removeEventListener("pointermove",ut,!1),lt.removeEventListener("pointerup",ft,!1),lt.removeEventListener("pointercancel",ft,!1)):(lt.removeEventListener("mousemove",ut,!1),lt.removeEventListener("mousedown",ct,!1),lt.removeEventListener("mouseup",ft,!1),lt.removeEventListener("mouseleave",ut,!1),lt.removeEventListener("touchstart",ht,!1),lt.removeEventListener("touchend",mt,!1),lt.removeEventListener("touchcancel",mt,!1)),window.removeEventListener("resize",vt,!1),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.determineNewSmartLabelSize),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.CHANGE_EVENT.type,pe),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,At),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,At),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,O),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,At),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,it),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,O),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.PAN_START_EVENT.type,At),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.PAN_START_EVENT.type,it),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,Tt),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,Tt),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,C),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,Tt),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,C),c.controls.removeEventListener(c.controls.CAMERA_EVENTS.PAN_END_EVENT.type,Tt),N.off("beginContact",B),N.off("endContact",D),c.removeAllPaths(),c.removeAllLabels(),c.removeAllMarkers(),c.disableImageFlippingForAllPolygons(),S.destroy(),b.destroy(),Z.destroy(),c.closedPolygonManager.dispose(),c.scene.destroy(),et.destroy(),Y={},w.dispose(),_.destroy(),null!=this.mapboxOutdoorContext&&this.mapboxOutdoorContext.destroy(),x.destroy(),o.removeChild(lt),null!=this._debugUI&&this.hideDebugUI(),x=void 0}};Ah.createFont=function(t){return cl(t)},Ah.Marker=Ja,Ah.VIEW_STATE=wh,e.a=Ah}).call(this,n(17))},function(t,e,n){n(266),n(485);var r=n(77);t.exports=r},function(t,e,n){n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(100),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(193),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(140),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(416),n(417),n(419),n(420),n(421),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(433),n(434),n(435),n(436),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484);var r=n(77);t.exports=r},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(2),o=n(5),a=n(31),s=n(34),u=n(9),l=n(130),c=n(175),h=n(3),f=n(16),d=n(57),p=n(7),m=n(8),v=n(14),g=n(30),y=n(39),b=n(44),_=n(41),w=n(80),x=n(56),M=n(177),E=n(129),S=n(21),A=n(13),T=n(96),q=n(23),P=n(24),L=n(126),O=n(97),C=n(76),I=n(75),R=n(10),k=n(178),N=n(28),B=n(40),D=n(26),j=n(19).forEach,F=O("hidden"),z=R("toPrimitive"),U=D.set,V=D.getterFor("Symbol"),G=Object.prototype,H=o.Symbol,W=a("JSON","stringify"),Y=S.f,X=A.f,Z=M.f,J=T.f,K=L("symbols"),Q=L("op-symbols"),$=L("string-to-symbol-registry"),tt=L("symbol-to-string-registry"),et=L("wks"),nt=o.QObject,rt=!nt||!nt.prototype||!nt.prototype.findChild,it=u&&h((function(){return 7!=_(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(G,e);r&&delete G[e],X(t,e,n),r&&t!==G&&X(G,e,r)}:X,ot=function(t,e){var n=K[t]=_(H.prototype);return U(n,{type:"Symbol",tag:t,description:e}),u||(n.description=e),n},at=c?function(t){return"symbol"==r(t)}:function(t){return Object(t)instanceof H},st=function(t,e,n){t===G&&st(Q,e,n),m(t);var r=y(e,!0);return m(n),f(K,r)?(n.enumerable?(f(t,F)&&t[F][r]&&(t[F][r]=!1),n=_(n,{enumerable:b(0,!1)})):(f(t,F)||X(t,F,b(1,{})),t[F][r]=!0),it(t,r,n)):X(t,r,n)},ut=function(t,e){m(t);var n=g(e),r=w(n).concat(ft(n));return j(r,(function(e){u&&!lt.call(n,e)||st(t,e,n[e])})),t},lt=function(t){var e=y(t,!0),n=J.call(this,e);return!(this===G&&f(K,e)&&!f(Q,e))&&(!(n||!f(this,e)||!f(K,e)||f(this,F)&&this[F][e])||n)},ct=function(t,e){var n=g(t),r=y(e,!0);if(n!==G||!f(K,r)||f(Q,r)){var i=Y(n,r);return!i||!f(K,r)||f(n,F)&&n[F][r]||(i.enumerable=!0),i}},ht=function(t){var e=Z(g(t)),n=[];return j(e,(function(t){f(K,t)||f(C,t)||n.push(t)})),n},ft=function(t){var e=t===G,n=Z(e?Q:g(t)),r=[];return j(n,(function(t){!f(K,t)||e&&!f(G,t)||r.push(K[t])})),r};(l||(P((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=I(t),n=function t(n){this===G&&t.call(Q,n),f(this,F)&&f(this[F],e)&&(this[F][e]=!1),it(this,e,b(1,n))};return u&&rt&&it(G,e,{configurable:!0,set:n}),ot(e,t)}).prototype,"toString",(function(){return V(this).tag})),P(H,"withoutSetter",(function(t){return ot(I(t),t)})),T.f=lt,A.f=st,S.f=ct,x.f=M.f=ht,E.f=ft,k.f=function(t){return ot(R(t),t)},u&&(X(H.prototype,"description",{configurable:!0,get:function(){return V(this).description}}),s||P(G,"propertyIsEnumerable",lt,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:H}),j(w(et),(function(t){N(t)})),i({target:"Symbol",stat:!0,forced:!l},{for:function(t){var e=String(t);if(f($,e))return $[e];var n=H(e);return $[e]=n,tt[n]=e,n},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(f(tt,t))return tt[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!u},{create:function(t,e){return void 0===e?_(t):ut(_(t),e)},defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:ct}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ht,getOwnPropertySymbols:ft}),i({target:"Object",stat:!0,forced:h((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(v(t))}}),W)&&i({target:"JSON",stat:!0,forced:!l||h((function(){var t=H();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(p(e)||void 0!==t)&&!at(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!at(e))return e}),i[1]=e,W.apply(null,i)}});H.prototype[z]||q(H.prototype,z,H.prototype.valueOf),B(H,"Symbol"),C[F]=!0},function(t,e,n){n(28)("asyncIterator")},function(t,e,n){"use strict";var r=n(2),i=n(9),o=n(5),a=n(16),s=n(7),u=n(13).f,l=n(173),c=o.Symbol;if(i&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var h={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new c(t):void 0===t?c():c(t);return""===t&&(h[e]=!0),e};l(f,c);var d=f.prototype=c.prototype;d.constructor=f;var p=d.toString,m="Symbol(test)"==String(c("test")),v=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(a(h,t))return"";var n=m?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(t,e,n){n(28)("hasInstance")},function(t,e,n){n(28)("isConcatSpreadable")},function(t,e,n){n(28)("iterator")},function(t,e,n){n(28)("match")},function(t,e,n){n(28)("matchAll")},function(t,e,n){n(28)("replace")},function(t,e,n){n(28)("search")},function(t,e,n){n(28)("species")},function(t,e,n){n(28)("split")},function(t,e,n){n(28)("toPrimitive")},function(t,e,n){n(28)("toStringTag")},function(t,e,n){n(28)("unscopables")},function(t,e,n){"use strict";var r=n(2),i=n(36),o=n(51),a=n(41),s=n(23),u=n(44),l=n(52),c=function(t,e){var n=this;if(!(n instanceof c))return new c(t,e);o&&(n=o(new Error(void 0),i(n))),void 0!==e&&s(n,"message",String(e));var r=[];return l(t,r.push,{that:r}),s(n,"errors",r),n};c.prototype=a(Error.prototype,{constructor:u(5,c),message:u(5,""),name:u(5,"AggregateError")}),r({global:!0},{AggregateError:c})},function(t,e,n){var r=n(2),i=n(181);r({target:"Array",stat:!0,forced:!n(98)((function(t){Array.from(t)}))},{from:i})},function(t,e,n){var r=n(8),i=n(180);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){throw i(t),e}}},function(t,e,n){n(2)({target:"Array",stat:!0},{isArray:n(57)})},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(58);r({target:"Array",stat:!0,forced:i((function(){function t(){}return!(Array.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(57),a=n(7),s=n(14),u=n(11),l=n(58),c=n(81),h=n(85),f=n(10),d=n(86),p=f("isConcatSpreadable"),m=d>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),v=h("concat"),g=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!m||!v},{concat:function(t){var e,n,r,i,o,a=s(this),h=c(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(g(o=-1===e?a:arguments[e])){if(f+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,f++)n in o&&l(h,f,o[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(h,f++,o)}return h.length=f,h}})},function(t,e,n){var r=n(2),i=n(182),o=n(53);r({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},function(t,e,n){"use strict";var r=n(2),i=n(19).every,o=n(46),a=n(29),s=o("every"),u=a("every");r({target:"Array",proto:!0,forced:!s||!u},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(2),i=n(135),o=n(53);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(t,e,n){"use strict";var r=n(2),i=n(19).filter,o=n(85),a=n(29),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(19).find,o=n(53),a=n(29),s=!0,u=a("find");"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(t,e,n){"use strict";var r=n(2),i=n(19).findIndex,o=n(53),a=n(29),s=!0,u=a("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},function(t,e,n){"use strict";var r=n(2),i=n(183),o=n(14),a=n(11),s=n(35),u=n(81);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=a(e.length),r=u(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:s(t)),r}})},function(t,e,n){"use strict";var r=n(2),i=n(183),o=n(14),a=n(11),s=n(27),u=n(81);r({target:"Array",proto:!0},{flatMap:function(t){var e,n=o(this),r=a(n.length);return s(t),(e=u(n,0)).length=i(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},function(t,e,n){"use strict";var r=n(2),i=n(184);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,n){"use strict";var r=n(2),i=n(78).includes,o=n(53);r({target:"Array",proto:!0,forced:!n(29)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){"use strict";var r=n(2),i=n(78).indexOf,o=n(46),a=n(29),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,l=o("indexOf"),c=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!l||!c},{indexOf:function(t){return u?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(74),o=n(30),a=n(46),s=[].join,u=i!=Object,l=a("join",",");r({target:"Array",proto:!0,forced:u||!l},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},function(t,e,n){var r=n(2),i=n(185);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(t,e,n){"use strict";var r=n(2),i=n(19).map,o=n(85),a=n(29),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(99).left,o=n(46),a=n(29),s=n(86),u=n(63),l=o("reduce"),c=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!l||!c||!u&&s>79&&s<83},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(99).right,o=n(46),a=n(29),s=n(86),u=n(63),l=o("reduceRight"),c=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!l||!c||!u&&s>79&&s<83},{reduceRight:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(57),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},function(t,e,n){"use strict";var r=n(2),i=n(7),o=n(57),a=n(49),s=n(11),u=n(30),l=n(58),c=n(10),h=n(85),f=n(29),d=h("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),m=c("species"),v=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var n,r,c,h=u(this),f=s(h.length),d=a(t,f),p=a(void 0===e?f:e,f);if(o(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[m])&&(n=void 0):n=void 0,n===Array||void 0===n))return v.call(h,d,p);for(r=new(void 0===n?Array:n)(g(p-d,0)),c=0;d<p;d++,c++)d in h&&l(r,c,h[d]);return r.length=c,r}})},function(t,e,n){"use strict";var r=n(2),i=n(19).some,o=n(46),a=n(29),s=o("some"),u=a("some");r({target:"Array",proto:!0,forced:!s||!u},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(27),o=n(14),a=n(3),s=n(46),u=[],l=u.sort,c=a((function(){u.sort(void 0)})),h=a((function(){u.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:c||!h||!f},{sort:function(t){return void 0===t?l.call(o(this)):l.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(2),i=n(49),o=n(35),a=n(11),s=n(14),u=n(81),l=n(58),c=n(85),h=n(29),f=c("splice"),d=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!f||!d},{splice:function(t,e){var n,r,c,h,f,d,v=s(this),g=a(v.length),y=i(t,g),b=arguments.length;if(0===b?n=r=0:1===b?(n=0,r=g-y):(n=b-2,r=m(p(o(e),0),g-y)),g+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(c=u(v,r),h=0;h<r;h++)(f=y+h)in v&&l(c,h,v[f]);if(c.length=r,n<r){for(h=y;h<g-r;h++)d=h+n,(f=h+r)in v?v[d]=v[f]:delete v[d];for(h=g;h>g-r+n;h--)delete v[h-1]}else if(n>r)for(h=g-r;h>y;h--)d=h+n-1,(f=h+r-1)in v?v[d]=v[f]:delete v[d];for(h=0;h<n;h++)v[h+y]=arguments[h+2];return v.length=g-r+n,c}})},function(t,e,n){n(64)("Array")},function(t,e,n){n(53)("flat")},function(t,e,n){n(53)("flatMap")},function(t,e,n){n(2)({target:"Function",proto:!0},{bind:n(187)})},function(t,e,n){var r=n(9),i=n(13).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in o)&&i(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(7),i=n(13),o=n(36),a=n(10)("hasInstance"),s=Function.prototype;a in s||i.f(s,a,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){n(2)({global:!0},{globalThis:n(5)})},function(t,e,n){var r=n(2),i=n(188);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){n(2)({target:"Object",stat:!0,sham:!n(9)},{create:n(41)})},function(t,e,n){var r=n(2),i=n(9);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(13).f})},function(t,e,n){var r=n(2),i=n(9);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(131)})},function(t,e,n){var r=n(2),i=n(189).entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},function(t,e,n){var r=n(2),i=n(88),o=n(3),a=n(7),s=n(59).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){u(1)})),sham:!i},{freeze:function(t){return u&&a(t)?u(s(t)):t}})},function(t,e,n){var r=n(2),i=n(52),o=n(58);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,n){o(e,t,n)}),{AS_ENTRIES:!0}),e}})},function(t,e,n){var r=n(2),i=n(3),o=n(30),a=n(21).f,s=n(9),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},function(t,e,n){var r=n(2),i=n(9),o=n(127),a=n(30),s=n(21),u=n(58);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),i=s.f,l=o(r),c={},h=0;l.length>h;)void 0!==(n=i(r,e=l[h++]))&&u(c,e,n);return c}})},function(t,e,n){var r=n(2),i=n(3),o=n(177).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},function(t,e,n){var r=n(2),i=n(3),o=n(14),a=n(36),s=n(132);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},function(t,e,n){n(2)({target:"Object",stat:!0},{is:n(190)})},function(t,e,n){var r=n(2),i=n(3),o=n(7),a=Object.isExtensible;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isExtensible:function(t){return!!o(t)&&(!a||a(t))}})},function(t,e,n){var r=n(2),i=n(3),o=n(7),a=Object.isFrozen;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isFrozen:function(t){return!o(t)||!!a&&a(t)}})},function(t,e,n){var r=n(2),i=n(3),o=n(7),a=Object.isSealed;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isSealed:function(t){return!o(t)||!!a&&a(t)}})},function(t,e,n){var r=n(2),i=n(14),o=n(80);r({target:"Object",stat:!0,forced:n(3)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},function(t,e,n){var r=n(2),i=n(7),o=n(59).onFreeze,a=n(88),s=n(3),u=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{preventExtensions:function(t){return u&&i(t)?u(o(t)):t}})},function(t,e,n){var r=n(2),i=n(7),o=n(59).onFreeze,a=n(88),s=n(3),u=Object.seal;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{seal:function(t){return u&&i(t)?u(o(t)):t}})},function(t,e,n){n(2)({target:"Object",stat:!0},{setPrototypeOf:n(51)})},function(t,e,n){var r=n(2),i=n(189).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},function(t,e,n){var r=n(134),i=n(24),o=n(337);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var r=n(134),i=n(84);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){"use strict";var r=n(2),i=n(9),o=n(101),a=n(14),s=n(27),u=n(13);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(t,e){u.f(a(this),t,{get:s(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(2),i=n(9),o=n(101),a=n(14),s=n(27),u=n(13);i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(t,e){u.f(a(this),t,{set:s(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(2),i=n(9),o=n(101),a=n(14),s=n(39),u=n(36),l=n(21).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=l(n,r))return e.get}while(n=u(n))}})},function(t,e,n){"use strict";var r=n(2),i=n(9),o=n(101),a=n(14),s=n(39),u=n(36),l=n(21).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=l(n,r))return e.set}while(n=u(n))}})},function(t,e,n){var r=n(2),i=n(49),o=String.fromCharCode,a=String.fromCodePoint;r({target:"String",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(2),i=n(30),o=n(11);r({target:"String",stat:!0},{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";var r=n(2),i=n(102).codeAt;r({target:"String",proto:!0},{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r,i=n(2),o=n(21).f,a=n(11),s=n(138),u=n(22),l=n(139),c=n(34),h="".endsWith,f=Math.min,d=l("endsWith");i({target:"String",proto:!0,forced:!!(c||d||(r=o(String.prototype,"endsWith"),!r||r.writable))&&!d},{endsWith:function(t){var e=String(u(this));s(t);var n=arguments.length>1?arguments[1]:void 0,r=a(e.length),i=void 0===n?r:f(a(n),r),o=String(t);return h?h.call(e,o,i):e.slice(i-o.length,i)===o}})},function(t,e,n){"use strict";var r=n(2),i=n(138),o=n(22);r({target:"String",proto:!0,forced:!n(139)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(103),i=n(8),o=n(11),a=n(22),s=n(106),u=n(107);r("match",1,(function(t,e,n){return[function(e){var n=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),l=String(this);if(!a.global)return u(a,l);var c=a.unicode;a.lastIndex=0;for(var h,f=[],d=0;null!==(h=u(a,l));){var p=String(h[0]);f[d]=p,""===p&&(a.lastIndex=s(l,o(a.lastIndex),c)),d++}return 0===d?null:f}]}))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(2),o=n(137),a=n(22),s=n(11),u=n(27),l=n(8),c=n(45),h=n(89),f=n(65),d=n(23),p=n(3),m=n(10),v=n(47),g=n(106),y=n(26),b=n(34),_=m("matchAll"),w=y.set,x=y.getterFor("RegExp String Iterator"),M=RegExp.prototype,E=M.exec,S="".matchAll,A=!!S&&!p((function(){"a".matchAll(/./)})),T=o((function(t,e,n,r){w(this,{type:"RegExp String Iterator",regexp:t,string:e,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var t=x(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,i=function(t,e){var n,i=t.exec;if("function"==typeof i){if("object"!=r(n=i.call(t,e)))throw TypeError("Incorrect exec result");return n}return E.call(t,e)}(e,n);return null===i?{value:void 0,done:t.done=!0}:t.global?(""==String(i[0])&&(e.lastIndex=g(n,s(e.lastIndex),t.unicode)),{value:i,done:!1}):(t.done=!0,{value:i,done:!1})})),q=function(t){var e,n,r,i,o,a,u=l(this),c=String(t);return e=v(u,RegExp),void 0===(n=u.flags)&&u instanceof RegExp&&!("flags"in M)&&(n=f.call(u)),r=void 0===n?"":String(n),i=new e(e===RegExp?u.source:u,r),o=!!~r.indexOf("g"),a=!!~r.indexOf("u"),i.lastIndex=s(u.lastIndex),new T(i,c,o,a)};i({target:"String",proto:!0,forced:A},{matchAll:function(t){var e,n,r,i=a(this);if(null!=t){if(h(t)&&!~String(a("flags"in M?t.flags:f.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(A)return S.apply(i,arguments);if(void 0===(n=t[_])&&b&&"RegExp"==c(t)&&(n=q),null!=n)return u(n).call(t,i)}else if(A)return S.apply(i,arguments);return e=String(i),r=new RegExp(t,"g"),b?q.call(r,e):r[_](e)}}),b||_ in M||d(M,_,q)},function(t,e,n){"use strict";var r=n(2),i=n(141).end;r({target:"String",proto:!0,forced:n(191)},{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(141).start;r({target:"String",proto:!0,forced:n(191)},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){n(2)({target:"String",proto:!0},{repeat:n(142)})},function(t,e,n){"use strict";var r=n(103),i=n(8),o=n(11),a=n(35),s=n(22),u=n(106),l=n(192),c=n(107),h=Math.max,f=Math.min;r("replace",2,(function(t,e,n,r){var d=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,m=d?"$":"$0";return[function(n,r){var i=s(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!d&&p||"string"==typeof r&&-1===r.indexOf(m)){var s=n(e,t,this,r);if(s.done)return s.value}var v=i(t),g=String(this),y="function"==typeof r;y||(r=String(r));var b=v.global;if(b){var _=v.unicode;v.lastIndex=0}for(var w=[];;){var x=c(v,g);if(null===x)break;if(w.push(x),!b)break;""===String(x[0])&&(v.lastIndex=u(g,o(v.lastIndex),_))}for(var M,E="",S=0,A=0;A<w.length;A++){x=w[A];for(var T=String(x[0]),q=h(f(a(x.index),g.length),0),P=[],L=1;L<x.length;L++)P.push(void 0===(M=x[L])?M:String(M));var O=x.groups;if(y){var C=[T].concat(P,q,g);void 0!==O&&C.push(O);var I=String(r.apply(void 0,C))}else I=l(T,g,q,P,O,r);q>=S&&(E+=g.slice(S,q)+I,S=q+T.length)}return E+g.slice(S)}]}))},function(t,e,n){"use strict";var r=n(103),i=n(8),o=n(22),a=n(190),s=n(107);r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this),l=o.lastIndex;a(l,0)||(o.lastIndex=0);var c=s(o,u);return a(o.lastIndex,l)||(o.lastIndex=l),null===c?-1:c.index}]}))},function(t,e,n){"use strict";var r=n(103),i=n(89),o=n(8),a=n(22),s=n(47),u=n(106),l=n(11),c=n(107),h=n(104),f=n(3),d=[].push,p=Math.min,m=!f((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);for(var s,u,l,c=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");(s=h.call(m,r))&&!((u=m.lastIndex)>p&&(c.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&d.apply(c,s.slice(1)),l=s[0].length,p=u,c.length>=o));)m.lastIndex===s.index&&m.lastIndex++;return p===r.length?!l&&m.test("")||c.push(""):c.push(r.slice(p)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var h=o(t),f=String(this),d=s(h,RegExp),v=h.unicode,g=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(m?"y":"g"),y=new d(m?h:"^(?:"+h.source+")",g),b=void 0===i?4294967295:i>>>0;if(0===b)return[];if(0===f.length)return null===c(y,f)?[f]:[];for(var _=0,w=0,x=[];w<f.length;){y.lastIndex=m?w:0;var M,E=c(y,m?f:f.slice(w));if(null===E||(M=p(l(y.lastIndex+(m?0:w)),f.length))===_)w=u(f,w,v);else{if(x.push(f.slice(_,w)),x.length===b)return x;for(var S=1;S<=E.length-1;S++)if(x.push(E[S]),x.length===b)return x;w=_=M}}return x.push(f.slice(_)),x}]}),!m)},function(t,e,n){"use strict";var r,i=n(2),o=n(21).f,a=n(11),s=n(138),u=n(22),l=n(139),c=n(34),h="".startsWith,f=Math.min,d=l("startsWith");i({target:"String",proto:!0,forced:!!(c||d||(r=o(String.prototype,"startsWith"),!r||r.writable))&&!d},{startsWith:function(t){var e=String(u(this));s(t);var n=a(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return h?h.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";var r=n(2),i=n(66).trim;r({target:"String",proto:!0,forced:n(143)("trim")},{trim:function(){return i(this)}})},function(t,e,n){"use strict";var r=n(2),i=n(66).start,o=n(143)("trimStart"),a=o?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},function(t,e,n){"use strict";var r=n(2),i=n(66).end,o=n(143)("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("big")},{big:function(){return i(this,"big","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("blink")},{blink:function(){return i(this,"blink","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("bold")},{bold:function(){return i(this,"b","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("fixed")},{fixed:function(){return i(this,"tt","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("fontcolor")},{fontcolor:function(t){return i(this,"font","color",t)}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("fontsize")},{fontsize:function(t){return i(this,"font","size",t)}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("italics")},{italics:function(){return i(this,"i","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("link")},{link:function(t){return i(this,"a","href",t)}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("small")},{small:function(){return i(this,"small","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("strike")},{strike:function(){return i(this,"strike","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("sub")},{sub:function(){return i(this,"sub","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(32);r({target:"String",proto:!0,forced:n(33)("sup")},{sup:function(){return i(this,"sup","","")}})},function(t,e,n){"use strict";var r=n(2),i=n(22),o=n(89),a=n(65),s=n(192),u=n(10),l=n(34),c=u("replace"),h=RegExp.prototype,f=Math.max,d=function(t,e,n){return n>t.length?-1:""===e?n:t.indexOf(e,n)};r({target:"String",proto:!0},{replaceAll:function(t,e){var n,r,u,p,m,v,g,y,b=i(this),_=0,w=0,x="";if(null!=t){if((n=o(t))&&!~String(i("flags"in h?t.flags:a.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=t[c]))return r.call(t,b,e);if(l&&n)return String(b).replace(t,e)}for(u=String(b),p=String(t),(m="function"==typeof e)||(e=String(e)),v=p.length,g=f(1,v),_=d(u,p,0);-1!==_;)y=m?String(e(p,_,u)):s(p,u,_,[],void 0,e),x+=u.slice(w,_)+y,w=_+v,_=d(u,p,_+g);return w<u.length&&(x+=u.slice(w)),x}})},function(t,e,n){var r=n(9),i=n(5),o=n(79),a=n(109),s=n(13).f,u=n(56).f,l=n(89),c=n(65),h=n(105),f=n(24),d=n(3),p=n(26).set,m=n(64),v=n(10)("match"),g=i.RegExp,y=g.prototype,b=/a/g,_=/a/g,w=new g(b)!==b,x=h.UNSUPPORTED_Y;if(r&&o("RegExp",!w||x||d((function(){return _[v]=!1,g(b)!=b||g(_)==_||"/a/i"!=g(b,"i")})))){for(var M=function(t,e){var n,r=this instanceof M,i=l(t),o=void 0===e;if(!r&&i&&t.constructor===M&&o)return t;w?i&&!o&&(t=t.source):t instanceof M&&(o&&(e=c.call(t)),t=t.source),x&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var s=a(w?new g(t,e):g(t,e),r?this:y,M);return x&&n&&p(s,{sticky:n}),s},E=function(t){t in M||s(M,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e}})},S=u(g),A=0;S.length>A;)E(S[A++]);y.constructor=M,M.prototype=y,f(i,"RegExp",M)}m("RegExp")},function(t,e,n){var r=n(9),i=n(13),o=n(65),a=n(105).UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},function(t,e,n){var r=n(9),i=n(105).UNSUPPORTED_Y,o=n(13).f,a=n(26).get,s=RegExp.prototype;r&&i&&o(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!a(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},function(t,e,n){"use strict";n(140);var r,i,o=n(2),a=n(7),s=(r=!1,(i=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===i.test("abc")&&r),u=/./.test;o({target:"RegExp",proto:!0,forced:!s},{test:function(t){if("function"!=typeof this.exec)return u.call(this,t);var e=this.exec(t);if(null!==e&&!a(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}})},function(t,e,n){"use strict";var r=n(24),i=n(8),o=n(3),a=n(65),s=RegExp.prototype,u=s.toString,l=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),c="toString"!=u.name;(l||c)&&r(RegExp.prototype,"toString",(function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in s)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){var r=n(2),i=n(194);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(t,e,n){var r=n(2),i=n(195);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(t,e,n){"use strict";var r=n(9),i=n(5),o=n(79),a=n(24),s=n(16),u=n(45),l=n(109),c=n(39),h=n(3),f=n(41),d=n(56).f,p=n(21).f,m=n(13).f,v=n(66).trim,g=i.Number,y=g.prototype,b="Number"==u(f(y)),_=function(t){var e,n,r,i,o,a,s,u,l=c(t,!1);if("string"==typeof l&&l.length>2)if(43===(e=(l=v(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(a=(o=l.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>i)return NaN;return parseInt(o,r)}return+l};if(o("Number",!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,x=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof x&&(b?h((function(){y.valueOf.call(n)})):"Number"!=u(n))?l(new g(_(e)),n,x):_(e)},M=r?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;M.length>E;E++)s(g,w=M[E])&&!s(x,w)&&m(x,w,p(g,w));x.prototype=y,y.constructor=x,a(i,"Number",x)}},function(t,e,n){n(2)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(t,e,n){n(2)({target:"Number",stat:!0},{isFinite:n(383)})},function(t,e,n){var r=n(5).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},function(t,e,n){n(2)({target:"Number",stat:!0},{isInteger:n(196)})},function(t,e,n){n(2)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(2),i=n(196),o=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){n(2)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){n(2)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(2),i=n(195);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},function(t,e,n){var r=n(2),i=n(194);r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},function(t,e,n){"use strict";var r=n(2),i=n(35),o=n(197),a=n(142),s=n(3),u=1..toFixed,l=Math.floor,c=function t(e,n,r){return 0===n?r:n%2==1?t(e,n-1,r*e):t(e*e,n/2,r)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(t){var e,n,r,s,u=o(this),h=i(t),f=[0,0,0,0,0,0],d="",p="0",m=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*f[n],f[n]=r%1e7,r=l(r/1e7)},v=function(t){for(var e=6,n=0;--e>=0;)n+=f[e],f[e]=l(n/t),n=n%t*1e7},g=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==f[t]){var n=String(f[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*c(2,69,1))-69)<0?u*c(2,-e,1):u/c(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(0,n),r=h;r>=7;)m(1e7,0),r-=7;for(m(c(10,r,1),0),r=e-1;r>=23;)v(1<<23),r-=23;v(1<<r),m(1,1),v(2),p=g()}else m(0,n),m(1<<-e,0),p=g()+a.call("0",h);return p=h>0?d+((s=p.length)<=h?"0."+a.call("0",h-s)+p:p.slice(0,s-h)+"."+p.slice(s-h)):d+p}})},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(197),a=1..toPrecision;r({target:"Number",proto:!0,forced:i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))},{toPrecision:function(t){return void 0===t?a.call(o(this)):a.call(o(this),t)}})},function(t,e,n){var r=n(2),i=n(198),o=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2;r({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?a(t)+u:i(t-1+s(t-1)*s(t+1))}})},function(t,e,n){var r=n(2),i=Math.asinh,o=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):o(e+a(e*e+1)):e}})},function(t,e,n){var r=n(2),i=Math.atanh,o=Math.log;r({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:o((1+t)/(1-t))/2}})},function(t,e,n){var r=n(2),i=n(144),o=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(t){return i(t=+t)*a(o(t),1/3)}})},function(t,e,n){var r=n(2),i=Math.floor,o=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-i(o(t+.5)*a):32}})},function(t,e,n){var r=n(2),i=n(110),o=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(t){var e=i(a(t)-1)+1;return(e+1/(e*s*s))*(s/2)}})},function(t,e,n){var r=n(2),i=n(110);r({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},function(t,e,n){n(2)({target:"Math",stat:!0},{fround:n(401)})},function(t,e,n){var r=n(144),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),l=o(2,-126);t.exports=Math.fround||function(t){var e,n,o=i(t),c=r(t);return o<l?c*(o/l/s+1/a-1/a)*l*s:(n=(e=(1+s/a)*o)-(e-o))>u||n!=n?c*(1/0):c*n}},function(t,e,n){var r=n(2),i=Math.hypot,o=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,r,i=0,s=0,u=arguments.length,l=0;s<u;)l<(n=o(arguments[s++]))?(i=i*(r=l/n)*r+1,l=n):i+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*a(i)}})},function(t,e,n){var r=n(2),i=n(3),o=Math.imul;r({target:"Math",stat:!0,forced:i((function(){return-5!=o(4294967295,5)||2!=o.length}))},{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(2),i=Math.log,o=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(t){return i(t)*o}})},function(t,e,n){n(2)({target:"Math",stat:!0},{log1p:n(198)})},function(t,e,n){var r=n(2),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function(t){return i(t)/o}})},function(t,e,n){n(2)({target:"Math",stat:!0},{sign:n(144)})},function(t,e,n){var r=n(2),i=n(3),o=n(110),a=Math.abs,s=Math.exp,u=Math.E;r({target:"Math",stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){return a(t=+t)<1?(o(t)-o(-t))/2:(s(t-1)-s(-t-1))*(u/2)}})},function(t,e,n){var r=n(2),i=n(110),o=Math.exp;r({target:"Math",stat:!0},{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){n(40)(Math,"Math",!0)},function(t,e,n){var r=n(2),i=Math.ceil,o=Math.floor;r({target:"Math",stat:!0},{trunc:function(t){return(t>0?o:i)(t)}})},function(t,e,n){n(2)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(14),a=n(39);r({target:"Date",proto:!0,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=o(this),n=a(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(2),i=n(415);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},function(t,e,n){"use strict";var r=n(3),i=n(141).start,o=Math.abs,a=Date.prototype,s=a.getTime,u=a.toISOString;t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+i(o(t),n?6:4,0)+"-"+i(this.getUTCMonth()+1,2,0)+"-"+i(this.getUTCDate(),2,0)+"T"+i(this.getUTCHours(),2,0)+":"+i(this.getUTCMinutes(),2,0)+":"+i(this.getUTCSeconds(),2,0)+"."+i(e,3,0)+"Z"}:u},function(t,e,n){var r=n(24),i=Date.prototype,o=i.toString,a=i.getTime;new Date(NaN)+""!="Invalid Date"&&r(i,"toString",(function(){var t=a.call(this);return t==t?o.call(this):"Invalid Date"}))},function(t,e,n){var r=n(23),i=n(418),o=n(10)("toPrimitive"),a=Date.prototype;o in a||r(a,o,i)},function(t,e,n){"use strict";var r=n(8),i=n(39);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!==t)}},function(t,e,n){var r=n(2),i=n(31),o=n(3),a=i("JSON","stringify"),s=/[\uD800-\uDFFF]/g,u=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,c=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return u.test(t)&&!l.test(i)||l.test(t)&&!u.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},h=o((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&r({target:"JSON",stat:!0,forced:h},{stringify:function(t,e,n){var r=a.apply(null,arguments);return"string"==typeof r?r.replace(s,c):r}})},function(t,e,n){var r=n(5);n(40)(r.JSON,"JSON",!0)},function(t,e,n){"use strict";var r,i,o,a,s=n(2),u=n(34),l=n(5),c=n(31),h=n(199),f=n(24),d=n(67),p=n(40),m=n(64),v=n(7),g=n(27),y=n(54),b=n(124),_=n(52),w=n(98),x=n(47),M=n(145).set,E=n(201),S=n(202),A=n(423),T=n(111),q=n(146),P=n(26),L=n(79),O=n(10),C=n(63),I=n(86),R=O("species"),k="Promise",N=P.get,B=P.set,D=P.getterFor(k),j=h,F=l.TypeError,z=l.document,U=l.process,V=c("fetch"),G=T.f,H=G,W=!!(z&&z.createEvent&&l.dispatchEvent),Y="function"==typeof PromiseRejectionEvent,X=L(k,(function(){if(!(b(j)!==String(j))){if(66===I)return!0;if(!C&&!Y)return!0}if(u&&!j.prototype.finally)return!0;if(I>=51&&/native code/.test(j))return!1;var t=j.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[R]=e,!(t.then((function(){}))instanceof e)})),Z=X||!w((function(t){j.all(t).catch((function(){}))})),J=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},K=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;E((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,l=n[o++],c=i?l.ok:l.fail,h=l.resolve,f=l.reject,d=l.domain;try{c?(i||(2===t.rejection&&et(t),t.rejection=1),!0===c?a=r:(d&&d.enter(),a=c(r),d&&(d.exit(),u=!0)),a===l.promise?f(F("Promise-chain cycle")):(s=J(a))?s.call(a,h,f):h(a)):f(r)}catch(t){d&&!u&&d.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&$(t)}))}},Q=function(t,e,n){var r,i;W?((r=z.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:n},!Y&&(i=l["on"+t])?i(r):"unhandledrejection"===t&&A("Unhandled promise rejection",n)},$=function(t){M.call(l,(function(){var e,n=t.facade,r=t.value;if(tt(t)&&(e=q((function(){C?U.emit("unhandledRejection",r,n):Q("unhandledrejection",n,r)})),t.rejection=C||tt(t)?2:1,e.error))throw e.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t){M.call(l,(function(){var e=t.facade;C?U.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},nt=function(t,e,n){return function(r){t(e,r,n)}},rt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,K(t,!0))},it=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw F("Promise can't be resolved itself");var i=J(n);i?E((function(){var r={done:!1};try{i.call(n,nt(t,r,e),nt(rt,r,e))}catch(t){rt(r,t,e)}})):(e.value=n,e.state=1,K(e,!1))}catch(t){rt({done:!1},t,e)}}};X&&(j=function(t){y(this,j,k),g(t),r.call(this);var e=N(this);try{t(nt(it,e),nt(rt,e))}catch(t){rt(e,t)}},(r=function(t){B(this,{type:k,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(j.prototype,{then:function(t,e){var n=D(this),r=G(x(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=C?U.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&K(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=N(t);this.promise=t,this.resolve=nt(it,e),this.reject=nt(rt,e)},T.f=G=function(t){return t===j||t===o?new i(t):H(t)},u||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",(function(t,e){var n=this;return new j((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof V&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return S(j,V.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:X},{Promise:j}),p(j,k,!1,!0),m(k),o=c(k),s({target:k,stat:!0,forced:X},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),s({target:k,stat:!0,forced:u||X},{resolve:function(t){return S(u&&this===o?j:this,t)}}),s({target:k,stat:!0,forced:Z},{all:function(t){var e=this,n=G(e),r=n.resolve,i=n.reject,o=q((function(){var n=g(e.resolve),o=[],a=0,s=1;_(t,(function(t){var u=a++,l=!1;o.push(void 0),s++,n.call(e,t).then((function(t){l||(l=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,i=q((function(){var i=g(e.resolve);_(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e,n){var r=n(87);t.exports=/web0s(?!.*chrome)/i.test(r)},function(t,e,n){var r=n(5);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e,n){"use strict";var r=n(2),i=n(27),o=n(111),a=n(146),s=n(52);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=o.f(e),r=n.resolve,u=n.reject,l=a((function(){var n=i(e.resolve),o=[],a=0,u=1;s(t,(function(t){var i=a++,s=!1;o.push(void 0),u++,n.call(e,t).then((function(t){s||(s=!0,o[i]={status:"fulfilled",value:t},--u||r(o))}),(function(t){s||(s=!0,o[i]={status:"rejected",reason:t},--u||r(o))}))})),--u||r(o)}));return l.error&&u(l.value),n.promise}})},function(t,e,n){"use strict";var r=n(2),i=n(27),o=n(31),a=n(111),s=n(146),u=n(52);r({target:"Promise",stat:!0},{any:function(t){var e=this,n=a.f(e),r=n.resolve,l=n.reject,c=s((function(){var n=i(e.resolve),a=[],s=0,c=1,h=!1;u(t,(function(t){var i=s++,u=!1;a.push(void 0),c++,n.call(e,t).then((function(t){u||h||(h=!0,r(t))}),(function(t){u||h||(u=!0,a[i]=t,--c||l(new(o("AggregateError"))(a,"No one promise resolved")))}))})),--c||l(new(o("AggregateError"))(a,"No one promise resolved"))}));return c.error&&l(c.value),n.promise}})},function(t,e,n){"use strict";var r=n(2),i=n(34),o=n(199),a=n(3),s=n(31),u=n(47),l=n(202),c=n(24);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return l(e,t()).then((function(){return n}))}:t,n?function(n){return l(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype.finally||c(o.prototype,"finally",s("Promise").prototype.finally)},function(t,e,n){"use strict";var r=n(112),i=n(203);t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,e,n){"use strict";var r=n(112),i=n(203);t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,e,n){"use strict";var r,i=n(5),o=n(67),a=n(59),s=n(112),u=n(204),l=n(7),c=n(26).enforce,h=n(172),f=!i.ActiveXObject&&"ActiveXObject"in i,d=Object.isExtensible,p=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},m=t.exports=s("WeakMap",p,u);if(h&&f){r=u.getConstructor(p,"WeakMap",!0),a.REQUIRED=!0;var v=m.prototype,g=v.delete,y=v.has,b=v.get,_=v.set;o(v,{delete:function(t){if(l(t)&&!d(t)){var e=c(this);return e.frozen||(e.frozen=new r),g.call(this,t)||e.frozen.delete(t)}return g.call(this,t)},has:function(t){if(l(t)&&!d(t)){var e=c(this);return e.frozen||(e.frozen=new r),y.call(this,t)||e.frozen.has(t)}return y.call(this,t)},get:function(t){if(l(t)&&!d(t)){var e=c(this);return e.frozen||(e.frozen=new r),y.call(this,t)?b.call(this,t):e.frozen.get(t)}return b.call(this,t)},set:function(t,e){if(l(t)&&!d(t)){var n=c(this);n.frozen||(n.frozen=new r),y.call(this,t)?_.call(this,t,e):n.frozen.set(t,e)}else _.call(this,t,e);return this}})}},function(t,e,n){"use strict";n(112)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(204))},function(t,e,n){"use strict";var r=n(2),i=n(5),o=n(113),a=n(64),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(t,e){var n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;t.exports={pack:function(t,e,s){var u,l,c,h=new Array(s),f=8*s-e-1,d=(1<<f)-1,p=d>>1,m=23===e?r(2,-24)-r(2,-77):0,v=t<0||0===t&&1/t<0?1:0,g=0;for((t=n(t))!=t||t===1/0?(l=t!=t?1:0,u=d):(u=i(o(t)/a),t*(c=r(2,-u))<1&&(u--,c*=2),(t+=u+p>=1?m/c:m*r(2,1-p))*c>=2&&(u++,c/=2),u+p>=d?(l=0,u=d):u+p>=1?(l=(t*c-1)*r(2,e),u+=p):(l=t*r(2,p-1)*r(2,e),u=0));e>=8;h[g++]=255&l,l/=256,e-=8);for(u=u<<e|l,f+=e;f>0;h[g++]=255&u,u/=256,f-=8);return h[--g]|=128*v,h},unpack:function(t,e){var n,i=t.length,o=8*i-e-1,a=(1<<o)-1,s=a>>1,u=o-7,l=i-1,c=t[l--],h=127&c;for(c>>=7;u>0;h=256*h+t[l],l--,u-=8);for(n=h&(1<<-u)-1,h>>=-u,u+=e;u>0;n=256*n+t[l],l--,u-=8);if(0===h)h=1-s;else{if(h===a)return n?NaN:c?-1/0:1/0;n+=r(2,e),h-=s}return(c?-1:1)*n*r(2,h-e)}}},function(t,e,n){var r=n(2),i=n(12);r({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(113),a=n(8),s=n(49),u=n(11),l=n(47),c=o.ArrayBuffer,h=o.DataView,f=c.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(l(this,c))(u(i-r)),d=new h(this),p=new h(o),m=0;r<i;)p.setUint8(m++,d.getUint8(r++));return o}})},function(t,e,n){var r=n(2),i=n(113);r({global:!0,forced:!n(147)},{DataView:i.DataView})},function(t,e,n){n(48)("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(35);t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,n){n(48)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(48)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(48)("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(48)("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(48)("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(48)("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(48)("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(48)("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){"use strict";var r=n(148);(0,n(12).exportTypedArrayStaticMethod)("from",n(207),r)},function(t,e,n){"use strict";var r=n(12),i=n(148),o=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,n=new(o(this))(e);e>t;)n[t]=arguments[t++];return n}),i)},function(t,e,n){"use strict";var r=n(12),i=n(182),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(t,e){return i.call(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(19).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(135),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(12),i=n(19).filter,o=n(47),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(t){for(var e=i(a(this),t,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,u=e.length,l=new(s(n))(u);u>r;)l[r]=e[r++];return l}))},function(t,e,n){"use strict";var r=n(12),i=n(19).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(19).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(19).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(78).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(78).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(5),i=n(12),o=n(100),a=n(10)("iterator"),s=r.Uint8Array,u=o.values,l=o.keys,c=o.entries,h=i.aTypedArray,f=i.exportTypedArrayMethod,d=s&&s.prototype[a],p=!!d&&("values"==d.name||null==d.name),m=function(){return u.call(h(this))};f("entries",(function(){return c.call(h(this))})),f("keys",(function(){return l.call(h(this))})),f("values",m,!p),f(a,m,!p)},function(t,e,n){"use strict";var r=n(12),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(t){return a.apply(i(this),arguments)}))},function(t,e,n){"use strict";var r=n(12),i=n(185),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(12),i=n(19).map,o=n(47),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(o(t,t.constructor)))(e)}))}))},function(t,e,n){"use strict";var r=n(12),i=n(99).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(99).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var t,e=i(this).length,n=a(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}))},function(t,e,n){"use strict";var r=n(12),i=n(11),o=n(206),a=n(14),s=n(3),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(t){u(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=i(r.length),l=0;if(s+e>n)throw RangeError("Wrong length");for(;l<s;)this[e+l]=r[l++]}),s((function(){new Int8Array(1).set({})})))},function(t,e,n){"use strict";var r=n(12),i=n(47),o=n(3),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,l=[].slice;u("slice",(function(t,e){for(var n=l.call(a(this),t,e),r=i(this,this.constructor),o=0,u=n.length,c=new(s(r))(u);u>o;)c[o]=n[o++];return c}),o((function(){new Int8Array(1).slice()})))},function(t,e,n){"use strict";var r=n(12),i=n(19).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(t){return a.call(i(this),t)}))},function(t,e,n){"use strict";var r=n(12),i=n(11),o=n(49),a=n(47),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,u=o(t,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-u))}))},function(t,e,n){"use strict";var r=n(5),i=n(12),o=n(3),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,l=[].toLocaleString,c=[].slice,h=!!a&&o((function(){l.call(new a(1))}));u("toLocaleString",(function(){return l.apply(h?c.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},function(t,e,n){"use strict";var r=n(12).exportTypedArrayMethod,i=n(3),o=n(5).Uint8Array,a=o&&o.prototype||{},s=[].toString,u=[].join;i((function(){s.call({})}))&&(s=function(){return u.call(this)});var l=a.toString!=s;r("toString",s,l)},function(t,e,n){var r=n(2),i=n(31),o=n(27),a=n(8),s=n(3),u=i("Reflect","apply"),l=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){u((function(){}))}))},{apply:function(t,e,n){return o(t),a(n),u?u(t,e,n):l.call(t,e,n)}})},function(t,e,n){var r=n(2),i=n(31),o=n(27),a=n(8),s=n(7),u=n(41),l=n(187),c=n(3),h=i("Reflect","construct"),f=c((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),d=!c((function(){h((function(){}))})),p=f||d;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(d&&!f)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var i=n.prototype,c=u(s(i)?i:Object.prototype),p=Function.apply.call(t,c,e);return s(p)?p:c}})},function(t,e,n){var r=n(2),i=n(9),o=n(8),a=n(39),s=n(13);r({target:"Reflect",stat:!0,forced:n(3)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(t,e,n){o(t);var r=a(e,!0);o(n);try{return s.f(t,r,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(2),i=n(8),o=n(21).f;r({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=o(i(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){var r=n(2),i=n(7),o=n(8),a=n(16),s=n(21),u=n(36);r({target:"Reflect",stat:!0},{get:function t(e,n){var r,l,c=arguments.length<3?e:arguments[2];return o(e)===c?e[n]:(r=s.f(e,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(c):i(l=u(e))?t(l,n,c):void 0}})},function(t,e,n){var r=n(2),i=n(9),o=n(8),a=n(21);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(t,e){return a.f(o(t),e)}})},function(t,e,n){var r=n(2),i=n(8),o=n(36);r({target:"Reflect",stat:!0,sham:!n(132)},{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,n){n(2)({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},function(t,e,n){var r=n(2),i=n(8),o=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){n(2)({target:"Reflect",stat:!0},{ownKeys:n(127)})},function(t,e,n){var r=n(2),i=n(31),o=n(8);r({target:"Reflect",stat:!0,sham:!n(88)},{preventExtensions:function(t){o(t);try{var e=i("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(2),i=n(8),o=n(7),a=n(16),s=n(3),u=n(13),l=n(21),c=n(36),h=n(44);r({target:"Reflect",stat:!0,forced:s((function(){var t=function(){},e=u.f(new t,"a",{configurable:!0});return!1!==Reflect.set(t.prototype,"a",1,e)}))},{set:function t(e,n,r){var s,f,d=arguments.length<4?e:arguments[3],p=l.f(i(e),n);if(!p){if(o(f=c(e)))return t(f,n,r,d);p=h(0)}if(a(p,"value")){if(!1===p.writable||!o(d))return!1;if(s=l.f(d,n)){if(s.get||s.set||!1===s.writable)return!1;s.value=r,u.f(d,n,s)}else u.f(d,n,h(0,r));return!0}return void 0!==p.set&&(p.set.call(d,r),!0)}})},function(t,e,n){var r=n(2),i=n(8),o=n(179),a=n(51);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){i(t),o(e);try{return a(t,e),!0}catch(t){return!1}}})},function(t,e,n){var r=n(2),i=n(5),o=n(40);r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},function(t,e,n){n(486),n(487),n(488),n(489),n(490),n(491),n(494),n(210);var r=n(77);t.exports=r},function(t,e,n){var r=n(5),i=n(208),o=n(184),a=n(23);for(var s in i){var u=r[s],l=u&&u.prototype;if(l&&l.forEach!==o)try{a(l,"forEach",o)}catch(t){l.forEach=o}}},function(t,e,n){var r=n(5),i=n(208),o=n(100),a=n(23),s=n(10),u=s("iterator"),l=s("toStringTag"),c=o.values;for(var h in i){var f=r[h],d=f&&f.prototype;if(d){if(d[u]!==c)try{a(d,u,c)}catch(t){d[u]=c}if(d[l]||a(d,l,h),i[h])for(var p in o)if(d[p]!==o[p])try{a(d,p,o[p])}catch(t){d[p]=o[p]}}}},function(t,e,n){var r=n(2),i=n(5),o=n(145);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){var r=n(2),i=n(5),o=n(201),a=n(63),s=i.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=a&&s.domain;o(e?e.bind(t):t)}})},function(t,e,n){var r=n(2),i=n(5),o=n(87),a=[].slice,s=function(t){return function(e,n){var r=arguments.length>2,i=r?a.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n(193);var i,o=n(2),a=n(9),s=n(209),u=n(5),l=n(131),c=n(24),h=n(54),f=n(16),d=n(188),p=n(181),m=n(102).codeAt,v=n(492),g=n(40),y=n(210),b=n(26),_=u.URL,w=y.URLSearchParams,x=y.getState,M=b.set,E=b.getterFor("URL"),S=Math.floor,A=Math.pow,T=/[A-Za-z]/,q=/[\d+-.A-Za-z]/,P=/\d/,L=/^(0x|0X)/,O=/^[0-7]+$/,C=/^\d+$/,I=/^[\dA-Fa-f]+$/,R=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,k=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,N=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,B=/[\u0009\u000A\u000D]/g,D=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=F(e.slice(1,-1))))return"Invalid host";t.host=n}else if(X(t)){if(e=v(e),R.test(e))return"Invalid host";if(null===(n=j(e)))return"Invalid host";t.host=n}else{if(k.test(e))return"Invalid host";for(n="",r=p(e),i=0;i<r.length;i++)n+=W(r[i],U);t.host=n}},j=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(e=u.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=u[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=L.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?C:8==o?O:I).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=A(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*A(256,3-r);return s},F=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],l=0,c=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,c=++l}for(;f();){if(8==l)return;if(":"!=f()){for(e=n=0;n<4&&I.test(f());)e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,l>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!P.test(f()))return;for(;P.test(f());){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}u[l]=256*u[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[l++]=e}else{if(null!==c)return;h++,c=++l}}if(null!==c)for(a=l-c,l=7;0!=l&&a>0;)s=u[l],u[l--]=u[c+a-1],u[c+--a]=s;else if(8!=l)return;return u},z=function(t){var e,n,i,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==r(t)){for(e="",i=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),i===n?(e+=n?":":"::",o=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},U={},V=d({},U,{" ":1,'"':1,"<":1,">":1,"`":1}),G=d({},V,{"#":1,"?":1,"{":1,"}":1}),H=d({},G,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(t,e){var n=m(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(t){return f(Y,t.scheme)},Z=function(t){return""!=t.username||""!=t.password},J=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},K=function(t,e){var n;return 2==t.length&&T.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},Q=function(t){var e;return t.length>1&&K(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},$=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&K(e[0],!0)||e.pop()},tt=function(t){return"."===t||"%2e"===t.toLowerCase()},et={},nt={},rt={},it={},ot={},at={},st={},ut={},lt={},ct={},ht={},ft={},dt={},pt={},mt={},vt={},gt={},yt={},bt={},_t={},wt={},xt=function(t,e,n,r){var o,a,s,u,l,c=n||et,h=0,d="",m=!1,v=!1,g=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(N,"")),e=e.replace(B,""),o=p(e);h<=o.length;){switch(a=o[h],c){case et:if(!a||!T.test(a)){if(n)return"Invalid scheme";c=rt;continue}d+=a.toLowerCase(),c=nt;break;case nt:if(a&&(q.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";d="",c=rt,h=0;continue}if(n&&(X(t)!=f(Y,d)||"file"==d&&(Z(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,n)return void(X(t)&&Y[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?c=pt:X(t)&&r&&r.scheme==t.scheme?c=it:X(t)?c=ut:"/"==o[h+1]?(c=ot,h++):(t.cannotBeABaseURL=!0,t.path.push(""),c=bt)}break;case rt:if(!r||r.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==a){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,c=wt;break}c="file"==r.scheme?pt:at;continue;case it:if("/"!=a||"/"!=o[h+1]){c=at;continue}c=lt,h++;break;case ot:if("/"==a){c=ct;break}c=yt;continue;case at:if(t.scheme=r.scheme,a==i)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==a||"\\"==a&&X(t))c=st;else if("?"==a)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",c=_t;else{if("#"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),c=yt;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",c=wt}break;case st:if(!X(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,c=yt;continue}c=ct}else c=lt;break;case ut:if(c=lt,"/"!=a||"/"!=d.charAt(h+1))continue;h++;break;case lt:if("/"!=a&&"\\"!=a){c=ct;continue}break;case ct:if("@"==a){m&&(d="%40"+d),m=!0,s=p(d);for(var y=0;y<s.length;y++){var b=s[y];if(":"!=b||g){var _=W(b,H);g?t.password+=_:t.username+=_}else g=!0}d=""}else if(a==i||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)){if(m&&""==d)return"Invalid authority";h-=p(d).length+1,d="",c=ht}else d+=a;break;case ht:case ft:if(n&&"file"==t.scheme){c=vt;continue}if(":"!=a||v){if(a==i||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)){if(X(t)&&""==d)return"Invalid host";if(n&&""==d&&(Z(t)||null!==t.port))return;if(u=D(t,d))return u;if(d="",c=gt,n)return;continue}"["==a?v=!0:"]"==a&&(v=!1),d+=a}else{if(""==d)return"Invalid host";if(u=D(t,d))return u;if(d="",c=dt,n==ft)return}break;case dt:if(!P.test(a)){if(a==i||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)||n){if(""!=d){var w=parseInt(d,10);if(w>65535)return"Invalid port";t.port=X(t)&&w===Y[t.scheme]?null:w,d=""}if(n)return;c=gt;continue}return"Invalid port"}d+=a;break;case pt:if(t.scheme="file","/"==a||"\\"==a)c=mt;else{if(!r||"file"!=r.scheme){c=yt;continue}if(a==i)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==a)t.host=r.host,t.path=r.path.slice(),t.query="",c=_t;else{if("#"!=a){Q(o.slice(h).join(""))||(t.host=r.host,t.path=r.path.slice(),$(t)),c=yt;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",c=wt}}break;case mt:if("/"==a||"\\"==a){c=vt;break}r&&"file"==r.scheme&&!Q(o.slice(h).join(""))&&(K(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),c=yt;continue;case vt:if(a==i||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&K(d))c=yt;else if(""==d){if(t.host="",n)return;c=gt}else{if(u=D(t,d))return u;if("localhost"==t.host&&(t.host=""),n)return;d="",c=gt}continue}d+=a;break;case gt:if(X(t)){if(c=yt,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=i&&(c=yt,"/"!=a))continue}else t.fragment="",c=wt;else t.query="",c=_t;break;case yt:if(a==i||"/"==a||"\\"==a&&X(t)||!n&&("?"==a||"#"==a)){if(".."===(l=(l=d).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?($(t),"/"==a||"\\"==a&&X(t)||t.path.push("")):tt(d)?"/"==a||"\\"==a&&X(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&K(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(a==i||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",c=_t):"#"==a&&(t.fragment="",c=wt)}else d+=W(a,G);break;case bt:"?"==a?(t.query="",c=_t):"#"==a?(t.fragment="",c=wt):a!=i&&(t.path[0]+=W(a,U));break;case _t:n||"#"!=a?a!=i&&("'"==a&&X(t)?t.query+="%27":t.query+="#"==a?"%23":W(a,U)):(t.fragment="",c=wt);break;case wt:a!=i&&(t.fragment+=W(a,V))}h++}},Mt=function(t){var e,n,r=h(this,Mt,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(t),s=M(r,{type:"URL"});if(void 0!==i)if(i instanceof Mt)e=E(i);else if(n=xt(e={},String(i)))throw TypeError(n);if(n=xt(s,o,null,e))throw TypeError(n);var u=s.searchParams=new w,l=x(u);l.updateSearchParams(s.query),l.updateURL=function(){s.query=String(u)||null},a||(r.href=St.call(r),r.origin=At.call(r),r.protocol=Tt.call(r),r.username=qt.call(r),r.password=Pt.call(r),r.host=Lt.call(r),r.hostname=Ot.call(r),r.port=Ct.call(r),r.pathname=It.call(r),r.search=Rt.call(r),r.searchParams=kt.call(r),r.hash=Nt.call(r))},Et=Mt.prototype,St=function(){var t=E(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,l=e+":";return null!==i?(l+="//",Z(t)&&(l+=n+(r?":"+r:"")+"@"),l+=z(i),null!==o&&(l+=":"+o)):"file"==e&&(l+="//"),l+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(l+="?"+s),null!==u&&(l+="#"+u),l},At=function(){var t=E(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&X(t)?e+"://"+z(t.host)+(null!==n?":"+n:""):"null"},Tt=function(){return E(this).scheme+":"},qt=function(){return E(this).username},Pt=function(){return E(this).password},Lt=function(){var t=E(this),e=t.host,n=t.port;return null===e?"":null===n?z(e):z(e)+":"+n},Ot=function(){var t=E(this).host;return null===t?"":z(t)},Ct=function(){var t=E(this).port;return null===t?"":String(t)},It=function(){var t=E(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Rt=function(){var t=E(this).query;return t?"?"+t:""},kt=function(){return E(this).searchParams},Nt=function(){var t=E(this).fragment;return t?"#"+t:""},Bt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(a&&l(Et,{href:Bt(St,(function(t){var e=E(this),n=String(t),r=xt(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)})),origin:Bt(At),protocol:Bt(Tt,(function(t){var e=E(this);xt(e,String(t)+":",et)})),username:Bt(qt,(function(t){var e=E(this),n=p(String(t));if(!J(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=W(n[r],H)}})),password:Bt(Pt,(function(t){var e=E(this),n=p(String(t));if(!J(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=W(n[r],H)}})),host:Bt(Lt,(function(t){var e=E(this);e.cannotBeABaseURL||xt(e,String(t),ht)})),hostname:Bt(Ot,(function(t){var e=E(this);e.cannotBeABaseURL||xt(e,String(t),ft)})),port:Bt(Ct,(function(t){var e=E(this);J(e)||(""==(t=String(t))?e.port=null:xt(e,t,dt))})),pathname:Bt(It,(function(t){var e=E(this);e.cannotBeABaseURL||(e.path=[],xt(e,t+"",gt))})),search:Bt(Rt,(function(t){var e=E(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",xt(e,t,_t)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:Bt(kt),hash:Bt(Nt,(function(t){var e=E(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",xt(e,t,wt)):e.fragment=null}))}),c(Et,"toJSON",(function(){return St.call(this)}),{enumerable:!0}),c(Et,"toString",(function(){return St.call(this)}),{enumerable:!0}),_){var Dt=_.createObjectURL,jt=_.revokeObjectURL;Dt&&c(Mt,"createObjectURL",(function(t){return Dt.apply(_,arguments)})),jt&&c(Mt,"revokeObjectURL",(function(t){return jt.apply(_,arguments)}))}g(Mt,"URL"),o({global:!0,forced:!s,sham:!a},{URL:Mt})},function(t,e,n){"use strict";var r=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,u=function(t){return t+22+75*(t<26)},l=function(t,e,n){var r=0;for(t=n?a(t/700):t>>1,t+=a(t/e);t>455;r+=36)t=a(t/35);return a(r+36*t/(t+38))},c=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,c=128,h=0,f=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(s(n));var d=r.length,p=d;for(d&&r.push("-");p<i;){var m=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=c&&n<m&&(m=n);var v=p+1;if(m-c>a((2147483647-h)/v))throw RangeError(o);for(h+=(m-c)*v,c=m,e=0;e<t.length;e++){if((n=t[e])<c&&++h>2147483647)throw RangeError(o);if(n==c){for(var g=h,y=36;;y+=36){var b=y<=f?1:y>=f+26?26:y-f;if(g<b)break;var _=g-b,w=36-b;r.push(s(u(b+_%w))),g=a(_/w)}r.push(s(u(g))),f=l(h,v,p==d),h=0,++p}}++h,++c}return r.join("")};t.exports=function(t){var e,n,o=[],a=t.toLowerCase().replace(i,".").split(".");for(e=0;e<a.length;e++)n=a[e],o.push(r.test(n)?"xn--"+c(n):n);return o.join(".")}},function(t,e,n){var r=n(8),i=n(83);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,n){"use strict";n(2)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function f(){}function d(){}function p(){}var m={};m[o]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==n&&r.call(g,o)&&(m=g);var y=p.prototype=f.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,n){var i;this._invoke=function(o,a){function s(){return new n((function(i,s){!function i(o,a,s,u){var l=c(t[o],t,a);if("throw"!==l.type){var h=l.arg,f=h.value;return f&&"object"===e(f)&&r.call(f,"__await")?n.resolve(f.__await).then((function(t){i("next",t,s,u)}),(function(t){i("throw",t,s,u)})):n.resolve(f).then((function(t){h.value=t,s(h)}),(function(t){return i("throw",t,s,u)}))}u(l.arg)}(o,a,i,s)}))}return i=i?i.then(s,s):s()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=y.constructor=p,p.constructor=d,d.displayName=u(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),u(y,s,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(114)(t))},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),c=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+d]=255&a,d+=p,a/=256,l-=8);t[n+d-p]|=128*m}},function(t,e,n){(e=t.exports=n(213)).Stream=e,e.Readable=e,e.Writable=n(217),e.Duplex=n(70),e.Transform=n(218),e.PassThrough=n(504),e.finished=n(151),e.pipeline=n(505)},function(t,e){},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=n(20).Buffer,s=n(501).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,n,l;return e=t,(n=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,n,r,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=i,r=s,a.prototype.copy.call(e,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?r+=i:r+=i.slice(0,t),0==(t-=o)){o===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:u,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,n),l&&o(e,l),t}()},function(t,e){},function(t,e,n){"use strict";(function(e){var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(151),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[a];if(null!==e){var n=t[f].read();null!==n&&(t[c]=null,t[a]=null,t[s]=null,e(d(n,!1)))}}function m(t){e.nextTick(p,t)}var v=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var t=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[l])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(n,r){e.nextTick((function(){t[u]?r(t[u]):n(d(void 0,!0))}))}));var r,i=this[c];if(i)r=new Promise(function(t,e){return function(n,r){t.then((function(){e[l]?n(d(void 0,!0)):e[h](n,r)}),r)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[h])}return this[c]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var t=this;return new Promise((function(e,n){t[f].destroy(null,(function(t){t?n(t):e(d(void 0,!0))}))}))})),r),v);t.exports=function(t){var e,n=Object.create(g,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,l,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var r=n[f].read();r?(n[c]=null,n[a]=null,n[s]=null,t(d(r,!1))):(n[a]=t,n[s]=e)},writable:!0}),e));return n[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[s];return null!==e&&(n[c]=null,n[a]=null,n[s]=null,e(t)),void(n[u]=t)}var r=n[a];null!==r&&(n[c]=null,n[a]=null,n[s]=null,r(d(void 0,!0))),n[l]=!0})),t.on("readable",m.bind(null,n)),n}}).call(this,n(17))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,n){"use strict";t.exports=i;var r=n(218);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(4)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";var r;var i=n(69).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===r&&(r=n(151)),r(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function l(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,n){var o=n<e.length-1;return u(t,o,n>0,(function(t){r||(r=t),t&&a.forEach(l),o||(a.forEach(l),i(r))}))}));return e.reduce(c)}},function(t,e,n){var r=n(4),i=n(71),o=n(6).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<30|t>>>2}function c(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)n[h]=t.readInt32BE(4*h);for(;h<80;++h)n[h]=n[h-3]^n[h-8]^n[h-14]^n[h-16];for(var f=0;f<80;++f){var d=~~(f/20),p=0|((e=r)<<5|e>>>27)+c(d,i,o,s)+u+n[f]+a[d];u=s,s=o,o=l(i),i=r,r=p}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,n){var r=n(4),i=n(71),o=n(6).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<5|t>>>27}function c(t){return t<<30|t>>>2}function h(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)n[f]=t.readInt32BE(4*f);for(;f<80;++f)n[f]=(e=n[f-3]^n[f-8]^n[f-14]^n[f-16])<<1|e>>>31;for(var d=0;d<80;++d){var p=~~(d/20),m=l(r)+h(p,i,o,s)+u+n[d]+a[p]|0;u=s,s=o,o=c(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,n){var r=n(4),i=n(219),o=n(71),a=n(6).Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}r(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},function(t,e,n){var r=n(4),i=n(220),o=n(71),a=n(6).Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}r(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},function(t,e,n){t.exports=i;var r=n(60).EventEmitter;function i(){r.call(this)}n(4)(i,r),i.Readable=n(154),i.Writable=n(517),i.Duplex=n(518),i.Transform=n(519),i.PassThrough=n(520),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},function(t,e){},function(t,e,n){"use strict";var r=n(155).Buffer,i=n(513);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,n=o,i=s,e.copy(n,i),s+=a.data.length,a=a.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(515),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(25))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[u]=i,r(u),u++},f.clearImmediate=d}function d(t){delete l[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(25),n(17))},function(t,e,n){"use strict";t.exports=o;var r=n(224),i=Object.create(n(91));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(4),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(156)},function(t,e,n){t.exports=n(62)},function(t,e,n){t.exports=n(154).Transform},function(t,e,n){t.exports=n(154).PassThrough},function(t,e,n){"use strict";var r=n(4),i=n(6).Buffer,o=n(55),a=i.alloc(128);function s(t,e){o.call(this,"digest"),"string"==typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>64?e=t(e):e.length<64&&(e=i.concat([e,a],64));for(var n=this._ipad=i.allocUnsafe(64),r=this._opad=i.allocUnsafe(64),s=0;s<64;s++)n[s]=54^e[s],r[s]=92^e[s];this._hash=[n]}r(s,o),s.prototype._update=function(t){this._hash.push(t)},s.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=s},function(t,e,n){t.exports=n(227)},function(t,e,n){(function(e,r){var i,o=n(6).Buffer,a=n(229),s=n(230),u=n(231),l=n(232),c=e.crypto&&e.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function d(t,e,n,r,i){return c.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return c.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:i}},t,r<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,n,p,m,v,g){"function"==typeof v&&(g=v,v=void 0);var y=h[(v=v||"sha1").toLowerCase()];if(!y||"function"!=typeof e.Promise)return r.nextTick((function(){var e;try{e=u(t,n,p,m,v)}catch(t){return g(t)}g(null,e)}));if(a(p,m),t=l(t,s,"Password"),n=l(n,s,"Salt"),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){r.nextTick((function(){e(null,t)}))}),(function(t){r.nextTick((function(){e(t)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var n=d(i=i||o.alloc(8),i,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=n,n}(y).then((function(e){return e?d(t,n,p,m,y):u(t,n,p,m,v)})),g)}}).call(this,n(25),n(17))},function(t,e,n){var r=n(525),i=n(158),o=n(159),a=n(538),s=n(117);function u(t,e,n){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,n);if(a[t])return new r({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function l(t,e,n){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,n);if(a[t])return new r({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var n,r;if(t=t.toLowerCase(),o[t])n=o[t].key,r=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");n=8*a[t].key,r=a[t].iv}var i=s(e,!1,n,r);return u(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var n,r;if(t=t.toLowerCase(),o[t])n=o[t].key,r=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");n=8*a[t].key,r=a[t].iv}var i=s(e,!1,n,r);return l(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(i.getCiphers())}},function(t,e,n){var r=n(55),i=n(526),o=n(4),a=n(6).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){r.call(this);var e,n=t.mode.toLowerCase(),i=s[n];e=t.decrypt?"decrypt":"encrypt";var o=t.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==n&&"des-ede-cbc"!==n||(o=a.concat([o,o.slice(0,8)]));var u=t.iv;a.isBuffer(u)||(u=a.from(u)),this._des=i.create({key:o,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,r),u.prototype._update=function(t){return a.from(this._des.update(t))},u.prototype._final=function(){return a.from(this._des.final())}},function(t,e,n){"use strict";e.utils=n(233),e.Cipher=n(157),e.DES=n(234),e.CBC=n(527),e.EDE=n(528)},function(t,e,n){"use strict";var r=n(37),i=n(4),o={};function a(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var n=Object.keys(o),r=0;r<n.length;r++){var a=n[r];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,n,r){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];o._update.call(this,a,0,n,r);for(s=0;s<this.blockSize;s++)a[s]=n[r+s]}else{o._update.call(this,t,e,n,r);for(s=0;s<this.blockSize;s++)n[r+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}}},function(t,e,n){"use strict";var r=n(37),i=n(4),o=n(157),a=n(234);function s(t,e){r.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:n}),a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:n})]}function u(t){o.call(this,t);var e=new s(this.type,this.options.key);this._edeState=e}i(u,o),t.exports=u,u.create=function(t){return new u(t)},u.prototype._update=function(t,e,n,r){var i=this._edeState;i.ciphers[0]._update(t,e,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},function(t,e,n){var r=n(159),i=n(238),o=n(6).Buffer,a=n(239),s=n(55),u=n(116),l=n(117);function c(t,e,n){s.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(n),this._mode=t,this._autopadding=!0}n(4)(c,s),c.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get();)n=this._mode.encrypt(this,e),r.push(n);return o.concat(r)};var h=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function d(t,e,n){var s=r[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof n&&(n=o.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===s.type?new a(s.module,e,n):"auth"===s.type?new i(s.module,e,n):new c(s.module,e,n)}c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return o.concat([this.cache,e])},e.createCipheriv=d,e.createCipher=function(t,e){var n=r[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=l(e,!1,n.key,n.iv);return d(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,n){var r=n(92);e.encrypt=function(t,e){var n=r(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},e.decrypt=function(t,e){var n=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return r(i,n)}},function(t,e,n){var r=n(6).Buffer,i=n(92);function o(t,e,n){var o=e.length,a=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=r.concat([t._prev,n?e:a]),a}e.encrypt=function(t,e,n){for(var i,a=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){a=r.concat([a,o(t,e,n)]);break}i=t._cache.length,a=r.concat([a,o(t,e.slice(0,i),n)]),e=e.slice(i)}return a}},function(t,e,n){var r=n(6).Buffer;function i(t,e,n){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([n?e:i])]),i}e.encrypt=function(t,e,n){for(var o=e.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],n);return a}},function(t,e,n){var r=n(6).Buffer;function i(t,e,n){for(var r,i,a=-1,s=0;++a<8;)r=e&1<<7-a?128:0,s+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^r))>>a%8,t._prev=o(t._prev,n?r:i);return s}function o(t,e){var n=t.length,i=-1,o=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++i<n;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,n){for(var o=e.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],n);return a}},function(t,e,n){(function(t){var r=n(92);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),r(n,o)}}).call(this,n(20).Buffer)},function(t,e,n){var r=n(6).Buffer,i=r.alloc(16,0);function o(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,n,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),n=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=o(i)},a.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a},function(t,e,n){var r=n(238),i=n(6).Buffer,o=n(159),a=n(239),s=n(55),u=n(116),l=n(117);function c(t,e,n){s.call(this),this._cache=new h,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(n),this._mode=t,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function f(t,e,n){var s=o[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=i.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof e&&(e=i.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,n,!0):"auth"===s.type?new r(s.module,e,n,!0):new c(s.module,e,n)}n(4)(c,s),c.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),r.push(n);return i.concat(r)},c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=i.concat([this.cache,t])},h.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var n=o[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=l(e,!1,n.key,n.iv);return f(t,r.key,r.iv)},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,n){(function(t){var r=n(240),i=n(542),o=n(543);var a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var n=new t(i[e].prime,"hex"),r=new t(i[e].gen,"hex");return new o(n,r)},e.createDiffieHellman=e.DiffieHellman=function e(n,i,s,u){return t.isBuffer(i)||void 0===a[i]?e(n,"binary",i,s):(i=i||"binary",u=u||"binary",s=s||new t([2]),t.isBuffer(s)||(s=new t(s,u)),"number"==typeof n?new o(r(n,s),s,!0):(t.isBuffer(n)||(n=new t(n,i)),new o(n,s,!0)))}}).call(this,n(20).Buffer)},function(t,e){},function(t,e){},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,n){(function(e){var r=n(18),i=new(n(241)),o=new r(24),a=new r(11),s=new r(10),u=new r(3),l=new r(7),c=n(240),h=n(68);function f(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._pub=new r(t),this}function d(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._priv=new r(t),this}t.exports=m;var p={};function m(t,e,n){this.setGenerator(e),this.__prime=new r(t),this._prime=r.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=f,this.setPrivateKey=d):this._primeCode=8}function v(t,n){var r=new e(t.toArray());return n?r.toString(n):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var n=e.toString("hex"),r=[n,t.toString(16)].join("_");if(r in p)return p[r];var h,f=0;if(t.isEven()||!c.simpleSieve||!c.fermatTest(t)||!i.test(t))return f+=1,f+="02"===n||"05"===n?8:4,p[r]=f,f;switch(i.test(t.shrn(1))||(f+=2),n){case"02":t.mod(o).cmp(a)&&(f+=8);break;case"05":(h=t.mod(s)).cmp(u)&&h.cmp(l)&&(f+=8);break;default:f+=4}return p[r]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new r(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var n=(t=(t=new r(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(n.toArray()),o=this.getPrime();if(i.length<o.length){var a=new e(o.length-i.length);a.fill(0),i=e.concat([a,i])}return i},m.prototype.getPublicKey=function(t){return v(this._pub,t)},m.prototype.getPrivateKey=function(t){return v(this._priv,t)},m.prototype.getPrime=function(t){return v(this.__prime,t)},m.prototype.getGenerator=function(t){return v(this._gen,t)},m.prototype.setGenerator=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.__gen=t,this._gen=new r(t),this}}).call(this,n(20).Buffer)},function(t,e,n){var r=n(6).Buffer,i=n(90),o=n(545),a=n(4),s=n(553),u=n(584),l=n(227);function c(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new c(t)}function d(t){return new h(t)}Object.keys(l).forEach((function(t){l[t].id=r.from(l[t].id,"hex"),l[t.toLowerCase()]=l[t]})),a(c,o.Writable),c.prototype._write=function(t,e,n){this._hash.update(t),n()},c.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},c.prototype.sign=function(t,e){this.end();var n=this._hash.digest(),r=s(n,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},a(h,o.Writable),h.prototype._write=function(t,e,n){this._hash.update(t),n()},h.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},h.prototype.verify=function(t,e,n){"string"==typeof e&&(e=r.from(e,n)),this.end();var i=this._hash.digest();return u(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:d,createSign:f,createVerify:d}},function(t,e,n){(e=t.exports=n(242)).Stream=e,e.Readable=e,e.Writable=n(246),e.Duplex=n(73),e.Transform=n(247),e.PassThrough=n(551),e.finished=n(161),e.pipeline=n(552)},function(t,e){},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=n(20).Buffer,s=n(548).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,n,l;return e=t,(n=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,n,r,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=i,r=s,a.prototype.copy.call(e,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?r+=i:r+=i.slice(0,t),0==(t-=o)){o===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:u,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,n),l&&o(e,l),t}()},function(t,e){},function(t,e,n){"use strict";(function(e){var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(161),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[a];if(null!==e){var n=t[f].read();null!==n&&(t[c]=null,t[a]=null,t[s]=null,e(d(n,!1)))}}function m(t){e.nextTick(p,t)}var v=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var t=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[l])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(n,r){e.nextTick((function(){t[u]?r(t[u]):n(d(void 0,!0))}))}));var r,i=this[c];if(i)r=new Promise(function(t,e){return function(n,r){t.then((function(){e[l]?n(d(void 0,!0)):e[h](n,r)}),r)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[h])}return this[c]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var t=this;return new Promise((function(e,n){t[f].destroy(null,(function(t){t?n(t):e(d(void 0,!0))}))}))})),r),v);t.exports=function(t){var e,n=Object.create(g,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,l,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var r=n[f].read();r?(n[c]=null,n[a]=null,n[s]=null,t(d(r,!1))):(n[a]=t,n[s]=e)},writable:!0}),e));return n[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[s];return null!==e&&(n[c]=null,n[a]=null,n[s]=null,e(t)),void(n[u]=t)}var r=n[a];null!==r&&(n[c]=null,n[a]=null,n[s]=null,r(d(void 0,!0))),n[l]=!0})),t.on("readable",m.bind(null,n)),n}}).call(this,n(17))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,n){"use strict";t.exports=i;var r=n(247);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(4)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";var r;var i=n(72).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===r&&(r=n(161)),r(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function l(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,n){var o=n<e.length-1;return u(t,o,n>0,(function(t){r||(r=t),t&&a.forEach(l),o||(a.forEach(l),i(r))}))}));return e.reduce(c)}},function(t,e,n){var r=n(6).Buffer,i=n(225),o=n(162),a=n(163).ec,s=n(253),u=n(119),l=n(259);function c(t,e,n,o){if((t=r.from(t.toArray())).length<e.byteLength()){var a=r.alloc(e.byteLength()-t.length);t=r.concat([a,t])}var s=n.length,u=function(t,e){t=(t=h(t,e)).mod(e);var n=r.from(t.toArray());if(n.length<e.byteLength()){var i=r.alloc(e.byteLength()-n.length);n=r.concat([i,n])}return n}(n,e),l=r.alloc(s);l.fill(1);var c=r.alloc(s);return c=i(o,c).update(l).update(r.from([0])).update(t).update(u).digest(),l=i(o,c).update(l).digest(),{k:c=i(o,c).update(l).update(r.from([1])).update(t).update(u).digest(),v:l=i(o,c).update(l).digest()}}function h(t,e){var n=new s(t),r=(t.length<<3)-e.bitLength();return r>0&&n.ishrn(r),n}function f(t,e,n){var o,a;do{for(o=r.alloc(0);8*o.length<t.bitLength();)e.v=i(n,e.k).update(e.v).digest(),o=r.concat([o,e.v]);a=h(o,t),e.k=i(n,e.k).update(e.v).update(r.from([0])).digest(),e.v=i(n,e.k).update(e.v).digest()}while(-1!==a.cmp(t));return a}function d(t,e,n,r){return t.toRed(s.mont(n)).redPow(e).fromRed().mod(r)}t.exports=function(t,e,n,i,p){var m=u(e);if(m.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(t,e){var n=l[e.curve.join(".")];if(!n)throw new Error("unknown curve "+e.curve.join("."));var i=new a(n).keyFromPrivate(e.privateKey).sign(t);return r.from(i.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==i)throw new Error("wrong private key type");return function(t,e,n){var i,o=e.params.priv_key,a=e.params.p,u=e.params.q,l=e.params.g,p=new s(0),m=h(t,u).mod(u),v=!1,g=c(o,u,t,n);for(;!1===v;)i=f(u,g,n),p=d(l,i,a,u),0===(v=i.invm(u).imul(m.add(o.mul(p))).mod(u)).cmpn(0)&&(v=!1,p=new s(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t));128&e[0]&&(e=[0].concat(e));var n=[48,t.length+e.length+4,2,t.length];return n=n.concat(t,[2,e.length],e),r.from(n)}(p,v)}(t,m,n)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");t=r.concat([p,t]);for(var v=m.modulus.byteLength(),g=[0,1];t.length+g.length+1<v;)g.push(255);g.push(0);for(var y=-1;++y<t.length;)g.push(t[y]);return o(g,m)},t.exports.getKey=c,t.exports.makeKey=f},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,r){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e,n){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"===e(t)?t.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{s=n(555).Buffer}catch(t){}function u(t,e,n){for(var r=0,o=Math.min(t.length,n),a=0,s=e;s<o;s++){var u,l=t.charCodeAt(s)-48;r<<=4,r|=u=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,a|=u}return i(!(240&a),"Invalid character in "+t),r}function l(t,e,n,r){for(var o=0,a=0,s=Math.min(t.length,n),u=e;u<s;u++){var l=t.charCodeAt(u)-48;o*=r,a=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&a<r,"Invalid character"),o+=a}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(a.isBN=function(t){return t instanceof a||null!==t&&"object"===e(t)&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,n,r){if("number"==typeof t)return this._initNumber(t,n,r);if("object"===e(t))return this._initArray(t,n,r);"hex"===n&&(n=16),i(n===(0|n)&&n>=2&&n<=36);var o=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&o++,16===n?this._parseHex(t,o):this._parseBase(t,n,o),"-"===t[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),n,r)},a.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initArray=function(t,e,n){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,a,s=0;if("be"===n)for(r=t.length-1,o=0;r>=0;r-=3)a=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(r=0,o=0;r<t.length;r+=3)a=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},a.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=u(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=u(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this._strip()},a.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,c=n;c<s;c+=r)u=l(t,c,c+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype._move=function(t){c(t,this)},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){a.prototype.inspect=h}else a.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var r=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<r|o)).toString(16);n=0!==(o=s>>>24-r&16777215)||a!==this.length-1?f[6-u.length]+u+n:u+n,(r+=2)>=26&&(r-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var l=d[t],c=p[t];n="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(c).toString(t);n=(h=h.idivn(c)).isZero()?m+n:f[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16,2)},s&&(a.prototype.toBuffer=function(t,e){return this.toArrayLike(s,t,e)}),a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function m(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var l=1;l<r;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),d=Math.max(0,l-t.length+1);d<=f;d++){var p=l-d|0;c+=(a=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&a}n.words[l]=0|h,u=0|c}return 0!==u?n.words[l]=0|u:n.length--,n._strip()}a.prototype.toArrayLike=function(t,e,n){this._strip();var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,r),a},a.prototype._toArrayLikeLE=function(t,e){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n++]=255&a,n<t.length&&(t[n++]=a>>8&255),n<t.length&&(t[n++]=a>>16&255),6===o?(n<t.length&&(t[n++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n<t.length)for(t[n++]=r;n<t.length;)t[n++]=0},a.prototype._toArrayLikeBE=function(t,e){for(var n=t.length-1,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n--]=255&a,n>=0&&(t[n--]=a>>8&255),n>=0&&(t[n--]=a>>16&255),6===o?(n>=0&&(t[n--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n>=0)for(t[n--]=r;n>=0;)t[n--]=0},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},a.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this._strip()},a.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},a.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this._strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var n=t/26|0,r=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<r:this.words[n]&~(1<<r),this._strip()},a.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var v=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],_=8191&b,w=b>>>13,x=0|a[4],M=8191&x,E=x>>>13,S=0|a[5],A=8191&S,T=S>>>13,q=0|a[6],P=8191&q,L=q>>>13,O=0|a[7],C=8191&O,I=O>>>13,R=0|a[8],k=8191&R,N=R>>>13,B=0|a[9],D=8191&B,j=B>>>13,F=0|s[0],z=8191&F,U=F>>>13,V=0|s[1],G=8191&V,H=V>>>13,W=0|s[2],Y=8191&W,X=W>>>13,Z=0|s[3],J=8191&Z,K=Z>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,dt=0|s[9],pt=8191&dt,mt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(l+(r=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(p,z),i=(i=Math.imul(p,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,G)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(y,z)|0,o=Math.imul(y,U),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var yt=(l+(r=r+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(f,Y)|0))<<13)|0;l=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(_,z),i=(i=Math.imul(_,U))+Math.imul(w,z)|0,o=Math.imul(w,U),r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,X)|0;var bt=(l+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,J)|0))<<13)|0;l=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(M,z),i=(i=Math.imul(M,U))+Math.imul(E,z)|0,o=Math.imul(E,U),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(g,Y)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,X)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,K)|0;var _t=(l+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(A,z),i=(i=Math.imul(A,U))+Math.imul(T,z)|0,o=Math.imul(T,U),r=r+Math.imul(M,G)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,K)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,K)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;l=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,z),i=(i=Math.imul(P,U))+Math.imul(L,z)|0,o=Math.imul(L,U),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(T,G)|0,o=o+Math.imul(T,H)|0,r=r+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0;var xt=(l+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(I,z)|0,o=Math.imul(I,U),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,X)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,X)|0,r=r+Math.imul(M,J)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,K)|0,r=r+Math.imul(_,$)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(g,nt)|0,i=(i=i+Math.imul(g,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(k,z),i=(i=Math.imul(k,U))+Math.imul(N,z)|0,o=Math.imul(N,U),r=r+Math.imul(C,G)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,X)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,K)|0,r=r+Math.imul(M,$)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var Et=(l+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(j,z)|0,o=Math.imul(j,U),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,K)|0,r=r+Math.imul(A,$)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(M,nt)|0,i=(i=i+Math.imul(M,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,r=r+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,lt)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var St=(l+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(D,G),i=(i=Math.imul(D,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,X)|0,r=r+Math.imul(C,J)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,K)|0,r=r+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(T,nt)|0,o=o+Math.imul(T,rt)|0,r=r+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,r=r+Math.imul(_,ut)|0,i=(i=i+Math.imul(_,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,r=r+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,ft)|0;var At=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(D,Y),i=(i=Math.imul(D,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,K)|0,r=r+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,r=r+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,lt)|0,r=r+Math.imul(_,ht)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(r=r+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((o=o+Math.imul(y,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(D,J),i=(i=Math.imul(D,K))+Math.imul(j,J)|0,o=Math.imul(j,K),r=r+Math.imul(k,$)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,r=r+Math.imul(C,nt)|0,i=(i=i+Math.imul(C,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,r=r+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var qt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(i=(i=i+Math.imul(_,mt)|0)+Math.imul(w,pt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,r=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(N,nt)|0,o=o+Math.imul(N,rt)|0,r=r+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,r=r+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var Pt=(l+(r=r+Math.imul(M,pt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(E,pt)|0))<<13)|0;l=((o=o+Math.imul(E,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(D,nt),i=(i=Math.imul(D,rt))+Math.imul(j,nt)|0,o=Math.imul(j,rt),r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,r=r+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,lt)|0,r=r+Math.imul(P,ht)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,mt)|0)+Math.imul(T,pt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(j,ot)|0,o=Math.imul(j,at),r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,lt)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,lt)|0,r=r+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(I,ht)|0,o=o+Math.imul(I,ft)|0;var Ot=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(L,pt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(j,ut)|0,o=Math.imul(j,lt),r=r+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(N,ht)|0,o=o+Math.imul(N,ft)|0;var Ct=(l+(r=r+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(I,pt)|0))<<13)|0;l=((o=o+Math.imul(I,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(j,ht)|0,o=Math.imul(j,ft);var It=(l+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,mt)|0)+Math.imul(N,pt)|0))<<13)|0;l=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863;var Rt=(l+(r=Math.imul(D,pt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(j,pt)|0))<<13)|0;return l=((o=Math.imul(j,mt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=vt,u[1]=gt,u[2]=yt,u[3]=bt,u[4]=_t,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=Et,u[9]=St,u[10]=At,u[11]=Tt,u[12]=qt,u[13]=Pt,u[14]=Lt,u[15]=Ot,u[16]=Ct,u[17]=It,u[18]=Rt,0!==l&&(u[19]=l,n.length++),n};function g(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function y(t,e,n){return g(t,e,n)}function b(t,e){this.x=t,this.y=e}Math.imul||(v=m),a.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?v(this,t,e):n<63?m(this,t,e):n<1024?g(this,t,e):y(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),n=a.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},b.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},b.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},b.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,d=0;d<a;d++){var p=n[c+d],m=r[c+d],v=n[c+d+a],g=r[c+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[c+d]=p+v,r[c+d]=m+g,n[c+d+a]=p-v,r[c+d+a]=m-g,d!==s&&(y=u*h-l*f,f=u*f+l*h,h=y)}},b.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},b.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,n,r){for(var o=0,a=0;a<e;a++)o+=0|t[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<r;++a)n[a]=0;i(0===o),i(0==(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},b.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,l,r),this.transform(a,o,s,u,r,i),this.transform(l,o,c,h,r,i);for(var d=0;d<r;d++){var p=s[d]*c[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*c[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n._strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),y(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var n=0,r=0;r<this.length;r++){var o=(0|this.words[r])*t,a=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=a>>>26,this.words[r]=67108863&a}return 0!==n&&(this.words[r]=n,this.length++),e?this.ineg():this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=t.words[r]>>>i&1}return e}(t);if(0===e.length)return new a(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,n=t%26,r=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<n;this.words[e]=u|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()},a.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,n){var r;i("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(r-=a,r=Math.max(0,r),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=r);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(t,e,n){return i(0===this.negative),this.iushrn(t,e,n)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,r=1<<e;return!(this.length<=n)&&!!(this.words[n]&r)},a.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this._strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,n){var r,o,a=t.length+n;this._expand(a);var s=0;for(r=0;r<t.length;r++){o=(0|this.words[r+n])+s;var u=(0|t.words[r])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[r+n]=67108863&o}for(;r<this.length-n;r++)s=(o=(0|this.words[r+n])+s)>>26,this.words[r+n]=67108863&o;if(0===s)return this._strip();for(i(-1===s),s=0,r=0;r<this.length;r++)s=(o=-(0|this.words[r])+s)>>26,this.words[r]=67108863&o;return this.negative=1,this._strip()},a.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new a(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=r.clone()._ishlnsubmul(i,1,u);0===c.negative&&(r=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s._strip(),r._strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},a.prototype.divmod=function(t,e,n){return i(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(r=s.div.neg()),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:r,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(r=s.div.neg()),{div:r,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modrn(t.words[0]))}:this._wordDiv(t,e);var r,o,s},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var n=(1<<26)%t,r=0,o=this.length-1;o>=0;o--)r=(n*r+(0|this.words[o]))%t;return e?-r:r},a.prototype.modn=function(t){return this.modrn(t)},a.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var n=0,r=this.length-1;r>=0;r--){var o=(0|this.words[r])+67108864*n;this.words[r]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new a(1),o=new a(0),s=new a(0),u=new a(1),l=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++l;for(var c=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(c),o.isub(h)),r.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),r.isub(s),o.isub(u)):(n.isub(e),s.isub(r),u.isub(o))}return{a:s,b:u,gcd:n.iushln(l)}},a.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,o=new a(1),s=new a(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(s)):(n.isub(e),s.isub(o))}return(r=0===e.cmpn(1)?o:s).cmpn(0)<0&&r.iadd(t),r},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,n=(t-e)/26,r=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new A(t)},a.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},o(x,w),x.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(M,w),o(E,w),o(S,w),S.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return _[t]=e,e},A.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},A.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var n=this.m.add(new a(1)).iushrn(2);return this.pow(t,n)}for(var r=this.m.subn(1),o=0;!r.isZero()&&0===r.andln(1);)o++,r.iushrn(1);i(!r.isZero());var s=new a(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,r),f=this.pow(t,r.addn(1).iushrn(1)),d=this.pow(t,r),p=o;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();i(v<p);var g=this.pow(h,new a(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],o=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],c=u-1;c>=0;c--){var h=l>>c&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4===++s||0===r&&0===c)&&(i=this.mul(i,n[o]),s=0,o=0)):s=0}u=26}return i},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new T(t)},o(T,A),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(114)(t))},function(t,e){},function(t){t.exports=JSON.parse('{"name":"elliptic","version":"6.5.3","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"}}')},function(t,e,n){"use strict";var r=n(38),i=n(18),o=n(4),a=n(118),s=r.assert;function u(t){a.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(t,e,n,r){a.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(t,e,n,r){a.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)n=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?n=o[0]:(n=o[1],s(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:n,basis:t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(n)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),n=new i(2).toRed(e).redInvm(),r=n.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,n,r,o,a,s,u,l,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i(1),m=new i(0),v=new i(0),g=new i(1),y=0;0!==f.cmpn(0);){var b=d.div(f);l=d.sub(b.mul(f)),c=v.sub(b.mul(p));var _=g.sub(b.mul(m));if(!r&&l.cmp(h)<0)e=u.neg(),n=p,r=l.neg(),o=c;else if(r&&2==++y)break;u=l,d=f,f=l,v=p,p=c,g=m,m=_}a=l.neg(),s=c;var w=r.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(w)>=0&&(a=e,s=n),r.negative&&(r=r.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:r,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),a=i.mul(n.a),s=o.mul(r.a),u=i.mul(n.b),l=o.mul(r.b);return{k1:t.sub(a).sub(s),k2:u.add(l).neg()}},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(e&&!o||!e&&o)&&(r=r.redNeg()),this.point(t,r)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),r[2*o]=s,r[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var l=this._wnafMulAdd(1,r,i,2*o,n),c=0;c<2*o;c++)r[c]=null,i[c]=null;return l},o(l,a.BasePoint),u.prototype.point=function(t,e,n){return new l(this,t,e,n)},u.prototype.pointFromJSON=function(t,e){return l.fromJSON(this,t,e)},l.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(t,e,n){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],n);if(!e[2])return r;function i(e){return t.point(e[0],e[1],n)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},l.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},l.prototype.jmulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},l.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},l.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(c,a.BasePoint),u.prototype.jpoint=function(t,e,n){return new c(this,t,e,n)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),s=r.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),h=r.redMul(l),f=u.redSqr().redIAdd(c).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(c)),p=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,d,p)},c.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=n.redSub(r),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),c=n.redMul(u),h=s.redSqr().redIAdd(l).redISub(c).redISub(c),f=s.redMul(c.redISub(h)).redISub(i.redMul(l)),d=this.z.redMul(a);return this.curve.jpoint(h,f,d)},c.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}var r=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),l=a.redAdd(a);for(n=0;n<t;n++){var c=o.redSqr(),h=l.redSqr(),f=h.redSqr(),d=c.redAdd(c).redIAdd(c).redIAdd(r.redMul(u)),p=o.redMul(h),m=d.redSqr().redISub(p.redAdd(p)),v=p.redISub(m),g=d.redMul(v);g=g.redIAdd(g).redISub(f);var y=l.redMul(s);n+1<t&&(u=u.redMul(f)),o=m,s=y,l=g}return this.curve.jpoint(o,l.redMul(i),s)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r),u=s.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),t=u,e=s.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(c).redISub(f);d=d.redIAdd(d);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),v=f.redIAdd(f);v=(v=v.redIAdd(v)).redIAdd(v),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(v),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},c.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),e=s.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(c).redMul(this.x.redAdd(c));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var v=h.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),e=d.redMul(p.redISub(t)).redISub(v)}return this.curve.jpoint(t,e,n)},c.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=e.redSqr(),a=n.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),l=(u=u.redIAdd(u)).redMul(a),c=s.redSqr().redISub(l.redAdd(l)),h=l.redISub(c),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=s.redMul(h).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(c,d,p)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(r),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),c=e.redMul(l);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(s).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(h,f,d)},c.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},c.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},c.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,n){"use strict";var r=n(18),i=n(4),o=n(118),a=n(38);function s(t){o.call(this,"mont",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,n){o.BasePoint.call(this,t,"projective"),null===e&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(e,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,o),t.exports=s,s.prototype.validate=function(t){var e=t.normalize().x,n=e.redSqr(),r=n.redMul(e).redAdd(n.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},i(u,o.BasePoint),s.prototype.decodePoint=function(t,e){return this.point(a.toArray(t,e),1)},s.prototype.point=function(t,e){return new u(this,t,e)},s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),n=t.redSub(e),r=t.redMul(e),i=n.redMul(e.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(n),a=i.redMul(r),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(t){for(var e=t.clone(),n=this,r=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,n){"use strict";var r=n(38),i=n(18),o=n(4),a=n(118),s=r.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,a.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function l(t,e,n,r,o){a.BasePoint.call(this,t,"projective"),null===e&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(n,16),this.z=r?new i(r,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,n,r){return this.point(t,e,n,r)},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=r.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},u.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=r.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),n=t.y.redSqr(),r=e.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(n)));return 0===r.cmp(i)},o(l,a.BasePoint),u.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},u.prototype.point=function(t,e,n,r){return new l(this,t,e,n,r)},l.fromJSON=function(t,e){return new l(t,e[0],e[1],e[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=r.redAdd(e),a=o.redSub(n),s=r.redSub(e),u=i.redMul(a),l=o.redMul(s),c=i.redMul(s),h=a.redMul(o);return this.curve.point(u,l,h,c)},l.prototype._projDbl=function(){var t,e,n,r=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var a=(l=this.curve._mulA(i)).redAdd(o);if(this.zOne)t=r.redSub(i).redSub(o).redMul(a.redSub(this.curve.two)),e=a.redMul(l.redSub(o)),n=a.redSqr().redSub(a).redSub(a);else{var s=this.z.redSqr(),u=a.redSub(s).redISub(s);t=r.redSub(i).redISub(o).redMul(u),e=a.redMul(l.redSub(o)),n=a.redMul(u)}}else{var l=i.redAdd(o);s=this.curve._mulC(this.z).redSqr(),u=l.redSub(s).redSub(s);t=this.curve._mulC(r.redISub(l)).redMul(u),e=this.curve._mulC(l).redMul(i.redISub(o)),n=l.redMul(u)}return this.curve.point(t,e,n)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(e),a=i.redSub(r),s=i.redAdd(r),u=n.redAdd(e),l=o.redMul(a),c=s.redMul(u),h=o.redMul(u),f=a.redMul(s);return this.curve.point(l,c,f,h)},l.prototype._projAdd=function(t){var e,n,r=this.z.redMul(t.z),i=r.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),l=i.redAdd(s),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),h=r.redMul(u).redMul(c);return this.curve.twisted?(e=r.redMul(l).redMul(a.redSub(this.curve._mulA(o))),n=u.redMul(l)):(e=r.redMul(l).redMul(a.redSub(o)),n=this.curve._mulC(u).redMul(l)),this.curve.point(h,e,n)},l.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},l.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!1)},l.prototype.jmulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},l.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var n=t.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},function(t,e,n){"use strict";e.sha1=n(561),e.sha224=n(562),e.sha256=n(251),e.sha384=n(563),e.sha512=n(252)},function(t,e,n){"use strict";var r=n(42),i=n(93),o=n(250),a=r.rotl32,s=r.sum32,u=r.sum32_5,l=o.ft_1,c=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(f,c),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=a(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],c=this.h[2],f=this.h[3],d=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),m=u(a(i,5),l(p,o,c,f),d,n[r],h[p]);d=f,f=c,c=a(o,30),o=i,i=m}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],c),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(42),i=n(251);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(t,e,n){"use strict";var r=n(42),i=n(252);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(t,e,n){"use strict";var r=n(42),i=n(93),o=r.rotl32,a=r.sum32,s=r.sum32_3,u=r.sum32_4,l=i.BlockHash;function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(c,l),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var n=this.h[0],r=this.h[1],i=this.h[2],l=this.h[3],c=this.h[4],y=n,b=r,_=i,w=l,x=c,M=0;M<80;M++){var E=a(o(u(n,h(M,r,i,l),t[p[M]+e],f(M)),v[M]),c);n=c,c=l,l=o(i,10),i=r,r=E,E=a(o(u(y,h(79-M,b,_,w),t[m[M]+e],d(M)),g[M]),x),y=x,x=w,w=o(_,10),_=b,b=E}E=s(this.h[1],i,w),this.h[1]=s(this.h[2],l,x),this.h[2]=s(this.h[3],c,y),this.h[3]=s(this.h[4],n,b),this.h[4]=s(this.h[0],r,_),this.h[0]=E},c.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,n){"use strict";var r=n(42),i=n(37);function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,n))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(18),o=n(568),a=n(38),s=n(164),u=n(160),l=a.assert,c=n(569),h=n(570);function f(t){if(!(this instanceof f))return new f(t);"string"==typeof t&&(l(s.hasOwnProperty(t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=f,f.prototype.keyPair=function(t){return new c(this,t)},f.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},f.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},f.prototype.genKeyPair=function(t){t||(t={});for(var e=new o({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||u(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new i(2));;){var a=new i(e.generate(n));if(!(a.cmp(r)>0))return a.iaddn(1),this.keyFromPrivate(a)}},f.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},f.prototype.sign=function(t,e,n,a){"object"===r(n)&&(a=n,n=null),a||(a={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new i(t,16));for(var s=this.n.byteLength(),u=e.getPrivate().toArray("be",s),l=t.toArray("be",s),c=new o({hash:this.hash,entropy:u,nonce:l,pers:a.pers,persEnc:a.persEnc||"utf8"}),f=this.n.sub(new i(1)),d=0;;d++){var p=a.k?a.k(d):new i(c.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(f)>=0)){var m=this.g.mul(p);if(!m.isInfinity()){var v=m.getX(),g=v.umod(this.n);if(0!==g.cmpn(0)){var y=p.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(y=y.umod(this.n)).cmpn(0)){var b=(m.getY().isOdd()?1:0)|(0!==v.cmp(g)?2:0);return a.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),b^=1),new h({r:g,s:y,recoveryParam:b})}}}}}},f.prototype.verify=function(t,e,n,r){t=this._truncateToN(new i(t,16)),n=this.keyFromPublic(n,r);var o=(e=new h(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),l=u.mul(t).umod(this.n),c=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(l,n.getPublic(),c)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(l,n.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},f.prototype.recoverPubKey=function(t,e,n,r){l((3&n)===n,"The recovery param is more than two bits"),e=new h(e,r);var o=this.n,a=new i(t),s=e.r,u=e.s,c=1&n,f=n>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var d=e.r.invm(o),p=o.sub(a).mul(d).umod(o),m=u.mul(d).umod(o);return this.g.mulAdd(p,s,m)},f.prototype.getKeyRecoveryParam=function(t,e,n,r){if(null!==(e=new h(e,r)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,n){"use strict";var r=n(165),i=n(248),o=n(37);function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),n=i.toArray(t.nonce,t.nonceEnc||"hex"),r=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}t.exports=a,a.prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,n,r){"string"!=typeof e&&(r=n,n=e,e=null),t=i.toArray(t,e),n=i.toArray(n,r),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},a.prototype.generate=function(t,e,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=n,n=e,e=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(n),this._reseed++,i.encode(a,e)}},function(t,e,n){"use strict";var r=n(18),i=n(38).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,n){return e instanceof o?e:new o(t,{pub:e,pubEnc:n})},o.fromPrivate=function(t,e,n){return e instanceof o?e:new o(t,{priv:e,privEnc:n})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.mul(this.priv).getX()},o.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,n){"use strict";var r=n(18),i=n(38),o=i.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var n=t[e.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,o=0,a=e.place;o<r;o++,a++)i<<=8,i|=t[a],i>>>=0;return!(i<=127)&&(e.place=a,i)}function l(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function c(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}t.exports=a,a.prototype._importDER=function(t,e){t=i.toArray(t,e);var n=new s;if(48!==t[n.place++])return!1;var o=u(t,n);if(!1===o)return!1;if(o+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var a=u(t,n);if(!1===a)return!1;var l=t.slice(n.place,a+n.place);if(n.place+=a,2!==t[n.place++])return!1;var c=u(t,n);if(!1===c)return!1;if(t.length!==c+n.place)return!1;var h=t.slice(n.place,c+n.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new r(l),this.s=new r(h),this.recoveryParam=null,!0},a.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=l(e),n=l(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];c(r,e.length),(r=r.concat(e)).push(2),c(r,n.length);var o=r.concat(n),a=[48];return c(a,o.length),a=a.concat(o),i.encode(a,t)}},function(t,e,n){"use strict";var r=n(165),i=n(164),o=n(38),a=o.assert,s=o.parseBytes,u=n(572),l=n(573);function c(t){if(a("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof c))return new c(t);t=i[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}t.exports=c,c.prototype.sign=function(t,e){t=s(t);var n=this.keyFromSecret(e),r=this.hashInt(n.messagePrefix(),t),i=this.g.mul(r),o=this.encodePoint(i),a=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),u=r.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},c.prototype.verify=function(t,e,n){t=s(t),e=this.makeSignature(e);var r=this.keyFromPublic(n),i=this.hashInt(e.Rencoded(),r.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(r.pub().mul(i)).eq(o)},c.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},c.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},c.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},c.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},c.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,n=t.slice(0,e).concat(-129&t[e]),r=0!=(128&t[e]),i=o.intFromLE(n);return this.curve.pointFromY(i,r)},c.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(t){return o.intFromLE(t)},c.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,n){"use strict";var r=n(38),i=r.assert,o=r.parseBytes,a=r.cachedProperty;function s(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var t=this.eddsa,e=this.hash(),n=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},s.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=s},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(18),o=n(38),a=o.assert,s=o.cachedProperty,u=o.parseBytes;function l(t,e){this.eddsa=t,"object"!==r(e)&&(e=u(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),a(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof i&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}s(l,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(l,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(l,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(l,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},t.exports=l},function(t,e){},function(t,e,n){"use strict";var r=n(254);e.certificate=n(581);var i=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=i;var o=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var a=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));e.PublicKey=a;var s=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=u;var l=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=l;var c=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=c,e.DSAparam=r.define("DSAparam",(function(){this.int()}));var h=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=h;var f=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(t,e,n){"use strict";var r=n(255),i=n(257),o=n(4);function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){var e=this.name;function n(t){this._initNamed(t,e)}return o(n,t),n.prototype._initNamed=function(e,n){t.call(this,e,n)},new n(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},a.prototype.decode=function(t,e,n){return this._getDecoder(e).decode(t,n)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(r[t])),this.encoders[t]},a.prototype.encode=function(t,e,n){return this._getEncoder(e).encode(t,n)}},function(t,e,n){"use strict";var r=n(4),i=n(256);function o(t){i.call(this,t),this.enc="pem"}r(o,i),t.exports=o,o.prototype.encode=function(t,e){for(var n=i.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"],o=0;o<n.length;o+=64)r.push(n.slice(o,o+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},function(t,e,n){"use strict";var r=n(4),i=n(166).Buffer,o=n(258);function a(t){o.call(this,t),this.enc="pem"}r(a,o),t.exports=a,a.prototype.decode=function(t,e){for(var n=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,u=-1,l=0;l<n.length;l++){var c=n[l].match(a);if(null!==c&&c[2]===r){if(-1!==s){if("END"!==c[1])break;u=l;break}if("BEGIN"!==c[1])break;s=l}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+r);var h=n.slice(s+1,u).join("");h.replace(/[^a-z0-9+/=]+/gi,"");var f=i.from(h,"base64");return o.prototype.decode.call(this,f,e)}},function(t,e,n){"use strict";var r=e;r.Reporter=n(168).Reporter,r.DecoderBuffer=n(94).DecoderBuffer,r.EncoderBuffer=n(94).EncoderBuffer,r.Node=n(167)},function(t,e,n){"use strict";var r=e;r._reverse=function(t){var e={};return Object.keys(t).forEach((function(n){(0|n)==n&&(n|=0);var r=t[n];e[r]=n})),e},r.der=n(169)},function(t,e,n){"use strict";var r=n(254),i=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),u=r.define("RelativeDistinguishedName",(function(){this.setof(o)})),l=r.define("RDNSequence",(function(){this.seqof(u)})),c=r.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),h=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),f=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),d=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(c),this.key("validity").use(h),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),p=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));t.exports=p},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,n){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=n(117),s=n(158),u=n(6).Buffer;t.exports=function(t,e){var n,l=t.toString(),c=l.match(r);if(c){var h="aes"+c[1],f=u.from(c[2],"hex"),d=u.from(c[3].replace(/[\r\n]/g,""),"base64"),p=a(e,f.slice(0,8),parseInt(c[1],10)).key,m=[],v=s.createDecipheriv(h,p,f);m.push(v.update(d)),m.push(v.final()),n=u.concat(m)}else{var g=l.match(o);n=u.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(i)[1],data:n}}},function(t,e,n){var r=n(6).Buffer,i=n(253),o=n(163).ec,a=n(119),s=n(259);function u(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,n,l,c){var h=a(n);if("ec"===h.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(t,e,n){var r=s[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var i=new o(r),a=n.data.subjectPrivateKey.data;return i.verify(e,t,a)}(t,e,h)}if("dsa"===h.type){if("dsa"!==l)throw new Error("wrong public key type");return function(t,e,n){var r=n.data.p,o=n.data.q,s=n.data.g,l=n.data.pub_key,c=a.signature.decode(t,"der"),h=c.s,f=c.r;u(h,o),u(f,o);var d=i.mont(r),p=h.invm(o);return 0===s.toRed(d).redPow(new i(e).mul(p).mod(o)).fromRed().mul(l.toRed(d).redPow(f.mul(p).mod(o)).fromRed()).mod(r).mod(o).cmp(f)}(t,e,h)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");e=r.concat([c,e]);for(var f=h.modulus.byteLength(),d=[1],p=0;e.length+d.length+2<f;)d.push(255),p++;d.push(0);for(var m=-1;++m<e.length;)d.push(e[m]);d=r.from(d);var v=i.mont(h.modulus);t=(t=new i(t).toRed(v)).redPow(new i(h.publicExponent)),t=r.from(t.fromRed().toArray());var g=p<8?1:0;for(f=Math.min(t.length,d.length),t.length!==d.length&&(g=1),m=-1;++m<f;)g|=t[m]^d[m];return 0===g}},function(t,e,n){(function(e){var r=n(163),i=n(18);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function s(t,n,r){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(r&&i.length<r){var o=new e(r-i.length);o.fill(0),i=e.concat([o,i])}return n?i.toString(n):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,n,r){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var n=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(n[n.length-1]%2?n[0]=7:n[0]=6),s(n,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,n){n=n||"utf8",e.isBuffer(t)||(t=new e(t,n));var r=new i(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this,n(20).Buffer)},function(t,e,n){e.publicEncrypt=n(587),e.privateDecrypt=n(588),e.privateEncrypt=function(t,n){return e.publicEncrypt(t,n,!0)},e.publicDecrypt=function(t,n){return e.privateDecrypt(t,n,!0)}},function(t,e,n){var r=n(119),i=n(68),o=n(90),a=n(260),s=n(261),u=n(18),l=n(262),c=n(162),h=n(6).Buffer;t.exports=function(t,e,n){var f;f=t.padding?t.padding:n?1:4;var d,p=r(t);if(4===f)d=function(t,e){var n=t.modulus.byteLength(),r=e.length,l=o("sha1").update(h.alloc(0)).digest(),c=l.length,f=2*c;if(r>n-f-2)throw new Error("message too long");var d=h.alloc(n-r-f-2),p=n-c-1,m=i(c),v=s(h.concat([l,d,h.alloc(1,1),e],p),a(m,p)),g=s(m,a(v,c));return new u(h.concat([h.alloc(1),g,v],n))}(p,e);else if(1===f)d=function(t,e,n){var r,o=e.length,a=t.modulus.byteLength();if(o>a-11)throw new Error("message too long");r=n?h.alloc(a-o-3,255):function(t){var e,n=h.allocUnsafe(t),r=0,o=i(2*t),a=0;for(;r<t;)a===o.length&&(o=i(2*t),a=0),(e=o[a++])&&(n[r++]=e);return n}(a-o-3);return new u(h.concat([h.from([0,n?1:2]),r,h.alloc(1),e],a))}(p,e,n);else{if(3!==f)throw new Error("unknown padding");if((d=new u(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?c(d,p):l(d,p)}},function(t,e,n){var r=n(119),i=n(260),o=n(261),a=n(18),s=n(162),u=n(90),l=n(262),c=n(6).Buffer;t.exports=function(t,e,n){var h;h=t.padding?t.padding:n?1:4;var f,d=r(t),p=d.modulus.byteLength();if(e.length>p||new a(e).cmp(d.modulus)>=0)throw new Error("decryption error");f=n?l(new a(e),d):s(e,d);var m=c.alloc(p-f.length);if(f=c.concat([m,f],p),4===h)return function(t,e){var n=t.modulus.byteLength(),r=u("sha1").update(c.alloc(0)).digest(),a=r.length;if(0!==e[0])throw new Error("decryption error");var s=e.slice(1,a+1),l=e.slice(a+1),h=o(s,i(l,a)),f=o(l,i(h,n-a-1));if(function(t,e){t=c.from(t),e=c.from(e);var n=0,r=t.length;t.length!==e.length&&(n++,r=Math.min(t.length,e.length));var i=-1;for(;++i<r;)n+=t[i]^e[i];return n}(r,f.slice(0,a)))throw new Error("decryption error");var d=a;for(;0===f[d];)d++;if(1!==f[d++])throw new Error("decryption error");return f.slice(d)}(d,f);if(1===h)return function(t,e,n){var r=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var a=e.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,f,n);if(3===h)return f;throw new Error("unknown padding")}},function(t,e,n){"use strict";(function(t,r){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=n(6),a=n(68),s=o.Buffer,u=o.kMaxLength,l=t.crypto||t.msCrypto,c=Math.pow(2,32)-1;function h(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,n){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>u)throw new RangeError("buffer too small")}function d(t,e,n,i){if(r.browser){var o=t.buffer,s=new Uint8Array(o,e,n);return l.getRandomValues(s),i?void r.nextTick((function(){i(null,t)})):t}if(!i)return a(n).copy(t,e),t;a(n,(function(n,r){if(n)return i(n);r.copy(t,e),i(null,t)}))}l&&l.getRandomValues||!r.browser?(e.randomFill=function(e,n,r,i){if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)i=n,n=0,r=e.length;else if("function"==typeof r)i=r,r=e.length-n;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return h(n,e.length),f(r,n,e.length),d(e,n,r,i)},e.randomFillSync=function(e,n,r){void 0===n&&(n=0);if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(n,e.length),void 0===r&&(r=e.length-n);return f(r,n,e.length),d(e,n,r)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,n(25),n(17))},function(t,e,n){"use strict";if(t.exports)var r=n(120);function i(t,e){if(!(this instanceof i))return new i(t,e);this.lat=Number(t),this.lon=Number(e)}i.prototype.distanceTo=function(t,e){if(!(t instanceof i))throw new TypeError("point is not LatLon object");var n=e=void 0===e?6371e3:Number(e),r=this.lat.toRadians(),o=this.lon.toRadians(),a=t.lat.toRadians(),s=a-r,u=t.lon.toRadians()-o,l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(r)*Math.cos(a)*Math.sin(u/2)*Math.sin(u/2);return n*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},i.prototype.bearingTo=function(t){if(!(t instanceof i))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),n=t.lat.toRadians(),r=(t.lon-this.lon).toRadians(),o=Math.sin(r)*Math.cos(n),a=Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(r);return(Math.atan2(o,a).toDegrees()+360)%360},i.prototype.finalBearingTo=function(t){if(!(t instanceof i))throw new TypeError("point is not LatLon object");return(t.bearingTo(this)+180)%360},i.prototype.midpointTo=function(t){if(!(t instanceof i))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),n=this.lon.toRadians(),r=t.lat.toRadians(),o=(t.lon-this.lon).toRadians(),a=Math.cos(r)*Math.cos(o),s=Math.cos(r)*Math.sin(o),u=Math.sqrt((Math.cos(e)+a)*(Math.cos(e)+a)+s*s),l=Math.sin(e)+Math.sin(r),c=Math.atan2(l,u),h=n+Math.atan2(s,Math.cos(e)+a);return new i(c.toDegrees(),(h.toDegrees()+540)%360-180)},i.prototype.intermediatePointTo=function(t,e){if(!(t instanceof i))throw new TypeError("point is not LatLon object");var n=this.lat.toRadians(),r=this.lon.toRadians(),o=t.lat.toRadians(),a=t.lon.toRadians(),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r),h=Math.sin(o),f=Math.cos(o),d=Math.sin(a),p=Math.cos(a),m=o-n,v=a-r,g=Math.sin(m/2)*Math.sin(m/2)+Math.cos(n)*Math.cos(o)*Math.sin(v/2)*Math.sin(v/2),y=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),b=Math.sin((1-e)*y)/Math.sin(y),_=Math.sin(e*y)/Math.sin(y),w=b*u*c+_*f*p,x=b*u*l+_*f*d,M=b*s+_*h,E=Math.atan2(M,Math.sqrt(w*w+x*x)),S=Math.atan2(x,w);return new i(E.toDegrees(),(S.toDegrees()+540)%360-180)},i.prototype.destinationPoint=function(t,e,n){n=void 0===n?6371e3:n;var r=Number(t)/Number(n),o=Number(e).toRadians(),a=this.lat.toRadians(),s=this.lon.toRadians(),u=Math.sin(a),l=Math.cos(a),c=Math.sin(r),h=Math.cos(r),f=Math.sin(o),d=u*h+l*c*Math.cos(o),p=Math.asin(d),m=f*c*l,v=h-u*d,g=s+Math.atan2(m,v);return new i(p.toDegrees(),(g.toDegrees()+540)%360-180)},i.intersection=function(t,e,n,r){if(!(t instanceof i))throw new TypeError("p1 is not LatLon object");if(!(n instanceof i))throw new TypeError("p2 is not LatLon object");var o=t.lat.toRadians(),a=t.lon.toRadians(),s=n.lat.toRadians(),u=n.lon.toRadians(),l=Number(e).toRadians(),c=Number(r).toRadians(),h=s-o,f=u-a,d=2*Math.asin(Math.sqrt(Math.sin(h/2)*Math.sin(h/2)+Math.cos(o)*Math.cos(s)*Math.sin(f/2)*Math.sin(f/2)));if(0==d)return null;var p=Math.acos((Math.sin(s)-Math.sin(o)*Math.cos(d))/(Math.sin(d)*Math.cos(o)));isNaN(p)&&(p=0);var m=Math.acos((Math.sin(o)-Math.sin(s)*Math.cos(d))/(Math.sin(d)*Math.cos(s))),v=l-(Math.sin(u-a)>0?p:2*Math.PI-p),g=(Math.sin(u-a)>0?2*Math.PI-m:m)-c;if(0==Math.sin(v)&&0==Math.sin(g))return null;if(Math.sin(v)*Math.sin(g)<0)return null;var y=-Math.cos(v)*Math.cos(g)+Math.sin(v)*Math.sin(g)*Math.cos(d),b=Math.atan2(Math.sin(d)*Math.sin(v)*Math.sin(g),Math.cos(g)+Math.cos(v)*y),_=Math.asin(Math.sin(o)*Math.cos(b)+Math.cos(o)*Math.sin(b)*Math.cos(l)),w=a+Math.atan2(Math.sin(l)*Math.sin(b)*Math.cos(o),Math.cos(b)-Math.sin(o)*Math.sin(_));return new i(_.toDegrees(),(w.toDegrees()+540)%360-180)},i.prototype.crossTrackDistanceTo=function(t,e,n){if(!(t instanceof i))throw new TypeError("âpathStartâ is not LatLon object");if(!(e instanceof i))throw new TypeError("âpathEndâ is not LatLon object");var r=void 0===n?6371e3:Number(n),o=t.distanceTo(this,r)/r,a=t.bearingTo(this).toRadians(),s=t.bearingTo(e).toRadians();return Math.asin(Math.sin(o)*Math.sin(a-s))*r},i.prototype.alongTrackDistanceTo=function(t,e,n){if(!(t instanceof i))throw new TypeError("âpathStartâ is not LatLon object");if(!(e instanceof i))throw new TypeError("âpathEndâ is not LatLon object");var r=void 0===n?6371e3:n,o=t.distanceTo(this,r)/r,a=t.bearingTo(this).toRadians(),s=t.bearingTo(e).toRadians(),u=Math.asin(Math.sin(o)*Math.sin(a-s));return Math.acos(Math.cos(o)/Math.abs(Math.cos(u)))*Math.sign(Math.cos(s-a))*r},i.prototype.maxLatitude=function(t){var e=Number(t).toRadians(),n=this.lat.toRadians();return Math.acos(Math.abs(Math.sin(e)*Math.cos(n))).toDegrees()},i.crossingParallels=function(t,e,n){var r=Number(n).toRadians(),i=t.lat.toRadians(),o=t.lon.toRadians(),a=e.lat.toRadians(),s=e.lon.toRadians()-o,u=Math.sin(i)*Math.cos(a)*Math.cos(r)*Math.sin(s),l=Math.sin(i)*Math.cos(a)*Math.cos(r)*Math.cos(s)-Math.cos(i)*Math.sin(a)*Math.cos(r),c=Math.cos(i)*Math.cos(a)*Math.sin(r)*Math.sin(s);if(c*c>u*u+l*l)return null;var h=Math.atan2(-l,u),f=Math.acos(c/Math.sqrt(u*u+l*l)),d=o+h+f;return{lon1:((o+h-f).toDegrees()+540)%360-180,lon2:(d.toDegrees()+540)%360-180}},i.prototype.rhumbDistanceTo=function(t,e){if(!(t instanceof i))throw new TypeError("point is not LatLon object");var n=e=void 0===e?6371e3:Number(e),r=this.lat.toRadians(),o=t.lat.toRadians(),a=o-r,s=Math.abs(t.lon-this.lon).toRadians();s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(r);return Math.sqrt(a*a+l*l*s*s)*n},i.prototype.rhumbBearingTo=function(t){if(!(t instanceof i))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),n=t.lat.toRadians(),r=(t.lon-this.lon).toRadians();r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(e/2+Math.PI/4));return(Math.atan2(r,o).toDegrees()+360)%360},i.prototype.rhumbDestinationPoint=function(t,e,n){n=void 0===n?6371e3:n;var r=this.lat.toRadians(),o=this.lon.toRadians(),a=Number(e).toRadians(),s=t/n,u=s*Math.cos(a),l=r+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),h=Math.abs(c)>1e-11?u/c:Math.cos(r),f=o+s*Math.sin(a)/h;return new i(l.toDegrees(),(f.toDegrees()+540)%360-180)},i.prototype.rhumbMidpointTo=function(t){if(!(t instanceof i))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),n=this.lon.toRadians(),r=t.lat.toRadians(),o=t.lon.toRadians();Math.abs(o-n)>Math.PI&&(n+=2*Math.PI);var a=(e+r)/2,s=Math.tan(Math.PI/4+e/2),u=Math.tan(Math.PI/4+r/2),l=Math.tan(Math.PI/4+a/2),c=((o-n)*Math.log(l)+n*Math.log(u)-o*Math.log(s))/Math.log(u/s);return isFinite(c)||(c=(n+o)/2),i(a.toDegrees(),(c.toDegrees()+540)%360-180)},i.areaOf=function(t,e){var n=void 0===e?6371e3:Number(e),r=t[0].equals(t[t.length-1]);r||t.push(t[0]);for(var i=t.length-1,o=0,a=0;a<i;a++){var s=t[a].lat.toRadians(),u=t[a+1].lat.toRadians(),l=(t[a+1].lon-t[a].lon).toRadians();o+=2*Math.atan2(Math.tan(l/2)*(Math.tan(s/2)+Math.tan(u/2)),1+Math.tan(s/2)*Math.tan(u/2))}(function(t){for(var e=0,n=t[0].bearingTo(t[1]),r=0;r<t.length-1;r++){var i=t[r].bearingTo(t[r+1]),o=t[r].finalBearingTo(t[r+1]);e+=(i-n+540)%360-180,e+=(o-i+540)%360-180,n=o}i=t[0].bearingTo(t[1]);return e+=(i-n+540)%360-180,Math.abs(e)<90})(t)&&(o=Math.abs(o)-2*Math.PI);var c=Math.abs(o*n*n);return r||t.pop(),c},i.prototype.equals=function(t){if(!(t instanceof i))throw new TypeError("point is not LatLon object");return this.lat==t.lat&&this.lon==t.lon},i.prototype.toString=function(t,e){return r.toLat(this.lat,t,e)+", "+r.toLon(this.lon,t,e)},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),t.exports&&(t.exports=i)},function(t,e,n){"use strict";if(t.exports)var r=n(95);r.prototype.distanceTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");try{return Number(this.inverse(t).distance.toFixed(3))}catch(t){return NaN}},r.prototype.initialBearingTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");try{return Number(this.inverse(t).initialBearing.toFixed(9))}catch(t){return NaN}},r.prototype.finalBearingTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");try{return Number(this.inverse(t).finalBearing.toFixed(9))}catch(t){return NaN}},r.prototype.destinationPoint=function(t,e){return this.direct(Number(t),Number(e)).point},r.prototype.finalBearingOn=function(t,e){return Number(this.direct(Number(t),Number(e)).finalBearing.toFixed(9))},r.prototype.direct=function(t,e){var n,i,o,a,s=this.lat.toRadians(),u=this.lon.toRadians(),l=e.toRadians(),c=t,h=this.datum.ellipsoid.a,f=this.datum.ellipsoid.b,d=this.datum.ellipsoid.f,p=Math.sin(l),m=Math.cos(l),v=(1-d)*Math.tan(s),g=1/Math.sqrt(1+v*v),y=v*g,b=Math.atan2(v,m),_=g*p,w=1-_*_,x=w*(h*h-f*f)/(f*f),M=1+x/16384*(4096+x*(x*(320-175*x)-768)),E=x/1024*(256+x*(x*(74-47*x)-128)),S=c/(f*M),A=0;do{n=Math.cos(2*b+S),a=S,S=c/(f*M)+E*(i=Math.sin(S))*(n+E/4*((o=Math.cos(S))*(2*n*n-1)-E/6*n*(4*i*i-3)*(4*n*n-3)))}while(Math.abs(S-a)>1e-12&&++A<100);if(A>=100)throw new Error("Formula failed to converge");var T=y*i-g*o*m,q=Math.atan2(y*o+g*i*m,(1-d)*Math.sqrt(_*_+T*T)),P=d/16*w*(4+d*(4-3*w)),L=(u+(Math.atan2(i*p,g*o-y*i*m)-(1-P)*d*_*(S+P*i*(n+P*o*(2*n*n-1))))+3*Math.PI)%(2*Math.PI)-Math.PI,O=Math.atan2(_,-T);return O=(O+2*Math.PI)%(2*Math.PI),{point:new r(q.toDegrees(),L.toDegrees(),this.datum),finalBearing:O.toDegrees(),iterations:A}},r.prototype.inverse=function(t){var e=t;-180==this.lon&&(this.lon=180);var n,r,i,o,a,s,u=this.lat.toRadians(),l=this.lon.toRadians(),c=e.lat.toRadians(),h=e.lon.toRadians(),f=this.datum.ellipsoid.a,d=this.datum.ellipsoid.b,p=this.datum.ellipsoid.f,m=h-l,v=(1-p)*Math.tan(u),g=1/Math.sqrt(1+v*v),y=v*g,b=(1-p)*Math.tan(c),_=1/Math.sqrt(1+b*b),w=b*_,x=0,M=0,E=0,S=0,A=0,T=m,q=0,P=Math.abs(m)>Math.PI;do{if(0==(i=_*(n=Math.sin(T))*(_*n)+(g*w-y*_*(r=Math.cos(T)))*(g*w-y*_*r)))break;if(M=y*w+g*_*r,s=T,T=m+(1-(a=p/16*(S=1-(o=g*_*n/(x=Math.sqrt(i)))*o)*(4+p*(4-3*S))))*p*o*((E=Math.atan2(x,M))+a*x*((A=0!=S?M-2*y*w/S:0)+a*M*(2*A*A-1))),(P?Math.abs(T)-Math.PI:Math.abs(T))>Math.PI)throw new Error("Î» > Ï")}while(Math.abs(T-s)>1e-12&&++q<1e3);if(q>=1e3)throw new Error("Formula failed to converge");var L=S*(f*f-d*d)/(d*d),O=L/1024*(256+L*(L*(74-47*L)-128)),C=d*(1+L/16384*(4096+L*(L*(320-175*L)-768)))*(E-O*x*(A+O/4*(M*(2*A*A-1)-O/6*A*(4*x*x-3)*(4*A*A-3)))),I=Math.atan2(_*n,g*w-y*_*r),R=Math.atan2(g*n,-y*_+g*w*r);return I=(I+2*Math.PI)%(2*Math.PI),R=(R+2*Math.PI)%(2*Math.PI),{distance:C,initialBearing:0==C?NaN:I.toDegrees(),finalBearing:0==C?NaN:R.toDegrees(),iterations:q}},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),t.exports&&(t.exports=r)},function(t,e,n){"use strict";if(t.exports)var r=n(170);if(t.exports)var i=n(120);function o(t,e){if(!(this instanceof o))return new o(t,e);this.lat=Number(t),this.lon=Number(e)}o.prototype.toVector=function(){var t=this.lat.toRadians(),e=this.lon.toRadians(),n=Math.cos(t)*Math.cos(e),i=Math.cos(t)*Math.sin(e),o=Math.sin(t);return new r(n,i,o)},r.prototype.toLatLonS=function(){var t=Math.atan2(this.z,Math.sqrt(this.x*this.x+this.y*this.y)),e=Math.atan2(this.y,this.x);return new o(t.toDegrees(),e.toDegrees())},o.prototype.greatCircle=function(t){var e=this.lat.toRadians(),n=this.lon.toRadians(),i=Number(t).toRadians(),o=Math.sin(n)*Math.cos(i)-Math.sin(e)*Math.cos(n)*Math.sin(i),a=-Math.cos(n)*Math.cos(i)-Math.sin(e)*Math.sin(n)*Math.sin(i),s=Math.cos(e)*Math.sin(i);return new r(o,a,s)},r.prototype.greatCircle=function(t){var e=Number(t).toRadians(),n=new r(0,0,1).cross(this),i=this.cross(n),o=n.times(Math.cos(e)/n.length());return i.times(Math.sin(e)/i.length()).minus(o)},o.prototype.distanceTo=function(t,e){if(!(t instanceof o))throw new TypeError("point is not LatLon object");e=void 0===e?6371e3:Number(e);var n=this.toVector(),r=t.toVector();return n.angleTo(r)*e},o.prototype.bearingTo=function(t){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var e=this.toVector(),n=t.toVector(),i=new r(0,0,1),a=e.cross(n),s=e.cross(i);return(a.angleTo(s,e).toDegrees()+360)%360},o.prototype.midpointTo=function(t){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var e=this.toVector(),n=t.toVector();return e.plus(n).unit().toLatLonS()},o.prototype.intermediatePointTo=function(t,e){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var n=this.toVector(),i=t.toVector(),a=n.cross(i).length(),s=n.dot(i),u=Math.atan2(a,s)*Number(e),l=Math.sin(u),c=Math.cos(u),h=n.cross(i).unit().cross(n),f=n.times(c).plus(h.times(l));return new r(f.x,f.y,f.z).toLatLonS()},o.prototype.intermediatePointOnChordTo=function(t,e){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var n=this.toVector(),i=t.toVector(),a=n.plus(i.minus(n).times(Number(e)));return new r(a.x,a.y,a.z).toLatLonS()},o.prototype.destinationPoint=function(t,e,n){n=void 0===n?6371e3:Number(n);var i=this.toVector(),o=Number(t)/n,a=Number(e).toRadians(),s=new r(0,0,1).cross(i).unit(),u=i.cross(s),l=s.times(Math.sin(a)),c=u.times(Math.cos(a)).plus(l),h=i.times(Math.cos(o)),f=c.times(Math.sin(o));return h.plus(f).toLatLonS()},o.intersection=function(t,e,n,r){if(!(t instanceof o))throw new TypeError("path1start is not LatLon object");if(!(n instanceof o))throw new TypeError("path2start is not LatLon object");if(!(e instanceof o)&&isNaN(e))throw new TypeError("path1brngEnd is not LatLon object or bearing");if(!(r instanceof o)&&isNaN(r))throw new TypeError("path2brngEnd is not LatLon object or bearing");var i,a,s,u,l=t.toVector(),c=n.toVector();e instanceof o?(i=l.cross(e.toVector()),s="endpoint"):(i=t.greatCircle(Number(e)),s="bearing"),r instanceof o?(a=c.cross(r.toVector()),u="endpoint"):(a=n.greatCircle(Number(r)),u="bearing");var h=i.cross(a),f=a.cross(i),d=null;switch(s+"+"+u){case"bearing+bearing":switch(Math.sign(i.cross(l).dot(h))+Math.sign(a.cross(c).dot(h))){case 2:d=h;break;case-2:d=f;break;case 0:d=l.plus(c).dot(h)>0?f:h}break;case"bearing+endpoint":d=Math.sign(i.cross(l).dot(h))>0?h:f;break;case"endpoint+bearing":d=Math.sign(a.cross(c).dot(h))>0?h:f;break;case"endpoint+endpoint":d=l.plus(c).plus(e.toVector()).plus(r.toVector()).dot(h)>0?h:f}return d.toLatLonS()},o.prototype.crossTrackDistanceTo=function(t,e,n){if(!(t instanceof o))throw new TypeError("pathStart is not LatLon object");var r=void 0===n?6371e3:Number(n),i=this.toVector();return((e instanceof o?t.toVector().cross(e.toVector()):t.greatCircle(Number(e))).angleTo(i)-Math.PI/2)*r},o.prototype.alongTrackDistanceTo=function(t,e,n){if(!(t instanceof o))throw new TypeError("pathStart is not LatLon object");var r=void 0===n?6371e3:Number(n),i=this.toVector(),a=e instanceof o?t.toVector().cross(e.toVector()):t.greatCircle(Number(e)),s=a.cross(i).cross(a);return t.toVector().angleTo(s,a)*r},o.prototype.nearestPointOnSegment=function(t,e){var n=null;if(this.isBetween(t,e)){var r=this.toVector(),i=t.toVector(),o=e.toVector(),a=i.cross(o),s=r.cross(a);n=a.cross(s).toLatLonS()}else{n=this.distanceTo(t)<this.distanceTo(e)?t:e}return n},o.prototype.isBetween=function(t,e){var n=this.toVector(),r=t.toVector(),i=e.toVector(),o=n.minus(r),a=i.minus(r),s=n.minus(i),u=r.minus(i),l=o.dot(a),c=s.dot(u),h=l>=0&&c>=0,f=n.dot(r)>=0&&n.dot(i)>=0;return h&&f},o.prototype.enclosedBy=function(t){var e=t[0].equals(t[t.length-1]);e||t.push(t[0]);for(var n=t.length-1,r=this.toVector(),i=[],o=0;o<n;o++)i[o]=r.minus(t[o].toVector());i.push(i[0]);var a=0;for(o=0;o<n;o++)a+=i[o].angleTo(i[o+1],r);var s=Math.abs(a)>Math.PI;return e||t.pop(),s},o.areaOf=function(t,e){var n=null==e?6371e3:Number(e),r=t[0].equals(t[t.length-1]);r||t.push(t[0]);for(var i=t.length-1,o=[],a=0;a<i;a++){var s=t[a].toVector(),u=t[a+1].toVector();o[a]=s.cross(u)}o.push(o[0]);var l=t[0].toVector(),c=0;for(a=0;a<i;a++)c+=o[a].angleTo(o[a+1],l);var h=(i*Math.PI-Math.abs(c)-(i-2)*Math.PI)*n*n;return r||t.pop(),h},o.meanOf=function(t){for(var e=new r(0,0,0),n=0;n<t.length;n++)e=e.plus(t[n].toVector());return e.unit().toLatLonS()},o.prototype.equals=function(t){if(!(t instanceof o))throw new TypeError("point is not LatLon object");return this.lat==t.lat&&this.lon==t.lon},o.prototype.toString=function(t,e){return i.toLat(this.lat,t,e)+", "+i.toLon(this.lon,t,e)},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),void 0===Math.sign&&(Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}),t.exports&&(t.exports=o,t.exports.Vector3d=r)},function(t,e,n){"use strict";if(t.exports)var r=n(263);if(t.exports)var i=n(95);function o(t,e,n,r,a,s,u){if(!(this instanceof o))return new o(t,e,n,r,a,s,u);if(void 0===u&&(u=i.datum.WGS84),!(1<=t&&t<=60))throw new Error("Invalid MGRS grid reference (zone â"+t+"â)");if(1!=e.length)throw new Error("Invalid MGRS grid reference (band â"+e+"â)");if(-1==o.latBands.indexOf(e))throw new Error("Invalid MGRS grid reference (band â"+e+"â)");if(1!=n.length)throw new Error("Invalid MGRS grid reference (e100k â"+n+"â)");if(1!=r.length)throw new Error("Invalid MGRS grid reference (n100k â"+r+"â)");this.zone=Number(t),this.band=e,this.e100k=n,this.n100k=r,this.easting=Number(a),this.northing=Number(s),this.datum=u}o.latBands="CDEFGHJKLMNPQRSTUVWXX",o.e100kLetters=["ABCDEFGH","JKLMNPQR","STUVWXYZ"],o.n100kLetters=["ABCDEFGHJKLMNPQRSTUV","FGHJKLMNPQRSTUVABCDE"],r.prototype.toMgrs=function(){if(isNaN(this.zone+this.easting+this.northing))throw new Error("Invalid UTM coordinate â"+this.toString()+"â");var t=this.zone,e=this.toLatLonE(),n=o.latBands.charAt(Math.floor(e.lat/8+10)),r=Math.floor(this.easting/1e5),i=o.e100kLetters[(t-1)%3].charAt(r-1),a=Math.floor(this.northing/1e5)%20,s=o.n100kLetters[(t-1)%2].charAt(a),u=this.easting%1e5,l=this.northing%1e5;return new o(t,n,i,s,u=Number(u.toFixed(6)),l=Number(l.toFixed(6)))},o.prototype.toUtm=function(){for(var t=this.zone,e=this.band,n=this.e100k,a=this.n100k,s=this.easting,u=this.northing,l=e>="N"?"N":"S",c=1e5*(o.e100kLetters[(t-1)%3].indexOf(n)+1),h=1e5*o.n100kLetters[(t-1)%2].indexOf(a),f=8*(o.latBands.indexOf(e)-10),d=1e5*Math.floor(new i(f,0).toUtm().northing/1e5),p=0;p+h+u<d;)p+=2e6;return new r(t,l,c+s,p+h+u,this.datum)},o.parse=function(t){if(!(t=t.trim()).match(/\s/)){var e=t.slice(5);e=e.slice(0,e.length/2)+" "+e.slice(-e.length/2),t=t.slice(0,3)+" "+t.slice(3,5)+" "+e}if(null==(t=t.match(/\S+/g))||4!=t.length)throw new Error("Invalid MGRS grid reference â"+t+"â");var n=t[0],r=n.slice(0,2),i=n.slice(2,3),a=t[1],s=a.slice(0,1),u=a.slice(1,2),l=t[2],c=t[3];return new o(r,i,s,u,l=l.length>=5?l:(l+"00000").slice(0,5),c=c.length>=5?c:(c+"00000").slice(0,5))},o.prototype.toString=function(t){if(t=void 0===t?10:Number(t),-1==[2,4,6,8,10].indexOf(t))throw new Error("Invalid precision â"+t+"â");var e=("00"+this.zone).slice(-2),n=this.band,r=this.e100k,i=this.n100k,o=Math.floor(this.easting/Math.pow(10,5-t/2)),a=Math.floor(this.northing/Math.pow(10,5-t/2));return e+n+" "+r+i+" "+("00000"+o).slice(-t/2)+" "+("00000"+a).slice(-t/2)},t.exports&&(t.exports=o)},function(t,e,n){"use strict";if(t.exports)var r=n(95);function i(t,e){if(!(this instanceof i))return new i(t,e);this.easting=Number(t),this.northing=Number(e)}i.latLonToOsGrid=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");t.datum!=r.datum.OSGB36&&(t=t.convertDatum(r.datum.OSGB36));var e=t.lat.toRadians(),n=t.lon.toRadians(),o=6377563.396,a=6356256.909,s=.9996012717,u=49..toRadians(),l=(-2).toRadians(),c=1-a*a/(o*o),h=(o-a)/(o+a),f=h*h,d=h*h*h,p=Math.cos(e),m=Math.sin(e),v=o*s/Math.sqrt(1-c*m*m),g=o*s*(1-c)/Math.pow(1-c*m*m,1.5),y=v/g-1,b=a*s*(1.0016767257673973*(e-u)-(3*h+3*h*h+21/8*d)*Math.sin(e-u)*Math.cos(e+u)+(15/8*f+15/8*d)*Math.sin(2*(e-u))*Math.cos(2*(e+u))-35/24*d*Math.sin(3*(e-u))*Math.cos(3*(e+u))),_=p*p*p,w=_*p*p,x=Math.tan(e)*Math.tan(e),M=x*x,E=n-l,S=E*E,A=S*E,T=A*E,q=T*E,P=b+-1e5+v/2*m*p*S+v/24*m*_*(5-x+9*y)*T+v/720*m*w*(61-58*x+M)*(q*E),L=4e5+v*p*E+v/6*_*(v/g-x)*A+v/120*w*(5-18*x+M+14*y-58*x*y)*q;return P=Number(P.toFixed(3)),new i(L=Number(L.toFixed(3)),P)},i.osGridToLatLon=function(t,e){if(!(t instanceof i))throw new TypeError("gridref is not OsGridRef object");void 0===e&&(e=r.datum.WGS84);var n=t.easting,o=t.northing,a=6377563.396,s=6356256.909,u=.9996012717,l=49..toRadians(),c=(-2).toRadians(),h=1-s*s/(a*a),f=(a-s)/(a+s),d=f*f,p=f*f*f,m=l,v=0;do{v=s*u*(1.0016767257673973*((m=(o- -1e5-v)/(a*u)+m)-l)-(3*f+3*f*f+21/8*p)*Math.sin(m-l)*Math.cos(m+l)+(15/8*d+15/8*p)*Math.sin(2*(m-l))*Math.cos(2*(m+l))-35/24*p*Math.sin(3*(m-l))*Math.cos(3*(m+l)))}while(o- -1e5-v>=1e-5);var g=Math.cos(m),y=Math.sin(m),b=a*u/Math.sqrt(1-h*y*y),_=a*u*(1-h)/Math.pow(1-h*y*y,1.5),w=b/_-1,x=Math.tan(m),M=x*x,E=M*M,S=1/g,A=b*b*b,T=A*b*b,q=n-4e5,P=q*q,L=P*q,O=P*P,C=L*P,I=c+S/b*q-S/(6*A)*(b/_+2*M)*L+S/(120*T)*(5+28*M+24*E)*C-S/(5040*(T*b*b))*(61+662*M+1320*E+720*(E*M))*(C*P),R=new r((m=m-x/(2*_*b)*P+x/(24*_*A)*(5+3*M+w-9*M*w)*O-x/(720*_*T)*(61+90*M+45*E)*(O*P)).toDegrees(),I.toDegrees(),r.datum.OSGB36);return e!=r.datum.OSGB36&&(R=R.convertDatum(e)),R},i.parse=function(t){var e=(t=String(t).trim()).match(/^(\d+),\s*(\d+)$/);if(e)return new i(e[1],e[2]);if(!(e=t.match(/^[A-Z]{2}\s*[0-9]+\s*[0-9]+$/i)))throw new Error("Invalid grid reference");var n=t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0),r=t.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);n>7&&n--,r>7&&r--;var o=(n-2)%5*5+r%5,a=19-5*Math.floor(n/5)-Math.floor(r/5),s=t.slice(2).trim().split(/\s+/);if(1==s.length&&(s=[s[0].slice(0,s[0].length/2),s[0].slice(s[0].length/2)]),o<0||o>6||a<0||a>12)throw new Error("Invalid grid reference");if(2!=s.length)throw new Error("Invalid grid reference");if(s[0].length!=s[1].length)throw new Error("Invalid grid reference");return s[0]=(s[0]+"00000").slice(0,5),s[1]=(s[1]+"00000").slice(0,5),new i(o+s[0],a+s[1])},i.prototype.toString=function(t){if(t=void 0===t?10:Number(t),isNaN(t)||t%2!=0||t>16)throw new RangeError("Invalid precision â"+t+"â");var e=this.easting,n=this.northing;if(isNaN(e)||isNaN(n))throw new Error("Invalid grid reference");if(0==t){var r=Math.floor(e),i=e-r,o=Math.floor(n),a=n-o;return("000000"+r).slice(-6)+(i>0?i.toFixed(3).slice(1):"")+","+((o<1e6?("000000"+o).slice(-6):o)+(a>0?a.toFixed(3).slice(1):""))}var s=Math.floor(e/1e5),u=Math.floor(n/1e5);if(s<0||s>6||u<0||u>12)return"";var l=19-u-(19-u)%5+Math.floor((s+10)/5),c=5*(19-u)%25+s%5;l>7&&l++,c>7&&c++;var h=String.fromCharCode(l+"A".charCodeAt(0),c+"A".charCodeAt(0));return e=Math.floor(e%1e5/Math.pow(10,5-t/2)),n=Math.floor(n%1e5/Math.pow(10,5-t/2)),h+" "+(e=("00000000"+e).slice(-t/2))+" "+(n=("00000000"+n).slice(-t/2))},t.exports&&(t.exports=i)},function(t,e,n){"use strict";n.r(e);n(265),n(495);var r=n(121),i=n.n(r),o=n(1),a=n(43);n(15);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(t){return"object"==s(t)?null!==t:"function"==typeof t};function v(t,e){return t(e={exports:{}},e.exports),e.exports}var g=0,y=Math.random(),b=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++g+y).toString(36))},_={}.hasOwnProperty,w=function(t,e){return _.call(t,e)},x=function(t){if(!m(t))throw TypeError(t+" is not an object!");return t},M=function(t){try{return!!t()}catch(t){return!0}},E=!M((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),S=v((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),A=S.document,T=m(A)&&m(A.createElement),q=function(t){return T?A.createElement(t):{}},P=!E&&!M((function(){return 7!=Object.defineProperty(q("div"),"a",{get:function(){return 7}}).a})),L=function(t,e){if(!m(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!m(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},O=Object.defineProperty,C={f:E?Object.defineProperty:function(t,e,n){if(x(t),e=L(e,!0),x(n),P)try{return O(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},I=v((function(t){var e=b("meta"),n=C.f,r=0,i=Object.isExtensible||function(){return!0},o=!M((function(){return i(Object.preventExtensions({}))})),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!m(t))return"symbol"==s(t)?t:("string"==typeof t?"S":"P")+t;if(!w(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!w(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return o&&u.NEED&&i(t)&&!w(t,e)&&a(t),t}}})),R=(I.KEY,I.NEED,I.fastKey,I.getWeak,I.onFreeze,v((function(t){var e=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=e)}))),k=(R.version,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}),N=E?function(t,e,n){return C.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},B=v((function(t){var e=S["__core-js_shared__"]||(S["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:R.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),D=B("native-function-to-string",Function.toString),j=v((function(t){var e=b("src"),n=(""+D).split("toString");R.inspectSource=function(t){return D.call(t)},(t.exports=function(t,r,i,o){var a="function"==typeof i;a&&(w(i,"name")||N(i,"name",r)),t[r]!==i&&(a&&(w(i,e)||N(i,e,t[r]?""+t[r]:n.join(String(r)))),t===S?t[r]=i:o?t[r]?t[r]=i:N(t,r,i):(delete t[r],N(t,r,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||D.call(this)}))})),F=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},z=function(t,e,n){if(F(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},U=function t(e,n,r){var i,o,a,s,u=e&t.F,l=e&t.G,c=e&t.P,h=e&t.B,f=l?S:e&t.S?S[n]||(S[n]={}):(S[n]||{}).prototype,d=l?R:R[n]||(R[n]={}),p=d.prototype||(d.prototype={});for(i in l&&(r=n),r)a=((o=!u&&f&&void 0!==f[i])?f:r)[i],s=h&&o?z(a,S):c&&"function"==typeof a?z(Function.call,a):a,f&&j(f,i,a,e&t.U),d[i]!=a&&N(d,i,s),c&&p[i]!=a&&(p[i]=a)};S.core=R,U.F=1,U.G=2,U.S=4,U.P=8,U.B=16,U.W=32,U.U=64,U.R=128;var V=U,G=function(t,e){var n=(R.Object||{})[t]||Object[t],r={};r[t]=e(n),V(V.S+V.F*M((function(){n(1)})),"Object",r)},H=I.onFreeze;G("freeze",(function(t){return function(e){return t&&m(e)?t(H(e)):e}}));var W,Y,X,Z={}.toString,J=function(t){return Z.call(t).slice(8,-1)},K=v((function(t){var e=B("wks"),n=S.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:b)("Symbol."+t))}).store=e})),Q=K("toStringTag"),$="Arguments"==J(function(){return arguments}()),tt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Q))?n:$?J(e):"Object"==(r=J(e))&&"function"==typeof e.callee?"Arguments":r},et=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},nt=function(t,e,n,r){try{return r?e(x(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&x(i.call(t)),e}},rt={},it=K("iterator"),ot=Array.prototype,at=function(t){return void 0!==t&&(rt.Array===t||ot[it]===t)},st=Math.ceil,ut=Math.floor,lt=function(t){return isNaN(t=+t)?0:(t>0?ut:st)(t)},ct=Math.min,ht=function(t){return t>0?ct(lt(t),9007199254740991):0},ft=K("iterator"),dt=R.getIteratorMethod=function(t){if(null!=t)return t[ft]||t["@@iterator"]||rt[tt(t)]},pt=v((function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var s,u,l,c,h=a?function(){return t}:dt(t),f=z(i,o,r?2:1),d=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(at(h)){for(s=ht(t.length);s>d;d++)if((c=r?f(x(u=t[d])[0],u[1]):f(t[d]))===e||c===n)return c}else for(l=h.call(t);!(u=l.next()).done;)if((c=nt(l,f,u.value,r))===e||c===n)return c};r.BREAK=e,r.RETURN=n})),mt=K("species"),vt=function(t,e){var n,r=x(t).constructor;return void 0===r||null==(n=x(r)[mt])?e:F(n)},gt=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},yt=S.document,bt=yt&&yt.documentElement,_t=S.process,wt=S.setImmediate,xt=S.clearImmediate,Mt=S.MessageChannel,Et=S.Dispatch,St=0,At={},Tt=function(){var t=+this;if(At.hasOwnProperty(t)){var e=At[t];delete At[t],e()}},qt=function(t){Tt.call(t.data)};wt&&xt||(wt=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return At[++St]=function(){gt("function"==typeof t?t:Function(t),e)},W(St),St},xt=function(t){delete At[t]},"process"==J(_t)?W=function(t){_t.nextTick(z(Tt,t,1))}:Et&&Et.now?W=function(t){Et.now(z(Tt,t,1))}:Mt?(X=(Y=new Mt).port2,Y.port1.onmessage=qt,W=z(X.postMessage,X,1)):S.addEventListener&&"function"==typeof postMessage&&!S.importScripts?(W=function(t){S.postMessage(t+"","*")},S.addEventListener("message",qt,!1)):W="onreadystatechange"in q("script")?function(t){bt.appendChild(q("script")).onreadystatechange=function(){bt.removeChild(this),Tt.call(t)}}:function(t){setTimeout(z(Tt,t,1),0)});var Pt={set:wt,clear:xt},Lt=Pt.set,Ot=S.MutationObserver||S.WebKitMutationObserver,Ct=S.process,It=S.Promise,Rt="process"==J(Ct);function kt(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=F(e),this.reject=F(n)}var Nt={f:function(t){return new kt(t)}},Bt=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Dt=S.navigator,jt=Dt&&Dt.userAgent||"",Ft=function(t,e,n){for(var r in e)j(t,r,e[r],n);return t},zt=C.f,Ut=K("toStringTag"),Vt=function(t,e,n){t&&!w(t=n?t:t.prototype,Ut)&&zt(t,Ut,{configurable:!0,value:e})},Gt=K("species"),Ht=function(t){var e=S[t];E&&e&&!e[Gt]&&C.f(e,Gt,{configurable:!0,get:function(){return this}})},Wt=K("iterator"),Yt=!1;try{var Xt=[7][Wt]();Xt.return=function(){Yt=!0},Array.from(Xt,(function(){throw 2}))}catch(t){}var Zt,Jt,Kt,Qt,$t=function(t,e){if(!e&&!Yt)return!1;var n=!1;try{var r=[7],i=r[Wt]();i.next=function(){return{done:n=!0}},r[Wt]=function(){return i},t(r)}catch(t){}return n},te=Pt.set,ee=function(){var t,e,n,r=function(){var r,i;for(Rt&&(r=Ct.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Rt)n=function(){Ct.nextTick(r)};else if(!Ot||S.navigator&&S.navigator.standalone)if(It&&It.resolve){var i=It.resolve(void 0);n=function(){i.then(r)}}else n=function(){Lt.call(S,r)};else{var o=!0,a=document.createTextNode("");new Ot(r).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),ne=S.TypeError,re=S.process,ie=re&&re.versions,oe=ie&&ie.v8||"",ae=S.Promise,se="process"==tt(re),ue=function(){},le=Jt=Nt.f,ce=!!function(){try{var t=ae.resolve(1),e=(t.constructor={})[K("species")]=function(t){t(ue,ue)};return(se||"function"==typeof PromiseRejectionEvent)&&t.then(ue)instanceof e&&0!==oe.indexOf("6.6")&&-1===jt.indexOf("Chrome/66")}catch(t){}}(),he=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},fe=function(t,e){if(!t._n){t._n=!0;var n=t._c;ee((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&me(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===e.promise?l(ne("Promise-chain cycle")):(o=he(n))?o.call(n,u,l):u(n)):l(r)}catch(t){c&&!a&&c.exit(),l(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&de(t)}))}},de=function(t){te.call(S,(function(){var e,n,r,i=t._v,o=pe(t);if(o&&(e=Bt((function(){se?re.emit("unhandledRejection",i,t):(n=S.onunhandledrejection)?n({promise:t,reason:i}):(r=S.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=se||pe(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},pe=function(t){return 1!==t._h&&0===(t._a||t._c).length},me=function(t){te.call(S,(function(){var e;se?re.emit("rejectionHandled",t):(e=S.onrejectionhandled)&&e({promise:t,reason:t._v})}))},ve=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),fe(e,!0))},ge=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw ne("Promise can't be resolved itself");(n=he(e))?ee((function(){var i={_w:r,_d:!1};try{n.call(e,z(t,i,1),z(ve,i,1))}catch(t){ve.call(i,t)}})):(r._v=e,r._s=1,fe(r,!1))}catch(t){ve.call({_w:r,_d:!1},t)}}};ce||(ae=function(t){et(this,ae,"Promise","_h"),F(t),Zt.call(this);try{t(z(ge,this,1),z(ve,this,1))}catch(t){ve.call(this,t)}},(Zt=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Ft(ae.prototype,{then:function(t,e){var n=le(vt(this,ae));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=se?re.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&fe(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Kt=function(){var t=new Zt;this.promise=t,this.resolve=z(ge,t,1),this.reject=z(ve,t,1)},Nt.f=le=function(t){return t===ae||t===Qt?new Kt(t):Jt(t)}),V(V.G+V.W+V.F*!ce,{Promise:ae}),Vt(ae,"Promise"),Ht("Promise"),Qt=R.Promise,V(V.S+V.F*!ce,"Promise",{reject:function(t){var e=le(this);return(0,e.reject)(t),e.promise}}),V(V.S+V.F*!ce,"Promise",{resolve:function(t){return function(t,e){if(x(t),m(e)&&e.constructor===t)return e;var n=Nt.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),V(V.S+V.F*!(ce&&$t((function(t){ae.all(t).catch(ue)}))),"Promise",{all:function(t){var e=this,n=le(e),r=n.resolve,i=n.reject,o=Bt((function(){var n=[],o=0,a=1;pt(t,!1,(function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=le(e),r=n.reject,i=Bt((function(){pt(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}});var ye=C.f,be=Function.prototype,_e=/^\s*function ([^ (]*)/;"name"in be||E&&ye(be,"name",{configurable:!0,get:function(){try{return(""+this).match(_e)[1]}catch(t){return""}}});var we=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==J(t)?t.split(""):Object(t)},xe=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},Me=function(t){return we(xe(t))},Ee=Math.max,Se=Math.min,Ae=function(t,e){return(t=lt(t))<0?Ee(t+e,0):Se(t,e)},Te=function(t){return function(e,n,r){var i,o=Me(e),a=ht(o.length),s=Ae(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},qe=K("unscopables"),Pe=Array.prototype;null==Pe[qe]&&N(Pe,qe,{});var Le=function(t){Pe[qe][t]=!0},Oe=Te(!0);V(V.P,"Array",{includes:function(t){return Oe(this,t,arguments.length>1?arguments[1]:void 0)}}),Le("includes");var Ce=K("match"),Ie=function(t){var e;return m(t)&&(void 0!==(e=t[Ce])?!!e:"RegExp"==J(t))},Re=function(t,e,n){if(Ie(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(xe(t))},ke=K("match"),Ne=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ke]=!1,!"/./"[t](e)}catch(t){}}return!0};V(V.P+V.F*Ne("includes"),"String",{includes:function(t){return!!~Re(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}});var Be,De=function(t){return Object(xe(t))},je=[].sort,Fe=[1,2,3];V(V.P+V.F*(M((function(){Fe.sort(void 0)}))||!M((function(){Fe.sort(null)}))||!((Be=je)&&M((function(){Be.call(null)})))),"Array",{sort:function(t){return void 0===t?je.call(De(this)):je.call(De(this),F(t))}});var ze={f:{}.propertyIsEnumerable},Ue=Object.getOwnPropertyDescriptor,Ve={f:E?Ue:function(t,e){if(t=Me(t),e=L(e,!0),P)try{return Ue(t,e)}catch(t){}if(w(t,e))return k(!ze.f.call(t,e),t[e])}},Ge=function(t,e){if(x(t),!m(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},He=Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=z(Function.call,Ve.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return Ge(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),We=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&m(r)&&He&&He(t,r),t},Ye=B("keys"),Xe=function(t){return Ye[t]||(Ye[t]=b(t))},Ze=Te(!1),Je=Xe("IE_PROTO"),Ke=function(t,e){var n,r=Me(t),i=0,o=[];for(n in r)n!=Je&&w(r,n)&&o.push(n);for(;e.length>i;)w(r,n=e[i++])&&(~Ze(o,n)||o.push(n));return o},Qe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),$e=Qe.concat("length","prototype"),tn={f:Object.getOwnPropertyNames||function(t){return Ke(t,$e)}},en="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",nn="["+en+"]",rn=RegExp("^"+nn+nn+"*"),on=RegExp(nn+nn+"*$"),an=function(t,e,n){var r={},i=M((function(){return!!en[t]()||"âÂ"!="âÂ"[t]()})),o=r[t]=i?e(sn):en[t];n&&(r[n]=o),V(V.P+V.F*i,"String",r)},sn=an.trim=function(t,e){return t=String(xe(t)),1&e&&(t=t.replace(rn,"")),2&e&&(t=t.replace(on,"")),t},un=an,ln=Object.keys||function(t){return Ke(t,Qe)},cn=E?Object.defineProperties:function(t,e){x(t);for(var n,r=ln(e),i=r.length,o=0;i>o;)C.f(t,n=r[o++],e[n]);return t},hn=Xe("IE_PROTO"),fn=function(){},dn=function(){var t,e=q("iframe"),n=Qe.length;for(e.style.display="none",bt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),dn=t.F;n--;)delete dn.prototype[Qe[n]];return dn()},pn=Object.create||function(t,e){var n;return null!==t?(fn.prototype=x(t),n=new fn,fn.prototype=null,n[hn]=t):n=dn(),void 0===e?n:cn(n,e)},mn=tn.f,vn=Ve.f,gn=C.f,yn=un.trim,bn=S.Number,_n=bn,wn=bn.prototype,xn="Number"==J(pn(wn)),Mn="trim"in String.prototype,En=function(t){var e=L(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=Mn?e.trim():yn(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),u=0,l=s.length;u<l;u++)if((a=s.charCodeAt(u))<48||a>i)return NaN;return parseInt(s,r)}}return+e};if(!bn(" 0o1")||!bn("0b1")||bn("+0x1")){bn=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof bn&&(xn?M((function(){wn.valueOf.call(n)})):"Number"!=J(n))?We(new _n(En(e)),n,bn):En(e)};for(var Sn,An=E?mn(_n):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Tn=0;An.length>Tn;Tn++)w(_n,Sn=An[Tn])&&!w(bn,Sn)&&gn(bn,Sn,vn(_n,Sn));bn.prototype=wn,wn.constructor=bn,j(S,"Number",bn)}var qn=Array.isArray||function(t){return"Array"==J(t)},Pn=K("species"),Ln=function(t,e){return new(function(t){var e;return qn(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!qn(e.prototype)||(e=void 0),m(e)&&null===(e=e[Pn])&&(e=void 0)),void 0===e?Array:e}(t))(e)},On=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||Ln;return function(e,l,c){for(var h,f,d=De(e),p=we(d),m=z(l,c,3),v=ht(p.length),g=0,y=n?u(e,v):r?u(e,0):void 0;v>g;g++)if((s||g in p)&&(f=m(h=p[g],g,d),t))if(n)y[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:y.push(h)}else if(o)return!1;return a?-1:i||o?o:y}},Cn=On(5),In=!0;"find"in[]&&Array(1).find((function(){In=!1})),V(V.P+V.F*In,"Array",{find:function(t){return Cn(this,t,arguments.length>1?arguments[1]:void 0)}}),Le("find");var Rn=function(t,e){return{value:e,done:!!t}},kn={};N(kn,K("iterator"),(function(){return this}));var Nn=function(t,e,n){t.prototype=pn(kn,{next:k(1,n)}),Vt(t,e+" Iterator")},Bn=Xe("IE_PROTO"),Dn=Object.prototype,jn=Object.getPrototypeOf||function(t){return t=De(t),w(t,Bn)?t[Bn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Dn:null},Fn=K("iterator"),zn=!([].keys&&"next"in[].keys()),Un=function(){return this},Vn=function(t,e,n,r,i,o,a){Nn(n,e,r);var s,u,l,c=function(t){if(!zn&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f="values"==i,d=!1,p=t.prototype,m=p[Fn]||p["@@iterator"]||i&&p[i],v=m||c(i),g=i?f?c("entries"):v:void 0,y="Array"==e&&p.entries||m;if(y&&(l=jn(y.call(new t)))!==Object.prototype&&l.next&&(Vt(l,h,!0),"function"!=typeof l[Fn]&&N(l,Fn,Un)),f&&m&&"values"!==m.name&&(d=!0,v=function(){return m.call(this)}),(zn||d||!p[Fn])&&N(p,Fn,v),rt[e]=v,rt[h]=Un,i)if(s={values:f?v:c("values"),keys:o?v:c("keys"),entries:g},a)for(u in s)u in p||j(p,u,s[u]);else V(V.P+V.F*(zn||d),e,s);return s},Gn=Vn(Array,"Array",(function(t,e){this._t=Me(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Rn(1)):Rn(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");rt.Arguments=rt.Array,Le("keys"),Le("values"),Le("entries");for(var Hn=K("iterator"),Wn=K("toStringTag"),Yn=rt.Array,Xn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Zn=ln(Xn),Jn=0;Jn<Zn.length;Jn++){var Kn,Qn=Zn[Jn],$n=Xn[Qn],tr=S[Qn],er=tr&&tr.prototype;if(er&&(er[Hn]||N(er,Hn,Yn),er[Wn]||N(er,Wn,Qn),rt[Qn]=Yn,$n))for(Kn in Gn)er[Kn]||j(er,Kn,Gn[Kn],!0)}var nr={};nr[K("toStringTag")]="z",nr+""!="[object z]"&&j(Object.prototype,"toString",(function(){return"[object "+tt(this)+"]"}),!0),G("keys",(function(){return function(t){return ln(De(t))}}));var rr,ir=/"/g;(rr={}).sub=function(t){return function(){return t(this,"sub","","")}}((function(t,e,n,r){var i=String(xe(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(ir,"&quot;")+'"'),o+">"+i+"</"+e+">"})),V(V.P+V.F*M((function(){var t="".sub('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",rr);i.a.randomBytes;for(var or=[],ar=0;ar<256;++ar)or[ar]=(ar+256).toString(16).substr(1);function sr(t){return/^[\da-f]{24}$/i.test(t)}function ur(t,e){t.indexOf(e)<0&&t.push(e)}function lr(t,e){for(var n=Object.keys(e),r=0,i=n.length;r<i;++r){var o=n[r];o in t||(t[o]=e[o])}}function cr(t,e,n){Object.defineProperty(t.prototype,e,{configurable:!1,enumerable:!1,get:n,set:void 0})}function hr(t,e,n){cr(t,e,(function(){var t=this._cache[e];return void 0===t&&(t=this._cache[e]=n.call(this)),t}))}function fr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function dr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function pr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function mr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function vr(t,e){this._mappedin=t,this._data=e,this._cache={},this._scale=function(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale);var e;try{var n=t.georeference[0],r=t.georeference[2],i=new a.LatLonSpherical(n.target.x,n.target.y),o=new a.LatLonSpherical(r.target.x,r.target.y),s=i.distanceTo(o),u=n.control.x-r.control.x,l=n.control.y-r.control.y;e=Math.sqrt(u*u+l*l)/s}catch(n){e=1,console.warn(n),console.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e}(this._data),lr(this,e)}function gr(t,e,n){this._mappedin=t,this._data=e,this._index=n,this._cache={},lr(this,e)}function yr(t,e,n,r,i,o){var a,s=i||{};null==t.venue.navigationGraph&&(t.venue.navigationGraph=new wr(t.nodes,t.vortexes));var u,l,c,h=t.venue.navigationGraph,f=s.accessible||!1;r instanceof dr?(u=h.aStar(e,r.nodes,f),a=new xr(h,u,n,r,t.nodes)):r instanceof gr?(c=r.locations.length>0?r.locations[0]:null,u=h.aStar(e,[r],f),a=new xr(h,u,n,c,t.nodes)):r instanceof Pr?(u=h.aStar(e,r.entrances,f),a=new xr(h,u,n,c=r.locations.length>0?r.locations[0]:null,t.nodes)):r instanceof Array&&r.length>0&&r[0]instanceof gr?(u=h.aStar(e,r,f),a=new xr(h,u,n,null,t.nodes)):l=new TypeError("destination must be a MappedinLocation, MappedinNode, MappedinPolygon or [MappedinNode]"),a&&0==a.path.length&&(l=new Error("could not find a path to destination")),o(l,a)}function br(t,e,n,r,i){var o,a,s=(r||{}).accessible||!1;n instanceof dr?o=t.aStar(e,n.nodes,s):n instanceof gr?o=t.aStar(e,[n],s):n instanceof Pr?o=t.aStar(e,n.entrances,s):n instanceof Array&&n.length>0&&n[0]instanceof gr?o=t.aStar(e,n,s):a=new TypeError("destination must be a MappedinLocation, MappedinNode, MappedinPolygon or [MappedinNode]");var u=0,l=0;if(o&&o.length>0)for(var c=0;c<o.length;c++){var h=o[c];u+=h.getDistance(),l+=h.weight*h.getDistance()}else a=new Error("could not find a path to destination");i(a,{cost:l,distance:u})}function _r(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.origin=t,this.destination=e,this.vortex=i,null!=i){var o=t._mappedin._mapsById[t.map].elevation,a=e._mappedin._mapsById[e.map].elevation,s=Math.abs(o-a);this.distance=0,n=void 0!==i.weight&&i.weight>0?i.weight:"elevator"===i.type?2e3:1e3,r=i.multiplier&&i.multiplier>=1?i.multiplier:1,this.weight=s*r+n}else this.distance=this.origin.getDistance(this.destination),n=e.weight&&e.weight>=0?e.weight:0,r=e.multiplier&&e.multiplier>=1?e.multiplier:1,this.weight=this.distance*r+n}function wr(t,e){var n=[];t.forEach((function(t){n[t._index]=[];for(var e=t.paths.length,r=t.paths,i=0;i<e;i++){var o=r[i];n[t._index].push(new _r(t,o))}})),e.forEach((function(t){var e=t.nodes,r=0;if(null!=e)for(;r<e.length-1;){var i=t._mappedin._nodesById[e[r]];if(null!=i)for(var o=r+1;o<e.length;){var a=t._mappedin._nodesById[e[o]];null!=a&&(n[i._index].push(new _r(i,a,t)),n[a._index].push(new _r(a,i,t))),o++}r++}})),this.edges=n}function xr(t,e,n,r,i){if(null!=e&&e.length>0){for(var o=0,a=e.length,s=new Array(a+1),u=0;u<a;u++)s[u]=e[u].origin;s[a]=e[a-1].destination;for(var l=[],c=null,h=null,f=0;f<a;f++){var d,p=e[f],m=p.origin,v=p.destination;if(o+=p.getDistance(),0==f&&(d=null!=n?"Depart from "+n.name:"Depart from current location",l.push(new Ar(m,{type:Tr.DEPARTURE},n,d))),null!=p.vortex){var g=m._mappedin._mapsById[m.map],y=m._mappedin._mapsById[v.map];d="Take "+p.vortex.name+" to "+y.name,l.push(new Ar(m,{type:Tr.TAKEVORTEX,fromMap:g,toMap:y},p.vortex,d))}else{var b=.1*Math.PI;if(null!=c&&null!=h){for(var _=t.edges[m._index],w=[],x=0;x<_.length;x++){var M=_[x];M.destination!=c&&M.destination!=p.destination&&w.push(M)}if(w.length>0){for(var E=-Er(h.getAngle(),p.getAngle()),S=Math.PI,A=0;A<w.length;A++){var T=w[A],q=-Er(p.getAngle(),T.getAngle());S=Math.min(S,Math.abs(q))}if(null!=h.vortex)d="Exit out of "+h.vortex.type,l.push(new Ar(m,{type:Tr.TURN,bearing:"Straight",referencePosition:"At"},h.vortex,d));else if(Math.abs(E)>=b||Math.abs(S)<=b){var P,L;E<=-Math.PI/4?(P=qr.RIGHT,L="Turn right"):E<=-b?(P=qr.SLIGHTRIGHT,L="Turn slightly right"):E<=b?(P=qr.STRAIGHT,L="Head straight"):E<=Math.PI/4?(P=qr.SLIGHTLEFT,L="Turn slightly left"):(P=qr.LEFT,L="Turn left");var O;if(null!=(O=i.includes(m)&&null!=m.locations[0]?m.locations[0]:Mr(t,h,.5*Math.PI,10))){var C=L+" at "+O.name;(d=new Ar(m,{type:Tr.TURN,bearing:P,referencePosition:"At"},O,C)).type=P,l.push(d)}else d=new Ar(m,{type:Tr.TURN,bearing:P,referencePosition:"At"},null,L),l.push(d)}}}}f==a-1&&(d=null!=r?"Arrive at "+r.name:"Arrive at destination",l.push(new Ar(m,{type:Tr.ARRIVAL},r,d))),c=m,h=p}for(var I=[],R=null,k=l.length-1;k>=0;k--){var N=l[k];N.action.type==Tr.TAKEVORTEX?(R=N.node,I.unshift(N)):N.action.type==Tr.TURN&&null!=R?N.node.getDistance(R)>5&&I.unshift(N):I.unshift(N)}this.distance=o,this.path=s,this.instructions=I,this.directions=I}else this.distance=0,this.path=[],this.instructions=[],this.directions=I}function Mr(t,e,n,r){for(var i=0,o=0,a=e;Math.abs(i)<n&&o<r;){for(var s=t.edges[a.destination._index],u=null,l=0,c=0;c<s.length;c++){var h=s[c];if(h.getDistance()>0)if(null!=u){var f=-Er(a.getAngle(),h.getAngle());Math.abs(f)<Math.abs(l)&&(u=h,l=f)}else u=h,l=-Er(a.getAngle(),h.getAngle())}if(null==u)return null;if(Math.abs(l)>=n)return null;if(i+=l,o+=u.getDistance(),Math.abs(i)>=n||o>r)return null;if(null!=u.destination.locations[0])return u.destination.locations[0];a=u}return null}function Er(t,e){return((e-t+Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)-Math.PI}fr._fetch=function(t,e){var n={fields:t._things.categories,venue:t._venue};t._getArray("category",n,(function(n,r){if(n)return e(n);for(var i=0,o=r.length;i<o;++i)r[i]=new fr(t,r[i]);e(null,r)}))},hr(fr,"locations",(function(){for(var t=[],e=this._mappedin.locations,n=this._data.id,r=0,i=e.length;r<i;++r){var o=e[r],a=o._data.categories;if(Array.isArray(a))for(var s=0,u=a.length;s<u;++s)if(a[s]===n){t.push(o);break}}return t})),dr._fetch=function(t,e){var n=t._things.locations.slice();t._things.categories&&ur(n,"categories"),t._things.nodes&&ur(n,"nodes"),t._things.polygons&&ur(n,"polygons"),t._things.locationStates&&ur(n,"states");var r={fields:n,venue:t._venue};t._getArray("location",r,(function(n,r){if(n)return e(n);t._includeHidden||(r=r.filter((function(t){return!t.hidden})));for(var i=0,o=r.length;i<o;++i)r[i]=new dr(t,r[i]);e(null,r)}))},hr(dr,"polygons",(function(){var t=[],e=this._data.polygons,n=this._mappedin._polygonsById;if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r){var o=n[e[r].id];null!=o&&o.geometry.visible&&t.push(o)}return t})),hr(dr,"rank",(function(){var t=this,e=this._mappedin._data.locationRankings;if(!e||!e.locations)return null;var n=e.locations.find((function(e){return e.ids.find((function(e){return e===t.id}))}));return n?n.score:null})),hr(dr,"nodes",(function(){var t=[],e=this._data.nodes,n=this._mappedin._nodesById;if(e)for(var r=0,i=e.length;r<i;++r){var o=n[e[r].node];null!=o&&t.push(o)}return t})),hr(dr,"nodeOperationHours",(function(){return this._data.nodes.reduce((function(t,e){return t[e.node]=e.operationHours,t}),{})})),hr(dr,"parent",(function(){var t,e=this._mappedin._locationsById,n=this._data.parent;return void 0!==n&&(t=e[n]),t})),hr(dr,"state",(function(){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(t.states){var r=n||Date.now(),i=t.states.find((function(t){var e=new Date(t.start||0),n=new Date(t.end||"9999-12-31T00:00:00.000Z");return e<r&&n>r}));if(i)return e.find((function(t){return t.value===i.type}))}}(this._data,this._mappedin.locationStates)})),dr.prototype.directionsTo=function(t,e,n){var r=e||{};if((null!=r.directionsProvider?r.directionsProvider:Sr.ONLINE)==Sr.OFFLINE)yr(this._mappedin,this.nodes,this,t,e,n);else{var i={originLocation:this._data.id,destination:void 0,location:void 0,perspective:this._mappedin._do2D&&this._mappedin._perspective||void 0,accessible:null!=e&&r.accessible||void 0};if(t instanceof dr)i.location=t._data.id;else{if(!(t instanceof gr))throw new TypeError("destination must be a [MappedinLocation,MappedinNode]");i.destination=t._data.id}this._mappedin._getObject("directions",i,n)}},dr.prototype.distanceTo=function(t,e,n){null==this._mappedin.venue.navigationGraph&&(this._mappedin.venue.navigationGraph=new wr(this._mappedin.nodes,this._mappedin.vortexes)),br(this._mappedin.venue.navigationGraph,this.nodes,t,e,n)},pr._fetch=function(t,e){var n=t._things.vortexes.slice();["name","type","accessible","weight","multiplier","nodes"].forEach((function(t){ur(n,t)}));var r={fields:n,venue:t._venue};t._getArray("vortex",r,(function(n,r){if(n)return e(n);for(var i=0,o=r.length;i<o;++i)r[i]=new pr(t,r[i]);e(null,r)}))},mr._fetch=function(t,e){var n={fields:t._things.mapGroups.slice(),venue:t._venue};t._getArray("map-group",n,(function(n,r){if(n)return e(n);for(var i=0,o=r.length;i<o;++i)r[i]=new mr(t,r[i]);e(null,r)}))},hr(mr,"maps",(function(){for(var t=[],e=this._mappedin.maps,n=this._data.id,r=0,i=e.length;r<i;++r){var o=e[r];o._data.group===n&&t.push(o)}return t})),vr._fetch=function(t,e){var n=t._things.maps.slice();t._perspective&&ur(n,"perspectives"),t._things.mapGroups&&ur(n,"group"),ur(n,"elevation"),ur(n,"x_scale"),ur(n,"scale");var r={fields:n,perspective:t._perspective||void 0,venue:t._venue};t._getArray("map",r,(function(r,i){if(r)return e(r);for(var o=function(t){var e=u.layers.find((function(e){return e.id===t}));e?e.visible=!0:u.layers.push({id:t,visible:!0})},a=0,s=i.length;a<s;++a){var u=i[a];if(t._perspective){var l=u.perspective;null!=l&&(u.perspectiveId=l.id,t._do2D?(n.indexOf("width")>-1&&(u.width=l.size&&l.size.width||l.width),n.indexOf("height")>-1&&(u.height=l.size&&l.size.height||l.height),n.indexOf("tiles")>-1&&(u.tiles=l.tiles),n.indexOf("original")>-1&&(u.original=l.original)):(n.indexOf("scene")>-1&&(u.scene=l.scene),l.layers?(u.layers.forEach((function(t){t.visible=!1})),l.layers.forEach(o)):u.layers.forEach((function(t){t.visible=!0})))),delete u.perspective}i[a]=new vr(t,u)}e(null,i)}))},hr(vr,"polygons",(function(){for(var t=[],e=this._mappedin.polygons,n=this._data.id,r=0,i=e.length;r<i;++r){var o=e[r];o.map===n&&t.push(o)}return t})),hr(vr,"mapGroup",(function(){var t=this._data.group;return t&&this._mappedin._mapGroupsById[t]||null})),gr._fetch=function(t,e){var n=t._things.nodes.slice();t._things.maps&&ur(n,"map"),["weight","multiplier","accessible"].forEach((function(t){ur(n,t)}));var r={fields:n,perspective:t._do2D&&t._perspective||void 0,venue:t._venue};t._getArray("node",r,(function(n,r){if(n)return e(n);for(var i=0,o=r.length;i<o;++i)r[i]=new gr(t,r[i],i);e(null,r)}))},hr(gr,"paths",(function(){var t=[],e=this._mappedin._nodesById,n=this._data.paths;if(Array.isArray(n))for(var r=0,i=n.length;r<i;++r){var o=e[n[r].node];null!=o&&t.push(o)}return t})),hr(gr,"locations",(function(){for(var t=[],e=this._mappedin.locations,n=this._data.id,r=0,i=e.length;r<i;++r){var o=e[r],a=o._data.nodes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;++s)if(a[s].node===n){t.push(o);break}}return t})),gr.prototype.getAngle=function(t){var e=this.x-t.x,n=this.y-t.y;return(Math.atan2(n,e)+2.5*Math.PI)%(2*Math.PI)},gr.prototype.getDistance=function(t){var e,n=this.x-t.x,r=this.y-t.y,i=n*n+r*r;return e=null==this._mappedin._mapsById[this.map]?1:this._mappedin._mapsById[this.map]._scale,Math.sqrt(i)/e},gr.prototype.getShortestEuclideanDistance=function(t){var e=this,n=Number.MAX_VALUE;return t.forEach((function(t){var r=e.getDistance(t);n>r&&(n=r)})),n},gr.prototype.directionsTo=function(t,e,n){var r=e||{};if((null!=r.directionsProvider?r.directionsProvider:Sr.ONLINE)==Sr.OFFLINE){var i=this.locations.length>0?this.locations[0]:null;yr(this._mappedin,[this],i,t,e,n)}else{var o={origin:this._data.id,destination:void 0,location:void 0,perspective:this._mappedin._do2D&&this._mappedin._perspective||void 0,accessible:null!=e&&r.accessible||void 0};if(t instanceof dr)o.location=t._data.id;else{if(!(t instanceof gr))throw new TypeError("destination must be a [MappedinLocation,MappedinNode]");o.destination=t._data.id}this._mappedin._getObject("directions",o,n)}},gr.prototype.distanceTo=function(t,e,n){null==this._mappedin.venue.navigationGraph&&(this._mappedin.venue.navigationGraph=new wr(this._mappedin.nodes,this._mappedin.vortexes)),br(this._mappedin.venue.navigationGraph,[this],t,e,n)},_r.prototype.getAngle=function(){return this.origin.getAngle(this.destination)},_r.prototype.getDistance=function(){return this.distance},wr.prototype.aStar=function(t,e,n){if(0==t.length||0==e.length)return null;var r=[],i={},o={};for(t.forEach((function(t){var n=t.getShortestEuclideanDistance(e);r.push({origin:t,priority:n});var a=t.id;i[a]=null,o[a]=0})),r.sort((function(t,e){return t.priority-e.priority}));r.length>0;){var a=r[0];if(e.includes(a.origin)){for(var s=[],u=i[a.origin.id];null!=u;){s.push(u);var l=i[u.origin.id];u=null!=l?l:null}return s.reverse()}for(var c=0;c<this.edges[a.origin._index].length;c++){var h=this.edges[a.origin._index][c];if(!(n&&null!=h.vortex&&!1===h.vortex.accessible||n&&(!1===h.origin.accessible||!1===h.destination.accessible))){var f=o[a.origin.id]+h.weight;if(null==o[h.destination.id]||f<o[h.destination.id]){o[h.destination.id]=f;var d=f+h.destination.getShortestEuclideanDistance(e);r.push({origin:h.destination,priority:d}),i[h.destination.id]=h}}}r.splice(0,1),r.sort((function(t,e){return t.priority-e.priority}))}return null};var Sr={ONLINE:"online",OFFLINE:"offline"};function Ar(t,e,n,r){this.node=t,this.action=e,this.atLocation=n,this.instruction=r}var Tr={DEPARTURE:"Departure",TAKEVORTEX:"TakeVortex",TURN:"Turn",ARRIVAL:"Arrival"},qr={STRAIGHT:"Straight",RIGHT:"Right",SLIGHTRIGHT:"SlightRight",LEFT:"Left",SLIGHTLEFT:"SlightLeft"};function Pr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function Lr(t,e){this._mappedin=t,this._data=e,this._cache={},this.navigationGraph=null,lr(this,e)}function Or(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function Cr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function Ir(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function Rr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}function kr(t,e){this._mappedin=t,this._data=e,this._cache={},lr(this,e)}Pr._fetch=function(t,e){var n=t._things.polygons.slice();t._things.maps&&ur(n,"map"),t._things.nodes&&ur(n,"entrances");var r={fields:n,perspective:t._do2D&&t._perspective||void 0,venue:t._venue};t._getArray("polygon",r,(function(n,r){if(n)return e(n);var i=r.filter((function(t){return t.geometry.visible})).map((function(e){return new Pr(t,e)}));e(null,i)}))},hr(Pr,"locations",(function(){for(var t=[],e=this._mappedin.locations,n=this._data.id,r=0,i=e.length;r<i;++r){var o=e[r],a=o._data.polygons;if(Array.isArray(a))for(var s=0,u=a.length;s<u;++s)if(a[s].id===n){t.push(o);break}}return t})),hr(Pr,"entrances",(function(){var t=[],e=this._data.entrances,n=this._mappedin._nodesById;if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r){var o=n[e[r].id];null!=o&&t.push(o)}return t})),hr(Pr,"rank",(function(){var t=this,e=this._mappedin._data.polygonRankings;if(!e||!e.polygons)return null;var n=e.polygons.find((function(e){return e.polygonId===t.id}));return n?{score:n.score,node:n.entranceNodeId}:null})),Pr.prototype.directionsTo=function(t,e,n){var r=e||{};if((null!=r.directionsProvider?r.directionsProvider:Sr.ONLINE)==Sr.OFFLINE){var i=this.locations.length>0?this.locations[0]:null;yr(this._mappedin,this.entrances,i,t,e,n)}else{var o={originLocation:this._data.id,destination:void 0,location:void 0,perspective:this._mappedin._do2D&&this._mappedin._perspective||void 0,accessible:r.accessible||void 0};if(t instanceof dr)o.location=t._data.id;else{if(!(t instanceof gr))throw new TypeError("destination must be a [MappedinLocation,MappedinNode]");o.destination=t._data.id}this._mappedin._getObject("directions",o,n)}},Pr.prototype.distanceTo=function(t,e,n){null==this._mappedin.venue.navigationGraph&&(this._mappedin.venue.navigationGraph=new wr(this._mappedin.nodes,this._mappedin.vortexes)),br(this._mappedin.venue.navigationGraph,this.entrances,t,e,n)},Lr._fetch=function(t,e){var n={fields:t._things.venue,slug:t._venue,limit:1};t._getArray("venue",n,(function(n,r){if(n)return e(n);if(r.length<1)e(new Error("venue not found"));else{var i=new Lr(t,r[0]);e(null,i)}}))},Or._fetch=function(t,e){var n={fields:t._things.themes.slice(),venue:t._venue};t._getArray("apollo-theme",n,(function(n,r){if(n)return e(n);for(var i=0;i<r.length;++i)r[i]=new Or(t,r[i]);e(null,r)}))},Cr._fetch=function(t,e){var n=t._things.events.slice();t._things.locations&&ur(n,"location");var r={fields:n,venue:t._venue,activeAtOrAfter:Date.now()};t._getArray("event",r,(function(n,r){if(n)return e(n);for(var i=0;i<r.length;++i)r[i]=new Cr(t,r[i]);e(null,r)}))},hr(Cr,"location",(function(){var t=null,e=this._mappedin._locationsById,n=this._data.location;if(null!=n){var r=e[n];null!=r&&(t=r)}return t})),Ir._fetch=function(t,e){var n={fields:t._things.locationStates.slice(),venue:t._venue};t._getArray("location-state",n,(function(n,r){if(n)return e(n);for(var i=0,o=r.length;i<o;++i)r[i]=new Ir(t,r[i]);e(null,r)}))},Rr._fetch=function(t,e){t._getObject("smart-labels/location-label-ranking",{venue:t._venue},(function(n,r){if(n)return e(n);r=new Rr(t,r),e(null,r)}),!0)},kr._fetch=function(t,e){t._getObject("smart-labels/polygon-label-ranking",{venue:t._venue},(function(n,r){if(n)return e(n);r=new kr(t,r),e(null,r)}),!0)};var Nr={categories:fr,locations:dr,vortexes:pr,maps:vr,nodes:gr,polygons:Pr,venue:Lr,events:Cr,mapGroups:mr,themes:Or,locationStates:Ir,locationRankings:Rr,polygonRankings:kr};function Br(t){var e="https://api-gateway.mappedin.com/public/1/",n="https://api-gateway.mappedin.com/analytics/";t.noAuth||!t.clientId||sr(t.clientId)||(e="https://web-proxy.mappedin.com/1/",n=void 0),this._headers=t.headers||{},this._accessToken=t.accessToken||null,this._clientId=t.clientId||null,this._clientSecret=t.clientSecret||null,this._baseUrl=t.baseUrl||e,this._supplementaryUrl=t.baseUrl||n,this._includeHidden=null==t.includeHidden||t.includeHidden,this._baseUrl.includes("gateway")&&(this._apiGateway=!0),this._perspective=t.perspective||null,this._language=t.language||null,this._things=t.things||{},this._venue=t.venue||null,this._do2D=t.do2D||!1,this._data={},this._cache={},this._authorization=null,t.noAuth||(this._accessToken?this._authorization="Bearer "+this._accessToken:this._clientId&&this._clientSecret&&(this._authorization="Basic "+btoa(this._clientId+":"+this._clientSecret)))}function Dr(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";if(null!=t)for(var r="?",i=e?Object.keys(t).filter((function(t){return!["slug","venue"].includes(t)})):Object.keys(t),o=0,a=i.length;o<a;++o){var s=i[o],u=t[s];null!=u&&(n+=r+encodeURIComponent(s)+"="+encodeURIComponent(u),r="&")}return n}Br.prototype._getJSONPromise=function(t,e){var n=this._buildRequestOptions(e),r=e.supplementary;n.language&&(t+="&lang="+encodeURIComponent(n.language));var i=this._headers;i["Content-Type"]="text/json",this._authorization&&(i.Authorization=this._authorization),n.language&&(i["Accept-Language"]=n.language);var o={method:"GET",headers:i};return new Promise((function(e,n){var i=function(t){r?e({}):n(t)};fetch(t,o).then((function(t){return t.ok||i(new Error(t.status+" "+t.statusText)),t.json()})).then(e).catch(i)}))},Br.prototype._buildRequestOptions=function(t){var e={language:this._language,clientId:this._clientId,clientSecret:this._clientSecret};return t&&t.supplementary&&delete e.language,e},Br.prototype._buildUrl=function(t,e,n){return n?"".concat(this._supplementaryUrl).concat(t,"?venue=").concat(e.venue||e.slug):this._apiGateway?"".concat(this._baseUrl).concat(t,"/").concat(e.venue||e.slug)+Dr(e,this._apiGateway):this._baseUrl+t+Dr(e)},Br.prototype._getObject=function(t,e,n,r){var i=this._buildUrl(t,e,r);this._getJSONPromise(i,{supplementary:r}).then((function(t){Array.isArray(t)?1===t.length?n(null,t[0]):n(new Error("invalid response object")):n(null,t)})).catch((function(t){n(t)}))},Br.prototype._getArray=function(t,e,n){var r=this._buildUrl(t,e);this._getJSONPromise(r,{}).then((function(t){n(null,t)})).catch((function(t){n(t)}))},Object.keys(Nr).forEach((function(t){cr(Br,t,(function(){var e=this._data[t];if(void 0===e)throw new Error(t+" were not fetched");return e}))})),Object.keys(Nr).forEach((function(t){hr(Br,"_"+t+"ById",(function(){var e=this._data[t];if(void 0===e)throw new Error(t+": not fetched");if(!Array.isArray(e))throw new TypeError(t+": not an Array");for(var n=Object.create(null),r=0,i=e.length;r<i;++r){var o=e[r],a=o.id;null!=a&&(n[a]=o)}return n})),hr(Br,"_"+t+"ByExternalId",(function(){var e=this._data[t];if(void 0===e)throw new Error(t+": not fetched");if(!Array.isArray(e))throw new TypeError(t+": not an Array");for(var n=Object.create(null),r=0,i=e.length;r<i;++r){var o=e[r],a=o.externalId;null!=a&&(n[a]=o)}return n}))}));var jr={CATEGORY:"categories",EVENT:"events",LOCATION:"locations",MAPGROUP:"mapGroups",MAP:"maps",NODE:"nodes",POLYGON:"polygons",VORTEX:"vortexes"};function Fr(t){return"string"==typeof t&&t.length>0}Object.freeze(jr),Br.prototype.getCollectionItemById=function(t,e){var n=this["_"+jr[t]+"ById"];return null!=n&&null!=n[e]||null!=(n=this["_"+jr[t]+"ByExternalId"])&&null!=n[e]?n[e]:null},Br.prototype._fetchAll=function(t){var e=!1;"vortexes"in this._things||(this._things.vortexes=["name","type","accessible","weight","multiplier","nodes"]),"locationStates"in this._things||(this._things.locationStates=["name","id","value"]),sr(this._clientId)||(this._things.polygonRankings&&delete this._things.polygonRankings,this._things.locationRankings&&delete this._things.locationRankings);var n=this._things,r=Object.keys(n),i=r.length,o=0;function a(n,r,a){if(!e){if(r)return e=!0,r.message+=" (Fetching ".concat(n," failed)"),void t(r);this._data[n]=a,++o>=i&&(e=!0,t())}}for(var s=0,u=r.length;s<u;++s){var l=r[s];Nr[l]._fetch(this,a.bind(this,l))}i<=0&&setTimeout(t,0)};var zr="TEST",Ur="3D",Vr="2D";function Gr(t,e,n){e!=zr?(t.things.venue=t.things.venue||[],t.things.venue.push("slug","defaultMap"),t.things.nodes=t.things.nodes||[],t.things.nodes.push("x","y","paths","map"),t.things.polygons=t.things.polygons||[],t.things.locations=t.things.locations||[],t.things.locations.push("sortOrder","parent","showSmartLabelWhenImagePresent","hidden"),t.things.maps=t.things.maps||[],t.things.maps.push("height","width","georeference"),e==Vr?(t.perspective=t.perspective2D||t.perspective||"Perspective",t.things.maps.push("tiles","perspectives"),t.things.polygons.push("vertexes","geometry"),t.do2D=!0):e==Ur&&(t.perspective=t.perspective3D||t.perspective||void 0,t.things.maps.push("scene","layers"),t.things.polygons.push("canvasBounds","map","image","perspectives","material","holes","label","geometry"),t.do2D=!1),function(t,e){if(!t)throw new TypeError("options must be an Object");if(!(Fr(t.clientId)&&Fr(t.clientSecret)||Fr(t.accessToken)||t.noAuth))throw new Error("{clientId,clientSecret} must be a String");if(void 0!==t.perspective&&!Fr(t.perspective))throw new Error("perspective must be a String");if(void 0!==t.language&&!Fr(t.language))throw new Error("language must be a String");if(!function(t){if(null==t||"object"!==u(t))return!1;for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=t[e[n]];if(!Array.isArray(i))return!1;for(var o=0,a=i.length;o<a;++o)if(!Fr(i[o]))return!1}return!0}(t.things))throw new Error("things must be an Object of [Array of String]");if(!Fr(t.venue))throw new Error("venue must be a String");var n=new Br(t);n._fetchAll((function(t){if(t)return e(t);e(null,n)}))}(t,n)):console.error("You need to run the 3D test, or call force3D or force2D first.")}var Hr=ze.f,Wr=(!1,function(t){for(var e,n=Me(t),r=ln(n),i=r.length,o=0,a=[];i>o;)e=r[o++],E&&!Hr.call(n,e)||a.push(n[e]);return a});V(V.S,"Object",{values:function(t){return Wr(t)}});var Yr=Object.getOwnPropertySymbols,Xr=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function Jr(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}})()&&Object.assign;new RegExp("%[a-f0-9]{2}","gi"),new RegExp("(%[a-f0-9]{2})+","gi");var Kr="".startsWith;V(V.P+V.F*Ne("startsWith"),"String",{startsWith:function(t){var e=Re(this,t,"startsWith"),n=ht(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Kr?Kr.call(e,r,n):e.slice(n,n+r.length)===r}});var Qr={f:K},$r=C.f,ti=function(t){var e=R.Symbol||(R.Symbol=S.Symbol||{});"_"==t.charAt(0)||t in e||$r(e,t,{value:Qr.f(t)})};ti("asyncIterator");var ei={f:Object.getOwnPropertySymbols},ni=tn.f,ri={}.toString,ii="object"==("undefined"==typeof window?"undefined":s(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],oi={f:function(t){return ii&&"[object Window]"==ri.call(t)?function(t){try{return ni(t)}catch(t){return ii.slice()}}(t):ni(Me(t))}},ai=I.KEY,si=Ve.f,ui=C.f,li=oi.f,ci=S.Symbol,hi=S.JSON,fi=hi&&hi.stringify,di=K("_hidden"),pi=K("toPrimitive"),mi={}.propertyIsEnumerable,vi=B("symbol-registry"),gi=B("symbols"),yi=B("op-symbols"),bi=Object.prototype,_i="function"==typeof ci&&!!ei.f,wi=S.QObject,xi=!wi||!wi.prototype||!wi.prototype.findChild,Mi=E&&M((function(){return 7!=pn(ui({},"a",{get:function(){return ui(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=si(bi,e);r&&delete bi[e],ui(t,e,n),r&&t!==bi&&ui(bi,e,r)}:ui,Ei=function(t){var e=gi[t]=pn(ci.prototype);return e._k=t,e},Si=_i&&"symbol"==s(ci.iterator)?function(t){return"symbol"==s(t)}:function(t){return t instanceof ci},Ai=function t(e,n,r){return e===bi&&t(yi,n,r),x(e),n=L(n,!0),x(r),w(gi,n)?(r.enumerable?(w(e,di)&&e[di][n]&&(e[di][n]=!1),r=pn(r,{enumerable:k(0,!1)})):(w(e,di)||ui(e,di,k(1,{})),e[di][n]=!0),Mi(e,n,r)):ui(e,n,r)},Ti=function(t,e){x(t);for(var n,r=function(t){var e=ln(t),n=ei.f;if(n)for(var r,i=n(t),o=ze.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=Me(e)),i=0,o=r.length;o>i;)Ai(t,n=r[i++],e[n]);return t},qi=function(t){var e=mi.call(this,t=L(t,!0));return!(this===bi&&w(gi,t)&&!w(yi,t))&&(!(e||!w(this,t)||!w(gi,t)||w(this,di)&&this[di][t])||e)},Pi=function(t,e){if(t=Me(t),e=L(e,!0),t!==bi||!w(gi,e)||w(yi,e)){var n=si(t,e);return!n||!w(gi,e)||w(t,di)&&t[di][e]||(n.enumerable=!0),n}},Li=function(t){for(var e,n=li(Me(t)),r=[],i=0;n.length>i;)w(gi,e=n[i++])||e==di||e==ai||r.push(e);return r},Oi=function(t){for(var e,n=t===bi,r=li(n?yi:Me(t)),i=[],o=0;r.length>o;)!w(gi,e=r[o++])||n&&!w(bi,e)||i.push(gi[e]);return i};_i||(j((ci=function(){if(this instanceof ci)throw TypeError("Symbol is not a constructor!");var t=b(arguments.length>0?arguments[0]:void 0),e=function e(n){this===bi&&e.call(yi,n),w(this,di)&&w(this[di],t)&&(this[di][t]=!1),Mi(this,t,k(1,n))};return E&&xi&&Mi(bi,t,{configurable:!0,set:e}),Ei(t)}).prototype,"toString",(function(){return this._k})),Ve.f=Pi,C.f=Ai,tn.f=oi.f=Li,ze.f=qi,ei.f=Oi,E&&j(bi,"propertyIsEnumerable",qi,!0),Qr.f=function(t){return Ei(K(t))}),V(V.G+V.W+V.F*!_i,{Symbol:ci});for(var Ci="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ii=0;Ci.length>Ii;)K(Ci[Ii++]);for(var Ri=ln(K.store),ki=0;Ri.length>ki;)ti(Ri[ki++]);V(V.S+V.F*!_i,"Symbol",{for:function(t){return w(vi,t+="")?vi[t]:vi[t]=ci(t)},keyFor:function(t){if(!Si(t))throw TypeError(t+" is not a symbol!");for(var e in vi)if(vi[e]===t)return e},useSetter:function(){xi=!0},useSimple:function(){xi=!1}}),V(V.S+V.F*!_i,"Object",{create:function(t,e){return void 0===e?pn(t):Ti(pn(t),e)},defineProperty:Ai,defineProperties:Ti,getOwnPropertyDescriptor:Pi,getOwnPropertyNames:Li,getOwnPropertySymbols:Oi});var Ni=M((function(){ei.f(1)}));V(V.S+V.F*Ni,"Object",{getOwnPropertySymbols:function(t){return ei.f(De(t))}}),hi&&V(V.S+V.F*(!_i||M((function(){var t=ci();return"[null]"!=fi([t])||"{}"!=fi({a:t})||"{}"!=fi(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(m(e)||void 0!==t)&&!Si(t))return qn(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Si(e))return e}),r[1]=e,fi.apply(hi,r)}}),ci.prototype[pi]||N(ci.prototype,pi,ci.prototype.valueOf),Vt(ci,"Symbol"),Vt(Math,"Math",!0),Vt(S.JSON,"JSON",!0);var Bi,Di,ji=function(t){return function(e,n){var r,i,o=String(xe(e)),a=lt(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Fi=ji(!0),zi=function(t,e,n){return e+(n?Fi(t,e).length:1)},Ui=RegExp.prototype.exec,Vi=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=s(r))throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==tt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Ui.call(t,e)},Gi=function(){var t=x(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Hi=RegExp.prototype.exec,Wi=String.prototype.replace,Yi=Hi,Xi=(Bi=/a/,Di=/b*/g,Hi.call(Bi,"a"),Hi.call(Di,"a"),0!==Bi.lastIndex||0!==Di.lastIndex),Zi=void 0!==/()??/.exec("")[1];(Xi||Zi)&&(Yi=function(t){var e,n,r,i,o=this;return Zi&&(n=new RegExp("^"+o.source+"$(?!\\s)",Gi.call(o))),Xi&&(e=o.lastIndex),r=Hi.call(o,t),Xi&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Zi&&r&&r.length>1&&Wi.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Ji=Yi;V({target:"RegExp",proto:!0,forced:Ji!==/./.exec},{exec:Ji});var Ki=K("species"),Qi=!M((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),$i=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),to=function(t,e,n){var r=K(t),i=!M((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),o=i?!M((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[Ki]=function(){return n}),n[r](""),!e})):void 0;if(!i||!o||"replace"===t&&!Qi||"split"===t&&!$i){var a=/./[r],s=n(xe,r,""[t],(function(t,e,n,r,o){return e.exec===Ji?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),u=s[0],l=s[1];j(String.prototype,t,u),N(RegExp.prototype,r,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}},eo=Math.min,no=[].push,ro=!M((function(){RegExp(4294967295,"y")}));to("split",2,(function(t,e,n,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!Ie(t))return n.call(r,t,e);for(var i,o,a,s=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,c=void 0===e?4294967295:e>>>0,h=new RegExp(t.source,u+"g");(i=Ji.call(h,r))&&!((o=h.lastIndex)>l&&(s.push(r.slice(l,i.index)),i.length>1&&i.index<r.length&&no.apply(s,i.slice(1)),a=i[0].length,l=o,s.length>=c));)h.lastIndex===i.index&&h.lastIndex++;return l===r.length?!a&&h.test("")||s.push(""):s.push(r.slice(l)),s.length>c?s.slice(0,c):s}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,r):i.call(String(o),n,r)},function(t,e){var o=r(i,t,this,e,i!==n);if(o.done)return o.value;var a=x(t),s=String(this),u=vt(a,RegExp),l=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(ro?"y":"g"),h=new u(ro?a:"^(?:"+a.source+")",c),f=void 0===e?4294967295:e>>>0;if(0===f)return[];if(0===s.length)return null===Vi(h,s)?[s]:[];for(var d=0,p=0,m=[];p<s.length;){h.lastIndex=ro?p:0;var v,g=Vi(h,ro?s:s.slice(p));if(null===g||(v=eo(ht(h.lastIndex+(ro?0:p)),s.length))===d)p=zi(s,p,l);else{if(m.push(s.slice(d,p)),m.length===f)return m;for(var y=1;y<=g.length-1;y++)if(m.push(g[y]),m.length===f)return m;p=d=v}}return m.push(s.slice(d)),m}]}));var io=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};to("search",1,(function(t,e,n,r){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=r(n,t,this);if(e.done)return e.value;var i=x(t),o=String(this),a=i.lastIndex;io(a,0)||(i.lastIndex=0);var s=Vi(i,o);return io(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var oo=Object.assign,ao=!oo||M((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=oo({},t)[n]||Object.keys(oo({},e)).join("")!=r}))?function(t,e){for(var n=De(t),r=arguments.length,i=1,o=ei.f,a=ze.f;r>i;)for(var s,u=we(arguments[i++]),l=o?ln(u).concat(o(u)):ln(u),c=l.length,h=0;c>h;)s=l[h++],E&&!a.call(u,s)||(n[s]=u[s]);return n}:oo;V(V.S+V.F,"Object",{assign:ao});var so,uo,lo,co,ho,fo,po,mo,vo=function(){};Object.assign(vo.prototype,{publish:function(t,e){this._subscribers&&this._subscribers[t]&&this._subscribers[t].forEach((function(t){"function"==typeof t&&t(e)}))},on:function(t,e){this._subscribers||(this._subscribers={}),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push(e)},off:function(t,e){if(this._subscribers&&this._subscribers[t]){var n=this._subscribers[t].indexOf(e);-1!==n&&this._subscribers[t].splice(n,1)}},destroy:function(){this._subscribers={}}}),function(t){t[t.NOT_LISTENING=0]="NOT_LISTENING",t[t.LISTENING=1]="LISTENING",t[t.HAS_POSITION=2]="HAS_POSITION",t[t.HAS_INDOOR_POSITION=3]="HAS_INDOOR_POSITION",t[t.LOCATION_UNCERTAIN=4]="LOCATION_UNCERTAIN"}(fo||(fo={})),function(t){t[t.gotPosition=0]="gotPosition",t[t.gotPositionWithFloor=1]="gotPositionWithFloor",t[t.gotError=2]="gotError",t[t.timedOut=3]="timedOut",t[t.disabledBlueDot=4]="disabledBlueDot",t[t.enabledBlueDot=5]="enabledBlueDot"}(po||(po={})),function(t){t[t.hidden=0]="hidden",t[t.ghost=1]="ghost",t[t.normal=2]="normal",t[t.uncertain=3]="uncertain"}(mo||(mo={}));var go;f(ho={},fo.NOT_LISTENING,{actions:f({},po.enabledBlueDot,fo.LISTENING)}),f(ho,fo.LISTENING,{actions:(so={},f(so,po.gotPosition,fo.HAS_POSITION),f(so,po.gotPositionWithFloor,fo.HAS_INDOOR_POSITION),f(so,po.timedOut,fo.LOCATION_UNCERTAIN),f(so,po.disabledBlueDot,fo.NOT_LISTENING),so),markerState:mo.hidden}),f(ho,fo.HAS_POSITION,{actions:(uo={},f(uo,po.gotPositionWithFloor,fo.HAS_INDOOR_POSITION),f(uo,po.timedOut,fo.LOCATION_UNCERTAIN),f(uo,po.gotError,fo.LISTENING),f(uo,po.disabledBlueDot,fo.NOT_LISTENING),uo),markerState:mo.ghost}),f(ho,fo.HAS_INDOOR_POSITION,{actions:(lo={},f(lo,po.gotPosition,fo.HAS_POSITION),f(lo,po.timedOut,fo.LOCATION_UNCERTAIN),f(lo,po.gotError,fo.LISTENING),f(lo,po.disabledBlueDot,fo.NOT_LISTENING),lo),markerState:mo.normal}),f(ho,fo.LOCATION_UNCERTAIN,{actions:(co={},f(co,po.gotPosition,fo.HAS_POSITION),f(co,po.gotPositionWithFloor,fo.HAS_INDOOR_POSITION),f(co,po.timedOut,fo.LOCATION_UNCERTAIN),f(co,po.gotError,fo.LISTENING),f(co,po.disabledBlueDot,fo.NOT_LISTENING),co),markerState:mo.uncertain});!function(t){t[t.stateChanged=0]="stateChanged",t[t.markerStateChanged=1]="markerStateChanged"}(go||(go={})),V(V.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});function yo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}
/**
* KalmanFilter
* @class
* @author Wouter Bulten
* @see {@link http://github.com/wouterbulten/kalmanjs}
* @version Version: 1.0.0-beta
* @copyright Copyright 2015-2018 Wouter Bulten
* @license MIT License
* @preserve
*/var bo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.R,r=void 0===n?1:n,i=e.Q,o=void 0===i?1:i,a=e.A,s=void 0===a?1:a,u=e.B,l=void 0===u?0:u,c=e.C,h=void 0===c?1:c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.R=r,this.Q=o,this.A=s,this.C=h,this.B=l,this.cov=NaN,this.x=NaN}var e,n;return e=t,(n=[{key:"filter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(this.x))this.x=1/this.C*t,this.cov=1/this.C*this.Q*(1/this.C);else{var n=this.predict(e),r=this.uncertainty(),i=r*this.C*(1/(this.C*r*this.C+this.Q));this.x=n+i*(t-this.C*n),this.cov=r-i*this.C*r}return this.x}},{key:"predict",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.A*this.x+this.B*t}},{key:"uncertainty",value:function(){return this.A*this.cov*this.A+this.R}},{key:"lastMeasurement",value:function(){return this.x}},{key:"setMeasurementNoise",value:function(t){this.Q=t}},{key:"setProcessNoise",value:function(t){this.R=t}}])&&yo(e.prototype,n),t}();function _o(t){return null===t||"number"==typeof t}var wo,xo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;l(this,t),this.nextLevel=void 0,this.inertia=e,this.levelConfirmations=0}return h(t,[{key:"_resetConfirmations",value:function(){this.levelConfirmations=0,this.nextLevel=void 0}},{key:"_resetFilter",value:function(){this._resetConfirmations(),this.previousLevel=void 0}},{key:"filter",value:function(t){var e=null,n=void 0===t?null:t;if(!_o(n))throw new TypeError("The argument given to filter() must be null, undefined, or a number");return null===n?this._resetFilter():(_o(this.previousLevel)&&n!==this.previousLevel?_o(this.nextLevel)&&n===this.nextLevel?this.levelConfirmations>=this.inertia?(this._resetConfirmations(),e=n):(this.levelConfirmations++,e=this.previousLevel):(this.levelConfirmations++,this.nextLevel=n,e=this.previousLevel):e=n,this.previousLevel=e),e}}]),t}(),Mo="none",Eo="kalman";!function(){function t(e){l(this,t),this.smooth=this.smooth.bind(this),this.smoothingType=window.mappedin&&window.mappedin.smoothingType||Eo,this.lastLocation=null,this.levelFilter=e}h(t,[{key:"formatLocation",value:function(t){return{type:"SUCCESS",timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,floorLevel:this.levelFilter.filter(t.floorLevel)}}}},{key:"kalman",value:function(t,e){if(e){var n=1.4*(t.timestamp-e.timestamp)/1e3;this.latitudeKF.setProcessNoise(n),this.longitudeKF.setProcessNoise(n),this.latitudeKF.setMeasurementNoise(t.accuracy),this.longitudeKF.setMeasurementNoise(t.accuracy)}else this.latitudeKF=new bo({R:1,Q:t.accuracy}),this.longitudeKF=new bo({R:1,Q:t.accuracy});return p({},t,{latitude:this.latitudeKF.filter(t.latitude),longitude:this.longitudeKF.filter(t.longitude)})}},{key:"setSmoothingType",value:function(t){this.smoothingType=t}},{key:"smooth",value:function(t){var e;switch(this.smoothingType){case Eo:return e=this.kalman(function(t){return{floorLevel:t.coords.floorLevel,timestamp:t.timestamp,latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,speed:-1,type:t.type}}(t),this.lastLocation),this.lastLocation=e,this.formatLocation(e);case Mo:default:return t}}},{key:"reset",value:function(){this.lastLocation=null,this.levelFilter=new xo(this.levelFilter.inertia)}}])}();!function(t){t[t.SUCCESS=0]="SUCCESS"}(wo||(wo={}));for(var So,Ao=b("typed_array"),To=b("view"),qo=!(!S.ArrayBuffer||!S.DataView),Po=qo,Lo=0,Oo="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");Lo<9;)(So=S[Oo[Lo++]])?(N(So.prototype,Ao,!0),N(So.prototype,To,!0)):Po=!1;var Co={ABV:qo,CONSTR:Po,TYPED:Ao,VIEW:To},Io=function(t){if(void 0===t)return 0;var e=lt(t),n=ht(e);if(e!==n)throw RangeError("Wrong length!");return n},Ro=function(t){for(var e=De(this),n=ht(e.length),r=arguments.length,i=Ae(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:Ae(o,n);a>i;)e[i++]=t;return e},ko=v((function(t,e){var n=tn.f,r=C.f,i=S.ArrayBuffer,o=S.DataView,a=S.Math,s=S.RangeError,u=S.Infinity,l=i,c=a.abs,h=a.pow,f=a.floor,d=a.log,p=a.LN2,m=E?"_b":"buffer",v=E?"_l":"byteLength",g=E?"_o":"byteOffset";function y(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,l=(1<<s)-1,m=l>>1,v=23===e?h(2,-24)-h(2,-77):0,g=0,y=t<0||0===t&&1/t<0?1:0;for((t=c(t))!=t||t===u?(i=t!=t?1:0,r=l):(r=f(d(t)/p),t*(o=h(2,-r))<1&&(r--,o*=2),(t+=r+m>=1?v/o:v*h(2,1-m))*o>=2&&(r++,o/=2),r+m>=l?(i=0,r=l):r+m>=1?(i=(t*o-1)*h(2,e),r+=m):(i=t*h(2,m-1)*h(2,e),r=0));e>=8;a[g++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[g++]=255&r,r/=256,s-=8);return a[--g]|=128*y,a}function b(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,l=n-1,c=t[l--],f=127&c;for(c>>=7;s>0;f=256*f+t[l],l--,s-=8);for(r=f&(1<<-s)-1,f>>=-s,s+=e;s>0;r=256*r+t[l],l--,s-=8);if(0===f)f=1-a;else{if(f===o)return r?NaN:c?-u:u;r+=h(2,e),f-=a}return(c?-1:1)*r*h(2,f-e)}function _(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function w(t){return[255&t]}function x(t){return[255&t,t>>8&255]}function A(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function T(t){return y(t,52,8)}function q(t){return y(t,23,4)}function P(t,e,n){r(t.prototype,e,{get:function(){return this[n]}})}function L(t,e,n,r){var i=Io(+n);if(i+e>t[v])throw s("Wrong index!");var o=t[m]._b,a=i+t[g],u=o.slice(a,a+e);return r?u:u.reverse()}function O(t,e,n,r,i,o){var a=Io(+n);if(a+e>t[v])throw s("Wrong index!");for(var u=t[m]._b,l=a+t[g],c=r(+i),h=0;h<e;h++)u[l+h]=c[o?h:e-h-1]}if(Co.ABV){if(!M((function(){i(1)}))||!M((function(){new i(-1)}))||M((function(){return new i,new i(1.5),new i(NaN),"ArrayBuffer"!=i.name}))){for(var I,R=(i=function(t){return et(this,i),new l(Io(t))}).prototype=l.prototype,k=n(l),B=0;k.length>B;)(I=k[B++])in i||N(i,I,l[I]);R.constructor=i}var D=new o(new i(2)),j=o.prototype.setInt8;D.setInt8(0,2147483648),D.setInt8(1,2147483649),!D.getInt8(0)&&D.getInt8(1)||Ft(o.prototype,{setInt8:function(t,e){j.call(this,t,e<<24>>24)},setUint8:function(t,e){j.call(this,t,e<<24>>24)}},!0)}else i=function(t){et(this,i,"ArrayBuffer");var e=Io(t);this._b=Ro.call(new Array(e),0),this[v]=e},o=function(t,e,n){et(this,o,"DataView"),et(t,i,"DataView");var r=t[v],a=lt(e);if(a<0||a>r)throw s("Wrong offset!");if(a+(n=void 0===n?r-a:ht(n))>r)throw s("Wrong length!");this[m]=t,this[g]=a,this[v]=n},E&&(P(i,"byteLength","_l"),P(o,"buffer","_b"),P(o,"byteLength","_l"),P(o,"byteOffset","_o")),Ft(o.prototype,{getInt8:function(t){return L(this,1,t)[0]<<24>>24},getUint8:function(t){return L(this,1,t)[0]},getInt16:function(t){var e=L(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=L(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return _(L(this,4,t,arguments[1]))},getUint32:function(t){return _(L(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return b(L(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return b(L(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){O(this,1,t,w,e)},setUint8:function(t,e){O(this,1,t,w,e)},setInt16:function(t,e){O(this,2,t,x,e,arguments[2])},setUint16:function(t,e){O(this,2,t,x,e,arguments[2])},setInt32:function(t,e){O(this,4,t,A,e,arguments[2])},setUint32:function(t,e){O(this,4,t,A,e,arguments[2])},setFloat32:function(t,e){O(this,4,t,q,e,arguments[2])},setFloat64:function(t,e){O(this,8,t,T,e,arguments[2])}});Vt(i,"ArrayBuffer"),Vt(o,"DataView"),N(o.prototype,Co.VIEW,!0),e.ArrayBuffer=i,e.DataView=o})),No=[].copyWithin||function(t,e){var n=De(this),r=ht(n.length),i=Ae(t,r),o=Ae(e,r),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?r:Ae(a,r))-o,r-i),u=1;for(o<i&&i<o+s&&(u=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=u,o+=u;return n};v((function(t){if(E){var e=S,n=M,r=V,i=Co,o=ko,a=z,u=et,l=k,c=N,h=Ft,f=lt,d=ht,p=Io,v=Ae,g=L,y=w,_=tt,x=m,A=De,T=at,q=pn,P=jn,O=tn.f,I=dt,R=b,B=K,D=On,j=Te,F=vt,U=Gn,G=rt,H=$t,W=Ht,Y=Ro,X=No,Z=C,J=Ve,Q=Z.f,$=J.f,nt=e.RangeError,it=e.TypeError,ot=e.Uint8Array,st=Array.prototype,ut=o.ArrayBuffer,ct=o.DataView,ft=D(0),pt=D(2),mt=D(3),gt=D(4),yt=D(5),bt=D(6),_t=j(!0),wt=j(!1),xt=U.values,Mt=U.keys,Et=U.entries,St=st.lastIndexOf,At=st.reduce,Tt=st.reduceRight,qt=st.join,Pt=st.sort,Lt=st.slice,Ot=st.toString,Ct=st.toLocaleString,It=B("iterator"),Rt=B("toStringTag"),kt=R("typed_constructor"),Nt=R("def_constructor"),Bt=i.CONSTR,Dt=i.TYPED,jt=i.VIEW,zt=D(1,(function(t,e){return Yt(F(t,t[Nt]),e)})),Ut=n((function(){return 1===new ot(new Uint16Array([1]).buffer)[0]})),Vt=!!ot&&!!ot.prototype.set&&n((function(){new ot(1).set({})})),Gt=function(t,e){var n=f(t);if(n<0||n%e)throw nt("Wrong offset!");return n},Wt=function(t){if(x(t)&&Dt in t)return t;throw it(t+" is not a typed array!")},Yt=function(t,e){if(!x(t)||!(kt in t))throw it("It is not a typed array constructor!");return new t(e)},Xt=function(t,e){return Zt(F(t,t[Nt]),e)},Zt=function(t,e){for(var n=0,r=e.length,i=Yt(t,r);r>n;)i[n]=e[n++];return i},Jt=function(t,e,n){Q(t,e,{get:function(){return this._d[n]}})},Kt=function(t){var e,n,r,i,o,s,u=A(t),l=arguments.length,c=l>1?arguments[1]:void 0,h=void 0!==c,f=I(u);if(null!=f&&!T(f)){for(s=f.call(u),r=[],e=0;!(o=s.next()).done;e++)r.push(o.value);u=r}for(h&&l>2&&(c=a(c,arguments[2],2)),e=0,n=d(u.length),i=Yt(this,n);n>e;e++)i[e]=h?c(u[e],e):u[e];return i},Qt=function(){for(var t=0,e=arguments.length,n=Yt(this,e);e>t;)n[t]=arguments[t++];return n},te=!!ot&&n((function(){Ct.call(new ot(1))})),ee=function(){return Ct.apply(te?Lt.call(Wt(this)):Wt(this),arguments)},ne={copyWithin:function(t,e){return X.call(Wt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return gt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return Y.apply(Wt(this),arguments)},filter:function(t){return Xt(this,pt(Wt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return yt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return bt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){ft(Wt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return wt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return _t(Wt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return qt.apply(Wt(this),arguments)},lastIndexOf:function(t){return St.apply(Wt(this),arguments)},map:function(t){return zt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return At.apply(Wt(this),arguments)},reduceRight:function(t){return Tt.apply(Wt(this),arguments)},reverse:function(){for(var t,e=Wt(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return mt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Pt.call(Wt(this),t)},subarray:function(t,e){var n=Wt(this),r=n.length,i=v(t,r);return new(F(n,n[Nt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,d((void 0===e?r:v(e,r))-i))}},re=function(t,e){return Xt(this,Lt.call(Wt(this),t,e))},ie=function(t){Wt(this);var e=Gt(arguments[1],1),n=this.length,r=A(t),i=d(r.length),o=0;if(i+e>n)throw nt("Wrong length!");for(;o<i;)this[e+o]=r[o++]},oe={entries:function(){return Et.call(Wt(this))},keys:function(){return Mt.call(Wt(this))},values:function(){return xt.call(Wt(this))}},ae=function(t,e){return x(t)&&t[Dt]&&"symbol"!=s(e)&&e in t&&String(+e)==String(e)},se=function(t,e){return ae(t,e=g(e,!0))?l(2,t[e]):$(t,e)},ue=function(t,e,n){return!(ae(t,e=g(e,!0))&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?Q(t,e,n):(t[e]=n.value,t)};Bt||(J.f=se,Z.f=ue),r(r.S+r.F*!Bt,"Object",{getOwnPropertyDescriptor:se,defineProperty:ue}),n((function(){Ot.call({})}))&&(Ot=Ct=function(){return qt.call(this)});var le=h({},ne);h(le,oe),c(le,It,oe.values),h(le,{slice:re,set:ie,constructor:function(){},toString:Ot,toLocaleString:ee}),Jt(le,"buffer","b"),Jt(le,"byteOffset","o"),Jt(le,"byteLength","l"),Jt(le,"length","e"),Q(le,Rt,{get:function(){return this[Dt]}}),t.exports=function(t,o,a,s){var l=t+((s=!!s)?"Clamped":"")+"Array",h="get"+t,f="set"+t,m=e[l],v=m||{},g=m&&P(m),y=!m||!i.ABV,b={},w=m&&m.prototype,M=function(t,e){Q(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[h](e*o+n.o,Ut)}(this,e)},set:function(t){return function(t,e,n){var r=t._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[f](e*o+r.o,n,Ut)}(this,e,t)},enumerable:!0})};y?(m=a((function(t,e,n,r){u(t,m,l,"_d");var i,a,s,h,f=0,v=0;if(x(e)){if(!(e instanceof ut||"ArrayBuffer"==(h=_(e))||"SharedArrayBuffer"==h))return Dt in e?Zt(m,e):Kt.call(m,e);i=e,v=Gt(n,o);var g=e.byteLength;if(void 0===r){if(g%o)throw nt("Wrong length!");if((a=g-v)<0)throw nt("Wrong length!")}else if((a=d(r)*o)+v>g)throw nt("Wrong length!");s=a/o}else s=p(e),i=new ut(a=s*o);for(c(t,"_d",{b:i,o:v,l:a,e:s,v:new ct(i)});f<s;)M(t,f++)})),w=m.prototype=q(le),c(w,"constructor",m)):n((function(){m(1)}))&&n((function(){new m(-1)}))&&H((function(t){new m,new m(null),new m(1.5),new m(t)}),!0)||(m=a((function(t,e,n,r){var i;return u(t,m,l),x(e)?e instanceof ut||"ArrayBuffer"==(i=_(e))||"SharedArrayBuffer"==i?void 0!==r?new v(e,Gt(n,o),r):void 0!==n?new v(e,Gt(n,o)):new v(e):Dt in e?Zt(m,e):Kt.call(m,e):new v(p(e))})),ft(g!==Function.prototype?O(v).concat(O(g)):O(v),(function(t){t in m||c(m,t,v[t])})),m.prototype=w,w.constructor=m);var E=w[It],S=!!E&&("values"==E.name||null==E.name),A=oe.values;c(m,kt,!0),c(w,Dt,l),c(w,jt,!0),c(w,Nt,m),(s?new m(1)[Rt]==l:Rt in w)||Q(w,Rt,{get:function(){return l}}),b[l]=m,r(r.G+r.W+r.F*(m!=v),b),r(r.S,l,{BYTES_PER_ELEMENT:o}),r(r.S+r.F*n((function(){v.of.call(m,1)})),l,{from:Kt,of:Qt}),"BYTES_PER_ELEMENT"in w||c(w,"BYTES_PER_ELEMENT",o),r(r.P,l,ne),W(l),r(r.P+r.F*Vt,l,{set:ie}),r(r.P+r.F*!S,l,oe),w.toString!=Ot&&(w.toString=Ot),r(r.P+r.F*n((function(){new m(1).slice()})),l,{slice:re}),r(r.P+r.F*(n((function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()}))||!n((function(){w.toLocaleString.call([1,2])}))),l,{toLocaleString:ee}),G[l]=S?E:A,S||c(w,It,A)}}else t.exports=function(){}}))("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Bo=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this.materials=null};Bo.prototype={constructor:Bo,load:function(t,e,n,r){var i=this,a=new o.FileLoader(i.manager);a.setPath(this.path),a.load(t,(function(t){e(i.parse(t))}),n,r)},setPath:function(t){this.path=t},setMaterials:function(t){this.materials=t},parse:function(t){console.time("OBJLoader");var e,n=[],r=!1,i=[],a=[],s=[];function u(t){e={name:t,geometry:{vertices:[],normals:[],uvs:[]},material:{name:"",smooth:!0}},n.push(e)}function l(t){var e=parseInt(t);return 3*(e>=0?e-1:e+i.length/3)}function c(t){var e=parseInt(t);return 3*(e>=0?e-1:e+a.length/3)}function h(t){var e=parseInt(t);return 2*(e>=0?e-1:e+s.length/2)}function f(t,n,r){e.geometry.vertices.push(i[t],i[t+1],i[t+2],i[n],i[n+1],i[n+2],i[r],i[r+1],i[r+2])}function d(t,n,r){e.geometry.normals.push(a[t],a[t+1],a[t+2],a[n],a[n+1],a[n+2],a[r],a[r+1],a[r+2])}function p(t,n,r){e.geometry.uvs.push(s[t],s[t+1],s[n],s[n+1],s[r],s[r+1])}function m(t,e,n,r,i,o,a,s,u,m,v,g){var y,b=l(t),_=l(e),w=l(n);void 0===r?f(b,_,w):(f(b,_,y=l(r)),f(_,w,y)),void 0!==i&&(b=h(i),_=h(o),w=h(a),void 0===r?p(b,_,w):(p(b,_,y=h(s)),p(_,w,y))),void 0!==u&&(b=c(u),_=c(m),w=c(v),void 0===r?d(b,_,w):(d(b,_,y=c(g)),d(_,w,y)))}u("");for(var v=/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,g=/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,y=/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,b=/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,_=/^f\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)))?/,w=/^f\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)\/(-?\d+)))?/,x=/^f\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))(?:\s+((-?\d+)\/\/(-?\d+)))?/,M=/^[og]\s+(.+)/,E=/^s\s+(\d+|on|off)/,S=t.split("\n"),A=0;A<S.length;A++){var T,q=S[A];if(0!==(q=q.trim()).length&&"#"!==q.charAt(0))if(null!==(T=v.exec(q)))i.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=g.exec(q)))a.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=y.exec(q)))s.push(parseFloat(T[1]),parseFloat(T[2]));else if(null!==(T=b.exec(q)))m(T[1],T[2],T[3],T[4]);else if(null!==(T=_.exec(q)))m(T[2],T[5],T[8],T[11],T[3],T[6],T[9],T[12]);else if(null!==(T=w.exec(q)))m(T[2],T[6],T[10],T[14],T[3],T[7],T[11],T[15],T[4],T[8],T[12],T[16]);else if(null!==(T=x.exec(q)))m(T[2],T[5],T[8],T[11],void 0,void 0,void 0,void 0,T[3],T[6],T[9],T[12]);else if(null!==(T=M.exec(q))){var P=T[1].trim();!1===r?(r=!0,e.name=P):u(P)}else if(/^usemtl /.test(q))e.material.name=q.substring(7).trim();else if(/^mtllib /.test(q));else{if(null===(T=E.exec(q)))throw new Error("Unexpected line: "+q);e.material.smooth="1"===T[1]||"on"===T[1]}}for(var L=new o.Group,O=(A=0,n.length);A<O;A++){var C,I=(e=n[A]).geometry,R=new o.BufferGeometry;R.addAttribute("position",new o.BufferAttribute(new Float32Array(I.vertices),3)),I.normals.length>0?R.addAttribute("normal",new o.BufferAttribute(new Float32Array(I.normals),3)):R.computeVertexNormals(),I.uvs.length>0&&R.addAttribute("uv",new o.BufferAttribute(new Float32Array(I.uvs),2)),null!==this.materials&&(C=this.materials.create(e.material.name)),C||((C=new o.MeshPhongMaterial).name=e.material.name),C.flatShading=!e.material.smooth;var k=new o.Mesh(R,C);k.name=e.name,L.add(k)}return console.timeEnd("OBJLoader"),L}};var Do=function(t){Object.assign(this,o.EventDispatcher.prototype),this.baseUrl="",this.manager=void 0!==t?t:o.DefaultLoadingManager};Do.prototype={constructor:Do,load:function(t,e,n,r){var i=this,a=new o.FileLoader(this.manager);a.setPath(this.path),a.load(t,(function(t){e(i.parse(t))}),n,r)},setPath:function(t){this.path=t},setBaseUrl:function(t){this.baseUrl=t},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var e=t.split("\n"),n={},r=/\s+/,i={},o=0;o<e.length;o++){var a=e[o];if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),u=s>=0?a.substring(0,s):a;u=u.toLowerCase();var l=s>=0?a.substring(s+1):"";if(l=l.trim(),"newmtl"===u)n={name:l},i[l]=n;else if(n)if("ka"===u||"kd"===u||"ks"===u){var c=l.split(r,3);n[u]=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2])]}else n[u]=l}}var h=new Do.MaterialCreator(this.baseUrl,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(i),h}},(Do.MaterialCreator=function(t,e){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.loader=void 0,this.side=this.options&&this.options.side?this.options.side:o.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:o.RepeatWrapping}).prototype={constructor:Do.MaterialCreator,setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setLoader:function(t){this.loader=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var r=t[n],i={};for(var o in e[n]=i,r){var a=!0,s=r[o],u=o.toLowerCase();switch(u){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[1]&&(a=!1)}a&&(i[u]=s)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this.materialsInfo[t],n={name:t,side:this.side};for(var r in e){var i=e[r];if(""!==i)switch(r.toLowerCase()){case"kd":n.color=(new o.Color).fromArray(i);break;case"ks":n.specular=(new o.Color).fromArray(i);break;case"map_kd":n.map=this.loadTexture(this.baseUrl+i),n.map.wrapS=this.wrap,n.map.wrapT=this.wrap;break;case"ns":n.shininess=parseFloat(i);break;case"d":(i<1||t.indexOf("_image")>0)&&(n.opacity=i,n.transparent=!0,n.alphaTest=.1);break;case"Tr":i>0&&(n.opacity=1-i,n.transparent=!0);break;case"map_bump":case"bump":if(n.bumpMap)break;n.bumpMap=this.loadTexture(this.baseUrl+i),n.bumpMap.wrapS=this.wrap,n.bumpMap.wrapT=this.wrap}}return this.materials[t]=new o.MeshPhongMaterial(n),this.materials[t]},loadTexture:function(t,e,n,r,i){var a,s=o.Loader.Handlers.get(t),u=void 0!==this.manager?this.manager:o.DefaultLoadingManager;return null===s&&(s=void 0!==this.loader?this.loader:new o.TextureLoader(u)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),a=s.load(t,n,r,i),void 0!==e&&(a.mapping=e),null!=a&&(a.anisotropy=16),a}};V(V.P,"Array",{fill:Ro}),Le("fill");var jo=function(t,e,n){e in t?C.f(t,e,k(0,n)):t[e]=n};V(V.S+V.F*!$t((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,i,o=De(t),a="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,l=void 0!==u,c=0,h=dt(o);if(l&&(u=z(u,s>2?arguments[2]:void 0,2)),null==h||a==Array&&at(h))for(n=new a(e=ht(o.length));e>c;c++)jo(n,c,l?u(o[c],c):o[c]);else for(i=h.call(o),n=new a;!(r=i.next()).done;c++)jo(n,c,l?nt(i,u,[r.value,c],!0):r.value);return n.length=c,n}});var Fo=ji(!0);Vn(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Fo(e,n),this._i+=t.length,{value:t,done:!1})}));var zo=function(t,e){if(!m(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},Uo=C.f,Vo=I.fastKey,Go=E?"_s":"size",Ho=function(t,e){var n,r=Vo(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n},Wo={getConstructor:function(t,e,n,r){var i=t((function(t,o){et(t,i,e,"_i"),t._t=e,t._i=pn(null),t._f=void 0,t._l=void 0,t[Go]=0,null!=o&&pt(o,n,t[r],t)}));return Ft(i.prototype,{clear:function(){for(var t=zo(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[Go]=0},delete:function(t){var n=zo(this,e),r=Ho(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[Go]--}return!!r},forEach:function(t){zo(this,e);for(var n,r=z(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!Ho(zo(this,e),t)}}),E&&Uo(i.prototype,"size",{get:function(){return zo(this,e)[Go]}}),i},def:function(t,e,n){var r,i,o=Ho(t,e);return o?o.v=n:(t._l=o={i:i=Vo(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[Go]++,"F"!==i&&(t._i[i]=o)),t},getEntry:Ho,setStrong:function(t,e,n){Vn(t,e,(function(t,n){this._t=zo(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?Rn(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,Rn(1))}),n?"entries":"values",!n,!0),Ht(e)}},Yo=function(t,e,n,r,i,o){var a=S[t],s=a,u=i?"set":"add",l=s&&s.prototype,c={},h=function(t){var e=l[t];j(l,t,"delete"==t||"has"==t?function(t){return!(o&&!m(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!m(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(o||l.forEach&&!M((function(){(new s).entries().next()})))){var f=new s,d=f[u](o?{}:-0,1)!=f,p=M((function(){f.has(1)})),v=$t((function(t){new s(t)})),g=!o&&M((function(){for(var t=new s,e=5;e--;)t[u](e,e);return!t.has(-0)}));v||((s=e((function(e,n){et(e,s,t);var r=We(new a,e,s);return null!=n&&pt(n,i,r[u],r),r}))).prototype=l,l.constructor=s),(p||g)&&(h("delete"),h("has"),i&&h("get")),(g||d)&&h(u),o&&l.clear&&delete l.clear}else s=r.getConstructor(e,t,i,u),Ft(s.prototype,n),I.NEED=!0;return Vt(s,t),c[t]=s,V(V.G+V.W+V.F*(s!=a),c),o||r.setStrong(s,t,i),s},Xo=(Yo("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return Wo.def(zo(this,"Set"),t=0===t?0:t,t)}},Wo),{OPTIONAL_MINIMUM:0,OPTIONAL_MAXIMUM:1,MEDIUM:2,HIGH:3});Yo("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=Wo.getEntry(zo(this,"Map"),t);return e&&e.v},set:function(t,e){return Wo.def(zo(this,"Map"),0===t?0:t,e)}},Wo,!0),E&&"g"!=/./g.flags&&C.f(RegExp.prototype,"flags",{configurable:!0,get:Gi});var Zo=/./.toString,Jo=function(t){j(RegExp.prototype,"toString",t,!0)};M((function(){return"/a/b"!=Zo.call({source:"a",flags:"b"})}))?Jo((function(){var t=x(this);return"/".concat(t.source,"/","flags"in t?t.flags:!E&&t instanceof RegExp?Gi.call(t):void 0)})):"toString"!=Zo.name&&Jo((function(){return Zo.call(this)}));var Ko=null;function Qo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $o(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var ta,ea,na,ra,ia=new WeakMap,oa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ia.set(this,{writable:!0,value:{}})}var e,n,r;return e=t,(n=[{key:"on",value:function(t,e){$o(this,ia)[t]=$o(this,ia)[t]||[],$o(this,ia)[t].push(e)}},{key:"off",value:function(t,e){if($o(this,ia)&&$o(this,ia)[t]){var n=$o(this,ia)[t].indexOf(e);-1!==n&&$o(this,ia)[t].splice(n,1)}}},{key:"publish",value:function(t,e){$o(this,ia)&&$o(this,ia)[t]&&$o(this,ia)[t].forEach((function(t){"function"==typeof t&&t(e)}))}}])&&Qo(e.prototype,n),r&&Qo(e,r),t}(),aa=function(){var t={_subscribers:{},publish:function(e,n){t._subscribers&&t._subscribers[e]&&t._subscribers[e].forEach((function(t){"function"==typeof t&&t(n)}))},on:function(e,n){t._subscribers[e]=t._subscribers[e]||[],t._subscribers[e].push(n)},off:function(e,n){if(t._subscribers&&t._subscribers[e]){var r=t._subscribers[e].indexOf(n);-1!==r&&t._subscribers[e].splice(r,1)}}};return t};!function(t){t.READY="READY",t.INIT="INIT",t.POLYGON_CLICKED="POLYGON_CLICKED",t.SET_MAP="SET_MAP",t.MAP_CHANGED="MAP_CHANGED",t.UPDATE_GEOLOCATION="UPDATE_GEOLOCATION",t.FOCUS_ON="FOCUS_ON",t.SET_POLYGON_COLOR="SET_POLYGON_COLOR",t.SET_BACKGROUND_COLOR="SET_BACKGROUND_COLOR",t.CLEAR_POLYGON_COLOR="CLEAR_POLYGON_COLOR",t.CLEAR_ALL_POLYGON_COLORS="CLEAR_ALL_POLYGON_COLORS",t.ADD_INTERACTIVE_POLYGON="ADD_INTERACTIVE_POLYGON",t.REMOVE_INTERACTIVE_POLYGONS="REMOVE_INTERACTIVE_POLYGONS",t.SET_SAFE_AREA="SET_SAFE_AREA",t.LABEL_ALL_LOCATIONS="LABEL_ALL_LOCATIONS",t.LABEL_POLYGON="LABEL_POLYGON",t.ENABLE_BLUE_DOT="ENABLE_BLUE_DOT",t.DISABLE_BLUE_DOT="DISABLE_BLUE_DOT",t.GET_NEAREST_NODE="GET_NEAREST_NODE",t.GET_BLUE_DOT_IS_FOLLOWING="GET_BLUE_DOT_IS_FOLLOWING",t.SET_BLUE_DOT_IS_FOLLOWING="SET_BLUE_DOT_IS_FOLLOWING",t.GET_DIRECTIONS="GET_DIRECTIONS",t.DESTROY="DESTROY",t.DATA_LOADED="DATA_LOADED",t.FIRST_MAP_LOADED="FIRST_MAP_LOADED",t.CREATE_MARKER="CREATE_MARKER",t.MARKER_MOVE="MARKER_MOVE",t.OVERRIDE_LOCATION="OVERRIDE_LOCATION",t.BLUE_DOT_UPDATED="BLUE_DOT_UPDATED",t.DRAW_PATH="DRAW_PATH",t.REMOVE_ALL_PATHS="REMOVE_ALL_PATHS",t.NOTHING_CLICKED="NOTHING_CLICKED"}(ta||(ta={})),function(t){t.GET_MAPS_IN_NAVIGATION="GET_MAPS_IN_NAVIGATION",t.SHOW_JOURNEY="SHOW_JOURNEY",t.START_NAVIGATION="START_NAVIGATION",t.STOP_NAVIGATION="STOP_NAVIGATION",t.SEEK="SEEK",t.GET_MODE="GET_MODE",t.EXIT_NAVIGATION="EXIT_NAVIGATION"}(ea||(ea={})),function(t){t.READY="READY",t.RESOLVE="RESOLVE",t.REJECT="REJECT"}(na||(na={})),function(t){t.INIT="MINIMAP_INIT",t.READY="MINIMAP_READY",t.CACHE_IMAGE="CACHE_IMAGE"}(ra||(ra={}));var sa={venue:["slug","name","defaultMap","metadata","countrycode","tzid","logo","externalId"],nodes:["x","y","paths","accessible"],vortexes:["nodes","types","accessible"],polygons:["vertexes","geometry","canvasBounds","layer","externalId","entrances"],locations:["name","type","picture","description","icon","logo","sortOrder","phone","operationHours","social","color","toMap","tags","shortName","detailsUrl","locationState","metadata","siblingGroups","gallery"],categories:["name","color","sortOrder","parents"],maps:["name","elevation","height","width","layers","shortName","scene","group","x_scale"],mapGroups:["name"],themes:["name","themeData"],polygonRankings:[],locationRankings:[]},ua=n(264);function la(t){var e={};return t.msgID&&(e.msgID=t.msgID),e.data=JSON.stringify(t),JSON.stringify(e)}var ca,ha=function(t,e){var n,r;if(void 0!==window.ReactNativeWebView)console.log("sending",[t,e]),window.ReactNativeWebView.postMessage(JSON.stringify([t,{payload:e}]));else if(void 0!==window.Android)window.Android.handleEvent(t,la(e));else if(void 0!==(null===(n=window.webkit)||void 0===n||null===(r=n.messageHandlers)||void 0===r?void 0:r.onHandleEvent)){var i,o,a;null===(i=window.webkit)||void 0===i||null===(o=i.messageHandlers)||void 0===o||null===(a=o.onHandleEvent)||void 0===a||a.postMessage({eventName:t,payload:la(e)})}else window.parent.postMessage([t,{payload:e}],"*")};function fa(t){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ma(t,e){return(ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function va(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ba(t);if(e){var i=ba(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ga(this,n)}}function ga(t,e){return!e||"object"!==fa(e)&&"function"!=typeof e?ya(t):e}function ya(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ba(t){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _a(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function wa(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}function xa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ma(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xa(Object(n),!0).forEach((function(e){Ea(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ea(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.DATA_LOADED="DATA_LOADED",t.POLYGON_CLICKED="POLYGON_CLICKED",t.BLUE_DOT_UPDATED="BLUE_DOT_UPDATED",t.MAP_CHANGED="MAP_CHANGED",t.FIRST_MAP_LOADED="FIRST_MAP_LOADED"}(ca||(ca={}));var Sa=new WeakMap,Aa=new WeakMap,Ta=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ma(t,e)}(o,t);var e,n,r,i=va(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Ea(ya(e=i.call(this)),"venueData",{}),Sa.set(ya(e),{writable:!0,value:void 0}),Aa.set(ya(e),{writable:!0,value:void 0}),Ea(ya(e),"labels",[]),Ea(ya(e),"publishBlueDotUpdate",(function(t){var e,n,r=t.newValue;if(null!=r){var i=Ma(Ma({},r),{},{nearestNode:null===(e=r.nearestNode)||void 0===e?void 0:e.id,map:null===(n=r.map)||void 0===n?void 0:n.id});ha(ta.BLUE_DOT_UPDATED,{update:i})}})),wa(ya(e),Aa,t),console.log(t),window.mapView=ya(e),e}return e=o,(n=[{key:"showVenue",value:function(t){console.log("show Venue");var e=_a(this,Aa),n=e.container,r=da(e,["container"]);this.venueData=t,wa(this,Sa,new ua.a(n,t,Ma(Ma({},r),{},{loadOptions:{mode:"json"},onDataLoaded:this.onDataLoaded.bind(this),onFirstMapLoaded:this.onFirstMapLoaded.bind(this)})))}},{key:"onDataLoaded",value:function(){var t,e;_a(this,Sa).addInteractivePolygonsForAllLocations(),this.labelAllLocations(),ha(ta.DATA_LOADED,{venueData:(t=this.venueData,e={nodes:[],locations:[],categories:[],mapGroups:[],polygons:[],maps:[],vortexes:[]},Object.keys(e).forEach((function(n){e[n]=t[n].map((function(t){return t._data}))})),Ma(Ma({},e),{},{venue:t.venue._data}))}),this.publish(ca.DATA_LOADED,{venueData:this.venueData}),_a(this,Sa).onPolygonClicked=function(t){ha(ta.POLYGON_CLICKED,{polygonId:t})},_a(this,Sa).onMapChanged=function(t){ha(ta.MAP_CHANGED,{mapId:t})},_a(this,Sa).onNothingClicked=function(){ha(ta.NOTHING_CLICKED,{})}}},{key:"__drawPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_a(this,Sa).drawPath(t,e),_a(this,Sa).tryRendering()}},{key:"__removeAllPaths",value:function(){_a(this,Sa).removeAllPaths()}},{key:"onFirstMapLoaded",value:function(){ha(ta.FIRST_MAP_LOADED,{data:null}),this.publish(ca.FIRST_MAP_LOADED,{})}},{key:"focusOn",value:function(t){var e=this;return new Promise((function(n,r){try{_a(e,Sa).focusOn(t).onComplete((function(){_a(e,Sa).tryRendering(),n()}))}catch(t){r(t)}}))}},{key:"setPolygonColor",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=this.labels.find((function(e){return e.id===t}));null!=i&&i.setPriority(Xo.HIGH),_a(this,Sa).setPolygonColor(t,e,n,r)}},{key:"clearPolygonColor",value:function(t){var e=this.labels.find((function(e){return e.id===t}));null!=e&&e.resetPriority(),_a(this,Sa).clearPolygonColor(t)}},{key:"clearAllPolygonColors",value:function(){this.labels.forEach((function(t){return t.resetPriority()})),_a(this,Sa).clearAllPolygonColors()}},{key:"addInteractivePolygon",value:function(t){_a(this,Sa).addInteractivePolygon(t)}},{key:"removeAllInteractivePolygons",value:function(){_a(this,Sa).removeAllInteractivePolygons()}},{key:"setSafeArea",value:function(t){_a(this,Sa).setPadding(t)}},{key:"setMap",value:function(t){var e=this;return new Promise((function(n){_a(e,Sa).setMap(t,n)}))}},{key:"labelAllLocations",value:function(t){this.labels=_a(this,Sa).labelAllLocations(Ma(Ma({},t),{},{smartLabels:!0}))}},{key:"labelPolygon",value:function(t,e){_a(this,Sa).labelPolygon(Ma(Ma({},e),{},{smartLabels:!0,polygon:t}))}},{key:"enableBlueDot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowImplicitFloorLevel:!0};_a(this,Sa).blueDotCore.on("userDataChanged",this.publishBlueDotUpdate),_a(this,Sa).blueDotCore.enableBlueDot(t)}},{key:"disableBlueDot",value:function(){_a(this,Sa).blueDotCore.disableBlueDot(),_a(this,Sa).blueDotCore.off("userDataChanged",this.publishBlueDotUpdate)}},{key:"getIsFollowing",value:function(){return _a(this,Sa).blueDotUI.isFollowing}},{key:"setIsFollowing",value:function(t){_a(this,Sa).blueDotUI.isFollowing=t}},{key:"setBackgroundColor",value:function(t){_a(this,Sa).setBackgroundColor(t),_a(this,Sa).tryRendering()}},{key:"destroy",value:function(){_a(this,Sa).destroy()}},{key:"currentMap",get:function(){var t=this,e=this.venueData.maps.find((function(e){return e.id===_a(t,Sa).currentMap}));return null!=e?e:this.venueData.maps.find((function(e){return e.id===t.venueData.venue.defaultMap}))}}])&&pa(e.prototype,n),r&&pa(e,r),o}(oa);function qa(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Pa(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){qa(o,r,i,a,s,"next",t)}function s(t){qa(o,r,i,a,s,"throw",t)}a(void 0)}))}}function La(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Oa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?La(Object(n),!0).forEach((function(e){Ca(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ca(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ia(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ra(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ra(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ka,Na=aa(),Ba=!1;function Da(t,e){var n=t.type,r=t.id;return e["_"+n.toLowerCase()+"sById"][r]}function ja(t){var e=t.directions,n=t.distance,r=t.path;return{distance:n,directions:e.map((function(t){var e,n,r,i;return{action:Oa(Oa({},t.action),{},{fromMap:null===(e=t.action.fromMap)||void 0===e?void 0:e.id,toMap:null===(n=t.action.toMap)||void 0===n?void 0:n.id}),atLocation:null===(r=t.atLocation)||void 0===r?void 0:r.id,node:null===(i=t.node)||void 0===i?void 0:i.id,instruction:t.instruction}})),path:r.map((function(t){return t.id}))}}window.EventBus=Na,null!=window.iframeInterface&&(window.iframeInterface.EventBus=Na),window.addEventListener("message",(function(t){var e=t.data;try{var n;if(n=e,Array.isArray(n)){var r=Ia(n,2),i=r[0],o=r[1];Na.publish(i,o)}}catch(t){}})),Na.on(ta.INIT,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.msgID,r=e.data.options,t.prev=1,t.next=4,Ga(r);case 4:ha(na.RESOLVE,{msgID:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),ha(na.REJECT,{msgID:n,payload:t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}());var Fa,za=document.createElement("canvas"),Ua=za.getContext("2d");Na.on(ra.INIT,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.msgID,r=e.data.options,t.prev=1,Ba){t.next=16;break}return za.style.position="absolute",za.id="screenshot",za.style.width=window.innerWidth+"px",za.style.height=window.innerHeight+"px",za.style.background="white",za.style.zIndex="999999",za.width=window.innerWidth*devicePixelRatio,za.height=window.innerHeight*devicePixelRatio,document.body.append(za),t.next=14,Ga(r);case 14:Fa=document.getElementsByTagName("canvas"),Ba=!0;case 16:ha(na.RESOLVE,{msgID:n}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),ha(na.REJECT,{msgID:n,payload:t.t0.toString()});case 22:case"end":return t.stop()}}),t,null,[[1,19]])})));return function(e){return t.apply(this,arguments)}}()),Na.on(ra.CACHE_IMAGE,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.msgID,r=e.data,i=r.locationId,o=r.focusOptions,a=r.polygonHighlightColor,t.prev=1,l=null===(s=ka.venueData._locationsById)||void 0===s?void 0:s[i],ka.clearAllPolygonColors(),null!=a&&l.polygons.forEach((function(t){ka.setPolygonColor(t.id,a)})),(null===(u=l.polygons[0])||void 0===u?void 0:u.map)===ka.currentMap.id){t.next=8;break}return t.next=8,ka.setMap(l.polygons[0].map);case 8:return t.next=10,ka.focusOn(Oa({polygons:[l.polygons[0]],tilt:.1,minZoom:2e3,duration:100,changeZoom:!0},o));case 10:Array.from(Fa).reverse().forEach((function(t){Ua.drawImage(t,0,0)})),ha(na.RESOLVE,{msgID:n,payload:za.toDataURL()}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),ha(na.REJECT,{msgID:n,payload:t.t0.toString()});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()),Na.on(ta.FOCUS_ON,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.msgID,r=e.data.focusOptions,t.prev=1,t.next=4,ka.focusOn(r);case 4:ha(na.RESOLVE,{msgID:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),ha(na.REJECT,{msgID:n,payload:t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()),Na.on(ta.LABEL_ALL_LOCATIONS,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.msgID,r=e.data.options;try{i=r.locations.map((function(t){var e;return null===(e=ka.venueData._locationsById)||void 0===e?void 0:e[t.id]})).filter((function(t){return t})),ka.labelAllLocations(Oa(Oa({},r),{},{locations:i||void 0})),ha(na.RESOLVE,{msgID:n,payload:[]})}catch(t){ha(na.REJECT,{msgID:n,payload:[]})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Na.on(ta.ADD_INTERACTIVE_POLYGON,(function(t){var e=t.msgID,n=t.data.polygonId;try{ka.addInteractivePolygon(ka.venueData._polygonsById[n]),ha(na.RESOLVE,{msgID:e})}catch(t){ha(na.REJECT,{msgID:e})}})),Na.on(ta.LABEL_POLYGON,(function(t){var e=t.msgID,n=t.data,r=n.polygonId,i=n.options;try{console.log(r,i),ka.labelPolygon(ka.venueData._polygonsById[r],i),ha(na.RESOLVE,{msgID:e})}catch(t){console.log(t),ha(na.REJECT,{msgID:e,payload:t.toString()})}})),Na.on(ta.SET_MAP,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.msgID,r=e.data.mapId,t.prev=1,t.next=4,ka.setMap(r);case 4:ha(na.RESOLVE,{msgID:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),ha(na.REJECT,{msgID:n,payload:t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()),Na.on(ta.FOCUS_ON,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.msgID,r=e.data.focusOptions,t.prev=1,t.next=4,ka.focusOn(r);case 4:ha(na.RESOLVE,{msgID:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),ha(na.REJECT,{msgID:n,payload:t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()),Na.on(ta.SET_POLYGON_COLOR,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.msgID,r=e.data,i=r.polygonId,o=r.color;try{ka.setPolygonColor(i,o),ha(na.RESOLVE,{msgID:n})}catch(t){ha(na.REJECT,{msgID:n,payload:t.toString()})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Na.on(ta.CLEAR_ALL_POLYGON_COLORS,(function(t){var e=t.msgID;try{ka.clearAllPolygonColors(),ha(na.RESOLVE,{msgID:e})}catch(t){ha(na.REJECT,{msgID:e,payload:t.toString()})}})),Na.on(ta.OVERRIDE_LOCATION,(function(t){var e=t.data.location;null!=e.coords&&window.onPositionReceived(e)})),Na.on(ta.ENABLE_BLUE_DOT,(function(t){var e=t.msgID,n=t.data.options,r=void 0===n?{}:n;try{ka.enableBlueDot(r),ha(na.RESOLVE,{msgID:e})}catch(t){ha(na.REJECT,{msgID:e,payload:t.toString()})}})),Na.on(ta.SET_BLUE_DOT_IS_FOLLOWING,(function(t){var e=t.data.isFollowing;ka.setIsFollowing(e)})),Na.on(ta.SET_BACKGROUND_COLOR,(function(t){var e=t.data.backgroundColor;ka.setBackgroundColor(e)})),Na.on(ta.DISABLE_BLUE_DOT,(function(t){var e=t.msgID;try{ka.disableBlueDot(),ha(na.RESOLVE,{msgID:e})}catch(t){ha(na.REJECT,{msgID:e,payload:t.toString()})}})),Na.on(ta.REMOVE_ALL_PATHS,(function(t){var e=t.msgID;try{ka.__removeAllPaths(),ha(na.RESOLVE,{msgID:e})}catch(t){ha(na.REJECT,{msgID:e,payload:t.toString()})}})),Na.on(ta.DRAW_PATH,(function(t){var e=t.msgID,n=t.data,r=n.path,i=n.pathOptions;try{ka.__drawPath(r.map((function(t){var e;return null===(e=ka.venueData._nodesById)||void 0===e?void 0:e[t]})),i),ha(na.RESOLVE,{msgID:e})}catch(t){ha(na.REJECT,{msgID:e,payload:t.toString()})}})),Na.on(ta.GET_DIRECTIONS,function(){var t=Pa(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.msgID,r=e.data,i=r.to,o=r.from,a=r.accessible,s=void 0!==a&&a;try{u=Da(o,ka.venueData),l=Da(i,ka.venueData),u.directionsTo(l,{accessible:s,directionsProvider:"offline"},(function(t,e){ha(na.RESOLVE,t?{msgID:n,payload:t}:{msgID:n,payload:ja(e)})}))}catch(t){ha(na.REJECT,{msgID:n,payload:t.toString()})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),window.onPositionReceived=function(){},Object.defineProperty(window.navigator,"geolocation",{value:{watchPosition:function(t){window.onPositionReceived=t},clearWatch:function(){window.onPositionReceived=null}}});var Va=document.createElement("div");Va.id="root",Object.assign(Va.style,{position:"absolute",width:"100%",height:"100%"}),document.body.appendChild(Va);var Ga=function(t){return new Promise((function(e,n){!function(t,e){Gr(t,Ko,e)}(Oa(Oa({},t),{},{things:sa}),(function(t,r){t?(console.error(t),n(t)):(window.venue=r,(ka=new Ta({container:Va})).on(ca.FIRST_MAP_LOADED,e),ka.showVenue(r))}))}))};document.addEventListener("DOMContentLoaded",Pa(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("dom loaded?"),ha(ta.READY,{});case 2:case"end":return t.stop()}}),t)})))),window.init=Ga}]);